var qr=Object.defineProperty;var _r=(n,e,t)=>e in n?qr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var P=(n,e,t)=>_r(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-GVBARt8q.js";import{aX as wt,bo as u,X as Y,aZ as F,aR as N,A as I,b0 as _e,bS as Et,aA as re,az as pt,w as S,aJ as Ft,G as v,bf as z,F as R,a$ as Ue,z as _,aC as fe,P as k,Q as m,bN as L,b9 as yn,aT as Ut,y as ne,bP as wn,bF as Rr,ay as Ve,l as Zn,T as Fr,ap as Lr,ar as Ne,bI as ye,am as Zt,bb as Lt,bj as it,aO as Kn,bl as Or,au as tn,aB as Vr,bJ as Xn,bE as Br,bA as Ur,aI as Gr,bk as Rn,b3 as zr,x as jr}from"./@vue-CCfogNd1.js";import{L as Ye}from"./lz-string-BZNGtwso.js";import{c as Qn}from"./nanoevents-BxCKNB1V.js";import{s as Hr,u as er}from"./vue-toastification-CjoTmBGg.js";import{Y as Wr}from"./vue-next-select-CgtHQcl0.js";import{i as Yr}from"./unofficial-galaxy-sdk-C_siawBx.js";import{D as Jr}from"./vuedraggable-BgvaSe-I.js";import{p as Zr}from"./vue-textarea-autosize-DLc4kbjP.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const Kr="./projInfo-schema.json",Xr="Orbital Drift",Qr="WHEEEeeee eee ee e e    e  e",ei="orbital_drift",ti="",ni="",ri="",ii="0.0",ai="Initial Commit",si=!0,oi=!1,li=2,ui=!0,ci=null,di="",fi=["main"],mi=3600,gi=1,pi=!0,vi="base64",hi=!1,bi=2,Z={$schema:Kr,title:Xr,description:Qr,id:ei,author:ti,discordName:ni,discordLink:ri,versionNumber:ii,versionTitle:ai,allowGoBack:si,defaultShowSmall:oi,defaultDecimalsShown:li,useHeader:ui,banner:ci,logo:di,initialTabs:fi,maxTickLength:mi,offlineLimit:gi,enablePausing:pi,exportEncoding:vi,disableHealthWarning:hi,defaultDecimalShown:bi},yi=wt({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}}),$=window.player=yi;function vt(n){return JSON.stringify(n,(e,t)=>u(t)??null)}const wi=Y({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,r=F(!1),i=F(null);function a(){t("click"),i.value!=null&&clearTimeout(i.value),r.value=!1,pt(()=>{r.value=!0,i.value=setTimeout(()=>r.value=!1,500)})}return(l,o)=>(N(),I("button",{onClick:Et(a,["stop"]),class:re(["feedback",{activated:r.value,left:l.left}])},[_e(l.$slots,"default",{},void 0,!0)],2))}}),te=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},Cn=te(wi,[["__scopeId","data-v-f82eae5d"]]),Ci={class:"error"},ki={class:"error-title"},Ni={class:"error-details",style:{"margin-top":"-10px"}},Mi={key:0},Si={class:"instructions"},xi=["href"],Ii={key:0,style:{"margin-top":"20px"}},Ti={class:"error-details"},Ai={key:0,style:{"margin-top":"10px"}},$i={key:1,style:{"margin-top":"10px"}},Ei=Y({__name:"Error",props:{errors:{}},setup(n){const e=n,t=S(()=>e.errors[0]),r=S(()=>e.errors.map(l=>l.stack==null?[]:l.stack.split(`
`))),i=S(()=>e.errors.map(l=>l.cause==null?[]:(typeof l.cause=="string"?l.cause:JSON.stringify(l.cause)).split(`
`)));function a(){let l=vt($);switch(Z.exportEncoding){default:console.warn(`Unknown save encoding: ${Z.exportEncoding}. Defaulting to lz`);case"lz":l=Ye.compressToUTF16(l);break;case"base64":l=btoa(unescape(encodeURIComponent(l)));break;case"plain":break}console.log(l);const o=document.createElement("textarea");o.value=l,document.body.appendChild(o),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(o)}return Ft(()=>{$.autosave=!1,$.devSpeed=0}),(l,o)=>(N(),I("div",Ci,[v("h1",ki,z(t.value.name)+": "+z(t.value.message),1),v("div",Ni,[t.value.cause?(N(),I("div",Mi,[(N(!0),I(R,null,Ue(i.value[0],c=>(N(),I("div",{key:c},z(c),1))),128))])):_("",!0),t.value.stack?(N(),I("div",{key:1,style:fe(t.value.cause?"margin-top: 10px":"")},[(N(!0),I(R,null,Ue(r.value[0],c=>(N(),I("div",{key:c},z(c),1))),128))],4)):_("",!0)]),v("div",Si,[o[2]||(o[2]=k(" Check the console for more details, and consider sharing it with the developers on ")),v("a",{href:u(Z).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,xi),o[3]||(o[3]=k("! ")),m(Cn,{onClick:a,class:"button",style:{display:"inline-flex"}},{default:L(()=>o[0]||(o[0]=[v("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),v("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),o[4]||(o[4]=v("br",null,null,-1)),l.errors.length>1?(N(),I("div",Ii,o[1]||(o[1]=[v("h3",null,"Other errors",-1)]))):_("",!0),(N(!0),I(R,null,Ue(l.errors.slice(1),(c,d)=>(N(),I("div",{key:d,style:{"margin-top":"20px"}},[v("details",Ti,[v("summary",null,z(c.name)+": "+z(c.message),1),c.cause?(N(),I("div",Ai,[(N(!0),I(R,null,Ue(i.value[d+1],b=>(N(),I("div",{key:b},z(b),1))),128))])):_("",!0),c.stack?(N(),I("div",$i,[(N(!0),I(R,null,Ue(r.value[d+1],b=>(N(),I("div",{key:b},z(b),1))),128))])):_("",!0)])]))),128))])]))}}),tr=te(Ei,[["__scopeId","data-v-2524e23e"]]),Qe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var kn=(n=>(n.Classic="classic",n.Paper="paper",n.Nordic="nordic",n.Aqua="aqua",n))(kn||{});const at={classic:Qe,paper:{...Qe,variables:{...Qe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Qe,variables:{...Qe.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Qe,variables:{...Qe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}},K=window.state=yn({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:wt([])}),pe=Qn();"fonts"in document&&(document.fonts.onloadingdone=()=>pe.emit("fontsLoaded"));document.onmousemove=function(){K.mouseActivity[K.mouseActivity.length-1]=!0};const Di=Y({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var p;const t=e,r=F({}),i=new ResizeObserver(c),a=F(null);Ft(()=>{const y=a.value;y!=null&&i.observe(y)});let l=!0,o=F((p=a.value)==null?void 0:p.getBoundingClientRect());function c(){l&&(l=!1,pt(()=>{var y;o.value=(y=a.value)==null?void 0:y.getBoundingClientRect(),Object.values(r.value).filter(g=>g).forEach(g=>g.rect=g.element.getBoundingClientRect()),t("updateNodes",r.value),l=!0}))}pe.on("fontsLoaded",c);const d={attributes:!1,childList:!0,subtree:!1};Ut(ar,(y,g)=>{const w=new MutationObserver(()=>b(y));w.observe(g,d),r.value[y]={element:g,observer:w,rect:g.getBoundingClientRect()},c()}),Ut(sr,y=>{var g;(g=r.value[y])==null||g.observer.disconnect(),r.value[y]=void 0,c()}),Ut(or,r),Ut(lr,o);function b(y){const g=r.value[y];g!=null&&(g.rect=g.element.getBoundingClientRect(),t("updateNodes",r.value))}return(y,g)=>(N(),I(R,null,[_e(y.$slots,"default",{},void 0,!0),v("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}}),nr=te(Di,[["__scopeId","data-v-4fc505f1"]]),Pi={class:"modal-wrapper"},qi=["width"],_i={class:"modal-header"},Ri={class:"modal-body"},Fi={class:"modal-footer"},Je=Y({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const r=n,i=t,a=S(()=>r.modelValue||o.value);function l(){r.preventClosing!==!0&&i("update:modelValue",!1)}const o=F(!1),c=F(null),d=S(()=>{var b;return((b=c.value)==null?void 0:b.nodes)??null});return e({isOpen:a,nodes:d}),(b,p)=>(N(),ne(Fr,{to:"#modal-root"},[m(Zn,{name:"modal",onBeforeEnter:p[0]||(p[0]=y=>o.value=!0),onAfterLeave:p[1]||(p[1]=y=>o.value=!1),appear:""},{default:L(()=>[wn(v("div",Ve({class:"modal-mask",onPointerdown:Et(l,["self"])},b.$attrs),[v("div",Pi,[v("div",{class:"modal-container",width:b.width},[v("div",_i,[_e(b.$slots,"header",{shown:a.value})]),v("div",Ri,[m(nr,{ref_key:"contextRef",ref:c},{default:L(()=>[_e(b.$slots,"body",{shown:a.value})]),_:3},512)]),v("div",Fi,[_e(b.$slots,"footer",{shown:a.value},()=>[v("div",{class:"modal-default-footer"},[p[2]||(p[2]=v("div",{class:"modal-default-flex-grow"},null,-1)),v("button",{class:"button modal-default-button",onClick:l}," Close ")])])])],8,qi)])],16),[[Rr,b.modelValue]])]),_:3})]))}});function rr(n){let e=n.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1),e}function Li(n){return(n[0]+n.slice(1).replace(/[A-Z]/g,e=>`-${e}`)).toLowerCase()}function ir(n){return typeof n=="function"}var X=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(X||{});function E(n){return ir(n)&&n.length===0?S(n):n}const Ge=Symbol("ProxyState"),Fn=Symbol("AfterEvaluation");function ce(n,e={}){const t=e;let r=!1,i=!1;const a=[];function l(){if(!r){if(i)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");i=!0,Object.assign(t,n.call(t,t)),r=!0,a.forEach(c=>c(t))}return t}function o(c){r?c(t):a.push(c)}return new Proxy(t,{get(c,d){if(d===Ge)return l();if(d===Fn)return o;const b=l()[d];return b!=null&&typeof b=="object"&&qe in b?b[qe]:b},set(c,d,b){return l()[d]=b,!0},has(c,d){return d===Ge||d===Fn?!0:Reflect.has(l(),d)},ownKeys(){return Reflect.ownKeys(l())},getOwnPropertyDescriptor(c,d){return r||(Object.assign(t,n.call(t,t)),r=!0),Object.getOwnPropertyDescriptor(c,d)}})}const ar=Symbol("RegisterNode"),sr=Symbol("UnregisterNode"),or=Symbol("Nodes"),lr=Symbol("Bounds"),Ce=yn({});window.layers=Ce;const It={},$e=[];function st(n,e){return ce(()=>{const t=Qn();$e.push(n),It[n]=new Set;const r={id:n,emitter:t,...t,nodes:F({}),minimized:Ze(!1,!1)},i=e(r),{color:a,display:l,classes:o,style:c,name:d,forceHideGoBack:b,minWidth:p,minimizable:y,minimizedDisplay:g,...w}=i;if($e[$e.length-1]==null||$e[$e.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${$e}
Trying to pop ${n}`);$e.pop();const M=E(c),x={...r,...w,color:E(a),display:l,classes:E(o),style:S(()=>{let A=u(x.minWidth);return(typeof A=="number"||!Number.isNaN(parseInt(A)))&&(A=A+"px"),{...u(M),...r.minimized.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:A,flexBasis:A,margin:""}}}),name:E(d)??n,forceHideGoBack:E(b),minWidth:E(p)??600,minimizable:E(y)??!1,minimizedDisplay:g};return x})}function Oi(n,e){if(console.info("Adding layer",n.id),Ce[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,Ce[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),Ce[n.id]=n,pe.emit("addLayer",n,e.layers[n.id])}function Vi(n){console.info("Removing layer",n.id),pe.emit("removeLayer",n),delete Ce[n.id]}pe.on("update",function(e){Object.values(Ce).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(Ce).forEach(t=>{t==null||t.emit("update",e)}),Object.values(Ce).forEach(t=>{t==null||t.emit("postUpdate",e)})});class Bi{constructor(e){P(this,"map",new Map);P(this,"first");P(this,"last");P(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const r=new Ui(e,t);for(this.first===void 0?(this.first=r,this.last=r):(r.next=this.first,this.first.prev=r,this.first=r),this.map.set(e,r);this.map.size>this.maxSize;){const i=this.last;this.map.delete(i.key),this.last=i.prev,this.last.next=void 0}}}class Ui{constructor(e,t){P(this,"key");P(this,"value");P(this,"next");P(this,"prev");this.key=e,this.value=t}}const fn=17,Gi=9e15,zi=Math.log10(9e15),ji=1/9e15,Hi=308,Wi=-324,Ln=5,Yi=1023,Ji=function(){const n=[];for(let t=Wi+1;t<=Hi;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),et=[2,Math.E,3,4,5,6,7,8,9,10],Zi=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Ki=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let C=function(e){return s.fromValue_noAlloc(e)},G=function(n,e,t){return s.fromComponents(n,e,t)},J=function(e,t,r){return s.fromComponents_noNormalize(e,t,r)};const Be=function(e,t){const r=t+1,i=Math.ceil(Math.log10(Math.abs(e))),a=Math.round(e*Math.pow(10,r-i))*Math.pow(10,i-r);return parseFloat(a.toFixed(Math.max(r-i,0)))},mn=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},Xi=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const r=n*n;let i=n;return t=t+1/(12*i),i=i*r,t=t+1/(360*i),i=i*r,t=t+1/(1260*i),i=i*r,t=t+1/(1680*i),i=i*r,t=t+1/(1188*i),i=i*r,t=t+691/(360360*i),i=i*r,t=t+7/(1092*i),i=i*r,t=t+3617/(122400*i),Math.exp(t)/e},ur=.5671432904097838,On=function(n,e=1e-10){let t,r;if(!Number.isFinite(n)||n===0)return n;if(n===1)return ur;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let i=0;i<100;++i){if(r=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(r-t)<e*Math.abs(r))return r;t=r}throw Error(`Iteration failed to converge: ${n.toString()}`)};function Vn(n,e=1e-10){let t,r,i,a;if(!Number.isFinite(n.mag)||n.eq(s.dZero))return n;if(n.eq(s.dOne))return s.fromNumber(ur);t=s.ln(n);for(let l=0;l<100;++l){if(r=t.neg().exp(),i=t.sub(n.mul(r)),a=t.sub(i.div(t.add(1).sub(t.add(2).mul(i).div(s.mul(2,t).add(2))))),s.abs(a.sub(t)).lt(s.abs(a).mul(e)))return a;t=a}throw Error(`Iteration failed to converge: ${n.toString()}`)}const h=class h{constructor(e){P(this,"sign",0);P(this,"mag",0);P(this,"layer",0);e instanceof h?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Ji(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,r){return new h().fromComponents(e,t,r)}static fromComponents_noNormalize(e,t,r){return new h().fromComponents_noNormalize(e,t,r)}static fromMantissaExponent(e,t){return new h().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new h().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new h().fromDecimal(e)}static fromNumber(e){return new h().fromNumber(e)}static fromString(e){return new h().fromString(e)}static fromValue(e){return new h().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof h)return e;if(typeof e=="string"){const t=h.fromStringCache.get(e);return t!==void 0?t:h.fromString(e)}else return typeof e=="number"?h.fromNumber(e):h.dZero}static abs(e){return C(e).abs()}static neg(e){return C(e).neg()}static negate(e){return C(e).neg()}static negated(e){return C(e).neg()}static sign(e){return C(e).sign}static sgn(e){return C(e).sign}static round(e){return C(e).round()}static floor(e){return C(e).floor()}static ceil(e){return C(e).ceil()}static trunc(e){return C(e).trunc()}static add(e,t){return C(e).add(t)}static plus(e,t){return C(e).add(t)}static sub(e,t){return C(e).sub(t)}static subtract(e,t){return C(e).sub(t)}static minus(e,t){return C(e).sub(t)}static mul(e,t){return C(e).mul(t)}static multiply(e,t){return C(e).mul(t)}static times(e,t){return C(e).mul(t)}static div(e,t){return C(e).div(t)}static divide(e,t){return C(e).div(t)}static recip(e){return C(e).recip()}static reciprocal(e){return C(e).recip()}static reciprocate(e){return C(e).reciprocate()}static cmp(e,t){return C(e).cmp(t)}static cmpabs(e,t){return C(e).cmpabs(t)}static compare(e,t){return C(e).cmp(t)}static isNaN(e){return e=C(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=C(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return C(e).eq(t)}static equals(e,t){return C(e).eq(t)}static neq(e,t){return C(e).neq(t)}static notEquals(e,t){return C(e).notEquals(t)}static lt(e,t){return C(e).lt(t)}static lte(e,t){return C(e).lte(t)}static gt(e,t){return C(e).gt(t)}static gte(e,t){return C(e).gte(t)}static max(e,t){return C(e).max(t)}static min(e,t){return C(e).min(t)}static minabs(e,t){return C(e).minabs(t)}static maxabs(e,t){return C(e).maxabs(t)}static clamp(e,t,r){return C(e).clamp(t,r)}static clampMin(e,t){return C(e).clampMin(t)}static clampMax(e,t){return C(e).clampMax(t)}static cmp_tolerance(e,t,r){return C(e).cmp_tolerance(t,r)}static compare_tolerance(e,t,r){return C(e).cmp_tolerance(t,r)}static eq_tolerance(e,t,r){return C(e).eq_tolerance(t,r)}static equals_tolerance(e,t,r){return C(e).eq_tolerance(t,r)}static neq_tolerance(e,t,r){return C(e).neq_tolerance(t,r)}static notEquals_tolerance(e,t,r){return C(e).notEquals_tolerance(t,r)}static lt_tolerance(e,t,r){return C(e).lt_tolerance(t,r)}static lte_tolerance(e,t,r){return C(e).lte_tolerance(t,r)}static gt_tolerance(e,t,r){return C(e).gt_tolerance(t,r)}static gte_tolerance(e,t,r){return C(e).gte_tolerance(t,r)}static pLog10(e){return C(e).pLog10()}static absLog10(e){return C(e).absLog10()}static log10(e){return C(e).log10()}static log(e,t){return C(e).log(t)}static log2(e){return C(e).log2()}static ln(e){return C(e).ln()}static logarithm(e,t){return C(e).logarithm(t)}static pow(e,t){return C(e).pow(t)}static pow10(e){return C(e).pow10()}static pow_base(e,t){return C(e).pow_base(t)}static root(e,t){return C(e).root(t)}static factorial(e,t){return C(e).factorial()}static gamma(e,t){return C(e).gamma()}static lngamma(e,t){return C(e).lngamma()}static exp(e){return C(e).exp()}static sqr(e){return C(e).sqr()}static sqrt(e){return C(e).sqrt()}static cube(e){return C(e).cube()}static cbrt(e){return C(e).cbrt()}static tetrate(e,t=2,r=J(1,0,1)){return C(e).tetrate(t,r)}static iteratedexp(e,t=2,r=J(1,0,1)){return C(e).iteratedexp(t,r)}static iteratedlog(e,t=10,r=1){return C(e).iteratedlog(t,r)}static layeradd10(e,t){return C(e).layeradd10(t)}static layeradd(e,t,r=10){return C(e).layeradd(t,r)}static slog(e,t=10){return C(e).slog(t)}static lambertw(e){return C(e).lambertw()}static ssqrt(e){return C(e).ssqrt()}static pentate(e,t=2,r=J(1,0,1)){return C(e).pentate(t,r)}static sin(e){return C(e).sin()}static cos(e){return C(e).cos()}static tan(e){return C(e).tan()}static asin(e){return C(e).asin()}static acos(e){return C(e).acos()}static atan(e){return C(e).atan()}static sinh(e){return C(e).sinh()}static cosh(e){return C(e).cosh()}static tanh(e){return C(e).tanh()}static asinh(e){return C(e).asinh()}static acosh(e){return C(e).acosh()}static atanh(e){return C(e).atanh()}static affordGeometricSeries(e,t,r,i){return this.affordGeometricSeries_core(C(e),C(t),C(r),i)}static sumGeometricSeries(e,t,r,i){return this.sumGeometricSeries_core(e,C(t),C(r),i)}static affordArithmeticSeries(e,t,r,i){return this.affordArithmeticSeries_core(C(e),C(t),C(r),C(i))}static sumArithmeticSeries(e,t,r,i){return this.sumArithmeticSeries_core(C(e),C(t),C(r),C(i))}static efficiencyOfPurchase(e,t,r){return this.efficiencyOfPurchase_core(C(e),C(t),C(r))}static randomDecimalForTesting(e){if(Math.random()*20<1)return J(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return J(t,0,1);const r=Math.floor(Math.random()*(e+1));let i=r===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(i=Math.trunc(i));let a=Math.pow(10,i);return Math.random()>.9&&(a=Math.trunc(a)),G(t,r,a)}static affordGeometricSeries_core(e,t,r,i){const a=t.mul(r.pow(i));return h.floor(e.div(a).mul(r.sub(1)).add(1).log10().div(r.log10()))}static sumGeometricSeries_core(e,t,r,i){return t.mul(r.pow(i)).mul(h.sub(1,r.pow(e))).div(h.sub(1,r))}static affordArithmeticSeries_core(e,t,r,i){const l=t.add(i.mul(r)).sub(r.div(2)),o=l.pow(2);return l.neg().add(o.add(r.mul(e).mul(2)).sqrt()).div(r).floor()}static sumArithmeticSeries_core(e,t,r,i){const a=t.add(i.mul(r));return e.div(2).mul(a.mul(2).plus(e.sub(1).mul(r)))}static efficiencyOfPurchase_core(e,t,r){return e.div(t).add(e.div(r))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<ji)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Gi)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<zi&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,r){return this.sign=e,this.layer=t,this.mag=r,this.normalize(),this}fromComponents_noNormalize(e,t,r){return this.sign=e,this.layer=t,this.mag=r,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,r=h.fromStringCache.get(t);if(r!==void 0)return this.fromDecimal(r);e=e.replace(",","");const i=e.split("^^^");if(i.length===2){const M=parseFloat(i[0]),x=parseFloat(i[1]),A=i[1].split(";");let D=1;if(A.length===2&&(D=parseFloat(A[1]),isFinite(D)||(D=1)),isFinite(M)&&isFinite(x)){const B=h.pentate(M,x,D);return this.sign=B.sign,this.layer=B.layer,this.mag=B.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}const a=e.split("^^");if(a.length===2){const M=parseFloat(a[0]),x=parseFloat(a[1]),A=a[1].split(";");let D=1;if(A.length===2&&(D=parseFloat(A[1]),isFinite(D)||(D=1)),isFinite(M)&&isFinite(x)){const B=h.tetrate(M,x,D);return this.sign=B.sign,this.layer=B.layer,this.mag=B.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}const l=e.split("^");if(l.length===2){const M=parseFloat(l[0]),x=parseFloat(l[1]);if(isFinite(M)&&isFinite(x)){const A=h.pow(M,x);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}e=e.trim().toLowerCase();let o,c,d=e.split("pt");if(d.length===2){o=10,c=parseFloat(d[0]),d[1]=d[1].replace("(",""),d[1]=d[1].replace(")","");let M=parseFloat(d[1]);if(isFinite(M)||(M=1),isFinite(o)&&isFinite(c)){const x=h.tetrate(o,c,M);return this.sign=x.sign,this.layer=x.layer,this.mag=x.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}if(d=e.split("p"),d.length===2){o=10,c=parseFloat(d[0]),d[1]=d[1].replace("(",""),d[1]=d[1].replace(")","");let M=parseFloat(d[1]);if(isFinite(M)||(M=1),isFinite(o)&&isFinite(c)){const x=h.tetrate(o,c,M);return this.sign=x.sign,this.layer=x.layer,this.mag=x.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}const b=e.split("e"),p=b.length-1;if(p===0){const M=parseFloat(e);if(isFinite(M))return this.fromNumber(M),h.fromStringCache.size>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}else if(p===1){const M=parseFloat(e);if(isFinite(M)&&M!==0)return this.fromNumber(M),h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}const y=e.split("e^");if(y.length===2){this.sign=1,y[0].charAt(0)=="-"&&(this.sign=-1);let M="";for(let x=0;x<y[1].length;++x){const A=y[1].charCodeAt(x);if(A>=43&&A<=57||A===101)M+=y[1].charAt(x);else return this.layer=parseFloat(M),this.mag=parseFloat(y[1].substr(x+1)),this.normalize(),h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}if(p<1)return this.sign=0,this.layer=0,this.mag=0,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this;const g=parseFloat(b[0]);if(g===0)return this.sign=0,this.layer=0,this.mag=0,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this;let w=parseFloat(b[b.length-1]);if(p>=2){const M=parseFloat(b[b.length-2]);isFinite(M)&&(w*=Math.sign(M),w+=mn(M))}if(!isFinite(g))this.sign=b[0]==="-"?-1:1,this.layer=p,this.mag=w;else if(p===1)this.sign=Math.sign(g),this.layer=1,this.mag=w+Math.log10(Math.abs(g));else if(this.sign=Math.sign(g),this.layer=p,p===2){const M=h.mul(G(1,2,w),C(g));return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}else this.mag=w;return this.normalize(),h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}fromValue(e){return e instanceof h?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Be(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Be(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Ln?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Be(this.m,e)+"e"+Be(this.e,e):this.layer===1?Be(this.m,e)+"e"+Be(this.e,e):this.layer<=Ln?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Be(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Be(this.mag,e)}abs(){return J(this.sign===0?0:1,this.layer,this.mag)}neg(){return J(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?h.dZero:this.layer===0?G(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?h.dZero:this.layer===0?G(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?h.dZero:this.layer===0?G(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?h.dZero:this.layer===0?G(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=C(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return J(0,0,0);let r,i;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(h.cmpabs(this,t)>0?(r=this,i=t):(r=t,i=this),r.layer===0&&i.layer===0)return h.fromNumber(r.sign*r.mag+i.sign*i.mag);const a=r.layer*Math.sign(r.mag),l=i.layer*Math.sign(i.mag);if(a-l>=2)return r;if(a===0&&l===-1){if(Math.abs(i.mag-Math.log10(r.mag))>fn)return r;{const d=Math.pow(10,Math.log10(r.mag)-i.mag),b=i.sign+r.sign*d;return G(Math.sign(b),1,i.mag+Math.log10(Math.abs(b)))}}if(a===1&&l===0){if(Math.abs(r.mag-Math.log10(i.mag))>fn)return r;{const d=Math.pow(10,r.mag-Math.log10(i.mag)),b=i.sign+r.sign*d;return G(Math.sign(b),1,Math.log10(i.mag)+Math.log10(Math.abs(b)))}}if(Math.abs(r.mag-i.mag)>fn)return r;const o=Math.pow(10,r.mag-i.mag),c=i.sign+r.sign*o;return G(Math.sign(c),1,i.mag+Math.log10(Math.abs(c)))}plus(e){return this.add(e)}sub(e){return this.add(C(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=C(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return J(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return J(this.sign*t.sign,0,1);let r,i;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(r=this,i=t):(r=t,i=this),r.layer===0&&i.layer===0)return h.fromNumber(r.sign*i.sign*r.mag*i.mag);if(r.layer>=3||r.layer-i.layer>=2)return G(r.sign*i.sign,r.layer,r.mag);if(r.layer===1&&i.layer===0)return G(r.sign*i.sign,1,r.mag+Math.log10(i.mag));if(r.layer===1&&i.layer===1)return G(r.sign*i.sign,1,r.mag+i.mag);if(r.layer===2&&i.layer===1){const a=G(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(G(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return G(r.sign*i.sign,a.layer+1,a.sign*a.mag)}if(r.layer===2&&i.layer===2){const a=G(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(G(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return G(r.sign*i.sign,a.layer+1,a.sign*a.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=C(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?h.dNaN:this.layer===0?G(this.sign,0,1/this.mag):G(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=C(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=C(e),r=this.mag>0?this.layer:-this.layer,i=t.mag>0?t.layer:-t.layer;return r>i?1:r<i?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=C(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=C(e);return this.lt(t)?t:this}min(e){const t=C(e);return this.gt(t)?t:this}maxabs(e){const t=C(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=C(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const r=C(e);return this.eq_tolerance(r,t)?0:this.cmp(r)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const r=C(e);if(t==null&&(t=1e-7),this.sign!==r.sign||Math.abs(this.layer-r.layer)>1)return!1;let i=this.mag,a=r.mag;return this.layer>r.layer&&(a=mn(a)),this.layer<r.layer&&(i=mn(i)),Math.abs(i-a)<=t*Math.max(Math.abs(i),Math.abs(a))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const r=C(e);return!this.eq_tolerance(r,t)&&this.lt(r)}lte_tolerance(e,t){const r=C(e);return this.eq_tolerance(r,t)||this.lt(r)}gt_tolerance(e,t){const r=C(e);return!this.eq_tolerance(r,t)&&this.gt(r)}gte_tolerance(e,t){const r=C(e);return this.eq_tolerance(r,t)||this.gt(r)}pLog10(){return this.lt(h.dZero)?h.dZero:this.log10()}absLog10(){return this.sign===0?h.dNaN:this.layer>0?G(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):G(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?h.dNaN:this.layer>0?G(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):G(this.sign,0,Math.log10(this.mag))}log(e){return e=C(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?h.dNaN:this.layer===0&&e.layer===0?G(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):h.div(this.log10(),e.log10())}log2(){return this.sign<=0?h.dNaN:this.layer===0?G(this.sign,0,Math.log2(this.mag)):this.layer===1?G(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?G(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):G(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?h.dNaN:this.layer===0?G(this.sign,0,Math.log(this.mag)):this.layer===1?G(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?G(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):G(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=C(e),r=this,i=t;if(r.sign===0)return i.eq(0)?J(1,0,1):r;if(r.sign===1&&r.layer===0&&r.mag===1)return r;if(i.sign===0)return J(1,0,1);if(i.sign===1&&i.layer===0&&i.mag===1)return r;const a=r.absLog10().mul(i).pow10();return this.sign===-1?Math.abs(i.toNumber()%2)%2===1?a.neg():Math.abs(i.toNumber()%2)%2===0?a:h.dNaN:a}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return h.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return G(1,0,t);if(e.sign===0)return h.dOne;e=J(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?G(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?G(-e.sign,e.layer+1,-e.mag):h.dOne}pow_base(e){return C(e).pow(this)}root(e){const t=C(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?h.exp(h.mul(this,h.ln(this).sub(1))):h.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(J(1,0,24)))return h.fromNumber(Xi(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const r=e*e;let i=e,a=12*i,l=1/a,o=t+l;if(o===t||(t=o,i=i*r,a=360*i,l=1/a,o=t-l,o===t))return h.exp(t);t=o,i=i*r,a=1260*i;let c=1/a;return t=t+c,i=i*r,a=1680*i,c=1/a,t=t-c,h.exp(t)}else return this.layer===1?h.exp(h.mul(this,h.ln(this).sub(1))):h.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?h.dOne:this.layer===0&&this.mag<=709.7?h.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?G(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?G(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):G(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return h.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return G(1,2,Math.log10(this.mag)-.3010299956639812);{const e=h.div(J(this.sign,this.layer-1,this.mag),J(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=J(1,0,1)){if(e===1)return h.pow(this,t);if(e===0)return new h(t);if(this.eq(h.dOne))return h.dOne;if(this.eq(-1))return h.pow(this,t);if(e===Number.POSITIVE_INFINITY){const a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return h.fromNumber(Math.E);const l=h.ln(this).neg();return l.lambertw().div(l)}else return a>1.444667861009766?h.fromNumber(Number.POSITIVE_INFINITY):h.dNaN}if(this.eq(h.dZero)){let a=Math.abs((e+1)%2);return a>1&&(a=2-a),h.fromNumber(a)}if(e<0)return h.iteratedlog(t,this,-e);t=C(t);const r=e;e=Math.trunc(e);const i=r-e;if(this.gt(h.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let a=0;a<e;++a){const l=t;if(t=this.pow(t),l.eq(t))return t}if(i!=0){const a=this.pow(t);return t.mul(1-i).add(a.mul(i))}return t}i!==0&&(t.eq(h.dOne)?this.gt(10)?t=this.pow(i):(t=h.fromNumber(h.tetrate_critical(this.toNumber(),i)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let a=0;a<e;++a){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return J(t.sign,t.layer+(e-a-1),t.mag);if(a>1e4)return t}return t}iteratedexp(e=2,t=J(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return h.tetrate(e,-t,this);e=C(e);let r=h.fromDecimal(this);const i=t;t=Math.trunc(t);const a=i-t;if(r.layer-e.layer>3){const l=Math.min(t,r.layer-e.layer-3);t-=l,r.layer-=l}for(let l=0;l<t;++l){if(r=r.log(e),!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(l>1e4)return r}return a>0&&a<1&&(e.eq(10)?r=r.layeradd10(-a):r=r.layeradd(-a,e)),r}slog(e=10,t=100){let r=.001,i=!1,a=!1,l=this.slog_internal(e).toNumber();for(let o=1;o<t;++o){const d=new h(e).tetrate(l).gt(this);if(o>1&&a!=d&&(i=!0),a=d,i?r/=2:r*=2,r=Math.abs(r)*(d?-1:1),l+=r,r===0)break}return h.fromNumber(l)}slog_internal(e=10){if(e=C(e),e.lte(h.dZero)||e.eq(h.dOne))return h.dNaN;if(e.lt(h.dOne))return this.eq(h.dOne)?h.dZero:this.eq(h.dZero)?h.dNegOne:h.dNaN;if(this.mag<0||this.eq(h.dZero))return h.dNegOne;let t=0,r=h.fromDecimal(this);if(r.layer-e.layer>3){const i=r.layer-e.layer-3;t+=i,r.layer-=i}for(let i=0;i<100;++i)if(r.lt(h.dZero))r=h.pow(e,r),t-=1;else{if(r.lte(h.dOne))return h.fromNumber(t+h.slog_critical(e.toNumber(),r.toNumber()));t+=1,r=h.log(r,e)}return h.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:h.critical_section(e,t,Ki)}static tetrate_critical(e,t){return h.critical_section(e,t,Zi)}static critical_section(e,t,r){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let i=0,a=0;for(let o=0;o<et.length;++o)if(et[o]==e){i=r[o][Math.floor(t)],a=r[o][Math.ceil(t)];break}else if(et[o]<e&&et[o+1]>e){const c=(e-et[o])/(et[o+1]-et[o]);i=r[o][Math.floor(t)]*(1-c)+r[o+1][Math.floor(t)]*c,a=r[o][Math.ceil(t)]*(1-c)+r[o+1][Math.ceil(t)]*c;break}const l=t-Math.floor(t);return i<=0||a<=0?i*(1-l)+a*l:Math.pow(e,Math.log(i)/Math.log(e)*(1-l)+Math.log(a)/Math.log(e)*l)}layeradd10(e){e=h.fromValue_noAlloc(e).toNumber();const t=h.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const r=Math.trunc(e);e-=r,t.layer+=r}if(e<=-1){const r=Math.trunc(e);if(e-=r,t.layer+=r,t.layer<0)for(let i=0;i<100;++i){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const i=this.slog(t).toNumber()+e;return i>=0?h.tetrate(t,i):Number.isFinite(i)?i>=-1?h.log(h.tetrate(t,i+1),t):h.log(h.log(h.tetrate(t,i+2),t),t):h.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return h.fromNumber(On(this.toNumber()));if(this.layer===0)return h.fromNumber(On(this.sign*this.mag));if(this.layer===1)return Vn(this);if(this.layer===2)return Vn(this);if(this.layer>=3)return J(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return J(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=J(1,0,1)){t=C(t);const r=e;e=Math.trunc(e);const i=r-e;i!==0&&(t.eq(h.dOne)?(++e,t=h.fromNumber(i)):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let a=0;a<e;++a){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(a>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.sin(this.sign*this.mag)):J(0,0,0)}cos(){return this.mag<0?h.dOne:this.layer===0?h.fromNumber(Math.cos(this.sign*this.mag)):J(0,0,0)}tan(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.tan(this.sign*this.mag)):J(0,0,0)}asin(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.asin(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?h.fromNumber(Math.acos(this.toNumber())):this.layer===0?h.fromNumber(Math.acos(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.atan(this.sign*this.mag)):h.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return h.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return h.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?J(Number.NaN,Number.NaN,Number.NaN):h.ln(this.add(1).div(h.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(h.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};P(h,"dZero"),P(h,"dOne"),P(h,"dNegOne"),P(h,"dTwo"),P(h,"dTen"),P(h,"dNaN"),P(h,"dInf"),P(h,"dNegInf"),P(h,"dNumberMax"),P(h,"dNumberMin"),P(h,"fromStringCache",new Bi(Yi));let s=h;s.dZero=J(0,0,0);s.dOne=J(1,0,1);s.dNegOne=J(-1,0,1);s.dTwo=J(1,0,2);s.dTen=J(1,0,10);s.dNaN=J(Number.NaN,Number.NaN,Number.NaN);s.dInf=J(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);s.dNegInf=J(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);s.dNumberMax=G(1,0,Number.MAX_VALUE);s.dNumberMin=G(1,0,Number.MIN_VALUE);C=s.fromValue_noAlloc;G=s.fromComponents;J=s.fromComponents_noNormalize;s.fromMantissaExponent;s.fromMantissaExponent_noNormalize;const Qi=new s(1);function xt(n,e,t=!0){let r=s.log10(n).floor(),i=s.div(n,s.pow(10,r));i.toStringWithDecimalPlaces(e)==="10"&&(i=Qi,r=r.add(1));const a=r.gte(1e9)?V(r,Math.max(Math.max(e,3),Z.defaultDecimalsShown)):r.gte(1e4)?Kt(r,0):r.toStringWithDecimalPlaces(0);return t?i.toStringWithDecimalPlaces(e)+"e"+a:"e"+a}function Kt(n,e){if(n==null)return"NaN";if(n=new s(n),n.mag<.001)return 0 .toFixed(e);const r=n.toStringWithDecimalPlaces(e).split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.length===1?r[0]:r[0]+"."+r[1]}function cr(n,e){return n==null?"NaN":(n=new s(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),Z.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}const ea=new s("eeee1000"),ta=new s("e100000"),Bn=new s("e1000"),dr=new s(1e9),na=new s(1e6),ra=new s(1e3),ia=new s(.98),aa=new s(.001),fr=new s(0);function V(n,e,t){if(e==null&&(e=Z.defaultDecimalsShown),t=t??Z.defaultShowSmall,n=new s(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag))return"NaN";if(n.sign<0)return"-"+V(n.neg(),e);if(n.mag===Number.POSITIVE_INFINITY)return"Infinity";if(n.gte(ea)){const r=n.slog();return r.gte(na)?"F"+V(r.floor()):s.pow(10,r.sub(r.floor())).toStringWithDecimalPlaces(3)+"F"+Kt(r.floor(),0)}else{if(n.gte(ta))return xt(n,0,!1);if(n.gte(Bn))return xt(n,0);if(n.gte(dr))return xt(n,e);if(n.gte(ra))return Kt(n,0);if(n.gte(aa)||!t)return cr(n,e);if(n.eq(fr))return 0 .toFixed(e)}return n=gr(n),n.lt(Bn)?xt(n,e).replace(/([^(?:e|F)]*)$/,"-$1"):V(n,e)+"⁻¹"}function xe(n){return n=new s(n),n.sign<0?"-"+xe(n.neg()):n.gte(dr)||n.lte(ia)&&!n.eq(fr)?V(n):V(n,0)}function mr(n){return s.lt(n,0)?"-"+mr(s.neg(n)):s.gt(n,2**51)?V(s.div(n,31536e3))+"y":(n=new s(n).toNumber(),n<60?V(n)+"s":n<3600?xe(Math.floor(n/60))+"m "+V(n%60)+"s":n<86400?xe(Math.floor(n/3600))+"h "+xe(Math.floor(n/60)%60)+"m "+xe(n%60)+"s":n<31536e3?xe(Math.floor(n/84600)%365)+"d "+xe(Math.floor(n/3600)%24)+"h "+xe(Math.floor(n/60)%60)+"m":xe(Math.floor(n/31536e3))+"y "+xe(Math.floor(n/84600)%365)+"d "+xe(Math.floor(n/3600)%24)+"h")}function sa(n,e,t){n=new s(n);let r=n.toStringWithDecimalPlaces(e);return new s(r).gte(t)&&(r=s.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),r}function oa(n,e){return V(n,e,!0)}function gr(n){let e=s.log10(n).ceil();const t=s.div(n,s.pow(10,e));return e=e.neg(),n=new s(10).pow(e).times(t),n}const la=Object.freeze(Object.defineProperty({__proto__:null,commaFormat:Kt,default:s,exponentialFormat:xt,format:V,formatSmall:oa,formatTime:mr,formatWhole:xe,invertOOM:gr,regularFormat:cr,toPlaces:sa},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:ua,commaFormat:ca,regularFormat:da,format:H,formatWhole:Dt,formatTime:nn,toPlaces:fa,formatSmall:rn,invertOOM:ma}=la;window.Decimal=s;window.exponentialFormat=ua;window.commaFormat=ca;window.regularFormat=da;window.format=H;window.formatWhole=Dt;window.formatTime=nn;window.toPlaces=fa;window.formatSmall=rn;window.invertOOM=ma;const pr=s.ln(10);function Ht(n){return n}function kt(n,...e){const t=e.find(r=>T(r));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function ga(n,e){return T(e)?e.invert(s.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function pa(n,e){return T(e)?e.isIntegrable()?f.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function va(n){return f.neg(n)}function ha(n,e,t){return T(e)?e.invert(s.sub(n,ue(t))):T(t)?t.invert(s.sub(n,ue(e))):(console.error("Could not invert due to no input being a variable"),0)}function ba(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.times(t,e.innermostVariable??0).add(r)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n);return f.times(e,t.innermostVariable??0).add(r)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function ya(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.add(r,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n);return f.add(r,e)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function wa(n,e,t){return T(e)?e.invert(s.add(n,ue(t))):T(t)?t.invert(s.sub(ue(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Ca(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.sub(r,f.times(t,e.innermostVariable??0))}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n);return f.times(e,t.innermostVariable??0).sub(r)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function ka(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.sub(r,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n);return f.sub(r,e)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Na(n,e,t){return T(e)?e.invert(s.div(n,ue(t))):T(t)?t.invert(s.div(n,ue(e))):(console.error("Could not invert due to no input being a variable"),0)}function Ma(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.times(r,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n);return f.times(r,e)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Sa(n,e,t){return T(e)?f.div(n,t):T(t)?f.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),f.constant(0))}function xa(n,e,t){return T(e)?e.invert(s.mul(n,ue(t))):T(t)?t.invert(s.div(ue(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Ia(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.div(r,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n);return f.div(e,r)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ta(n,e,t){return T(e)?f.mul(n,t):T(t)?f.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),f.constant(0))}function Aa(n,e){return T(e)?e.invert(s.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function $a(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.ln(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ea(n,e){return T(e)?e.invert(s.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function Da(n){return s.ln(n).sub(1).times(n).div(pr)}function Pa(n,e){if(T(e)){const t=pr.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function qa(n,e){return T(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n)],evaluate:Da,invert:Pa}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function _a(n,e,t){return T(e)?e.invert(s.pow(ue(t),n)):T(t)?t.invert(s.root(ue(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Ra(n,e){return s.ln(n).sub(1).times(n).div(s.ln(e))}function Fa(n,e,t){if(T(e)){const r=s.ln(ue(t)).times(n);return e.invert(r.div(r.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function La(n,e,t){return T(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n),t],evaluate:Ra,invert:Fa}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function Oa(n,e){return T(e)?e.invert(s.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function Va(n){return s.ln(n).sub(1).times(n).div(s.ln(2))}function Ba(n,e){if(T(e)){const t=s.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ua(n,e){return T(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n)],evaluate:Va,invert:Ba}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function Ga(n,e){return T(e)?e.invert(s.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function za(n){return s.ln(n).sub(1).times(n)}function ja(n,e){return T(e)?e.invert(s.div(n,s.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Ha(n,e){return T(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n)],evaluate:za,invert:ja}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function Wa(n,e,t){return T(e)?e.invert(s.root(n,ue(t))):T(t)?t.invert(s.ln(n).div(s.ln(ue(e)))):(console.error("Could not invert due to no input being a variable"),0)}function Ya(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n),i=f.add(t,1);return f.pow(r,i).div(i)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n);return f.pow(e,r).div(f.ln(e))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ja(n,e){return T(e)?e.invert(s.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function Za(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.pow10(t).div(f.ln(10))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ka(n,e,t){return T(e)?e.invert(s.ln(n).div(s.ln(ue(t)))):T(t)?t.invert(s.root(ue(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Xa(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.pow(t,r).div(f.ln(t))}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=t.getIntegralFormula(n),i=f.add(e,1);return f.pow(r,i).div(i)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Qa(n,e,t){return T(e)?e.invert(s.root(n,s.recip(ue(t)))):T(t)?t.invert(s.ln(ue(e)).div(s.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function es(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const r=e.getIntegralFormula(n);return f.pow(r,f.recip(t).add(1)).times(t).div(f.add(t,1))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function ts(n,e){return T(e)?e.invert(s.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function ns(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.exp(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function rs(n,e=2,t=s.fromComponents_noNormalize(1,0,1)){const r=s.minabs(e,1e308).toNumber();return s.tetrate(n,r,t)}function is(n,e,t,r){return T(e)?e.invert(s.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function as(n,e=2,t=s.fromComponents_noNormalize(1,0,1)){const r=s.minabs(e,1e308).toNumber();return s.iteratedexp(n,r,new s(t))}function ss(n,e,t,r){return T(e)?e.invert(s.iteratedlog(n,Math.E,s.minabs(1e308,ue(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function os(n,e=10,t=2){const r=s.minabs(t,1e308).toNumber();return s.iteratedlog(n,e,r)}function ls(n,e=10){const t=s.minabs(e,1e308).toNumber();return s.slog(n,t)}function us(n,e,t){return T(e)?e.invert(s.tetrate(n,s.minabs(1e308,ue(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function cs(n,e,t){const r=s.minabs(e,1e308).toNumber();return s.layeradd(n,r,t)}function ds(n,e,t,r){return T(e)?e.invert(s.layeradd(n,s.minabs(1e308,ue(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function fs(n,e){return T(e)?e.invert(s.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function ms(n,e){return T(e)?e.invert(s.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function gs(n,e,t){const r=s.minabs(e,1e308).toNumber();return s.pentate(n,r,t)}function ps(n,e){return T(e)?e.invert(s.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function vs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function hs(n,e){return T(e)?e.invert(s.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function bs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.sin(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function ys(n,e){return T(e)?e.invert(s.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function ws(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Cs(n,e){return T(e)?e.invert(s.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function ks(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.asin(t).times(t).add(f.sqrt(f.sub(1,f.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ns(n,e){return T(e)?e.invert(s.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ms(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.acos(t).times(t).sub(f.sqrt(f.sub(1,f.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ss(n,e){return T(e)?e.invert(s.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function xs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.atan(t).times(t).sub(f.ln(f.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Is(n,e){return T(e)?e.invert(s.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ts(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cosh(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function As(n,e){return T(e)?e.invert(s.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function $s(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.sinh(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Es(n,e){return T(e)?e.invert(s.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ds(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ps(n,e){return T(e)?e.invert(s.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function qs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.asinh(t).times(t).sub(f.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function _s(n,e){return T(e)?e.invert(s.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Rs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.acosh(t).times(t).sub(f.add(t,1).sqrt().times(f.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Fs(n,e){return T(e)?e.invert(s.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ls(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.atanh(t).times(t).add(f.sub(1,f.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function lt(n){return(e,t)=>new f({inputs:[e,t],evaluate:n,invert:Ht})}function T(n){return n instanceof Pt&&n.hasVariable()}function ue(n,e){return n instanceof Pt?n.evaluate(e):u(n)}function Os(){return f.pow(this,2).div(2)}function Vs(){return this}const U=class U{constructor(e){P(this,"inputs");P(this,"internalEvaluate");P(this,"internalInvert");P(this,"internalIntegrate");P(this,"internalIntegrateInner");P(this,"applySubstitution");P(this,"description");P(this,"internalVariables");P(this,"innermostVariable");P(this,"negate",this.neg);P(this,"negated",this.neg);P(this,"sgn",this.sign);P(this,"plus",this.add);P(this,"subtract",this.sub);P(this,"minus",this.sub);P(this,"multiply",this.mul);P(this,"times",this.mul);P(this,"divide",this.div);P(this,"divideBy",this.div);P(this,"dividedBy",this.div);P(this,"reciprocal",this.recip);P(this,"reciprocate",this.recip);P(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(r=>typeof r=="object"&&qe in r?r[qe]:r)),"variable"in e?(typeof e.variable=="object"&&qe in e.variable&&(e.variable=e.variable[qe]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Os,internalIntegrateInner:Vs,applySubstitution:Ht}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:r,invert:i,integrate:a,integrateInner:l,applySubstitution:o}=e,c=t.reduce((g,w)=>g+(w instanceof U?w.internalVariables:0),0),d=t.find(g=>g instanceof U&&g.hasVariable()),b=c===1?d==null?void 0:d.innermostVariable:void 0,p=(d==null?void 0:d.isInvertible())??!1,y=(d==null?void 0:d.isIntegrable())??!1;return{inputs:t,internalEvaluate:r,internalInvert:p?i:void 0,internalIntegrate:y?a:void 0,internalIntegrateInner:l,applySubstitution:o,innermostVariable:b,internalVariables:c}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(r=>ue(r,e))))??(this.hasVariable()?e:null)??ue(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,r)=>t instanceof U&&e.inputs[r]instanceof U?t.equals(e.inputs[r]):!(t instanceof U)&&!(e.inputs[r]instanceof U)&&s.eq(u(t),u(e.inputs[r])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new f({inputs:[e]})}static variable(e){return new f({variable:e})}static stringify(e){return e instanceof U?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":H(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(f.stringify).join(", ")})`:H(u(e))}static step(e,t,r){const i=r(f.variable(0)),a=E(t);function l(c){return s.lt(c,u(a))?c:s.add(i.evaluate(s.sub(c,u(a))),u(a))}function o(c,d){return T(d)&&i.isInvertible()?(s.gt(c,u(a))&&(c=s.add(i.invert(s.sub(c,u(a))),u(a))),d.invert(c)):(console.error("Could not invert due to no input being a variable"),0)}return new f({inputs:[e],evaluate:l,invert:i.isInvertible()&&i.hasVariable()?o:void 0,description:"indeterminate"})}static if(e,t,r,i){const a=F(0),l=f.variable(a),o=r(l),c=i==null?void 0:i(l),d=E(t);function b(y){return u(d)?(a.value=y,o.evaluate()):c?(a.value=y,c.evaluate()):y}function p(y,g){return!T(g)||!o.isInvertible()||c!=null&&!c.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):u(d)?g.invert(o.invert(y)):c?g.invert(c.invert(y)):g.invert(y)}return new f({inputs:[e],evaluate:b,invert:o.isInvertible()&&o.hasVariable()?p:void 0,description:"indeterminate"})}static conditional(e,t,r,i){return f.if(e,t,r,i)}static abs(e){return new f({inputs:[e],evaluate:s.abs})}static neg(e){return new f({inputs:[e],evaluate:s.neg,invert:ga,applySubstitution:va,integrate:pa})}static sign(e){return new f({inputs:[e],evaluate:s.sign})}static round(e){return new f({inputs:[e],evaluate:s.round,invert:kt})}static floor(e){return new f({inputs:[e],evaluate:s.floor,invert:kt})}static ceil(e){return new f({inputs:[e],evaluate:s.ceil,invert:kt})}static trunc(e){return new f({inputs:[e],evaluate:s.trunc,invert:kt})}static add(e,t){return new f({inputs:[e,t],evaluate:s.add,invert:ha,integrate:ba,integrateInner:ya,applySubstitution:Ht})}static sub(e,t){return new f({inputs:[e,t],evaluate:s.sub,invert:wa,integrate:Ca,integrateInner:ka,applySubstitution:Ht})}static mul(e,t){return new f({inputs:[e,t],evaluate:s.mul,invert:Na,integrate:Ma,applySubstitution:Sa})}static div(e,t){return new f({inputs:[e,t],evaluate:s.div,invert:xa,integrate:Ia,applySubstitution:Ta})}static recip(e){return new f({inputs:[e],evaluate:s.recip,invert:Aa,integrate:$a})}static clamp(e,t,r){return new f({inputs:[e,t,r],evaluate:s.clamp,invert:kt})}static pLog10(e){return new f({inputs:[e],evaluate:s.pLog10})}static absLog10(e){return new f({inputs:[e],evaluate:s.absLog10})}static log10(e){return new f({inputs:[e],evaluate:s.log10,invert:Ea,integrate:qa})}static log(e,t){return new f({inputs:[e,t],evaluate:s.log,invert:_a,integrate:La})}static log2(e){return new f({inputs:[e],evaluate:s.log2,invert:Oa,integrate:Ua})}static ln(e){return new f({inputs:[e],evaluate:s.ln,invert:Ga,integrate:Ha})}static pow(e,t){return new f({inputs:[e,t],evaluate:s.pow,invert:Wa,integrate:Ya})}static pow10(e){return new f({inputs:[e],evaluate:s.pow10,invert:Ja,integrate:Za})}static pow_base(e,t){return new f({inputs:[e,t],evaluate:s.pow_base,invert:Ka,integrate:Xa})}static root(e,t){return new f({inputs:[e,t],evaluate:s.root,invert:Qa,integrate:es})}static factorial(e){return new f({inputs:[e],evaluate:s.factorial})}static gamma(e){return new f({inputs:[e],evaluate:s.gamma})}static lngamma(e){return new f({inputs:[e],evaluate:s.lngamma})}static exp(e){return new f({inputs:[e],evaluate:s.exp,invert:ts,integrate:ns})}static sqr(e){return f.pow(e,2)}static sqrt(e){return f.root(e,2)}static cube(e){return f.pow(e,3)}static cbrt(e){return f.root(e,3)}static tetrate(e,t=2,r=s.fromComponents_noNormalize(1,0,1)){return new f({inputs:[e,t,r],evaluate:rs,invert:is})}static iteratedexp(e,t=2,r=s.fromComponents_noNormalize(1,0,1)){return new f({inputs:[e,t,r],evaluate:as,invert:ss})}static iteratedlog(e,t=10,r=1){return new f({inputs:[e,t,r],evaluate:os})}static slog(e,t=10){return new f({inputs:[e,t],evaluate:ls,invert:us})}static layeradd10(e,t){return new f({inputs:[e,t],evaluate:s.layeradd10})}static layeradd(e,t,r=10){return new f({inputs:[e,t,r],evaluate:cs,invert:ds})}static lambertw(e){return new f({inputs:[e],evaluate:s.lambertw,invert:fs})}static ssqrt(e){return new f({inputs:[e],evaluate:s.ssqrt,invert:ms})}static pentate(e,t=2,r=s.fromComponents_noNormalize(1,0,1)){return new f({inputs:[e,t,r],evaluate:gs})}static sin(e){return new f({inputs:[e],evaluate:s.sin,invert:Cs,integrate:vs})}static cos(e){return new f({inputs:[e],evaluate:s.cos,invert:Ns,integrate:bs})}static tan(e){return new f({inputs:[e],evaluate:s.tan,invert:Ss,integrate:ws})}static asin(e){return new f({inputs:[e],evaluate:s.asin,invert:ps,integrate:ks})}static acos(e){return new f({inputs:[e],evaluate:s.acos,invert:hs,integrate:Ms})}static atan(e){return new f({inputs:[e],evaluate:s.atan,invert:ys,integrate:xs})}static sinh(e){return new f({inputs:[e],evaluate:s.sinh,invert:Ps,integrate:Ts})}static cosh(e){return new f({inputs:[e],evaluate:s.cosh,invert:_s,integrate:$s})}static tanh(e){return new f({inputs:[e],evaluate:s.tanh,invert:Fs,integrate:Ds})}static asinh(e){return new f({inputs:[e],evaluate:s.asinh,invert:Is,integrate:qs})}static acosh(e){return new f({inputs:[e],evaluate:s.acosh,invert:As,integrate:Rs})}static atanh(e){return new f({inputs:[e],evaluate:s.atanh,invert:Es,integrate:Ls})}stringify(){return f.stringify(this)}step(e,t){return f.step(this,e,t)}if(e,t){return f.if(this,e,t)}conditional(e,t){return f.if(this,e,t)}abs(){return f.abs(this)}neg(){return f.neg(this)}sign(){return f.sign(this)}round(){return f.round(this)}floor(){return f.floor(this)}ceil(){return f.ceil(this)}trunc(){return f.trunc(this)}add(e){return f.add(this,e)}sub(e){return f.sub(this,e)}mul(e){return f.mul(this,e)}div(e){return f.div(this,e)}recip(){return f.recip(this)}max(e){return f.max(this,e)}min(e){return f.min(this,e)}maxabs(e){return f.maxabs(this,e)}minabs(e){return f.minabs(this,e)}clamp(e,t){return f.clamp(this,e,t)}clampMin(e){return f.clampMin(this,e)}clampMax(e){return f.clampMax(this,e)}pLog10(){return f.pLog10(this)}absLog10(){return f.absLog10(this)}log10(){return f.log10(this)}log(e){return f.log(this,e)}log2(){return f.log2(this)}ln(){return f.ln(this)}pow(e){return f.pow(this,e)}pow10(){return f.pow10(this)}pow_base(e){return f.pow_base(this,e)}root(e){return f.root(this,e)}factorial(){return f.factorial(this)}gamma(){return f.gamma(this)}lngamma(){return f.lngamma(this)}exp(){return f.exp(this)}sqr(){return f.pow(this,2)}sqrt(){return f.root(this,2)}cube(){return f.pow(this,3)}cbrt(){return f.root(this,3)}tetrate(e=2,t=s.fromComponents_noNormalize(1,0,1)){return f.tetrate(this,e,t)}iteratedexp(e=2,t=s.fromComponents_noNormalize(1,0,1)){return f.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return f.iteratedlog(this,e,t)}slog(e=10){return f.slog(this,e)}layeradd10(e){return f.layeradd10(this,e)}layeradd(e,t){return f.layeradd(this,e,t)}lambertw(){return f.lambertw(this)}ssqrt(){return f.ssqrt(this)}pentate(e=2,t=s.fromComponents_noNormalize(1,0,1)){return f.pentate(this,e,t)}sin(){return f.sin(this)}cos(){return f.cos(this)}tan(){return f.tan(this)}asin(){return f.asin(this)}acos(){return f.acos(this)}atan(){return f.atan(this)}sinh(){return f.sinh(this)}cosh(){return f.cosh(this)}tanh(){return f.tanh(this)}asinh(){return f.asinh(this)}acosh(){return f.acosh(this)}atanh(){return f.atanh(this)}};P(U,"negate",U.neg),P(U,"negated",U.neg),P(U,"sgn",U.sign),P(U,"plus",U.add),P(U,"subtract",U.sub),P(U,"minus",U.sub),P(U,"multiply",U.mul),P(U,"times",U.mul),P(U,"divide",U.div),P(U,"divideBy",U.div),P(U,"dividedBy",U.div),P(U,"reciprocal",U.recip),P(U,"reciprocate",U.recip),P(U,"max",lt(s.max)),P(U,"min",lt(s.min)),P(U,"minabs",lt(s.minabs)),P(U,"maxabs",lt(s.maxabs)),P(U,"clampMin",lt(s.clampMin)),P(U,"clampMax",lt(s.clampMax)),P(U,"logarithm",U.log);let Pt=U;class f extends Pt{constructor(){super(...arguments);P(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),r=s.add(this.evaluate(0),this.evaluate(1)).div(2);return s.sub(r,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),f.constant(0);let r=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(i=>r=i(r)),this.integralFormula=r}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),f.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),f.constant(0)):(t.push(r=>this.applySubstitution.call(this,r,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),f.constant(0)))}}function Bs(n,e,t=!0,r,i=s.dInf){const a=E(t),l=E(r),o=E(i);return S(()=>{const c=u(o);if(s.eq(c,1))return s.gte(e.value,n.evaluate())?s.dOne:s.dZero;const d=u(a),b=u(l)??(d?10:0);let p=0;if(s.gt(c,b)){if(!n.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(d){if(!n.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;p=s.floor(n.invertIntegral(s.add(e.value,n.evaluateIntegral()))).sub(u(n.innermostVariable)??0)}else p=s.floor(n.invert(e.value))}if(p=s.clampMax(p,c),b>0){const y=p;p=s.sub(p,b).clampMin(0);let g;for(d?g=Wt(n,p,!0,0):g=n.evaluate(s.add(u(n.innermostVariable)??0,p));s.lt(p,c)&&s.lt(p,Number.MAX_SAFE_INTEGER)&&s.add(y,1).gte(p);){const w=n.evaluate(p.add(u(n.innermostVariable)??0));if(s.add(g,w).lte(e.value))p=p.add(1),g=s.add(g,w);else break}}return p})}function Wt(n,e,t=!0,r){if(s.eq(e,1))return n.evaluate();const i=u(n.innermostVariable)??0;let a=s.add(e,i);const l=a;r??(r=t?10:0),a=a.sub(r).clampMin(i);let o=0;if(s.gt(e,r)){if(!n.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(t){if(!n.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(o=s.sub(n.evaluateIntegral(a),n.evaluateIntegral()),l.gt(1e308))return s.add(o,s.sub(l,a).times(n.evaluate(a)))}else if(o=n.evaluate(a),a=a.add(1),l.gt(1e308))return s.sub(l,a).add(1).times(o)}for(let c=a.toNumber();c<l.toNumber();c++)o=s.add(o,n.evaluate(c));return o}const je=Symbol("PersistentState"),Ae=Symbol("DefaultValue"),Xt=Symbol("StackTrace"),pn=Symbol("Deleted"),qe=Symbol("NonPersistent"),tt=Symbol("SaveDataPath"),ht=Symbol("SkipPersistence");function Us(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function Un(n,e){var t;s.isNaN(e)&&(K.hasNaN||($.autosave=!1,K.hasNaN=!0,K.NaNPath=n[tt],K.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[tt])==null?void 0:t.join(".")}`)),n[je].value=e}function Ze(n,e=!0){const t=Ne(n)?n:F(n);Ne(n)&&(n=n.value);const r=S({get(){return t.value},set(a){e?Un(i,a):i[je].value=a}});r[Ae]=n;const i={get value(){return t.value},set value(a){e?Un(i,a):i[je].value=a},__v_isRef:!0,[je]:t,[Ae]:n,[Xt]:Us(),[pn]:!1,[qe]:r,[tt]:void 0};return $e.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",i,`
Created at:
`+i[Xt]):It[$e[$e.length-1]].add(i),i}function Gs(n){return n!=null&&typeof n=="object"&&je in n}function O(n){return!(Ge in n)&&qe in n?n[qe]:new Proxy(n,{get(e,t){if(t!==je)return t===ht?!0:e[t]},set(e,t,r){return e[t]=r,!0},has(e,t){return t===je?!1:t===ht?!0:Reflect.has(e,t)}})}pe.on("addLayer",(n,e)=>{const t=[],r=(i,a=[])=>{let l=!1;return Object.keys(i).forEach(o=>{let c=i[o];if(c!=null&&typeof c=="object"){if(ht in c&&c[ht]===!0)return;if(Ge in c&&(c=c[Ge]),Gs(c)){if(l=!0,c[pn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[Xt]);return}It[n.id].delete(c);const d=[n.id,...a,o];c[tt]!=null&&JSON.stringify(d)!==JSON.stringify(c[tt])&&console.error(`Persistent ref is being saved to \`${d.join(".")}\` when it's already present at \`${c[tt].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),c[tt]=d;const b=a.reduce((y,g)=>(g in y||(y[g]={}),y[g]),e),p=b[o];b[o]=c[je],Lr(b)?p!=null?b[o]=p:b[o]=c[Ae]:p!=null?b[o].value=p:b[o].value=c[Ae]}else!(c instanceof s)&&!(c instanceof f)&&!Ne(c)&&!t.includes(c)&&(typeof c.type=="symbol"&&t.push(c),r(c,[...a,o])&&(Array.isArray(c)&&!Array.isArray(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",Ge in i?i[Ge]:i,o):l=!0))}}),l};r(n[Ge]),It[n.id].forEach(i=>{i[pn]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+i[Xt])}),It[n.id].clear()});function Ie(n,e="points",t=0,r=void 0){const a=Ne(n)?n:Ze(n);if(a.displayName=e,a.precision=t,a.small=r,a.defaultValue=u(n),!Ne(n)){const l=a[qe];l.displayName=e,l.precision=t,l.small=r,l.defaultValue=n}return a}function vr(n){const e=Ze(n.value);return ye(n,t=>{ln.value||s.gt(t,e.value)&&(e.value=t)}),e}function qt(n){const e=Ze(n.value);return ye(n,(t,r)=>{ln.value||s.gt(t,r)&&(e.value=s.add(e.value,s.sub(t,r)))}),e}new s("10^^8");new s("1e100");function Qt(n,e){const t=e??n.value;return s.eq(n.precision,0)?Dt(n.small?t:s.floor(t)):H(t,n.precision,n.small)}const zs={class:"table"},ze=Y({__name:"Column",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=S(()=>at[W.theme].mergeAdjacent&&e.dontMerge!==!0);return(r,i)=>(N(),I("div",zs,[v("div",{class:re(["col",{mergeAdjacent:t.value}])},[_e(r.$slots,"default")],2)]))}}),js={class:"table"},vn=Y({__name:"Row",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=S(()=>at[W.theme].mergeAdjacent&&e.dontMerge!==!0);return(r,i)=>(N(),I("div",js,[v("div",{class:re(["row",{mergeAdjacent:t.value}])},[_e(r.$slots,"default")],2)]))}});let Hs=0;function Ws(n="feature-"){return n+Hs++}var He=(n=>(n[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.None=2]="None",n))(He||{});function _t(n){const e=u(n);return e!==2&&e!==!1}function Ys(n){return u(n)===1}function Gn(n,e){return n!=null&&typeof n=="object"&&"type"in n&&n.type===e}function Js(n,...e){const t=[],r=i=>{Object.keys(i).forEach(a=>{const l=i[a];l!=null&&typeof l=="object"&&l.__v_isVNode!==!0&&(e.includes(l.type)?t.push(l):!(l instanceof s)&&!Ne(l)&&r(l))})};return r(n),t}const Zs=Y({__name:"Node",props:{id:{}},setup(n){const e=n,t=Zt(ar,()=>{}),r=Zt(sr,()=>{}),i=Lt(null),a=S(()=>i.value&&i.value.parentElement);return ye([a,it(e,"id")],([l,o],[c,d])=>{c&&r(u(d)),l&&t(o,l)}),Kn(()=>r(e.id)),(l,o)=>(N(),I("div",{class:"node",ref_key:"node",ref:i},null,512))}}),Yt=te(Zs,[["__scopeId","data-v-4673aca5"]]),Ks=Y({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((r,i)=>()=>i(r),()=>m(R,null,[e.components.map(r=>q(r))]))();return(r,i)=>u(_t)(u(r.visibility))?(N(),I("div",{key:0,style:fe([{visibility:u(Ys)(u(r.visibility))?"hidden":void 0},u(r.style)]),class:re({feature:!0,...u(r.classes)})},[m(t),m(Yt,{id:r.id},null,8,["id"])],6)):_("",!0)}}),Xs=["disabled"],Qs=Y({__name:"Clickable",props:{canClick:{},display:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=e,i=()=>t.display==null?m(R,null,null):q(t.display),{start:a,stop:l}=wr(()=>r("hold"));return(o,c)=>(N(),I("button",{onClick:c[0]||(c[0]=d=>r("click",d)),onMousedown:c[1]||(c[1]=(...d)=>u(a)&&u(a)(...d)),onMouseleave:c[2]||(c[2]=(...d)=>u(l)&&u(l)(...d)),onMouseup:c[3]||(c[3]=(...d)=>u(l)&&u(l)(...d)),onTouchstartPassive:c[4]||(c[4]=(...d)=>u(a)&&u(a)(...d)),onTouchendPassive:c[5]||(c[5]=(...d)=>u(l)&&u(l)(...d)),onTouchcancelPassive:c[6]||(c[6]=(...d)=>u(l)&&u(l)(...d)),class:re({clickable:!0,can:u(o.canClick),locked:!u(o.canClick)}),disabled:!u(o.canClick)},[m(i)],42,Xs))}}),Nn=te(Qs,[["__scopeId","data-v-396784a5"]]),eo=Symbol("Clickable");function to(n){return ce(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:r,onClick:i,onHold:a,...l}=e;let o;typeof r=="object"&&!mt(r)?o=()=>m("span",null,[r.title!=null?m("div",null,[q(r.title,d=>m("h3",null,[d]))]):null,q(r.description,d=>m("div",null,[d]))]):r!=null&&(o=r);const c={type:eo,...l,...Re("clickable",e,()=>m(Nn,{canClick:c.canClick,onClick:c.onClick,onHold:c.onClick,display:c.display},null)),canClick:E(t)??!0,display:o,onClick:i==null?void 0:function(d){u(c.canClick)!==!1&&i.call(c,d)},onHold:a==null?void 0:function(){u(c.canClick)!==!1&&a.call(c)}};return c})}function hr(n){const e=to(()=>{const t=n(),{conversion:r,tree:i,treeNode:a,resetTime:l,resetDescription:o,showNextAt:c,minimumGain:d,display:b,canClick:p,onClick:y,...g}=t;return{...g,conversion:r,tree:i,treeNode:a,resetTime:l,resetDescription:E(o)??S(()=>s.lt(r.gainResource.value,1e3)?"Reset for ":""),showNextAt:E(c)??!0,minimumGain:E(d)??1,canClick:E(p)??S(()=>s.gte(u(r.actualGain),u(e.minimumGain))),display:b??(()=>m("span",null,[u(e.resetDescription),m("b",null,[Qt(r.gainResource,s.max(u(r.actualGain),u(e.minimumGain)))])," ",r.gainResource.displayName,u(e.showNextAt)!=!1?m("div",null,[m("br",null,null),u(r.buyMax)?"Next:":"Req:"," ",Qt(r.baseResource,!u(r.buyMax)&&s.gte(u(r.actualGain),1)?u(r.currentAt):u(r.nextAt))," ",r.baseResource.displayName]):null])),onClick:function(w){u(e.canClick)!==!1&&(r.convert(),i.reset(a),l&&(l.value=l[Ae]),y==null||y.call(e,w))}}});return e}function an(n){const e=ho(()=>{const t=n(),{display:r,append:i,layerID:a,...l}=t;return{...l,layerID:a,display:r??a,append:E(i)??!1,onClick(){if(u(e.append))if($.tabs.includes(a)){const o=$.tabs.lastIndexOf(a);$.tabs.splice(o,1)}else $.tabs.push(a);else $.tabs.splice(1,1,a)}}});return e}function br(n,e){return Array.from({length:Math.ceil(n.length/e)},(t,r)=>n.slice(r*e,r*e+e))}function no(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!tn(n)}const yr=Symbol("VueFeature");function Re(n,e,t){return{id:Ws(n),visibility:E(e.visibility),classes:E(e.classes),style:E(e.style),components:t==null?[]:[t],wrappers:[],[yr]:!0}}function q(n,e){if(typeof n=="object"&&yr in n){const{id:t,visibility:r,style:i,classes:a,components:l,wrappers:o}=n;return m(Ks,{id:t,visibility:r,style:i,classes:a,components:l,wrappers:o},null)}return n=Or(n),(e==null?void 0:e(n))??n}function ro(...n){let e;return m(vn,null,no(e=n.map(t=>q(t)))?e:{default:()=>[e]})}function Tt(n,e){return n.reduce((t,r)=>m(R,null,[t,e,q(r)]),m(R,null,null))}function io(n){return Object.keys(n).map(e=>n[e]?e:null).filter(e=>!!e)}function nt(n,e,t,r){const a=[...io({row:!0,mergeAdjacent:!0}),r],l=n instanceof Array?n:Object.values(n),o=br(l,e);return q(m(R,null,[m("div",{class:"table"},[o.map(c=>m(R,null,[m("div",{style:t,class:a},[c.map(d=>q(d))])]))])]))}function mt(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function wr(n){const e=F(null),t=F(void 0);function r(l){e.value==null&&(e.value=setInterval(a,250)),t.value=l}function i(){e.value!=null&&(clearInterval(e.value),e.value=null)}function a(){n(t.value)}return Kn(i),{start:r,stop:i,handleHolding:a}}function ao(n){return Object.keys(n).reduce((e,t)=>(e[Li(t)]=n[t],e),{})}const so=["x1","y1","x2","y2"],oo=Y({__name:"Link",props:{link:{},startNode:{},endNode:{},boundingRect:{}},setup(n){const e=n,t=S(()=>{const a=e.startNode.rect,l=e.boundingRect,o=l?{x:a.x+a.width/2-l.x,y:a.y+a.height/2-l.y}:{x:0,y:0};return e.link.offsetStart&&(o.x+=e.link.offsetStart.x,o.y+=e.link.offsetStart.y),o}),r=S(()=>{const a=e.endNode.rect,l=e.boundingRect,o=l?{x:a.x+a.width/2-l.x,y:a.y+a.height/2-l.y}:{x:0,y:0};return e.link.offsetEnd&&(o.x+=e.link.offsetEnd.x,o.y+=e.link.offsetEnd.y),o}),i=S(()=>ao(e.link));return(a,l)=>(N(),I("line",Ve({"stroke-width":"15px",stroke:"white"},i.value,{x1:t.value.x,y1:t.value.y,x2:r.value.x,y2:r.value.y}),null,16,so))}}),lo=Y({__name:"Links",props:{links:{}},setup(n){var d;const e=n;function t(){var b;o.value=(b=i.value)==null?void 0:b.getBoundingClientRect()}const r=new ResizeObserver(t),i=Lt(null),a=Zt(or,F({})),l=Zt(lr,F(void 0)),o=F((d=i.value)==null?void 0:d.getBoundingClientRect());ye(l,t),Ft(()=>{const b=i.value;b!=null&&r.observe(b),t()});const c=S(()=>{var p;const b=a.value;return((p=u(e.links))==null?void 0:p.filter(y=>{var g,w;return((g=b[y.startNode.id])==null?void 0:g.rect)&&((w=b[y.endNode.id])==null?void 0:w.rect)}))??[]});return(b,p)=>(N(),I(R,null,[c.value?(N(),I("svg",Vr(Ve({key:0},b.$attrs)),[(N(!0),I(R,null,Ue(c.value,(y,g)=>(N(),ne(oo,{key:g,link:y,boundingRect:o.value,startNode:u(a)[y.startNode.id],endNode:u(a)[y.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):_("",!0),v("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}}),uo=te(lo,[["__scopeId","data-v-95f1a2c2"]]),co=Y({__name:"Tree",props:{nodes:{},leftSideNodes:{},rightSideNodes:{},branches:{}},setup(n){const e=n,t=()=>u(e.nodes).map(a=>m("span",{class:"row tree-row",style:"margin: 50px auto;"},[a.map(l=>q(l))])),r=()=>e.leftSideNodes==null?m(R,null,null):m("span",{class:"left-side-nodes small"},[u(e.leftSideNodes).map(a=>q(a))]),i=()=>e.rightSideNodes==null?m(R,null,null):m("span",{class:"side-nodes small"},[u(e.rightSideNodes).map(a=>q(a))]);return(a,l)=>(N(),I(R,null,[m(t),a.leftSideNodes?(N(),ne(r,{key:0})):_("",!0),a.rightSideNodes?(N(),ne(i,{key:1})):_("",!0),a.branches?(N(),ne(uo,{key:2,links:u(a.branches)},null,8,["links"])):_("",!0)],64))}}),fo=te(co,[["__scopeId","data-v-b63a12ba"]]),mo=Y({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=e,i=()=>t.display==null?m(R,null,null):q(t.display,o=>m("div",null,[o])),{start:a,stop:l}=wr(()=>r("hold"));return(o,c)=>(N(),I("button",{style:fe({backgroundColor:u(o.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${u(o.glowColor)}`}),class:re({treeNode:!0,can:u(o.canClick)}),onClick:c[0]||(c[0]=d=>r("click",d)),onMousedown:c[1]||(c[1]=(...d)=>u(a)&&u(a)(...d)),onMouseleave:c[2]||(c[2]=(...d)=>u(l)&&u(l)(...d)),onMouseup:c[3]||(c[3]=(...d)=>u(l)&&u(l)(...d)),onTouchstartPassive:c[4]||(c[4]=(...d)=>u(a)&&u(a)(...d)),onTouchendPassive:c[5]||(c[5]=(...d)=>u(l)&&u(l)(...d)),onTouchcancelPassive:c[6]||(c[6]=(...d)=>u(l)&&u(l)(...d))},[m(i)],38))}}),go=te(mo,[["__scopeId","data-v-80b5b7b8"]]),po=Symbol("TreeNode"),vo=Symbol("Tree");function ho(n){return ce(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:r,display:i,glowColor:a,onClick:l,onHold:o,...c}=e,d={type:po,...c,...Re("treeNode",e,()=>m(go,{canClick:d.canClick,display:d.display,onClick:d.onClick,onHold:d.onHold,color:d.color,glowColor:d.glowColor},null)),canClick:E(t)??!0,color:E(r),display:i,glowColor:E(a),onClick:l==null?void 0:function(b){u(d.canClick)!==!1&&l.call(d,b)},onHold:o==null?void 0:function(){u(d.canClick)!==!1&&o.call(d)}};return d})}function bo(n){return ce(()=>{const e=n(),{branches:t,nodes:r,leftSideNodes:i,rightSideNodes:a,resetPropagation:l,onReset:o,style:c,...d}=e,b=E(c);e.style=()=>({position:"static",...u(b)??{}});const p=t==null?void 0:E(t),y={type:vo,...d,...Re("tree",e,()=>m(fo,{nodes:y.nodes,leftSideNodes:y.leftSideNodes,rightSideNodes:y.rightSideNodes,branches:y.branches},null)),branches:p,isResetting:F(!1),resettingNode:Lt(null),nodes:E(r),leftSideNodes:E(i),rightSideNodes:E(a),links:p==null?[]:O(p),resetPropagation:l,onReset:o,reset:function(g){var w,M;y.isResetting.value=!0,y.resettingNode.value=g,(w=y.resetPropagation)==null||w.call(y,y,g),(M=y.onReset)==null||M.call(y,g),y.isResetting.value=!1,y.resettingNode.value=null}};return y})}const yo=function(n,e){var a;const t=u(n.branches);if(t==null)return;const r=[];let i=[e];for(;i.length!==0;){const l=[];for(const o of i)for(const c of t.filter(d=>d.startNode===o))[...r,...i].includes(c.endNode)||(l.push(c.endNode),(a=c.endNode.reset)==null||a.reset());r.push(...i),i=l}},wo=Symbol("Reset");function sn(n){return ce(()=>{const e=n(),{thingsToReset:t,onReset:r,...i}=e,a={type:wo,...i,onReset:r,thingsToReset:E(t),reset:function(){const l=o=>{if(o!=null&&typeof o=="object"&&!(o instanceof s)&&!(o instanceof f)){if(ht in o&&o[ht]===!0)return;if(Ae in o){const c=o;c.value=c[Ae]}else!(o instanceof s)&&!Ne(o)&&Object.values(o).forEach(c=>l(c))}};u(a.thingsToReset).forEach(l),pe.emit("reset",a),r==null||r()}};return a})}const Gt={};pe.on("removeLayer",n=>{var e;(e=Gt[n.id])==null||e.call(Gt),Gt[n.id]=void 0});function dt(n){return ce(()=>{const{addend:e,description:t,enabled:r,smallerIsBetter:i}=n(),a=E(e),l=r==null?void 0:E(r);return{apply:o=>s.add(o,u(a)),invert:o=>s.sub(o,u(a)),getFormula:o=>f.add(o,a),enabled:l,description:t==null?void 0:()=>m("div",{class:"modifier-container"},[m("span",{class:"modifier-description"},[q(t)]),m("span",{class:"modifier-amount",style:(i===!0?s.gt(u(a),0):s.lt(u(a),0))?"color: var(--danger)":""},[s.gte(u(a),0)?"+":"",rn(u(a))])])}})}function he(n){return ce(()=>{const{multiplier:e,description:t,enabled:r,smallerIsBetter:i}=n(),a=E(e),l=r==null?void 0:E(r);return{apply:o=>s.times(o,u(a)),invert:o=>s.div(o,u(a)),getFormula:o=>f.times(o,a),enabled:l,description:t==null?void 0:()=>m("div",{class:"modifier-container"},[m("span",{class:"modifier-description"},[q(t)]),m("span",{class:"modifier-amount",style:(i===!0?s.gt(u(a),1):s.lt(u(a),1))?"color: var(--danger)":""},[k("×"),rn(u(a))])])}})}function ut(n){return ce(()=>{const{exponent:e,description:t,enabled:r,supportLowNumbers:i,smallerIsBetter:a}=n(),l=E(e),o=r==null?void 0:E(r);return{apply:c=>{let d=c;return i&&(d=s.add(d,1)),d=s.pow(d,u(l)),i&&(d=s.sub(d,1)),d},invert:c=>{let d=c;return i&&(d=s.add(d,1)),d=s.root(d,u(l)),i&&(d=s.sub(d,1)),d},getFormula:c=>i?f.add(c,1).pow(l).sub(1):f.pow(c,l),enabled:o,description:t==null?void 0:()=>m("div",{class:"modifier-container"},[m("span",{class:"modifier-description"},[q(t),i?" (+1 effective)":null]),m("span",{class:"modifier-amount",style:(a===!0?s.gt(u(l),1):s.lt(u(l),1))?"color: var(--danger)":""},[k("^"),rn(u(l))])])}})}function ie(n){return ce(()=>{const e=n();return{apply:t=>e.filter(r=>u(r.enabled)!==!1).reduce((r,i)=>i.apply(r),t),invert:e.every(t=>t.invert!=null)?t=>e.filter(r=>u(r.enabled)!==!1).reduceRight((r,i)=>i.invert(r),t):void 0,getFormula:e.every(t=>t.getFormula!=null)?t=>e.reduce((r,i)=>i.enabled==null||i.enabled===!0?i.getFormula(r):f.if(r,i.enabled,a=>i.getFormula(a)),t):void 0,enabled:e.some(t=>t.enabled!=null)?S(()=>e.filter(t=>u(t.enabled)!==!1).length>0):void 0,description:e.some(t=>t.description!=null)?()=>e.filter(t=>u(t.enabled)!==!1).map(t=>u(t.description)||"??").filter(t=>t).map(t=>q(t)):void 0}})}const ae=Y({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(n){return(e,t)=>(N(),I("div",{style:fe({width:e.width,height:e.height})},null,4))}});function j(n){return ce(e=>{const t=n.call(e),{visibility:r,cost:i,resource:a,requiresPay:l,cumulativeCost:o,maxBulkAmount:c,directSum:d,pay:b}=t,p={resource:a,visibility:E(r)??He.Visible,cost:E(i),requiresPay:E(l)??!0,cumulativeCost:E(o)??!0,maxBulkAmount:E(c)??1,directSum:E(d),partialDisplay:y=>m("span",{style:s.gt(u(p.requirementMet),0)?"":"color: var(--danger)"},[Qt(a,p.cost instanceof f?Wt(p.cost,y??1,u(p.cumulativeCost),u(p.directSum)):u(p.cost))," ",a.displayName]),display:y=>m("div",null,[u(p.requiresPay)?"Costs: ":"Requires: ",Qt(a,p.cost instanceof f?Wt(p.cost,y??1,u(p.cumulativeCost),u(p.directSum)):u(p.cost))," ",a.displayName]),canMaximize:S(()=>{if(!(p.cost instanceof f))return!1;const y=u(p.maxBulkAmount);if(s.lte(y,1))return!1;const g=u(p.cumulativeCost),w=u(p.directSum)??(g?10:0);return s.lte(y,w)?!0:!(!p.cost.isInvertible()||g===!0&&!p.cost.isIntegrable())}),requirementMet:i instanceof f?Bs(i,a,o??!0,d,c):S(()=>s.gte(a.value,u(p.cost))?1:0),pay:b??function(y){const g=p.cost instanceof f?Wt(p.cost,y??1,u(p.cumulativeCost),u(p.directSum)):u(p.cost);a.value=s.sub(a.value,g).max(0)}};return p})}function Nt(n,e){return ce(()=>{const t=E(n),r=E(e);return{requirementMet:S(()=>s.gte(u(t),u(r))),requiresPay:!1,visibility:!1}})}function Mn(n){return ce(()=>({requirementMet:S(()=>_t(n)),visibility:He.None,requiresPay:!1}))}function Co(n,e){return ce(()=>({requirementMet:E(n),partialDisplay:void 0,display:void 0,visibility:He.None,requiresPay:!1}))}function on(n){if(Array.isArray(n))return n.every(on);const e=u(n.requirementMet);return typeof e=="boolean"?e:s.gt(e,0)}function Cr(n){if(Array.isArray(n))return n.map(Cr).reduce(s.min);const e=u(n.requirementMet);return typeof e=="boolean"?e?s.dInf:0:s.gt(e,1)&&u(n.canMaximize)!==!0?1:e}function bt(n,e=1){var t;if(Array.isArray(n)&&(n=n.filter(r=>_t(r.visibility??!0)),n.length===1&&(n=n[0])),Array.isArray(n)){n=n.filter(a=>"partialDisplay"in a);const r=n.filter(a=>u(a.requiresPay)),i=n.filter(a=>!u(a.requiresPay));return m(R,null,[r.length>0?m("div",null,[k("Costs:")," ",Tt(r.map(a=>a.partialDisplay(e)),m(R,null,[k(", ")]))]):null,i.length>0?m("div",null,[k("Requires:")," ",Tt(i.map(a=>a.partialDisplay(e)),m(R,null,[k(", ")]))]):null])}return((t=n.display)==null?void 0:t.call(n))??m(R,null,null)}function kr(n,e=1){var t;Array.isArray(n)?n.filter(r=>u(r.requiresPay)).forEach(r=>{var i;return(i=r.pay)==null?void 0:i.call(r,e)}):u(n.requiresPay)&&((t=n.pay)==null||t.call(n,e))}const ko=Symbol("Upgrade");function ee(n){const e=Ze(!1,!1);return ce(()=>{const t=n(),{requirements:r,display:i,onHold:a,...l}=t;if(t.classes==null)t.classes=S(()=>({bought:u(b.bought)}));else{const p=E(t.classes);t.classes=S(()=>({...u(p),bought:u(b.bought)}))}const o=Re("upgrade",t,()=>m(Nn,{onClick:b.purchase,onHold:b.onHold,canClick:b.canPurchase,display:b.display},null)),c=Array.isArray(r)?r:[r];o.visibility!=null&&c.push(Mn(o.visibility));let d;if(typeof i=="object"&&!mt(i)){const{title:p,description:y,effectDisplay:g}=i;d=()=>m("span",null,[p!=null?m("div",null,[q(p,w=>m("h3",null,[w]))]):null,q(y,w=>m("div",null,[w])),g!=null?m("div",null,[k("Currently: "),q(g)]):null,e.value?null:m(R,null,[m("br",null,null),bt(c)])])}else i!=null&&(d=i);const b={type:ko,...l,...o,bought:e,canPurchase:S(()=>!e.value&&on(c)),requirements:c,display:d,onHold:a,purchase(){var p;u(b.canPurchase)&&(kr(c),e.value=!0,(p=t.onPurchase)==null||p.call(t))}};return b})}const zn="S",yt=st(zn,n=>{const e="Solar",t="#FFCC33",r=Ie(1,"solar energy"),i=vr(r),a=qt(r),l=sn(()=>({thingsToReset:()=>[yt]})),o=an(()=>({layerID:zn,color:t,reset:l})),c=ee(()=>({requirements:j(()=>({resource:O(r),cost:1})),display:{description:()=>c.bought.value?"Mercury Unlocked":"Unlock Mercury"}}));return{name:e,energy:r,best:i,total:a,color:t,mercuryUpgrade:c,display:()=>m(R,null,[m("h2",null,[k("You have "),V(r.value),k(" solar energy")]),m("h4",null,[k("You have made a total of "),V(a.value)]),m(ae,null,null),q(c)]),treeNode:o}});pe.on("setupVue",n=>n.use(Hr));function No(n="white",e="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${e} ${n}`,zIndex:1}}const Mo=Y({__name:"TabButton",props:{display:{},floating:{},glowColor:{},active:{type:Boolean},style:{}},emits:["selectTab"],setup(n,{emit:e}){const t=n,r=e,i=()=>q(t.display),a=S(()=>{const c=u(t.glowColor);let d={};return c&&(d={boxShadow:`0px 9px 5px -6px ${c}`}),u(t.active)&&l.value&&(d=No(c)),{...t.style,...d}}),l=S(()=>at[W.theme].floatingTabs||t.floating);function o(){r("selectTab")}return(c,d)=>(N(),I("button",{onClick:o,class:re(["tabButton",{active:c.active}]),style:fe(a.value)},[m(i)],6))}}),So=te(Mo,[["__scopeId","data-v-25d6a2c0"]]),xo=Y({__name:"Sticky",setup(n){const e=F("0"),t=new ResizeObserver(i),r=Lt(null);function i(){let a=r.value;if(a==null)return;let l=0;for(;a.previousSibling;){const o=a.previousSibling;o.dataset&&"vSticky"in o.dataset&&(l+=o.offsetHeight),a=o}e.value=l+"px"}return pt(i),document.fonts.ready.then(i),Ft(()=>{var l;const a=(l=r.value)==null?void 0:l.parentElement;a&&t.observe(a)}),(a,l)=>(N(),I("div",{class:"sticky",style:fe({top:e.value}),ref_key:"element",ref:r,"data-v-sticky":""},[_e(a.$slots,"default",{},void 0,!0)],4))}}),Io=te(xo,[["__scopeId","data-v-10a04be9"]]),hn=Symbol("Tab");function rt(n){return ce(()=>{const e=(n==null?void 0:n())??{},{display:t,...r}=e;return{type:hn,...r,...Re("tab",e,t),display:t}})}const To=Y({__name:"TabFamily",props:{activeTab:{},tabs:{},buttonContainerClasses:{},buttonContainerStyle:{},floating:{}},setup(n){const e=n,t=()=>{const o=u(e.activeTab);if(o!=null)return q(o)},r=S(()=>at[W.theme].floatingTabs||u(e.floating)),i=()=>Object.values(e.tabs).map(o=>q(o)),a=S(()=>{const o=u(e.activeTab);if(Gn(o,hn))return u(o.classes)}),l=S(()=>{const o=u(e.activeTab);if(Gn(o,hn))return u(o.style)});return(o,c)=>(N(),I("div",{class:re(["tab-family-container",a.value]),style:fe(l.value)},[m(Io,{class:re(["tab-buttons-container",[u(o.buttonContainerClasses),{floating:r.value}]]),style:fe(u(o.buttonContainerStyle))},{default:L(()=>[v("div",{class:re(["tab-buttons",{floating:r.value}])},[m(i)],2)]),_:1},8,["class","style"]),u(o.activeTab)!=null?(N(),ne(t,{key:0})):_("",!0)],6))}}),Ao=te(To,[["__scopeId","data-v-41130dd7"]]),$o=Symbol("TabButton"),Eo=Symbol("TabFamily");function Nr(n,e){Object.keys(n).length===0&&console.error("Cannot create tab family with 0 tabs");const t=Ze(Object.keys(n)[0],!1);return ce(()=>{const r=(e==null?void 0:e())??{},{buttonContainerClasses:i,buttonContainerStyle:a,buttonStyle:l,floating:o,...c}=r,d={type:Eo,...c,...Re("tabFamily",r,()=>m(Ao,{floating:d.floating,activeTab:d.activeTab,tabs:d.tabs,buttonContainerClasses:d.buttonContainerClasses,buttonContainerStyle:d.buttonContainerStyle},null)),tabs:Object.keys(n).reduce((b,p)=>{const y=n[p](),{tab:g,glowColor:w,display:M,...x}=y,A={type:$o,...x,...Re("tabButton",y,()=>m(So,{floating:d.floating,style:d.buttonStyle,display:A.display,glowColor:A.glowColor,active:u(A.tab)===u(d.activeTab),onSelectTab:()=>d.selected.value=p},null)),tab:g,glowColor:E(w),display:M};return b[p]=A,b},{}),buttonContainerClasses:E(i),buttonContainerStyle:E(a),buttonStyle:E(l),floating:E(o),selected:t,activeTab:S(()=>{if(t.value in d.tabs&&_t(d.tabs[t.value].visibility??!0))return u(d.tabs[t.value].tab);const b=Object.values(d.tabs).find(p=>_t(p.visibility??!0));return b!=null?u(b.tab):null})};return d})}const Mr=Symbol("Repeatable");function Fe(n){const e=Ze(0);return ce(()=>{const t=n(),{requirements:r,display:i,limit:a,onClick:l,initialAmount:o,clickableStyle:c,...d}=t;if(t.classes==null)t.classes=S(()=>({bought:u(w.maxed)}));else{const M=E(t.classes);t.classes=S(()=>({...u(M),bought:u(w.maxed)}))}const b=Re("repeatable",t,()=>m(Nn,{style:w.clickableStyle,canClick:w.canClick,onClick:w.onClick,onHold:w.onClick,display:w.display},null)),p={requirementMet:S(()=>s.sub(u(w.limit),u(e))),requiresPay:!1,visibility:He.None,canMaximize:!0},y=[...Array.isArray(r)?r:[r],p];b.visibility!=null&&y.push(Mn(b.visibility));let g;if(typeof i=="object"&&!mt(i)){const{title:M,description:x,effectDisplay:A,showAmount:D}=i;g=()=>m("span",null,[M==null?null:m("div",null,[q(M,B=>m("h3",null,[B]))]),q(x),D===!1?null:m("div",null,[m("br",null,null),m(R,null,[k("Amount: "),Dt(u(e))]),s.isFinite(u(w.limit))?m(R,null,[k(" / "),Dt(u(w.limit))]):void 0]),A==null?null:m("div",null,[m("br",null,null),k("Currently: "),q(A)]),u(w.maxed)?null:m("div",null,[m("br",null,null),bt(y,u(w.amountToIncrease))])])}else i!=null&&(g=i);e[Ae]=o??0;const w={type:Mr,...d,...b,amount:e,requirements:y,initialAmount:o,clickableStyle:c,limit:E(a)??s.dInf,classes:S(()=>{const M=u(b.classes)||{};return u(w.maxed)&&(M.bought=!0),M}),maxed:S(()=>s.gte(u(e),u(w.limit))),canClick:S(()=>on(y)),amountToIncrease:S(()=>s.clampMin(Cr(y),1)),purchase(M=!0){if(!u(w.canClick))return;const x=u(w.amountToIncrease)??1;M&&kr(y,x),e.value=s.add(u(e),x)},onClick(M){u(w.canClick)&&(w.purchase(),l==null||l(M))},display:g};return w})}function Do(n,e,t=[],r,i=!0){t=t.length===0?Js(n,Mr):t;const a=ir(e)?S(e):e,l=Number.MAX_SAFE_INTEGER;n.on("update",()=>{u(a)&&t.forEach(o=>{s.gte(o.amount.value,u(l))||o.purchase(i)})})}const Po=Symbol("Conversion");function Sr(n){return ce(()=>{const e=n(),{baseResource:t,gainResource:r,formula:i,currentGain:a,actualGain:l,currentAt:o,nextAt:c,convert:d,spend:b,buyMax:p,onConvert:y,...g}=e,w=a==null?S(()=>{let x=s.floor(M.formula.evaluate(t.value)).max(0);return u(M.buyMax)===!1&&(x=x.min(1)),x}):E(a),M={type:Po,...g,baseResource:t,gainResource:r,formula:i(f.variable(t)),currentGain:w,actualGain:l==null?w:E(l),currentAt:o==null?S(()=>M.formula.invert(s.floor(u(M.currentGain)))):E(o),nextAt:c==null?S(()=>M.formula.invert(s.floor(u(M.currentGain)).add(1))):E(c),convert:d??function(){const x=u(M.currentGain);r.value=s.add(r.value,x),M.spend(x),y==null||y(x)},spend:b??(()=>t.value=0),buyMax:E(p)??!0,onConvert:y};return M})}function qo(n){return Sr(n)}function _o(n){const e=Sr(()=>{const t=n();return t.buyMax??(t.buyMax=!1),t.currentGain??(t.currentGain=S(()=>{let r=s.floor(e.formula.evaluate(t.baseResource.value)).max(t.gainResource.value);return u(t.buyMax)===!1&&(r=r.min(s.add(t.gainResource.value,1))),r})),t.actualGain??(t.actualGain=S(()=>{let r=s.sub(e.formula.evaluate(t.baseResource.value),t.gainResource.value).floor().max(0);return u(t.buyMax)===!1&&(r=r.min(1)),r})),t.convert??(t.convert=function(){var i;const r=u(e.actualGain);t.gainResource.value=u(e.currentGain),e.spend(r),(i=e.onConvert)==null||i.call(e,r)}),t});return e}function Ro(n,e,t=1,r=s.dInf){const i=E(t),a=E(r);n.on("preUpdate",l=>{const o=u(i);s.neq(o,0)&&(e.gainResource.value=s.add(e.gainResource.value,s.times(o,l).times(s.ceil(u(e.actualGain)))).min(u(a)).max(e.gainResource.value))})}const Fo=Y({__name:"Bar",props:{width:{},height:{},direction:{},borderStyle:{},baseStyle:{},textStyle:{},fillStyle:{},containerStyle:{},progress:{},display:{}},setup(n){const e=n;console.log(e.containerStyle);const t=S(()=>{const o=e.width;return typeof o=="string"?o:`${o}px`}),r=S(()=>{const o=e.height;return typeof o=="string"?o:`${o}px`}),i=S(()=>{const o=u(e.progress),c=o instanceof s?o.toNumber():Number(o);return(1-Math.min(Math.max(c,0),1))*100}),a=S(()=>{const o={width:`calc(${t.value} + 0.5px)`,height:`calc(${r.value} + 0.5px)`};switch(e.direction){case X.Up:o.clipPath=`inset(${i.value}% 0% 0% 0%)`,o.width=`calc(${t.value} + 1px)`;break;case X.Down:o.clipPath=`inset(0% 0% ${i.value}% 0%)`,o.width=`calc(${t.value} + 1px)`;break;case X.Right:o.clipPath=`inset(0% ${i.value}% 0% 0%)`;break;case X.Left:o.clipPath=`inset(0% 0% 0% ${i.value}%)`;break;case X.Default:o.clipPath="inset(0% 50% 0% 0%)";break}return o}),l=()=>e.display?q(e.display):null;return(o,c)=>(N(),I("div",{style:fe([{width:t.value,height:r.value},u(o.containerStyle)??{}]),class:"bar"},[v("div",{class:"overlayTextContainer border",style:fe([{width:t.value,height:r.value},u(o.borderStyle)??{}])},[o.display?(N(),I("span",{key:0,class:"overlayText",style:fe(u(o.textStyle))},[m(l)],4)):_("",!0)],4),v("div",{class:"border",style:fe([{width:t.value,height:r.value},u(o.baseStyle)??{},u(o.borderStyle)??{}])},[v("div",{class:"fill",style:fe([a.value,u(o.fillStyle)??{}])},null,4)],4)],4))}}),Lo=te(Fo,[["__scopeId","data-v-537137c9"]]),Oo=Symbol("Bar");function Jt(n){return ce(()=>{const e=n==null?void 0:n(),{width:t,height:r,direction:i,borderStyle:a,baseStyle:l,containerStyle:o,textStyle:c,fillStyle:d,progress:b,display:p,...y}=e,g={type:Oo,...y,...Re("bar",e,()=>m(Lo,{width:g.width,height:g.height,direction:g.direction,borderStyle:g.borderStyle,baseStyle:g.baseStyle,textStyle:g.textStyle,fillStyle:g.fillStyle,progress:g.progress,display:g.display,containerStyle:g.containerStyle},null)),width:E(t),height:E(r),direction:E(i),borderStyle:E(a),baseStyle:E(l),textStyle:E(c),fillStyle:E(d),progress:E(b),containerStyle:E(o),display:p};return g})}function Mt(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!tn(n)}const jn="Ma",be=st(jn,n=>{const e="Mercury",t="#8c8c94",r={direction:X.Right,height:18,width:256},i={timer:Ie(0),resource:Ie(0,"Dust Accelerons"),gainComputed:S(()=>s.times(1,i.dustAcceleratorGainModifier.apply(1)).times(a.dustAcceleratorModifierEffect.value)),bar:Jt(()=>({...r,progress:()=>s.div(i.timer.value,i.timerMax.value)})),intervalBuyable:Fe(()=>({requirements:j(()=>({resource:O(me.mercurialDust),cost:()=>f.variable(i.intervalBuyable.amount.value).pow_base(5.3).times(5e5).evaluate(),requiresPay:!1})),clickableStyle:{minHeight:"0",width:"fit-content",paddingLeft:"12px",paddingRight:"12px"},display:()=>m(R,null,[m("div",null,[k("Decrease timer interval"),m("br",null,null),k("Currently: "),H(i.dustAcceleratorTimerMaxEffect.value),bt(i.intervalBuyable.requirements,u(i.intervalBuyable.amountToIncrease))])])})),timerMax:S(()=>s.div(120,i.dustAcceleratorTimerMaxEffect.value).div(i.acceleratingTheAcceleratorEffect.value).div(l.levelTwoTimeRaiseEffect.value).clampMin(.1)),isAtLeastLevelOne:S(()=>s.gte(i.levelBuyable.amount.value,1)),isAtLeastLevelTwo:S(()=>s.gte(i.levelBuyable.amount.value,2)),isAtLeastLevelThree:S(()=>s.gte(i.levelBuyable.amount.value,3)),dustGainMultiplierModifier:ie(()=>[he(()=>({enabled:()=>s.gt(i.resource.value,0),multiplier:()=>s.add(i.resource.value,1).pow(.25).clampMin(1),description:"Dust Accelerons"}))]),dustAcceleratorGainModifier:ie(()=>[he(()=>({enabled:()=>i.isAtLeastLevelOne.value,multiplier:()=>s.add(i.resource.value,1).pow(.2).clampMin(1)}))]),dustAcceleratorDustRaiseEffect:S(()=>i.isAtLeastLevelTwo.value?s.add(i.resource.value,1).slog().pow(.1).clampMin(1):s.dOne),dustAcceleratorsGainComputed:S(()=>s.times(1,i.dustAcceleratorGainModifier.apply(1))),acceleratingTheAcceleratorEffect:S(()=>i.upgrades.second.bought.value?s.fromValue(f.variable(s.add(i.resource.value,1)).mul(.004).add(1).step(2,d=>d.pow(.1)).evaluate()):s.dOne),dustAcceleratorTimerMaxEffect:S(()=>s.gt(i.intervalBuyable.amount.value,0)?s.mul(i.intervalBuyable.amount.value,.025).add(1).clampMin(1):s.dOne),dustBuyableCapEffect:S(()=>s.add(i.resource.value,1).log2().sqrt().floor().clampMin(1)),levelBuyable:Fe(()=>({limit:3,requirements:j(()=>({requiresPay:!1,resource:O(i.resource),cost:f.variable(i.levelBuyable.amount).pow_base(5).times(100)})),display:{title:"Upgrade",description:"Reset Dust Accelerons to unlock a new effect."},onClick:()=>{i.resource.value=0}})),upgrades:{first:ee(()=>({requirements:j(()=>({resource:O(i.resource),cost:s.fromNumber(10)})),display:{title:"Speed Dust",description:"Unlock more Dust upgrades"}})),second:ee(()=>({requirements:j(()=>({resource:O(i.resource),cost:s.fromNumber(25)})),display:{title:"Accelerating the Accelerator",description:"Decrease timer interval based on accelerons",effectDisplay:()=>`/${H(i.acceleratingTheAcceleratorEffect.value)}`}})),chunksUnlock:ee(()=>({requirements:j(()=>({resource:O(i.resource),cost:s.fromNumber(100)})),display:{title:"je ne sais chunks",description:"Unlock Chunk Accelerons"}}))},tick:d=>{i.timer.value=s.add(i.timer.value,s.times(1,d)),s.gte(i.timer.value,i.timerMax.value)&&(i.timer.value=0,i.resource.value=s.add(i.resource.value,i.gainComputed.value))},levelEffectsDisplay:()=>{const d=[m("h5",null,[k("A x"),H(i.dustGainMultiplierModifier.apply(1)),k(" boost to Dust gain.")])];return i.isAtLeastLevelOne.value&&d.push(m("h5",null,[k("A x"),H(i.dustAcceleratorGainModifier.apply(1)),k(" boost to accelerons gain.")])),i.isAtLeastLevelTwo.value&&d.push(m("h5",null,[k("A ^"),H(i.dustAcceleratorDustRaiseEffect.value),k(" boost to dust gain.")])),i.isAtLeastLevelThree.value&&d.push(m("h5",null,[k("Adding +"),H(i.dustBuyableCapEffect.value),k(" to Dust buyable caps.")])),Tt(d,m(R,null,null))}},a={timer:Ie(0),resource:Ie(0,"Chunk Accelerons"),gainComputed:S(()=>s.times(1,a.acceleratorGainModifier.apply(1)).times(l.chunkAcceleronGainModifier.apply(1))),bar:Jt(()=>({...r,progress:()=>s.div(a.timer.value,a.timerMax.value)})),intervalBuyable:Fe(()=>({requirements:j(()=>({resource:O(oe.chunks),cost:()=>f.variable(a.intervalBuyable.amount.value).pow_base(1.2).times(30).floor().evaluate(),requiresPay:!1})),clickableStyle:{minHeight:"0",width:"fit-content",paddingLeft:"12px",paddingRight:"12px"},display:()=>m(R,null,[m("div",null,[k("Decrease timer interval"),m("br",null,null),k("Currently: "),H(a.intervalBuyableEffect.value),bt(a.intervalBuyable.requirements,u(a.intervalBuyable.amountToIncrease))])])})),timerMax:S(()=>s.fromNumber(120).div(a.intervalBuyableEffect.value).div(a.dustAcceleratorIntervalEffect.value).div(l.levelTwoTimeRaiseEffect.value)),dustAcceleratorIntervalEffect:S(()=>a.upgrades.chunksMeetDust.bought.value?s.add(i.resource.value,1).pow(.12).sqrt().clampMin(1):s.dOne),intervalBuyableEffect:S(()=>s.gt(a.intervalBuyable.amount.value,0)?s.mul(a.intervalBuyable.amount.value,.03).add(1).clampMin(1):s.dOne),levelBuyable:Fe(()=>({limit:3,requirements:j(()=>({requiresPay:!1,resource:O(a.resource),cost:f.variable(a.levelBuyable.amount).pow_base(3).times(30)})),display:{title:"Upgrade",description:"Reset Chunk Accelerons to unlock a new effect."},onClick:()=>{a.resource.value=0}})),upgrades:{moreChunkUpgrades:ee(()=>({requirements:j(()=>({resource:O(a.resource),cost:s.fromNumber(10)})),display:{title:"Speed Chunks",description:"Unlock more Chunk upgrades"}})),chunksMeetDust:ee(()=>({requirements:j(()=>({resource:O(a.resource),cost:s.fromNumber(25)})),display:{title:"Chunks, meet Dust",description:"Decrease timer interval based on Dust Accelerons",effectDisplay:()=>`÷${H(a.dustAcceleratorIntervalEffect.value)}`}})),timeUnlock:ee(()=>({requirements:j(()=>({resource:O(a.resource),cost:s.fromNumber(100)})),display:{title:"Time go brrr",description:"Unlock Time Accelerons"}}))},isAtLeastLevelOne:S(()=>s.gte(a.levelBuyable.amount.value,1)),isAtLeastLevelTwo:S(()=>s.gte(a.levelBuyable.amount.value,2)),isAtLeastLevelThree:S(()=>s.gte(a.levelBuyable.amount.value,3)),dustAcceleratorModifierEffect:S(()=>s.add(a.resource.value,1).log2().pow(a.levelThreeRaiseEffect.value).clampMin(1)),chunkCostDivisionEffect:S(()=>a.isAtLeastLevelTwo.value?s.add(a.resource.value,1).pow(.2).cbrt().pow(a.levelThreeRaiseEffect.value).clampMin(1):s.dOne),acceleratorGainModifier:ie(()=>[he(()=>({enabled:()=>a.isAtLeastLevelOne.value,multiplier:()=>s.add(a.resource.value,1).pow(.2).pow(a.levelThreeRaiseEffect.value).clampMin(1)}))]),levelThreeRaiseEffect:S(()=>a.isAtLeastLevelThree?s.add(a.resource.value,1).pow(.1).cbrt().clampMin(1):s.dOne),levelEffectsDisplay:()=>{const d=[m("h5",null,[k("A x"),H(a.dustAcceleratorModifierEffect.value),k(" boost to Dust Acceleron gain.")])];return a.isAtLeastLevelOne.value&&d.push(m("h5",null,[k("A x"),H(a.acceleratorGainModifier.apply(1)),k(" boost to Chunk Acceleron gain.")])),a.isAtLeastLevelTwo.value&&d.push(m("h5",null,[k("Reduces Chunk cost by ÷"),H(a.chunkCostDivisionEffect.value),k(".")])),a.isAtLeastLevelThree.value&&d.push(m("h5",null,[k("Raising above effects by ^"),H(a.levelThreeRaiseEffect.value),k(".")])),Tt(d,m(R,null,null))},tick:d=>{a.timer.value=s.add(a.timer.value,s.times(1,d)),s.gte(a.timer.value,a.timerMax.value)&&(a.timer.value=0,a.resource.value=s.add(a.resource.value,a.gainComputed.value))}},l={timer:Ie(0),resource:Ie(0,"time Accelerons"),gainComputed:S(()=>s.times(1,l.finalCountdownEffect.value)),bar:Jt(()=>({...r,progress:()=>s.div(l.timer.value,l.timerMax.value)})),acceleronTimerDivisionModifier:S(()=>s.add(l.resource.value,1).log2().sqrt().pow(l.levelThreeRaiseEffect.value).clampMin(1)),timerMax:S(()=>s.fromNumber(120).div(l.acceleronTimerDivisionModifier.value).div(l.doomsdayClockEffect.value).div(l.levelTwoTimeRaiseEffect.value)),levelBuyable:Fe(()=>({limit:3,requirements:j(()=>({requiresPay:!1,resource:O(l.resource),cost:f.variable(l.levelBuyable.amount).pow_base(5).times(10)})),display:{title:"Upgrade",description:"Reset Time Accelerons to unlock a new effect."},onClick:()=>{l.resource.value=0}})),upgrades:{autoVonDoom:ee(()=>({requirements:j(()=>({resource:O(l.resource),cost:s.fromNumber(10)})),display:{title:"Auto Von Doom",description:"Automate Accelerator Interval Buyables"}})),doomsDayClock:ee(()=>({requirements:j(()=>({resource:O(l.resource),cost:s.fromNumber(25)})),display:{title:"Doomsday Clock",description:"Reduce interval based on collision time rate",effectDisplay:()=>`÷${H(l.doomsdayClockEffect.value)}`}})),finalCountdown:ee(()=>({requirements:j(()=>({resource:O(l.resource),cost:s.fromNumber(100)})),display:{title:"Final Countdown",description:"Multiply Time Acceleron gain based on collision time rate",effectDisplay:()=>`÷${H(l.finalCountdownEffect.value)}`}})),bringItHome:ee(()=>({requirements:j(()=>({resource:O(l.resource),cost:s.fromNumber(500)})),display:{title:"Bring It Home",description:"Multiply Collision Time based on itself",effectDisplay:()=>`x${H(l.bringItHomeEffect.value)}`}}))},doomsdayClockEffect:S(()=>l.upgrades.doomsDayClock.bought.value?s.add(Me.collisionTimeGainComputed.value,1).log10().cbrt().clampMin(1):s.dOne),finalCountdownEffect:S(()=>l.upgrades.finalCountdown.bought.value?s.add(Me.collisionTimeGainComputed.value,1).log(8).sqrt().clampMin(1):s.dOne),bringItHomeEffect:S(()=>l.upgrades.bringItHome.bought.value?s.add(l.resource.value,1).pow(.1).cbrt().clampMin(1):s.dOne),isAtLeastLevelOne:S(()=>s.gte(l.levelBuyable.amount.value,1)),isAtLeastLevelTwo:S(()=>s.gte(l.levelBuyable.amount.value,2)),isAtLeastLevelThree:S(()=>s.gte(l.levelBuyable.amount.value,3)),chunkAcceleratorModifierEffect:S(()=>s.add(a.resource.value,1).log2().clampMin(1)),chunkAcceleronGainModifier:ie(()=>[he(()=>({enabled:l.isAtLeastLevelOne,multiplier:()=>s.add(l.resource.value,1).log2().sqrt().pow(l.levelThreeRaiseEffect.value).clampMin(1)}))]),levelTwoTimeRaiseEffect:S(()=>l.isAtLeastLevelTwo?s.add(l.resource.value,10).log10().pow(.25).cbrt().pow(l.levelThreeRaiseEffect.value).clampMin(1):s.dOne),levelThreeRaiseEffect:S(()=>l.isAtLeastLevelThree?s.add(l.resource.value,10).log10().pow(.1).sqrt().add(l.bringItHomeEffect.value).clampMin(1):s.dOne),levelEffectsDisplay:()=>{const d=[m("h5",null,[k("Decreasing the timer interval by ÷"),H(l.acceleronTimerDivisionModifier.value),k(".")])];return l.isAtLeastLevelOne.value&&d.push(m("h5",null,[k("A x"),H(l.chunkAcceleronGainModifier.apply(1)),k(" boost to Chunk Acceleron gain.")])),l.isAtLeastLevelTwo.value&&d.push(m("h5",null,[k("Raising the rate of time by ^"),H(l.levelTwoTimeRaiseEffect.value),k(".")])),l.isAtLeastLevelThree.value&&d.push(m("h5",null,[k("Raising previous effects by ^"),H(l.levelThreeRaiseEffect.value),k(".")])),Tt(d,m(R,null,null))},tick:d=>{l.timer.value=s.add(l.timer.value,s.times(1,d)),s.gte(l.timer.value,l.timerMax.value)&&(l.timer.value=0,l.resource.value=s.add(l.resource.value,l.gainComputed.value))}};n.on("preUpdate",d=>{i.tick(d),a.tick(d),l.tick(d)});const o=ce(()=>(Do(be,l.upgrades.autoVonDoom.bought,[i.intervalBuyable,a.intervalBuyable]),{})),c=Nr({dust:()=>({display:"Dust",tab:rt(()=>({display:()=>{let d,b;return m(R,null,[m("h2",null,[H(i.resource.value),k(" Dust Accelerons")]),m("h6",null,[k("You are gaining "),H(i.gainComputed.value),k(" every "),H(i.timerMax.value),k(" seconds.")]),m(ae,null,null),q(i.bar),m(ae,null,null),m("h4",null,[k("You have "),H(me.mercurialDust.value),k(" mercurial dust.")]),m(vn,null,Mt(d=q(i.intervalBuyable))?d:{default:()=>[d]}),m(ae,null,null),m("h4",null,[k("Granting you:")]),q(i.levelEffectsDisplay),m(ae,null,null),q(i.levelBuyable),m(ae,null,null),m("h4",null,[k("Upgrades")]),m(ze,null,Mt(b=nt(i.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?b:{default:()=>[b]})])}}))}),chunks:()=>({display:"Chunks",visibility:i.upgrades.chunksUnlock.bought,tab:rt(()=>({display:()=>{let d,b;return m(R,null,[m("h2",null,[H(a.resource.value),k(" Chunk Accelerons")]),m("h6",null,[k("You are gaining "),H(a.gainComputed.value),k(" every "),H(a.timerMax.value),k(" seconds.")]),m(ae,null,null),q(a.bar),m(ae,null,null),m("h4",null,[k("You have "),H(oe.chunks.value),k(" mercurial chunks.")]),m(vn,null,Mt(d=q(a.intervalBuyable))?d:{default:()=>[d]}),m(ae,null,null),m("h4",null,[k("Granting you:")]),q(a.levelEffectsDisplay),m(ae,null,null),q(a.levelBuyable),m(ae,null,null),m("h4",null,[k("Upgrades")]),m(ze,null,Mt(b=nt(a.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?b:{default:()=>[b]})])}}))}),time:()=>({display:"Time",visibility:a.upgrades.timeUnlock.bought,tab:rt(()=>({display:()=>{let d;return m(R,null,[m("h2",null,[H(l.resource.value),k(" time Accelerons")]),m("h6",null,[k("You are gaining "),H(l.gainComputed.value),k(" every "),H(l.timerMax.value),k(" seconds.")]),m(ae,null,null),q(l.bar),m(ae,null,null),m("h4",null,[k("Granting you:")]),q(l.levelEffectsDisplay),m(ae,null,null),q(l.levelBuyable),m(ae,null,null),m("h4",null,[k("Upgrades")]),m(ze,null,Mt(d=nt(l.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?d:{default:()=>[d]})])}}))})},()=>({floating:!0,buttonStyle:{border:"solid 2px",borderRadius:"12px"}}));return{id:jn,name:e,color:t,dustAccelerator:i,chunkAccelerator:a,timeAccelerator:l,tabs:c,autoIntervalBuyers:o,display:()=>m(R,null,[q(c)])}});function Vo(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!tn(n)}const gn="Mc",oe=st(gn,n=>{const e="Mercury Chunks",t="#68696d",r=Ie(0,"mercurial chunks"),i=qt(r),a=_o(()=>{const M=S(()=>s.clampMin(c.apply(0),1));return{formula:x=>x.mul(M).mul(be.chunkAccelerator.chunkCostDivisionEffect).mul(b).div(1e3).step(1,A=>A.div(25)).step(10,A=>A.sqrt().div(1e3).div(i).pow(.1)).step(30,A=>A.sqrt()),baseResource:me.mercurialDust,currentGain:S(()=>s.floor(a.formula.evaluate(me.totalMercurialDust.value)).max(r.value).min(s.add(r.value,1))),actualGain:S(()=>s.sub(a.formula.evaluate(me.totalMercurialDust.value),r.value).floor().max(0).min(1)),gainResource:O(r),spend:()=>{}}}),l=ce(M=>(ye(me.mercurialDust,()=>{p.autoChunks.bought.value&&a.convert()}),{})),o=ie(()=>[dt(()=>({enabled:p.chuckingChunks.bought,addend:()=>i.value,description:"Chuckin' Chunks"}))]),c=ie(()=>[dt(()=>({enabled:p.lovingChunks.bought,addend:()=>s.add(me.mercurialDust.value,1).log10().pow(.2),description:"Lovin' Chunks"}))]),d=S(()=>p.collidingChunks.bought.value?s.add(i.value,1).log10().sqrt().clampMin(1):s.dOne),b=S(()=>p.fuckingChunks.bought.value?s.add(Me.collisionTimeGainComputed.value,1).log10().cbrt().clampMin(1):s.dOne),p={chuckingChunks:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(3)})),display:{title:"Chuckin' Chunks",description:"Increase base reset time by your total chunks",effectDisplay:()=>`+${V(o.apply(0))}`}})),grindingChunks:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(3)})),display:{title:"Grindin' Chunks",description:"Gain dust per second equal to your total chunks",effectDisplay:()=>`${V(i.value)}/s`}})),lovingChunks:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(3)})),display:{title:"Lovin' Chunks",description:"Reduce chunk cost based on dust",effectDisplay:()=>`+${V(c.apply(0))}`}})),autoChunks:ee(()=>({visibility:be.chunkAccelerator.upgrades.moreChunkUpgrades.bought,requirements:j(()=>({resource:O(r),cost:s.fromNumber(35)})),display:{title:"Autoin' Chunks",description:"Automatically reset for chunks, and they reset nothing."}})),collidingChunks:ee(()=>({visibility:be.chunkAccelerator.upgrades.moreChunkUpgrades.bought,requirements:j(()=>({resource:O(r),cost:s.fromNumber(55)})),display:{title:"Collidin' Chunks",description:"Raise collision time rate based on chunks",effectDisplay:()=>`^${V(d.value)}`}})),fuckingChunks:ee(()=>({visibility:be.chunkAccelerator.upgrades.moreChunkUpgrades.bought,requirements:j(()=>({resource:O(r),cost:s.fromNumber(90)})),display:{title:"Fuckin' Chunks",description:"Reduce chunk cost based on collision time rate",effectDisplay:()=>`÷${V(b.value)}`}}))},y=an(()=>({layerID:gn,color:t,reset:g,display:"C",classes:{small:!0}})),g=sn(()=>({thingsToReset:()=>[me,Me]})),w=hr(()=>({conversion:a,tree:xn.tree,treeNode:y,resetDescription:()=>"Condense your dust & time for ",onClick:()=>{me.reset.reset()}}));return{id:gn,name:e,color:t,reset:g,resetButton:w,chunks:r,totalChunks:i,conversion:a,upgrades:p,chuckingChunksModifier:o,treeNode:y,collidingChunksEffect:d,autoChunker:l,display:()=>{let M;return m(R,null,[m("h2",null,[k("You have "),V(r.value),k(" mercurial chunks")]),m("h4",null,[k("You have condensed a total of "),V(i.value)]),m("h6",null,[k("You have gathered a total of "),V(me.totalMercurialDust.value)]),m(ae,null,null),q(w),m(ae,null,null),m("h3",null,[k("Upgrades")]),m(ae,null,null),m(ze,null,Vo(M=br(Object.values(p),4).map(x=>ro.apply(null,x)))?M:{default:()=>[M]})])}}}),Bo={class:"field"},Uo={key:0,class:"field-title"},Sn=Y({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,i=()=>t.title?q(t.title,o=>m("span",null,[o])):m(R,null,null),a=F(t.options.find(o=>o.value===t.modelValue)??null);ye(it(t,"modelValue"),o=>{u(a)!==o&&(a.value=t.options.find(c=>c.value===o)??null)});function l(o){r("update:modelValue",o.value)}return(o,c)=>(N(),I("div",Bo,[o.title?(N(),I("span",Uo,[m(i)])):_("",!0),m(u(Wr),{options:o.options,modelValue:a.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>a.value=d),l],min:1,placeholder:o.placeholder,"close-on-select":o.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}}),Go=Y({__name:"Achievement",props:{display:{},earned:{},requirements:{},image:{},small:{}},setup(n){const e=n,t=()=>e.display==null?m(R,null,null):q(e.display);return(r,i)=>(N(),I("button",{style:fe({backgroundImage:u(r.earned)&&u(r.image)&&`url(${r.image})`||""}),class:re({achievement:!0,locked:!u(r.earned),done:u(r.earned),small:u(r.small)})},[m(t)],6))}}),zo=te(Go,[["__scopeId","data-v-13cff920"]]),jo=er(),Ho=Symbol("Achievement");let ft=function(n){return n.All="all",n.Configurable="configurable",n.Incomplete="incomplete",n.None="none",n}({});function St(n){const e=Ze(!1,!1);return ce(()=>{const t=(n==null?void 0:n())??{},{requirements:r,display:i,small:a,image:l,showPopups:o,onComplete:c,...d}=t,b=Re("achievement",t,()=>m(zo,{display:y.display,earned:y.earned,requirements:y.requirements,image:y.image,small:y.small},null));let p;if(typeof i=="object"&&!mt(i)){const{requirement:g,effectDisplay:w,optionsDisplay:M}=i;p=()=>m("span",null,[g==null?bt(r??[]):q(g,x=>m("h3",null,[x])),w==null?null:m("div",null,[q(w,x=>m("b",null,[x]))]),M!=null?m("div",{class:"equal-spaced"},[q(M)]):null])}else i!=null&&(p=i);const y={type:Ho,...d,...b,visibility:S(()=>{switch(W.msDisplay){default:case ft.All:return u(b.visibility)??!0;case ft.Configurable:return u(e)&&!(i!=null&&typeof i=="object"&&!mt(i))?He.None:u(b.visibility)??!0;case ft.Incomplete:return u(e)?He.None:u(b.visibility)??!0;case ft.None:return He.None}}),earned:e,onComplete:c,small:E(a),image:E(l),showPopups:E(o)??!0,display:p,requirements:r==null?void 0:[Mn(b.visibility??!0),Co(()=>!e.value),...Array.isArray(r)?r:[r]],complete(){var g;if(!e.value&&(e.value=!0,(g=y.onComplete)==null||g.call(y),y.display!=null&&u(y.showPopups)===!0)){let w=y.display;typeof i=="object"&&!mt(i)&&(i.requirement!=null?w=i.requirement:w=bt(r??[])),jo.info(m("div",null,[m("h3",null,[k("Achievement earned!")]),m("div",null,[q(w)])]))}}};return y.requirements!=null&&Xn(()=>{W.active===$.id&&on(y.requirements??[])&&y.complete()}),y})}pe.on("loadSettings",n=>{n.msDisplay??(n.msDisplay=ft.All)});const Wo=Object.values(ft).map(n=>({label:rr(n),value:n}));pe.on("setupVue",()=>tl(()=>m(Sn,{title:m("span",{class:"option-title"},[k("Show achievements"),m("desc",null,[k("Select which achievements to display based on criterias.")])]),options:Wo,"onUpdate:modelValue":n=>W.msDisplay=n,modelValue:W.msDisplay},null)));const Yo="Mm",Ee=st(Yo,n=>{const e="Mercury",t="#8c8c94",r=ie(()=>[he(()=>({multiplier:()=>s.times(1.5,oe.totalChunks.value).clampMin(1),enabled:l.first.earned,description:"First Chunk Milestone"}))]),i=S(()=>l.four.earned.value?s.add(oe.totalChunks.value,1).slog().pow(.5).clampMin(1):s.dOne),a=S(()=>Object.values(l).filter(o=>o.earned.value).length),l={first:St(()=>({requirements:Nt(oe.totalChunks,1),display:{requirement:"1 Mercurial Chunk",effectDisplay:()=>`x${V(r.apply(1))}`,optionsDisplay:()=>m(R,null,[k("Unlock the `Dust Piles` buyable"),m("br",null,null),k("Boost time by x1.5 per total chunk")])}})),second:St(()=>({requirements:Nt(oe.totalChunks,2),display:{requirement:"2 Total Mercurial Chunks",optionsDisplay:"Keep 1 Dust upgrade per milestone achieved.",effectDisplay:()=>`${a.value} upgrades are kept`}})),three:St(()=>({requirements:Nt(oe.totalChunks,3),display:{requirement:"3 Total Mercurial Chunks",optionsDisplay:"Unlock Chunk Upgrades"}})),four:St(()=>({requirements:Nt(oe.totalChunks,10),display:{requirement:"10 Total Mercurial Chunks",optionsDisplay:"Raise time rate by total chunks at a heavily reduced rate.",effectDisplay:()=>`^${V(i.value)}`}})),five:St(()=>({requirements:Nt(oe.totalChunks,20),display:{requirement:"20 Total Mercurial Chunks",optionsDisplay:"Keep some buyable levels on reset equal to your total chunks.",effectDisplay:()=>`Up to ${oe.totalChunks.value} buyable levels are kept.`}}))};return{name:e,color:t,milestones:l,completedMilestonesCount:a,firstMilestoneModifier:r,fourthMilestoneModifier:i,display:()=>m(R,null,[m("h4",null,[k("You have condensed "),V(oe.totalChunks.value),k(" total chunks.")]),Object.values(l).map(o=>q(o))])}});function zt(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!tn(n)}const Hn="Md",me=st(Hn,n=>{const e="Mercury",t="#b1adad",r=Ie(0,"mercurial dust",2),i=qt(r),a=Ie(0),l=qt(a),o=O(yt.mercuryUpgrade.bought),c={messengerGodUpgrade:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(50)})),display:{title:"The Messenger God",description:"Multiply time since last reset rate",effectDisplay:()=>`x${V(ve.apply(1))}`}})),slippingTimeUpgrade:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(100)})),display:{title:"Slippery Time",description:"Multiplies rate of reset time based on time since last reset.",effectDisplay:()=>`x${V(ke.apply(1))}`}})),collisionCourse:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(250)})),display:{title:"Collision Course",description:"Raise last reset time gain based on dust",effectDisplay:()=>`^${V(Ke.value)}`}})),acummulatingDust:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e3)})),display:{title:"Accumulating Dust",description:"Multiply dust gain based on current dust",effectDisplay:()=>`x${V(A.apply(1))}`}})),totalUpgrade:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(2e3)})),display:{title:"Seasoned Dust",description:"Increases base time speed by total time since last reset.",effectDisplay:()=>`+${V(D.apply(0))}`}})),killingTime:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(5e3)})),display:{title:"Killin' Time",description:"For every 1000 seconds of last reset time, gain +0.1 base dust gain",effectDisplay:()=>`+${V($n.apply(0))}`}})),accelerationUpgrade:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e4)})),display:{title:"Acceleration",description:"Multiply time until collision rate based on time since last reset",effectDisplay:()=>`x${V(En.apply(1))}`}})),latestUpgrade:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(25e3)})),display:{title:"Acceleration 2: This time it's personal",description:"Multiply last reset time rate based on collision time rate.",effectDisplay:()=>`x${V(y.apply(1))}`}}))},d=ie(()=>[he(()=>({enabled:w.chunkingTime.bought,multiplier:()=>s.add(oe.totalChunks.value,1).sqrt().clampMin(1)}))]),b=ie(()=>[he(()=>({enabled:w.iHateDinosaurs.bought,multiplier:()=>s.add(oe.totalChunks.value,1).log(2).pow(1.2).clampMin(1)}))]),p=ie(()=>[he(()=>({enabled:w.fedexManager.bought,multiplier:()=>s.add(oe.totalChunks.value,1).log2().clampMin(1)}))]),y=ie(()=>[he(()=>({enabled:c.latestUpgrade.bought,multiplier:()=>s.add(Me.collisionTimeGainComputed.value,1).log10().cbrt().clampMin(1)}))]),g=ie(()=>[he(()=>({enabled:w.dustBunnies.bought,multiplier:()=>s.add(oe.totalChunks.value,1).log2().pow(1.1).clampMin(1)}))]),w={chunkingTime:ee(()=>({visibility:()=>be.dustAccelerator.upgrades.first.bought.value,requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e30)})),display:{title:"It's Chunkin' time",description:`Multiply "Killin' Time" based on chunks`,effectDisplay:()=>`*${V(d.apply(1))}`}})),fedexManager:ee(()=>({visibility:()=>be.dustAccelerator.upgrades.first.bought.value,requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e40)})),display:{title:"FedEx Manager",description:'Multiply "The Messenger God" based on chunks',effectDisplay:()=>`*${V(p.apply(1))}`}})),dustBunnies:ee(()=>({visibility:()=>be.dustAccelerator.upgrades.first.bought.value,requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e50)})),display:{title:"Dust Bunnies",description:'Multiply "Accumulating Dust" based on total chunks',effectDisplay:()=>`*${V(g.apply(1))}`}})),iHateDinosaurs:ee(()=>({visibility:()=>be.dustAccelerator.upgrades.first.bought.value,requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e50)})),display:{title:"eyehatedinosaurs",description:'Multiply "Acceleration" based on total chunks',effectDisplay:()=>`*${V(b.apply(1))}`}}))},M=S(()=>s.add(30,be.dustAccelerator.dustBuyableCapEffect.value)),x={baseDustTime:Fe(()=>({limit:()=>M.value,requirements:j(()=>({resource:O(r),cost:f.variable(x.baseDustTime.amount).pow_base(1.3).times(10)})),display:{title:"Align the Stars",description:"Increase the base dust timer by +1s",effectDisplay:()=>`+${B.apply(0)}/s`}})),baseDustGain:Fe(()=>({limit:()=>M.value,requirements:j(()=>({resource:O(r),cost:f.variable(x.baseDustGain.amount).pow_base(1.8).times(15)})),display:{title:"Salted Dust",description:"Increase base dust gain by 1",effectDisplay:()=>{const le=se.apply(0);return`+${V(le)}`}}})),dustMultiplier:Fe(()=>({limit:()=>M.value,requirements:j(()=>({resource:O(r),cost:f.variable(x.dustMultiplier.amount).pow_base(1.3).times(30)})),display:{title:"Enriched Dust",description:"Multiply dust gain by x1.1",effectDisplay:()=>{const le=un.apply(1);return`x${V(le,1)}`}}})),dustPiles:Fe(()=>({limit:()=>M.value,requirements:j(()=>({resource:O(r),cost:f.variable(x.dustPiles.amount).pow_base(2.5).times(75)})),display:{title:"Dust Piles",description:"Raise dust gain to ^1.1",effectDisplay:()=>`^${V(An.value)}`},visibility:()=>Ee.milestones.first.earned.value}))},A=ie(()=>[he(()=>({enabled:c.acummulatingDust.bought,multiplier:()=>s.add(r.value,1).log10().sqrt().mul(g.apply(1)).clampMin(1),description:"Accumulating Dust"}))]),D=ie(()=>[dt(()=>({enabled:c.totalUpgrade.bought,addend:()=>s.add(l.value,1).log10().sqrt().clampMin(1),description:"Seasoned Dust"}))]),B=ie(()=>[dt(()=>({addend:()=>x.baseDustTime.amount.value,description:"Align the Stars"}))]),ve=ie(()=>[he(()=>({multiplier:()=>s.fromNumber(1.5).times(p.apply(1)),enabled:c.messengerGodUpgrade.bought,description:"Messenger God"}))]),ke=ie(()=>[he(()=>({enabled:c.slippingTimeUpgrade.bought,multiplier:()=>s.add(a.value,1).log10().pow(.6).clampMin(1),description:"Slippery Time"}))]),Ke=S(()=>c.collisionCourse.bought.value?s.add(r.value,1).log10().sqrt().pow(.2).clampMin(1):s.dOne),ot=ut(()=>({enabled:c.collisionCourse.bought,exponent:()=>Ke.value,description:"Collision Course"})),we=ie(()=>[D,B,oe.chuckingChunksModifier,Ee.firstMilestoneModifier,ke,ve,y,ot,ut(()=>({exponent:()=>Ee.fourthMilestoneModifier.value})),ut(()=>({exponent:()=>be.timeAccelerator.levelTwoTimeRaiseEffect.value}))]),Q={chunks:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e3)})),display:{title:"Chunks",description:"Unlock Mercurial Chunks"}})),accelerators:ee(()=>({requirements:j(()=>({resource:O(r),cost:s.fromNumber(1e5)})),display:{title:"Accelerators",description:"Unlock Accelerators"}}))},se=ie(()=>[dt(()=>({enabled:()=>s.gt(x.baseDustGain.amount.value,0),addend:()=>x.baseDustGain.amount.value}))]),un=ie(()=>[he(()=>({multiplier:()=>s.dOne.add(s.times(.1,x.dustMultiplier.amount.value)).clampMin(1),enabled:()=>s.gt(x.dustMultiplier.amount.value,0)}))]),An=S(()=>s.dOne.add(s.times(.1,x.dustPiles.amount.value)).clampMin(1)),$r=ie(()=>[ut(()=>({enabled:()=>s.gt(x.dustPiles.amount.value,0),exponent:()=>An.value}))]),$n=ie(()=>[dt(()=>({enabled:c.killingTime.bought,addend:()=>s.divide(a.value,1e3).times(.1).times(d.apply(1))}))]),Er=ie(()=>[se,$n,un,A,be.dustAccelerator.dustGainMultiplierModifier,$r,ut(()=>({exponent:()=>be.dustAccelerator.dustAcceleratorDustRaiseEffect.value})),ut(()=>({exponent:()=>be.timeAccelerator.levelTwoTimeRaiseEffect.value}))]),Ot=qo(()=>({formula:le=>Er.getFormula(le.div(2).pow(.3)),baseResource:a,gainResource:r,currentGain:S(()=>s.lt(a.value,10)?s.dZero:s.fromValue(Ot.formula.evaluate(a.value))),spend:()=>{a.value=s.dZero,Me.collisionTime.value=new s(Me.collisionTime.defaultValue)}})),En=ie(()=>[he(()=>({enabled:()=>c.accelerationUpgrade.bought.value,multiplier:()=>s.add(a.value,1).sqrt().pow(.25).mul(b.apply(1)).clampMin(1)}))]),Vt={baseDustTime:0,baseDustGain:0,dustMultiplier:0,dustPiles:0},Dn=sn(()=>({thingsToReset:()=>(Object.keys(Vt).forEach(le=>{Vt[le]=x[le].amount.value}),O([c,x])),onReset:()=>{r.value=r[Ae],i.value=s.dZero,a.value=a[Ae],l.value=s.dZero,Me.collisionTime.value=new s(Me.collisionTime[Ae]),Object.keys(Vt).forEach(le=>{x[le].amount.value=s.min(Vt[le],oe.totalChunks.value)}),Ee.milestones.second.earned.value&&Object.values(c).slice(0,Ee.completedMilestonesCount.value).forEach(le=>le.bought.value=!0)}}));ye(Ee.completedMilestonesCount,le=>{Ee.milestones.second.earned.value&&Object.values(c).slice(0,le).forEach(Xe=>Xe.bought.value=!0)});const Dr=hr(()=>({conversion:Ot,tree:xn.tree,treeNode:Pn,showNextAt:!1,resetDescription:()=>"Reset both reset time and collision time for "})),Pn=an(()=>({layerID:Hn,color:t,reset:Dn,classes:{small:!0},display:"D"})),qn=S(()=>s.mul(oe.totalChunks.value,.01).clampMin(.01)),_n=S(()=>oe.upgrades.grindingChunks.bought.value),Pr=S(()=>s.times(qn.value,u(Ot.actualGain)));Ro(n,Ot,()=>_n.value?qn.value:0),n.on("update",le=>{if(!o.value)return;const Xe=s.times(we.apply(1),le);a.value=s.add(a.value,Xe)});const Bt="gap: 8px; margin-bottom: 8px;";return{name:e,color:t,timeSinceReset:a,totalTimeSinceReset:l,mercurialDust:r,totalMercurialDust:i,baseDustAmountModifier:B,baseDustGainModifier:se,dustMultiplierModifier:un,unlocks:Q,slippingTimeModifier:ke,repeatables:x,basicUpgrades:c,acceleratorUpgrades:w,totalTimeModifier:D,accelerationModifier:En,collisionCourseEffect:Ke,collisionCourseModifier:ot,reset:Dn,display:()=>{let le,Xe,cn,dn;return m(R,null,[m("h2",null,[V(r.value),k(" mercurial dust")]),_n.value?m(R,null,[m("h6",null,[k("Gaining "),V(Pr.value),k("/s")])]):null,m("h5",null,[k("It has been "),V(a.value),k(" seconds since the last reset.")]),m("h6",null,[k("A second is worth "),V(we.apply(1)),k(" real seconds")]),m(ae,null,null),q(Dr),m(ae,null,null),m(ae,null,null),m(ze,null,zt(le=nt(x,4,Bt))?le:{default:()=>[le]}),m(ae,null,null),m("h4",null,[k("Upgrades")]),m(ze,null,zt(Xe=nt(c,4,Bt))?Xe:{default:()=>[Xe]}),m(ze,null,zt(cn=nt(w,4,Bt))?cn:{default:()=>[cn]}),m(ae,null,null),m("h4",null,[k("Unlocks")]),m(ze,null,zt(dn=nt(Q,4,Bt))?dn:{default:()=>[dn]})])},treeNode:Pn}}),Wn="M",Me=st(Wn,n=>{const e="Mercury",t="#8c8c94",r=O(yt.mercuryUpgrade.bought),i=s.times(1e88,84600),a=Ie(i),l=Jt(()=>({progress:()=>s.div(a.value,i),width:512,height:10,direction:X.Right,containerStyle:{"text-align":"center"}})),o=ie(()=>[he(()=>({multiplier:1.5,enabled:me.basicUpgrades.messengerGodUpgrade.bought,description:"Messenger God"}))]),c=S(()=>new s(1).times(o.apply(1)).times(me.accelerationModifier.apply(1)).times(Ee.firstMilestoneModifier.apply(1)).pow(me.collisionCourseEffect.value).pow(Ee.fourthMilestoneModifier.value).pow(oe.collidingChunksEffect.value));n.on("update",y=>{r.value&&(a.value=s.sub(a.value,s.times(c.value,y)).clampMin(0))});const d=sn(()=>({thingsToReset:()=>[Me],onReset:()=>{console.log("resetting mercury")}})),b=an(()=>({visibility:r,layerID:Wn,color:t,reset:d})),p=Nr({dust:()=>({display:"Dust",tab:rt(()=>({display:me.display}))}),chunks:()=>({visibility:me.unlocks.chunks.bought,display:()=>m(R,null,[k("Chunks "),s.gte(u(oe.conversion.actualGain),1)?"!":null]),tab:rt(()=>({display:oe.display}))}),accelerators:()=>({visibility:me.unlocks.accelerators.bought,display:"Accelerators",tab:rt(()=>({display:be.display}))}),milestones:()=>({visibility:me.unlocks.chunks.bought,display:"Milestones",tab:rt(()=>({display:Ee.display}))})});return{name:e,color:t,collisionTime:a,maxCollisionTime:i,tabs:p,collisionTimeGainComputed:c,display:()=>m(R,null,[s.lt(a.value,86400)?m("h2",null,[H(s.div(a.value,3600)),k(" hours until collision")]):m("h2",null,[H(s.div(a.value,86400)),k(" days until collision")]),m("h4",null,[k("-"),H(c.value),k("/s")]),q(l),m(ae,null,null),q(p)]),treeNode:b}}),xn=st("main",n=>{const e=Ie(1),t=vr(e),r=qt(e),i=bo(()=>({nodes:O([[Me.treeNode],[yt.treeNode]]),branches:[{startNode:yt.treeNode,endNode:Me.treeNode}],onReset(){},resetPropagation:yo}));return{name:"Galaxy",links:i.links,minWidth:"250",minimizable:!0,display:()=>m(R,null,[$.devSpeed===0?m("div",null,[k("Game Paused"),m(Yt,{id:"paused"},null)]):null,$.devSpeed!=null&&$.devSpeed!==0&&$.devSpeed!==1?m("div",null,[k("Dev Speed: "),H($.devSpeed),k("x"),m(Yt,{id:"devspeed"},null)]):null,$.offlineTime!=null&&$.offlineTime!==0?m("div",null,[k("Offline Time: "),nn($.offlineTime),m(Yt,{id:"offline"},null)]):null,m(ae,null,null),q(i)]),points:e,best:t,total:r,tree:i}}),Jo=n=>[xn,yt,Me,me,oe,be],At=S(()=>!1);function Le(n={}){return Object.assign({id:`${Z.id}-0`,name:"Default Save",tabs:Z.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:Z.id,modVersion:Z.versionNumber,layers:{}},n)}function ge(n){const e=Ye.compressToUTF16(vt(n??$));return localStorage.setItem((n??$).id,e),e}async function Zo(){el();try{let n=localStorage.getItem(W.active);if(n==null){await Oe(gt());return}if(n=We(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==Z.id){await Oe(gt());return}e.id=W.active,await Oe(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await Oe(gt())}}function We(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="ᯡ")n=Ye.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function gt(){const n=$t(),e=Le({id:n});return ge(e),W.saves.push(n),e}function $t(){let n,e=0;do n=`${Z.id}-${e++}`;while(localStorage.getItem(n)!=null);return n}const ln=F(!1);async function Oe(n){console.info("Loading save",n),ln.value=!0;for(const e in Ce){const t=Ce[e];t!=null&&Vi(t)}Jo().forEach(e=>Oi(e,n)),n=Le(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,Z.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==Z.versionNumber&&(n.modVersion,n.modVersion=Z.versionNumber),Object.assign($,n),W.active=$.id,pe.emit("onLoad")}const Te=yn({});function Ko(n){if(Te[n]==null){let e=localStorage.getItem(n);if(e==null)Te[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")Te[n]={error:"Save is undefined",id:n};else try{if(e=We(e),e==null)return console.warn("Unable to determine preset encoding",e),Te[n]={error:"Unable to determine preset encoding",id:n},Te[n];Te[n]={...JSON.parse(e),id:n}}catch(t){Te[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return Te[n]}function Xo(){Object.keys(Te).forEach(n=>delete Te[n])}function jt(n){Te[n]=void 0}setInterval(()=>{$.autosave&&ge()},1e3);window.onbeforeunload=()=>{$.autosave&&ge()};window.save=ge;const Qo=window.hardReset=async()=>{await Oe(gt())};window.deleteLowerSaves=()=>{const n=Object.values(W.saves).indexOf($.id)+1;Object.values(W.saves).slice(n).forEach(e=>localStorage.removeItem(e)),W.saves=W.saves.slice(0,n)};const Rt=wt({active:"",saves:[],showTPS:!0,theme:kn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0});ye(Rt,n=>{const e=Ye.compressToUTF16(JSON.stringify(n));localStorage.setItem(Z.id,e)},{deep:!0});const W=window.settings=Rt;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!0,theme:kn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};pe.emit("loadSettings",n),Object.assign(Rt,n),Qo()};function el(){try{let n=localStorage.getItem(Z.id);if(n!=null&&n!==""){if(n=We(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(Rt,e)}pe.emit("loadSettings",Rt)}catch{}}const xr=wt([]);function tl(n){xr.push(n)}const nl=wt([]),rl=wt([]),Se=F(),De=F([]),Ct=F([]);function il(){var n;((n=Se.value)==null?void 0:n.loggedIn)===!0&&(De.value.length>0||Se.value.getSaveList().then(Ir).then(e=>{Ct.value=e.map(t=>t.content.id)}).catch(console.error))}Yr({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:Yn}).then(n=>{Se.value=n,Yn(n)}).catch(console.error);function Yn(n){n.loggedIn===!0&&(De.value.length>0||(n.getSaveList().then(e=>{const t=Ir(e);if(Ct.value=t.map(r=>r.content.id),$.timePlayed<120*1e3&&t.length>0){const r=t.reduce((i,a)=>i.content.time<a.content.time?a:i);Oe(r.content)}}).catch(console.error),setInterval(il,60*1e3)))}function Ir(n){const e=new Set(W.saves.slice()),t=new Set(new Array(11).fill(0).map((i,a)=>a)),r=Object.keys(n).map(i=>{const{label:a,content:l}=n[parseInt(i)];try{return{slot:parseInt(i),label:a,content:JSON.parse(We(l)??"")}}catch{return null}}).filter(i=>i!=null&&typeof i.content.id=="string"&&typeof i.content.time=="number"&&typeof i.content.timePlayed=="number").filter(i=>{var l;i.label!=null&&(i.content.name=i.label),t.delete(i.slot);const a=W.saves.find(o=>o===i.content.id);if(a==null)W.saves.push(i.content.id),ge(Le(i.content));else{e.delete(a);try{const o=JSON.parse(We(localStorage.getItem(a)??"")??"");if(o==null)return!1;o.id=a,o.time=o.time??0,o.timePlayed=o.timePlayed??0;const c=Math.abs(o.timePlayed-i.content.timePlayed),d=Math.abs(o.time-i.content.time);c<120*1e3&&d<120*1e3?o.time<i.content.time?(ge(Le(i.content)),W.active===a&&Oe(i.content)):((l=Se.value)==null||l.save(i.slot,Ye.compressToUTF16(vt(Le(o))),o.name??i.label).catch(console.error),i.content=o):De.value.push({id:a,cloud:i.content,local:o,slot:i.slot})}catch{return!1}}return!0});return e.forEach(i=>{var a;try{if(t.size>0){const l=localStorage.getItem(i)??"",o=JSON.parse(We(l)??""),c=t.values().next().value;if(c==null)return;(a=Se.value)==null||a.save(c,l,o.name).then(()=>Ct.value.push(o.id)).catch(console.error),t.delete(c)}}catch{}}),r}const al={class:"field"},sl={key:0,class:"field-title"},ol=["placeholder"],ll=Y({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,r=e,i=()=>t.title==null?m(R,null,null):q(t.title,d=>m("span",null,[d])),a=Lt(null);Ft(()=>{var d;(d=a.value)==null||d.focus()});const l=S({get(){return u(t.modelValue)??""},set(d){r("update:modelValue",d)}});function o(){r("submit")}function c(){t.submitOnBlur!==!1?r("submit"):r("cancel")}return(d,b)=>(N(),I("form",{onSubmit:Et(o,["prevent"])},[v("div",al,[d.title?(N(),I("span",sl,[m(i)])):_("",!0),d.textArea?(N(),ne(u(Zr),{key:1,modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=p=>l.value=p),placeholder:d.placeholder,maxHeight:d.maxHeight,onBlur:c,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):wn((N(),I("input",{key:2,type:"text","onUpdate:modelValue":b[1]||(b[1]=p=>l.value=p),placeholder:d.placeholder,class:re({fullWidth:!d.title}),onBlur:c,ref_key:"field",ref:a},null,42,ol)),[[Br,l.value]])])],32))}}),Tr=te(ll,[["__scopeId","data-v-495d5085"]]),ul={key:0,class:"material-icons pinned"},cl=Y({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=F(!1),r=S(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0||t.value}),i=()=>q(e.display);function a(o){const c=e.pinned;o.shiftKey&&c!=null&&(c.value=!c.value,o.stopPropagation(),o.preventDefault())}const l=S(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0&&at[W.theme].showPin});return(o,c)=>(N(),I("div",{class:re(["tooltip-container",{shown:r.value}]),onMouseenter:c[0]||(c[0]=d=>t.value=!0),onMouseleave:c[1]||(c[1]=d=>t.value=!1),onClickCapture:a},[_e(o.$slots,"default",{},void 0,!0),m(Zn,{name:"fade"},{default:L(()=>[r.value?(N(),I("div",{key:0,class:re(["tooltip",{top:u(o.direction)===u(X).Up,left:u(o.direction)===u(X).Left,right:u(o.direction)===u(X).Right,bottom:u(o.direction)===u(X).Down,...u(o.classes)}]),style:fe([{"--xoffset":u(o.xoffset)||"0px","--yoffset":u(o.yoffset)||"0px"},u(o.style)??{}])},[l.value?(N(),I("span",ul,"push_pin")):_("",!0),m(i)],6)):_("",!0)]),_:1})],34))}}),de=te(cl,[["__scopeId","data-v-ad4ea959"]]),dl={key:0},fl=["disabled"],ml={key:0},gl=Y({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,r=e,i=F(!1);ye(i,o=>{r("confirmingChanged",o)});function a(){if(t.skipConfirm){r("click");return}i.value&&r("click"),i.value=!i.value}function l(){i.value=!1}return(o,c)=>(N(),I("span",{class:re(["container",{confirming:i.value}])},[i.value?(N(),I("span",dl,"Are you sure?")):_("",!0),v("button",{onClick:Et(a,["stop"]),class:"button danger",disabled:o.disabled},[i.value?(N(),I("span",ml,"Yes")):_e(o.$slots,"default",{key:1},void 0,!0)],8,fl),i.value?(N(),I("button",{key:1,class:"button",onClick:Et(l,["stop"])},"No")):_("",!0)],2))}}),pl=te(gl,[["__scopeId","data-v-b3b9693a"]]),vl={key:0,class:"handle material-icons"},hl={key:1,class:"actions"},bl={key:2,class:"actions"},yl={key:3,class:"details"},wl=["disabled"],Cl={class:"save-version"},kl={key:1,class:"time"},Nl={key:4,class:"details"},Ml={key:5,class:"details error"},Sl=Y({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,r=e,i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=F(!1),l=F(!1),o=F("");ye(a,()=>o.value=t.save.name??"");const c=S(()=>t.save!=null&&t.save.id===$.id&&!t.readonly),d=S(()=>c.value?$.time:(t.save!=null&&t.save.time)??0),b=S(()=>{var y;return!t.readonly&&((y=Se.value)==null?void 0:y.loggedIn)===!0&&Ct.value.includes(t.save.id)});function p(){r("editName",o.value),a.value=!1}return(y,g)=>(N(),I("div",{class:re(["save",{active:c.value,readonly:y.readonly}])},[y.readonly!==!0?(N(),I("div",vl,"drag_handle")):_("",!0),!a.value&&y.readonly!==!0?(N(),I("div",hl,[y.save.error==null&&!l.value?(N(),ne(Cn,{key:0,onClick:g[0]||(g[0]=w=>r("export")),class:"button",left:""},{default:L(()=>[m(de,{display:"Export",direction:u(X).Left,class:"info"},{default:L(()=>g[8]||(g[8]=[v("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):_("",!0),y.save.error==null&&!l.value?(N(),I("button",{key:1,onClick:g[1]||(g[1]=w=>r("duplicate")),class:"button"},[m(de,{display:"Duplicate",direction:u(X).Left,class:"info"},{default:L(()=>g[9]||(g[9]=[v("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):_("",!0),y.save.error==null&&!l.value?(N(),I("button",{key:2,onClick:g[2]||(g[2]=w=>a.value=!a.value),class:"button"},[m(de,{display:"Edit Name",direction:u(X).Left,class:"info"},{default:L(()=>g[10]||(g[10]=[v("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):_("",!0),m(pl,{disabled:c.value,onClick:g[3]||(g[3]=w=>r("delete")),onConfirmingChanged:g[4]||(g[4]=w=>l.value=w)},{default:L(()=>[m(de,{display:"Delete",direction:u(X).Left,class:"info"},{default:L(()=>g[11]||(g[11]=[v("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):y.readonly!==!0?(N(),I("div",bl,[v("button",{onClick:p,class:"button"},[m(de,{display:"Save",direction:u(X).Left,class:"info"},{default:L(()=>g[12]||(g[12]=[v("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),v("button",{onClick:g[5]||(g[5]=w=>a.value=!a.value),class:"button"},[m(de,{display:"Cancel",direction:u(X).Left,class:"info"},{default:L(()=>g[13]||(g[13]=[v("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):_("",!0),y.save.error==null&&!a.value?(N(),I("div",yl,[b.value?(N(),ne(de,{key:0,display:"Synced!",direction:u(X).Right},{default:L(()=>g[14]||(g[14]=[v("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction"])):_("",!0),v("button",{class:"button open",onClick:g[6]||(g[6]=w=>r("open")),disabled:y.readonly},[v("h3",null,z(y.save.name),1)],8,wl),v("span",Cl,"v"+z(y.save.modVersion),1),g[15]||(g[15]=v("br",null,null,-1)),d.value?(N(),I("div",kl," Last played "+z(u(i).format(d.value)),1)):_("",!0)])):y.save.error==null&&a.value?(N(),I("div",Nl,[m(Tr,{modelValue:o.value,"onUpdate:modelValue":g[7]||(g[7]=w=>o.value=w),class:"editname",onSubmit:p},null,8,["modelValue"])])):(N(),I("div",Ml,[k(" Error: Failed to load save with id "+z(y.save.id),1),g[16]||(g[16]=v("br",null,null,-1)),k(z(y.save.error),1)]))],2))}}),bn=te(Sl,[["__scopeId","data-v-0058f767"]]),xl={key:0,style:{color:"var(--danger)"}},Il={class:"modal-footer"},Tl={class:"field"},Al={class:"field-buttons"},$l={class:"footer"},El=Y({__name:"SavesManager",setup(n,{expose:e}){const t=F(!1),r=F(null);e({open(){t.value=!0}});const i=F(!1),a=F(""),l=F(null);ye(a,A=>{A?pt(()=>{try{if(A=We(A)??"",A===""){console.warn("Unable to determine preset encoding",A),i.value=!0;return}const D=JSON.parse(A);if(typeof D!="object"){i.value=!0;return}const B=$t();D.id=B,ge(D),a.value="",i.value=!1,W.saves.push(B)}catch{i.value=!0}}):i.value=!1});let o=Object.assign({}),c=F(Object.keys(o).reduce((A,D)=>(A.push({label:D.split("/").slice(-1)[0].slice(0,-4),value:o[D]}),A),[]));ye(t,A=>{A&&Xo()});const d=S(()=>W.saves.reduce((A,D)=>(A[D]=Ko(D),A),{})),b=S(()=>{var A;return((A=Se.value)==null?void 0:A.loggedIn)===!0&&W.saves.length<Ct.value.length});function p(A){let D;switch($.id===A?D=vt($):D=JSON.stringify(d.value[A]),Z.exportEncoding){default:console.warn(`Unknown save encoding: ${Z.exportEncoding}. Defaulting to lz`);case"lz":D=Ye.compressToUTF16(D);break;case"base64":D=btoa(unescape(encodeURIComponent(D)));break;case"plain":break}const B=document.createElement("textarea");B.value=D,document.body.appendChild(B),B.select(),B.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(B)}function y(A){$.id===A&&ge();const D={...d.value[A],id:$t()};ge(D),W.saves.push(D.id)}function g(A){var D;((D=Se.value)==null?void 0:D.loggedIn)===!0&&Se.value.getSaveList().then(B=>{var ke;const ve=Object.keys(B).find(Ke=>{const ot=B[parseInt(Ke)].content;try{if(JSON.parse(ot).id===A)return!0}catch{return!1}});ve!=null&&((ke=Se.value)==null||ke.save(parseInt(ve),"","").catch(console.error))}),W.saves=W.saves.filter(B=>B!==A),localStorage.removeItem(A),jt(A)}function w(A){d.value[$.id].time=$.time,ge(),jt($.id),Oe(d.value[A]),jt(A)}function M(A){if(l.value=A,pt(()=>{l.value=null}),A=We(A)??"",A===""){console.warn("Unable to determine preset encoding",A);return}const D=JSON.parse(A);D.id=$t(),ge(D),W.saves.push(D.id),w(D.id)}function x(A,D){const B=d.value[A];B!=null&&(B.name=D,$.id===A?($.name=D,ge()):(ge(B),jt(A)))}return(A,D)=>(N(),ne(Je,{modelValue:t.value,"onUpdate:modelValue":D[4]||(D[4]=B=>t.value=B),ref_key:"modal",ref:r},{header:L(()=>D[5]||(D[5]=[v("h2",null,"Saves Manager",-1)])),body:L(({shown:B})=>[b.value?(N(),I("div",xl," Not all saves are synced! You may need to delete stale saves. ")):_("",!0),B?(N(),ne(u(Jr),{key:1,list:u(W).saves,handle:".handle",itemKey:ve=>ve},{item:L(({element:ve})=>[m(bn,{save:d.value[ve],onOpen:ke=>w(ve),onExport:ke=>p(ve),onEditName:ke=>x(ve,ke),onDuplicate:ke=>y(ve),onDelete:ke=>g(ve)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):_("",!0)]),footer:L(()=>[v("div",Il,[m(Tr,{modelValue:a.value,"onUpdate:modelValue":D[0]||(D[0]=B=>a.value=B),title:"Import Save",placeholder:"Paste your save here!",class:re({importingFailed:i.value})},null,8,["modelValue","class"]),v("div",Tl,[D[6]||(D[6]=v("span",{class:"field-title"},"Create Save",-1)),v("div",Al,[v("button",{class:"button",onClick:D[1]||(D[1]=B=>w(u(gt)().id))},"New Game"),Object.keys(u(c)).length>0?(N(),ne(Sn,{key:0,options:u(c),modelValue:l.value,"onUpdate:modelValue":D[2]||(D[2]=B=>M(B)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):_("",!0)])]),v("div",$l,[D[7]||(D[7]=v("div",{style:{"flex-grow":"1"}},null,-1)),v("button",{class:"button modal-default-button",onClick:D[3]||(D[3]=B=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),In=te(El,[["__scopeId","data-v-99458d64"]]),Dl={class:"vga-footer"},Pl=Y({__name:"AddictionWarning",setup(n){const e=F(!1);Xn(()=>{Z.disableHealthWarning===!1&&W.showHealthWarning&&K.mouseActivity.filter(r=>r).length>6&&(e.value=!0)});function t(){W.showHealthWarning=!1,e.value=!1}return(r,i)=>(N(),I(R,null,[m(Je,Ve({modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=a=>e.value=a)},r.$attrs),{header:L(()=>i[2]||(i[2]=[v("div",{class:"vga-modal-header"},[v("h2",null,"Kindly consider taking a break.")],-1)])),body:L(()=>i[3]||(i[3]=[v("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),v("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),v("h4",null,"Resources:",-1),v("p",null,[v("span",null,[v("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),k(" ("),v("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),k(") ")]),v("br"),v("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)])),footer:L(()=>[v("div",Dl,[v("button",{onClick:t,class:"button"},"Never show this again"),v("button",{onClick:i[0]||(i[0]=a=>e.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),m(In,{ref:"savesManager"},null,512)],64))}}),ql=te(Pl,[["__scopeId","data-v-84eac81b"]]),_l={class:"cloud-saves-modal-header"},Rl=["onClick"],Fl={key:0,class:"note"},Ll={key:1,class:"note"},Ol=["onClick"],Vl={key:0,class:"note"},Bl={key:1,class:"note"},Ul=["onClick"],Gl=Y({__name:"CloudSaveResolver",setup(n){const e=F(!1),t=F([]),r=S(()=>De.value.length>1?"saves":"save"),i=F(null);ye(()=>De.value.length>0,d=>{d&&(t.value=De.value.map(({local:b,cloud:p})=>(b.time??0)<(p.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),ye(()=>{var d;return(d=i.value)==null?void 0:d.isOpen},d=>{d===!1&&(De.value=[])});function a(d){t.value[d]="local"}function l(d){t.value[d]="cloud"}function o(d){t.value[d]="both"}function c(){var d,b;for(let p=0;p<t.value.length;p++){const{slot:y,local:g,cloud:w}=De.value[p];switch(t.value[p]){case"local":(d=Se.value)==null||d.save(y,Ye.compressToUTF16(vt(Le(g))),w.name).catch(console.error);break;case"cloud":ge(Le(w));break;case"both":const M=$t();ge({...Le(w),id:M}),W.saves.push(M),(b=Se.value)==null||b.save(y,Ye.compressToUTF16(vt(Le(g))),w.name).catch(console.error);break}}e.value=!1}return(d,b)=>(N(),ne(Je,{modelValue:e.value,"onUpdate:modelValue":b[0]||(b[0]=p=>e.value=p),width:"960px",ref_key:"modal",ref:i,"prevent-closing":!0},{header:L(()=>[v("div",_l,[v("h2",null,"Cloud "+z(r.value)+" loaded!",1)])]),body:L(()=>[v("div",null," Upon loading, your cloud "+z(r.value)+" "+z(u(De).length>1?"appear":"appears")+" to be out of sync with your local "+z(r.value)+". Which "+z(r.value)+" do you want to keep? ",1),b[4]||(b[4]=v("br",null,null,-1)),(N(!0),I(R,null,Ue(u(u(De)),(p,y)=>(N(),I("div",{key:p.id,class:"conflict-container"},[v("div",{onClick:g=>l(y),class:re({selected:t.value[y]==="cloud"})},[v("h2",null,[b[1]||(b[1]=k(" Cloud ")),(p.cloud.time??0)>(p.local.time??0)?(N(),I("span",Fl,"(more recent)")):_("",!0),(p.cloud.timePlayed??0)>(p.local.timePlayed??0)?(N(),I("span",Ll,"(more playtime)")):_("",!0)]),m(bn,{save:p.cloud,readonly:!0},null,8,["save"])],10,Rl),v("div",{onClick:g=>a(y),class:re({selected:t.value[y]==="local"})},[v("h2",null,[b[2]||(b[2]=k(" Local ")),(p.cloud.time??0)<=(p.local.time??0)?(N(),I("span",Vl,"(more recent)")):_("",!0),(p.cloud.timePlayed??0)<=(p.local.timePlayed??0)?(N(),I("span",Bl,"(more playtime)")):_("",!0)]),m(bn,{save:p.local,readonly:!0},null,8,["save"])],10,Ol),v("div",{onClick:g=>o(y),class:re({selected:t.value[y]==="both"}),style:{"flex-basis":"30%"}},b[3]||(b[3]=[v("h2",null,"Both",-1),v("div",{class:"save"},"Keep Both",-1)]),10,Ul)]))),128))]),footer:L(()=>[v("div",{class:"cloud-saves-footer"},[v("button",{onClick:c,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),zl=te(Gl,[["__scopeId","data-v-c79a1b2e"]]),jl={class:"field"},Hl=Y({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,i=()=>q(t.title??"",l=>m("span",null,[l])),a=S({get(){return!!t.modelValue},set(l){r("update:modelValue",l)}});return(l,o)=>(N(),I("label",jl,[wn(v("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=c=>a.value=c)},null,512),[[Ur,a.value]]),m(i)]))}}),Pe=te(Hl,[["__scopeId","data-v-faad62a6"]]),Wl={class:"game-over-modal-header"},Yl=["src","alt"],Jl={class:"game-over-modal-title"},Zl={key:0},Kl={key:0},Xl=["href"],Ql={key:1},eu=Y({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:r,discordLink:i,versionNumber:a,versionTitle:l}=Z,o=S(()=>nn($.timePlayed)),c=S(()=>At.value&&!$.keepGoing),d=it($,"autosave");function b(){$.keepGoing=!0}function p(){Oe(gt())}return(y,g)=>(N(),ne(Je,{"model-value":c.value},{header:L(()=>[v("div",Wl,[u(t)?(N(),I("img",{key:0,class:"game-over-modal-logo",src:u(t),alt:u(e)},null,8,Yl)):_("",!0),v("div",Jl,[g[1]||(g[1]=v("h2",null,"Congratulations!",-1)),v("h4",null,"You've beaten "+z(u(e))+" v"+z(u(a))+": "+z(u(l)),1)])])]),body:L(({shown:w})=>[w?(N(),I("div",Zl,[v("div",null,"It took you "+z(o.value)+" to beat the game.",1),g[4]||(g[4]=v("br",null,null,-1)),g[5]||(g[5]=v("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),g[6]||(g[6]=v("br",null,null,-1)),u(i)&&u(r)?(N(),I("div",Kl,[v("a",{href:u(i),class:"game-over-modal-discord-link"},[g[2]||(g[2]=v("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),k(" "+z(u(r)),1)],8,Xl)])):(N(),I("div",Ql,g[3]||(g[3]=[v("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[v("span",{class:"material-icons game-over-modal-discord"},"discord"),k(" Profectus & Friends ")],-1)]))),m(Pe,{title:"Autosave",modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=M=>d.value=M)},null,8,["modelValue"])])):_("",!0)]),footer:L(()=>[v("div",{class:"game-over-footer"},[v("button",{onClick:b,class:"button"},"Keep Going"),v("button",{onClick:p,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),tu=te(eu,[["__scopeId","data-v-c9c5bad4"]]),nu={key:0},ru=["href"],iu={class:"nan-footer"},au=Y({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=Z,r=F(!0),i=F(!0),a=it(K,"hasNaN"),l=F(null);ye(a,y=>{y?(r.value=$.autosave,i.value=$.devSpeed===0):($.autosave=r.value,$.devSpeed=i.value?0:null)});const o=S(()=>{var y;return(y=K.NaNPath)==null?void 0:y.join(".")}),c=S(()=>K.NaNPersistent!=null?K.NaNPersistent.value:null);function d(){K.NaNPersistent!=null&&(K.NaNPersistent.value=new s(0),K.hasNaN=!1)}function b(){K.NaNPersistent&&(K.NaNPersistent.value=new s(1),K.hasNaN=!1)}function p(){K.NaNPersistent&&(K.NaNPersistent.value=new s(NaN),K.hasNaN=!1)}return(y,g)=>(N(),I(R,null,[m(Je,Ve({modelValue:a.value,"onUpdate:modelValue":g[4]||(g[4]=w=>a.value=w)},y.$attrs),{header:L(()=>g[5]||(g[5]=[v("div",{class:"nan-modal-header"},[v("h2",null,"NaN value detected!")],-1)])),body:L(()=>[v("div",null,[k(' Attempted to assign "'+z(o.value)+'" to NaN',1),c.value?(N(),I("span",nu,z(" ")+"(previously "+z(u(H)(c.value))+")",1)):_("",!0),k(". Auto-saving has been "+z(r.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),g[7]||(g[7]=v("br",null,null,-1)),v("div",null,[v("a",{href:u(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[g[6]||(g[6]=v("span",{class:"material-icons nan-modal-discord"},"discord",-1)),k(" "+z(u(e)||"Profectus & Friends"),1)],8,ru)]),g[8]||(g[8]=v("br",null,null,-1)),m(Pe,{title:"Autosave",modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=w=>r.value=w)},null,8,["modelValue"]),u(Z).enablePausing?(N(),ne(Pe,{key:0,title:"Pause game",modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=w=>i.value=w)},null,8,["modelValue"])):_("",!0)]),footer:L(()=>[v("div",iu,[v("button",{onClick:g[2]||(g[2]=w=>{var M;return(M=l.value)==null?void 0:M.open()}),class:"button"},"Open Saves Manager"),v("button",{onClick:d,class:"button"},"Set to 0"),v("button",{onClick:b,class:"button"},"Set to 1"),c.value&&u(s).neq(c.value,0)&&u(s).neq(c.value,1)?(N(),I("button",{key:0,onClick:g[3]||(g[3]=w=>a.value=!1),class:"button"}," Set to previous ")):_("",!0),v("button",{onClick:p,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),m(In,{ref_key:"savesManager",ref:l},null,512)],64))}}),su=te(au,[["__scopeId","data-v-cab8d401"]]),ou={key:1},lu=Y({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},setup(n){const e=n,t=()=>q(e.display),r=()=>e.minimizedDisplay==null?void 0:q(e.minimizedDisplay),i=S(()=>Z.allowGoBack&&!u(e.forceHideGoBack)&&e.index>0&&!u(e.minimized));function a(){$.tabs.splice(u(e.index),1/0)}function l(c){e.nodes.value=c}const o=F([]);return Gr((c,d,b)=>(console.warn(`Error caught in "${e.name}" layer`,c,d,b),o.value.push(c instanceof Error?c:new Error(JSON.stringify(c))),!1)),(c,d)=>o.value.length>0?(N(),ne(tr,{key:0,errors:o.value},null,8,["errors"])):(N(),I("div",Ve({key:1,class:"layer-container",style:{"--layer-color":u(c.color)}},c.$attrs),[i.value?(N(),I("button",{key:0,class:"goBack",onClick:a},"❌")):_("",!0),u(c.minimized)?(N(),I("button",{key:1,class:"layer-tab minimized",onClick:d[0]||(d[0]=b=>c.$emit("setMinimized",!1))},[c.minimizedDisplay?(N(),ne(r,{key:0})):(N(),I("div",ou,z(u(c.name)),1))])):(N(),I("div",{key:2,class:re(["layer-tab",{showGoBack:i.value}])},[m(nr,{onUpdateNodes:l},{default:L(()=>[m(t)]),_:1})],2)),u(c.minimizable)?(N(),I("button",{key:3,class:"minimize",onClick:d[1]||(d[1]=b=>c.$emit("setMinimized",!0))}," ▼ ")):_("",!0)],16))}}),uu=te(lu,[["__scopeId","data-v-bac44152"]]),cu=Y({__name:"Changelog",setup(n,{expose:e}){const t=F(!1);return e({open(){t.value=!0}}),(r,i)=>(N(),ne(Je,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a)},{header:L(()=>i[1]||(i[1]=[v("h2",null,"Changelog",-1)])),body:L(()=>i[2]||(i[2]=[v("details",{open:""},[v("summary",null,[k("v0.0 Initial Commit - "),v("time",null,"2021-09-04")]),k(" This is the first release :D "),v("ul",null,[v("li",{class:"feature"},"Did everything"),v("li",{class:"fix"},"Had some fun"),v("li",{class:"breaking"},"Removed everything"),v("li",{class:"balancing"},"Created some bugs to fix later")])],-1)])),_:1},8,["modelValue"]))}}),du=te(cu,[["__scopeId","data-v-0fdea059"]]),fu={class:"info-modal-header"},mu=["src","alt"],gu={class:"info-modal-title"},pu={key:0},vu={key:0},hu={key:0},bu=["href"],yu=Y({__name:"Info",emits:["openChangelog"],setup(n,{expose:e,emit:t}){const{title:r,logo:i,author:a,discordName:l,discordLink:o,versionNumber:c,versionTitle:d}=Z,b=t,p=F(!1),y=S(()=>nn($.timePlayed)),g=()=>nl.map(w=>q(w));return e({open(){p.value=!0}}),(w,M)=>(N(),ne(Je,{modelValue:p.value,"onUpdate:modelValue":M[1]||(M[1]=x=>p.value=x)},{header:L(()=>[v("div",fu,[u(i)?(N(),I("img",{key:0,class:"info-modal-logo",src:u(i),alt:u(r)},null,8,mu)):_("",!0),v("div",gu,[v("h2",null,z(u(r)),1),v("h4",null,[k(" v"+z(u(c)),1),u(d)?(N(),I("span",pu,": "+z(u(d)),1)):_("",!0)])])])]),body:L(({shown:x})=>[x?(N(),I("div",vu,[u(a)?(N(),I("div",hu,"By "+z(u(a)),1)):_("",!0),M[3]||(M[3]=v("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),M[4]||(M[4]=v("br",null,null,-1)),v("div",{class:"link",onClick:M[0]||(M[0]=A=>b("openChangelog"))},"Changelog"),M[5]||(M[5]=v("br",null,null,-1)),v("div",null,[u(o)?(N(),I("a",{key:0,href:u(o),class:"info-modal-discord-link",target:"_blank"},[M[2]||(M[2]=v("span",{class:"material-icons info-modal-discord"},"discord",-1)),k(" "+z(u(l)),1)],8,bu)):_("",!0)]),M[6]||(M[6]=v("div",null,[v("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[v("span",{class:"material-icons info-modal-discord"},"discord"),k(" Profectus & Friends ")])],-1)),M[7]||(M[7]=v("div",null,[v("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[v("span",{class:"material-icons info-modal-discord"},"discord"),k(" The Modding Tree ")])],-1)),M[8]||(M[8]=v("br",null,null,-1)),v("div",null,"Time Played: "+z(y.value),1),m(g)])):_("",!0)]),_:1},8,["modelValue"]))}}),wu=te(yu,[["__scopeId","data-v-e80d3d22"]]),Cu={class:"header"},ku={class:"option-tabs"},Nu={key:0},Mu={key:1},Su=Y({__name:"Options",setup(n,{expose:e}){const t=F(!1),r=F("behaviour");function i(we){return we==r.value}function a(we){r.value=we}e({isTab:i,setTab:a,save:ge,open(){t.value=!0}});const l=Object.keys(at).map(we=>({label:rr(we),value:we})),o=()=>xr.map(we=>q(we)),{showTPS:c,theme:d,unthrottled:b,alignUnits:p,showHealthWarning:y}=Rn(W),{autosave:g,offlineProd:w}=Rn($),M=S({get(){return $.devSpeed===0},set(we){$.devSpeed=we?0:null}}),x=m("span",{class:"option-title"},[k("Unthrottled"),m("desc",null,[k("Allow the game to run as fast as possible. Not battery friendly.")])]),A=m("span",{class:"option-title"},[k("Offline production"),m(de,{display:"Save-specific",direction:X.Right},{default:()=>[k("*")]}),m("desc",null,[k("Simulate production that occurs while the game is closed.")])]),D=m("span",{class:"option-title"},[k("Show videogame addiction warning"),m("desc",null,[k("Show a helpful warning after playing for a long time about video game addiction and encouraging you to take a break.")])]),B=m("span",{class:"option-title"},[k("Autosave"),m(de,{display:"Save-specific",direction:X.Right},{default:()=>[k("*")]}),m("desc",null,[k("Automatically save the game every second or when the game is closed.")])]),ve=m("span",{class:"option-title"},[k("Pause game"),m(de,{display:"Save-specific",direction:X.Right},{default:()=>[k("*")]}),m("desc",null,[k("Stop everything from moving.")])]),ke=m("span",{class:"option-title"},[k("Theme"),m("desc",null,[k("How the game looks.")])]),Ke=m("span",{class:"option-title"},[k("Show TPS"),m("desc",null,[k("Show TPS meter at the bottom-left corner of the page.")])]),ot=m("span",{class:"option-title"},[k("Align modifier units"),m("desc",null,[k("Align numbers to the beginning of the unit in modifier view.")])]);return(we,Q)=>(N(),ne(Je,{modelValue:t.value,"onUpdate:modelValue":Q[11]||(Q[11]=se=>t.value=se)},{header:L(()=>[v("div",Cu,[Q[12]||(Q[12]=v("h2",null,"Settings",-1)),v("div",ku,[v("button",{class:re({selected:i("behaviour")}),onClick:Q[0]||(Q[0]=se=>a("behaviour"))},"Behaviour",2),v("button",{class:re({selected:i("appearance")}),onClick:Q[1]||(Q[1]=se=>a("appearance"))},"Appearance",2)])])]),body:L(()=>[i("behaviour")?(N(),I("div",Nu,[m(Pe,{title:u(x),modelValue:u(b),"onUpdate:modelValue":Q[2]||(Q[2]=se=>Ne(b)?b.value=se:null)},null,8,["title","modelValue"]),u(Z).enablePausing?(N(),ne(Pe,{key:0,title:u(ve),modelValue:M.value,"onUpdate:modelValue":Q[3]||(Q[3]=se=>M.value=se)},null,8,["title","modelValue"])):_("",!0),m(Pe,{title:u(A),modelValue:u(w),"onUpdate:modelValue":Q[4]||(Q[4]=se=>Ne(w)?w.value=se:null)},null,8,["title","modelValue"]),u(Z).disableHealthWarning?_("",!0):(N(),ne(Pe,{key:1,title:u(D),modelValue:u(y),"onUpdate:modelValue":Q[5]||(Q[5]=se=>Ne(y)?y.value=se:null)},null,8,["title","modelValue"])),m(Pe,{title:u(B),modelValue:u(g),"onUpdate:modelValue":Q[6]||(Q[6]=se=>Ne(g)?g.value=se:null)},null,8,["title","modelValue"]),u(g)?_("",!0):(N(),ne(Cn,{key:2,class:"button save-button",onClick:Q[7]||(Q[7]=se=>u(ge)())},{default:L(()=>Q[13]||(Q[13]=[k("Manually save")])),_:1}))])):_("",!0),i("appearance")?(N(),I("div",Mu,[m(Sn,{title:u(ke),options:u(l),modelValue:u(d),"onUpdate:modelValue":Q[8]||(Q[8]=se=>Ne(d)?d.value=se:null)},null,8,["title","options","modelValue"]),m(o),m(Pe,{title:u(Ke),modelValue:u(c),"onUpdate:modelValue":Q[9]||(Q[9]=se=>Ne(c)?c.value=se:null)},null,8,["title","modelValue"]),m(Pe,{title:u(ot),modelValue:u(p),"onUpdate:modelValue":Q[10]||(Q[10]=se=>Ne(p)?p.value=se:null)},null,8,["title","modelValue"])])):_("",!0)]),_:1},8,["modelValue"]))}}),xu=["src","alt"],Iu={key:1,class:"title"},Tu={class:"discord"},Au={class:"discord-links"},$u={key:0},Eu=["href"],Du={href:"https://forums.moddingtree.com/",target:"_blank"},Pu={href:"https://forums.moddingtree.com/",target:"_blank"},qu={class:"discord"},_u={class:"discord-links"},Ru={key:0},Fu=["href"],Lu=Y({__name:"Nav",setup(n){const e=F(null),t=F(null),r=F(null),i=F(null),{useHeader:a,banner:l,title:o,discordName:c,discordLink:d,versionNumber:b}=Z;function p(){window.open(d,"mywindow")}const y=S(()=>{var g;return((g=Se.value)==null?void 0:g.loggedIn)===!0&&!Ct.value.includes(W.active)});return(g,w)=>(N(),I(R,null,[u(a)?(N(),I("div",Ve({key:0,class:"nav"},g.$attrs),[u(l)?(N(),I("img",{key:0,src:u(l),class:"banner",alt:u(o)},null,8,xu)):(N(),I("div",Iu,z(u(o)),1)),v("div",{onClick:w[0]||(w[0]=M=>{var x;return(x=i.value)==null?void 0:x.open()}),class:"version-container"},[m(de,{display:"Changelog",direction:u(X).Down,class:"version"},{default:L(()=>[v("span",null,"v"+z(u(b)),1)]),_:1},8,["direction"])]),w[14]||(w[14]=v("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),v("div",Tu,[v("span",{onClick:p,class:"material-icons"},"discord"),v("ul",Au,[u(d)?(N(),I("li",$u,[v("a",{href:u(d),target:"_blank"},z(u(c)),9,Eu)])):_("",!0),w[9]||(w[9]=v("li",null,[v("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),w[10]||(w[10]=v("li",null,[v("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])]),v("div",null,[v("a",Du,[m(de,{display:"Forums",direction:u(X).Down,yoffset:"5px"},{default:L(()=>w[11]||(w[11]=[v("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),v("div",{onClick:w[1]||(w[1]=M=>{var x;return(x=e.value)==null?void 0:x.open()})},[m(de,{display:"Info",direction:u(X).Down,class:"info"},{default:L(()=>w[12]||(w[12]=[v("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),v("div",{onClick:w[2]||(w[2]=M=>{var x;return(x=t.value)==null?void 0:x.open()})},[m(de,{display:"Saves",direction:u(X).Down,xoffset:"-20px"},{default:L(()=>[v("span",{class:re(["material-icons",{needsSync:y.value}])},"library_books",2)]),_:1},8,["direction"])]),v("div",{onClick:w[3]||(w[3]=M=>{var x;return(x=r.value)==null?void 0:x.open()})},[m(de,{display:"Settings",direction:u(X).Down,xoffset:"-66px"},{default:L(()=>w[13]||(w[13]=[v("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])])],16)):(N(),I("div",Ve({key:1,class:"overlay-nav"},g.$attrs),[v("div",{onClick:w[4]||(w[4]=M=>{var x;return(x=i.value)==null?void 0:x.open()}),class:"version-container"},[m(de,{display:"Changelog",direction:u(X).Right,xoffset:"25%",class:"version"},{default:L(()=>[v("span",null,"v"+z(u(b)),1)]),_:1},8,["direction"])]),v("div",{onClick:w[5]||(w[5]=M=>{var x;return(x=t.value)==null?void 0:x.open()})},[m(de,{display:"Saves",direction:u(X).Right},{default:L(()=>[v("span",{class:re(["material-icons",{needsSync:y.value}])},"library_books",2)]),_:1},8,["direction"])]),v("div",{onClick:w[6]||(w[6]=M=>{var x;return(x=r.value)==null?void 0:x.open()})},[m(de,{display:"Settings",direction:u(X).Right},{default:L(()=>w[15]||(w[15]=[v("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])]),v("div",{onClick:w[7]||(w[7]=M=>{var x;return(x=e.value)==null?void 0:x.open()})},[m(de,{display:"Info",direction:u(X).Right},{default:L(()=>w[16]||(w[16]=[v("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),v("div",null,[v("a",Pu,[m(de,{display:"Forums",direction:u(X).Right,xoffset:"7px"},{default:L(()=>w[17]||(w[17]=[v("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),v("div",qu,[v("span",{onClick:p,class:"material-icons"},"discord"),v("ul",_u,[u(d)?(N(),I("li",Ru,[v("a",{href:u(d),target:"_blank"},z(u(c)),9,Fu)])):_("",!0),w[18]||(w[18]=v("li",null,[v("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),w[19]||(w[19]=v("li",null,[v("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])])],16)),m(wu,{ref_key:"info",ref:e,onOpenChangelog:w[8]||(w[8]=M=>{var x;return(x=i.value)==null?void 0:x.open()})},null,512),m(In,{ref_key:"savesManager",ref:t},null,512),m(Su,{ref_key:"options",ref:r},null,512),m(du,{ref_key:"changelog",ref:i},null,512)],64))}}),Ar=te(Lu,[["__scopeId","data-v-fcec1ed1"]]),Ou={class:"inner-tab"},Vu=Y({__name:"Game",setup(n){const e=it($,"tabs"),t=S(()=>Object.keys(Ce)),r=Z.useHeader;function i(a){const{display:l,name:o,color:c,minimizable:d,minimizedDisplay:b,minimized:p,nodes:y,forceHideGoBack:g}=a;return{display:l,name:o,color:c,minimizable:d,minimizedDisplay:b,minimized:p,nodes:y,forceHideGoBack:g}}return(a,l)=>(N(),I("div",{class:re(["tabs-container",{useHeader:u(r)}])},[(N(!0),I(R,null,Ue(e.value,(o,c)=>{var d,b;return N(),I("div",{key:c,class:re(["tab",u((d=u(Ce)[o])==null?void 0:d.classes)]),style:fe(u((b=u(Ce)[o])==null?void 0:b.style))},[c===0&&!u(r)?(N(),ne(Ar,{key:0})):_("",!0),v("div",Ou,[t.value.includes(o)?(N(),ne(uu,Ve({key:0,ref_for:!0},i(u(Ce)[o]),{index:c,onSetMinimized:p=>u(Ce)[o].minimized.value=p}),null,16,["index","onSetMinimized"])):(N(),ne(zr(o),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}}),Bu=te(Vu,[["__scopeId","data-v-d0a3afce"]]),Uu={key:0,class:"tpsDisplay"},Gu=Y({__name:"TPS",setup(n){const e=S(()=>s.div(K.lastTenTicks.length,K.lastTenTicks.reduce((t,r)=>t+r,0)));return(t,r)=>e.value.isNan()?_("",!0):(N(),I("div",Uu,"TPS: "+z(u(Dt)(e.value)),1))}}),zu=te(Gu,[["__scopeId","data-v-7df31503"]]),ju=Y({__name:"App",setup(n){const e=Z.useHeader,t=S(()=>at[W.theme].variables),r=it(W,"showTPS"),i=it(K,"errors"),a=()=>rl.map(l=>q(l));return(l,o)=>i.value.length>0?(N(),I("div",{key:0,class:"error-container",style:fe(t.value)},[m(tr,{errors:i.value},null,8,["errors"])],4)):(N(),I(R,{key:1},[v("div",{id:"modal-root",style:fe(t.value)},null,4),v("div",{class:re(["app",{useHeader:u(e)}]),style:fe(t.value)},[u(e)?(N(),ne(Ar,{key:0})):_("",!0),m(Bu),u(r.value)?(N(),ne(zu,{key:1})):_("",!0),m(ql),m(tu),m(su),m(zl),m(a)],6)],64))}}),Hu=te(ju,[["__scopeId","data-v-b45f2ee2"]]),Wu="modulepreload",Yu=function(n,e){return new URL(n,e).href},Jn={},Ju=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const l=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(d=>{if(d=Yu(d,r),d in Jn)return;Jn[d]=!0;const b=d.endsWith(".css"),p=b?'[rel="stylesheet"]':"";if(!!r)for(let w=l.length-1;w>=0;w--){const M=l[w];if(M.href===d&&(!b||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=b?"stylesheet":Wu,b||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),b)return new Promise((w,M)=>{g.addEventListener("load",w),g.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Zu(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=n;let o,c;const d=async(p=!0)=>{await c};async function b(){if("serviceWorker"in navigator){if(o=await Ju(async()=>{const{Workbox:p}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:p}},[],import.meta.url).then(({Workbox:p})=>new p("./sw.js",{scope:"./",type:"classic"})).catch(p=>{l==null||l(p)}),!o)return;o.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),o.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),o.register({immediate:e}).then(p=>{a?a("./sw.js",p):i==null||i(p)}).catch(p=>{l==null||l(p)})}}return c=b(),d}function Ku(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=n,o=F(!1),c=F(!1);return{updateServiceWorker:Zu({immediate:e,onNeedRefresh(){o.value=!0,t==null||t()},onOfflineReady(){c.value=!0,r==null||r()},onRegistered:i,onRegisteredSW:a,onRegisterError:l}),offlineReady:c,needRefresh:o}}let ct=null;function en(){const n=Date.now();let e=(n-$.time)/1e3;$.time=n;const t=e;if(K.lastTenTicks.push(t),K.lastTenTicks.length>10&&(K.lastTenTicks=K.lastTenTicks.slice(1)),!(At!=null&&At.value&&!$.keepGoing)&&!K.hasNaN&&(e=Math.max(e,0),$.devSpeed!==0)){if(ln.value=!1,$.offlineTime!=null){if(s.gt($.offlineTime,Z.offlineLimit*3600)&&($.offlineTime=Z.offlineLimit*3600),s.gt($.offlineTime,0)&&$.devSpeed!==0){const r=Math.max($.offlineTime/10,e);$.offlineTime=$.offlineTime-r,e+=r}else $.devSpeed===0&&($.offlineTime+=e);(!$.offlineProd||s.lt($.offlineTime,0))&&($.offlineTime=null)}e=Math.min(e,Z.maxTickLength),$.devSpeed!=null&&(e*=$.devSpeed),Number.isFinite(e)||(e=1e308),!s.eq(e,0)&&($.timePlayed+=e,Number.isFinite($.timePlayed)||($.timePlayed=1e308),pe.emit("update",e,t),W.unthrottled?(requestAnimationFrame(en),ct!=null&&(clearInterval(ct),ct=null)):ct==null&&(ct=setInterval(en,50)))}}async function Xu(){W.unthrottled?requestAnimationFrame(en):ct=setInterval(en,50)}ye(At,n=>{n&&pe.emit("gameWon")});setInterval(()=>{K.mouseActivity=[...K.mouseActivity.slice(-7),!1]},1e3*60*60);const Tn=console.error;console.error=function(...n){Tn(...n)};window.onerror=function(n,e,t,r,i){return K.errors.push(i instanceof Error?i:new Error(JSON.stringify(i))),Tn(i),!0};window.onunhandledrejection=function(n){K.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),Tn(n.reason)};document.title=Z.title;window.projInfo=Z;Z.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Zo();const n=window.vue=jr(Hu);n.config.errorHandler=function(e,t,r){console.error(e,r,t)},pe.emit("setupVue",n),n.mount("#app"),pt(()=>{const e=er();Ku({immediate:!0,onOfflineReady(){e.info("App ready to work offline")},onRegisterError:console.warn,onRegistered:console.info})}),Xu()});
