var ji=Object.defineProperty;var zi=(n,e,t)=>e in n?ji(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var O=(n,e,t)=>zi(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-GVBARt8q.js";import{aX as Qt,bo as c,X as J,aZ as G,aR as M,A as I,b0 as it,bS as hn,aA as ue,az as Yt,w as h,aJ as en,G as y,bf as Y,F as _,a$ as gt,z as F,aC as xe,P as w,Q as u,bN as j,b9 as or,aT as An,y as oe,bP as bn,bF as Hi,ay as dt,l as Xr,T as Wi,ap as Zi,ar as qe,bI as Ne,am as On,bb as Un,bj as wt,aO as Qr,aB as Yi,bl as Ji,bJ as ei,au as ti,bA as Ki,bE as ir,aI as Xi,bk as Rr,b3 as Qi,x as ea}from"./@vue-CCfogNd1.js";import{L as Nt}from"./lz-string-BZNGtwso.js";import{c as ni}from"./nanoevents-BxCKNB1V.js";import{Y as ta}from"./vue-next-select-CgtHQcl0.js";import{s as na,u as ri}from"./vue-toastification-CjoTmBGg.js";import{i as ra}from"./unofficial-galaxy-sdk-C_siawBx.js";import{D as ia}from"./vuedraggable-BgvaSe-I.js";import{p as aa}from"./vue-textarea-autosize-DLc4kbjP.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const sa="./projInfo-schema.json",la="Orbital Drift",oa="WHEEEeeee eee ee e e    e  e",ua="orbital_drift",ca="",da="",ma="",fa="0.0",pa="Initial Commit",va=!0,ga=!1,ha=2,ba=!0,ya=null,ka="",Ca=["main"],wa=3600,Na=1,Sa=!0,Ma="base64",Ta=!1,xa=2,re={$schema:sa,title:la,description:oa,id:ua,author:ca,discordName:da,discordLink:ma,versionNumber:fa,versionTitle:pa,allowGoBack:va,defaultShowSmall:ga,defaultDecimalsShown:ha,useHeader:ba,banner:ya,logo:ka,initialTabs:Ca,maxTickLength:wa,offlineLimit:Na,enablePausing:Sa,exportEncoding:Ma,disableHealthWarning:Ta,defaultDecimalShown:xa},Ia=Qt({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}}),L=window.player=Ia;function Jt(n){return JSON.stringify(n,(e,t)=>c(t)??null)}const Da=J({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,r=G(!1),a=G(null);function s(){t("click"),a.value!=null&&clearTimeout(a.value),r.value=!1,Yt(()=>{r.value=!0,a.value=setTimeout(()=>r.value=!1,500)})}return(l,o)=>(M(),I("button",{onClick:hn(s,["stop"]),class:ue(["feedback",{activated:r.value,left:l.left}])},[it(l.$slots,"default",{},void 0,!0)],2))}}),ae=(n,e)=>{const t=n.__vccOpts||n;for(const[r,a]of e)t[r]=a;return t},ur=ae(Da,[["__scopeId","data-v-f82eae5d"]]),Aa={class:"error"},Ea={class:"error-title"},$a={class:"error-details",style:{"margin-top":"-10px"}},Pa={key:0},qa={class:"instructions"},Ra=["href"],La={key:0,style:{"margin-top":"20px"}},_a={class:"error-details"},Oa={key:0,style:{"margin-top":"10px"}},Fa={key:1,style:{"margin-top":"10px"}},Va=J({__name:"Error",props:{errors:{}},setup(n){const e=n,t=h(()=>e.errors[0]),r=h(()=>e.errors.map(l=>l.stack==null?[]:l.stack.split(`
`))),a=h(()=>e.errors.map(l=>l.cause==null?[]:(typeof l.cause=="string"?l.cause:JSON.stringify(l.cause)).split(`
`)));function s(){let l=Jt(L);switch(re.exportEncoding){default:console.warn(`Unknown save encoding: ${re.exportEncoding}. Defaulting to lz`);case"lz":l=Nt.compressToUTF16(l);break;case"base64":l=btoa(unescape(encodeURIComponent(l)));break;case"plain":break}console.log(l);const o=document.createElement("textarea");o.value=l,document.body.appendChild(o),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(o)}return en(()=>{L.autosave=!1,L.devSpeed=0}),(l,o)=>(M(),I("div",Aa,[y("h1",Ea,Y(t.value.name)+": "+Y(t.value.message),1),y("div",$a,[t.value.cause?(M(),I("div",Pa,[(M(!0),I(_,null,gt(a.value[0],d=>(M(),I("div",{key:d},Y(d),1))),128))])):F("",!0),t.value.stack?(M(),I("div",{key:1,style:xe(t.value.cause?"margin-top: 10px":"")},[(M(!0),I(_,null,gt(r.value[0],d=>(M(),I("div",{key:d},Y(d),1))),128))],4)):F("",!0)]),y("div",qa,[o[2]||(o[2]=w(" Check the console for more details, and consider sharing it with the developers on ")),y("a",{href:c(re).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,Ra),o[3]||(o[3]=w("! ")),u(ur,{onClick:s,class:"button",style:{display:"inline-flex"}},{default:j(()=>o[0]||(o[0]=[y("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),y("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),o[4]||(o[4]=y("br",null,null,-1)),l.errors.length>1?(M(),I("div",La,o[1]||(o[1]=[y("h3",null,"Other errors",-1)]))):F("",!0),(M(!0),I(_,null,gt(l.errors.slice(1),(d,p)=>(M(),I("div",{key:p,style:{"margin-top":"20px"}},[y("details",_a,[y("summary",null,Y(d.name)+": "+Y(d.message),1),d.cause?(M(),I("div",Oa,[(M(!0),I(_,null,gt(a.value[p+1],g=>(M(),I("div",{key:g},Y(g),1))),128))])):F("",!0),d.stack?(M(),I("div",Fa,[(M(!0),I(_,null,gt(r.value[p+1],g=>(M(),I("div",{key:g},Y(g),1))),128))])):F("",!0)])]))),128))])]))}}),ii=ae(Va,[["__scopeId","data-v-2524e23e"]]),lt={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var cr=(n=>(n.Classic="classic",n.Paper="paper",n.Nordic="nordic",n.Aqua="aqua",n.Drift="drift",n))(cr||{});const Ot={classic:lt,paper:{...lt,variables:{...lt.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...lt,variables:{...lt.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...lt,variables:{...lt.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}},drift:{...lt,variables:{...lt.variables,"--background":"#010b19","--feature-foreground":"#fff","--raised-background":"#333c4a","--locked":"#21252C","--bought":"#011719","--outline":"#333c4a","--border-radius":"2px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1}},le=window.state=or({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:Qt([])}),Pe=ni();"fonts"in document&&(document.fonts.onloadingdone=()=>Pe.emit("fontsLoaded"));document.onmousemove=function(){le.mouseActivity[le.mouseActivity.length-1]=!0};const Ba=J({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var v;const t=e,r=G({}),a=new ResizeObserver(d),s=G(null);en(()=>{const k=s.value;k!=null&&a.observe(k)});let l=!0,o=G((v=s.value)==null?void 0:v.getBoundingClientRect());function d(){l&&(l=!1,Yt(()=>{var k;o.value=(k=s.value)==null?void 0:k.getBoundingClientRect(),Object.values(r.value).filter(f=>f).forEach(f=>f.rect=f.element.getBoundingClientRect()),t("updateNodes",r.value),l=!0}))}Pe.on("fontsLoaded",d);const p={attributes:!1,childList:!0,subtree:!1};An(oi,(k,f)=>{const b=new MutationObserver(()=>g(k));b.observe(f,p),r.value[k]={element:f,observer:b,rect:f.getBoundingClientRect()},d()}),An(ui,k=>{var f;(f=r.value[k])==null||f.observer.disconnect(),r.value[k]=void 0,d()}),An(ci,r),An(di,o);function g(k){const f=r.value[k];f!=null&&(f.rect=f.element.getBoundingClientRect(),t("updateNodes",r.value))}return(k,f)=>(M(),I(_,null,[it(k.$slots,"default",{},void 0,!0),y("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}}),ai=ae(Ba,[["__scopeId","data-v-4fc505f1"]]),Ga={class:"modal-wrapper"},Ua=["width"],ja={class:"modal-header"},za={class:"modal-body"},Ha={class:"modal-footer"},St=J({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const r=n,a=t,s=h(()=>r.modelValue||o.value);function l(){r.preventClosing!==!0&&a("update:modelValue",!1)}const o=G(!1),d=G(null),p=h(()=>{var g;return((g=d.value)==null?void 0:g.nodes)??null});return e({isOpen:s,nodes:p}),(g,v)=>(M(),oe(Wi,{to:"#modal-root"},[u(Xr,{name:"modal",onBeforeEnter:v[0]||(v[0]=k=>o.value=!0),onAfterLeave:v[1]||(v[1]=k=>o.value=!1),appear:""},{default:j(()=>[bn(y("div",dt({class:"modal-mask",onPointerdown:hn(l,["self"])},g.$attrs),[y("div",Ga,[y("div",{class:"modal-container",width:g.width},[y("div",ja,[it(g.$slots,"header",{shown:s.value})]),y("div",za,[u(ai,{ref_key:"contextRef",ref:d},{default:j(()=>[it(g.$slots,"body",{shown:s.value})]),_:3},512)]),y("div",Ha,[it(g.$slots,"footer",{shown:s.value},()=>[y("div",{class:"modal-default-footer"},[v[2]||(v[2]=y("div",{class:"modal-default-flex-grow"},null,-1)),y("button",{class:"button modal-default-button",onClick:l}," Close ")])])])],8,Ua)])],16),[[Hi,g.modelValue]])]),_:3})]))}});function si(n){let e=n.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1),e}function Wa(n){return(n[0]+n.slice(1).replace(/[A-Z]/g,e=>`-${e}`)).toLowerCase()}function li(n){return typeof n=="function"}var Q=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(Q||{});function q(n){return li(n)&&n.length===0?h(n):n}const ht=Symbol("ProxyState"),Lr=Symbol("AfterEvaluation");function ye(n,e={}){const t=e;let r=!1,a=!1;const s=[];function l(){if(!r){if(a)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");a=!0,Object.assign(t,n.call(t,t)),r=!0,s.forEach(d=>d(t))}return t}function o(d){r?d(t):s.push(d)}return new Proxy(t,{get(d,p){if(p===ht)return l();if(p===Lr)return o;const g=l()[p];return g!=null&&typeof g=="object"&&rt in g?g[rt]:g},set(d,p,g){return l()[p]=g,!0},has(d,p){return p===ht||p===Lr?!0:Reflect.has(l(),p)},ownKeys(){return Reflect.ownKeys(l())},getOwnPropertyDescriptor(d,p){return r||(Object.assign(t,n.call(t,t)),r=!0),Object.getOwnPropertyDescriptor(d,p)}})}const oi=Symbol("RegisterNode"),ui=Symbol("UnregisterNode"),ci=Symbol("Nodes"),di=Symbol("Bounds"),Le=or({});window.layers=Le;const fn={},tt=[];function Mt(n,e){return ye(()=>{const t=ni();tt.push(n),fn[n]=new Set;const r={id:n,emitter:t,...t,nodes:G({}),minimized:_e(!1,!1)},a=e(r),{color:s,display:l,classes:o,style:d,name:p,forceHideGoBack:g,minWidth:v,minimizable:k,minimizedDisplay:f,...b}=a;if(tt[tt.length-1]==null||tt[tt.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${tt}
Trying to pop ${n}`);tt.pop();const N=q(d),x={...r,...b,color:q(s),display:l,classes:q(o),style:h(()=>{let S=c(x.minWidth);return(typeof S=="number"||!Number.isNaN(parseInt(S)))&&(S=S+"px"),{...c(N),...r.minimized.value?{flexGrow:"0",flexShrink:"0",width:"80px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:S,flexBasis:S,margin:""}}}),name:q(p)??n,forceHideGoBack:q(g),minWidth:q(v)??600,minimizable:q(k)??!1,minimizedDisplay:f};return x})}function Za(n,e){if(console.info("Adding layer",n.id),Le[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,Le[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),Le[n.id]=n,Pe.emit("addLayer",n,e.layers[n.id])}function Ya(n){console.info("Removing layer",n.id),Pe.emit("removeLayer",n),delete Le[n.id]}Pe.on("update",function(e){Object.values(Le).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(Le).forEach(t=>{t==null||t.emit("update",e)}),Object.values(Le).forEach(t=>{t==null||t.emit("postUpdate",e)})});class Ja{constructor(e){O(this,"map",new Map);O(this,"first");O(this,"last");O(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const r=new Ka(e,t);for(this.first===void 0?(this.first=r,this.last=r):(r.next=this.first,this.first.prev=r,this.first=r),this.map.set(e,r);this.map.size>this.maxSize;){const a=this.last;this.map.delete(a.key),this.last=a.prev,this.last.next=void 0}}}class Ka{constructor(e,t){O(this,"key");O(this,"value");O(this,"next");O(this,"prev");this.key=e,this.value=t}}const er=17,Xa=9e15,Qa=Math.log10(9e15),es=1/9e15,ts=308,ns=-324,_r=5,rs=1023,is=function(){const n=[];for(let t=ns+1;t<=ts;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),At=[2,Math.E,3,4,5,6,7,8,9,10],as=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],ss=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let T=function(e){return i.fromValue_noAlloc(e)},Z=function(n,e,t){return i.fromComponents(n,e,t)},te=function(e,t,r){return i.fromComponents_noNormalize(e,t,r)};const vt=function(e,t){const r=t+1,a=Math.ceil(Math.log10(Math.abs(e))),s=Math.round(e*Math.pow(10,r-a))*Math.pow(10,a-r);return parseFloat(s.toFixed(Math.max(r-a,0)))},tr=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},ls=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const r=n*n;let a=n;return t=t+1/(12*a),a=a*r,t=t+1/(360*a),a=a*r,t=t+1/(1260*a),a=a*r,t=t+1/(1680*a),a=a*r,t=t+1/(1188*a),a=a*r,t=t+691/(360360*a),a=a*r,t=t+7/(1092*a),a=a*r,t=t+3617/(122400*a),Math.exp(t)/e},mi=.5671432904097838,Or=function(n,e=1e-10){let t,r;if(!Number.isFinite(n)||n===0)return n;if(n===1)return mi;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let a=0;a<100;++a){if(r=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(r-t)<e*Math.abs(r))return r;t=r}throw Error(`Iteration failed to converge: ${n.toString()}`)};function Fr(n,e=1e-10){let t,r,a,s;if(!Number.isFinite(n.mag)||n.eq(i.dZero))return n;if(n.eq(i.dOne))return i.fromNumber(mi);t=i.ln(n);for(let l=0;l<100;++l){if(r=t.neg().exp(),a=t.sub(n.mul(r)),s=t.sub(a.div(t.add(1).sub(t.add(2).mul(a).div(i.mul(2,t).add(2))))),i.abs(s.sub(t)).lt(i.abs(s).mul(e)))return s;t=s}throw Error(`Iteration failed to converge: ${n.toString()}`)}const C=class C{constructor(e){O(this,"sign",0);O(this,"mag",0);O(this,"layer",0);e instanceof C?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/is(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,r){return new C().fromComponents(e,t,r)}static fromComponents_noNormalize(e,t,r){return new C().fromComponents_noNormalize(e,t,r)}static fromMantissaExponent(e,t){return new C().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new C().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new C().fromDecimal(e)}static fromNumber(e){return new C().fromNumber(e)}static fromString(e){return new C().fromString(e)}static fromValue(e){return new C().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof C)return e;if(typeof e=="string"){const t=C.fromStringCache.get(e);return t!==void 0?t:C.fromString(e)}else return typeof e=="number"?C.fromNumber(e):C.dZero}static abs(e){return T(e).abs()}static neg(e){return T(e).neg()}static negate(e){return T(e).neg()}static negated(e){return T(e).neg()}static sign(e){return T(e).sign}static sgn(e){return T(e).sign}static round(e){return T(e).round()}static floor(e){return T(e).floor()}static ceil(e){return T(e).ceil()}static trunc(e){return T(e).trunc()}static add(e,t){return T(e).add(t)}static plus(e,t){return T(e).add(t)}static sub(e,t){return T(e).sub(t)}static subtract(e,t){return T(e).sub(t)}static minus(e,t){return T(e).sub(t)}static mul(e,t){return T(e).mul(t)}static multiply(e,t){return T(e).mul(t)}static times(e,t){return T(e).mul(t)}static div(e,t){return T(e).div(t)}static divide(e,t){return T(e).div(t)}static recip(e){return T(e).recip()}static reciprocal(e){return T(e).recip()}static reciprocate(e){return T(e).reciprocate()}static cmp(e,t){return T(e).cmp(t)}static cmpabs(e,t){return T(e).cmpabs(t)}static compare(e,t){return T(e).cmp(t)}static isNaN(e){return e=T(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=T(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return T(e).eq(t)}static equals(e,t){return T(e).eq(t)}static neq(e,t){return T(e).neq(t)}static notEquals(e,t){return T(e).notEquals(t)}static lt(e,t){return T(e).lt(t)}static lte(e,t){return T(e).lte(t)}static gt(e,t){return T(e).gt(t)}static gte(e,t){return T(e).gte(t)}static max(e,t){return T(e).max(t)}static min(e,t){return T(e).min(t)}static minabs(e,t){return T(e).minabs(t)}static maxabs(e,t){return T(e).maxabs(t)}static clamp(e,t,r){return T(e).clamp(t,r)}static clampMin(e,t){return T(e).clampMin(t)}static clampMax(e,t){return T(e).clampMax(t)}static cmp_tolerance(e,t,r){return T(e).cmp_tolerance(t,r)}static compare_tolerance(e,t,r){return T(e).cmp_tolerance(t,r)}static eq_tolerance(e,t,r){return T(e).eq_tolerance(t,r)}static equals_tolerance(e,t,r){return T(e).eq_tolerance(t,r)}static neq_tolerance(e,t,r){return T(e).neq_tolerance(t,r)}static notEquals_tolerance(e,t,r){return T(e).notEquals_tolerance(t,r)}static lt_tolerance(e,t,r){return T(e).lt_tolerance(t,r)}static lte_tolerance(e,t,r){return T(e).lte_tolerance(t,r)}static gt_tolerance(e,t,r){return T(e).gt_tolerance(t,r)}static gte_tolerance(e,t,r){return T(e).gte_tolerance(t,r)}static pLog10(e){return T(e).pLog10()}static absLog10(e){return T(e).absLog10()}static log10(e){return T(e).log10()}static log(e,t){return T(e).log(t)}static log2(e){return T(e).log2()}static ln(e){return T(e).ln()}static logarithm(e,t){return T(e).logarithm(t)}static pow(e,t){return T(e).pow(t)}static pow10(e){return T(e).pow10()}static pow_base(e,t){return T(e).pow_base(t)}static root(e,t){return T(e).root(t)}static factorial(e,t){return T(e).factorial()}static gamma(e,t){return T(e).gamma()}static lngamma(e,t){return T(e).lngamma()}static exp(e){return T(e).exp()}static sqr(e){return T(e).sqr()}static sqrt(e){return T(e).sqrt()}static cube(e){return T(e).cube()}static cbrt(e){return T(e).cbrt()}static tetrate(e,t=2,r=te(1,0,1)){return T(e).tetrate(t,r)}static iteratedexp(e,t=2,r=te(1,0,1)){return T(e).iteratedexp(t,r)}static iteratedlog(e,t=10,r=1){return T(e).iteratedlog(t,r)}static layeradd10(e,t){return T(e).layeradd10(t)}static layeradd(e,t,r=10){return T(e).layeradd(t,r)}static slog(e,t=10){return T(e).slog(t)}static lambertw(e){return T(e).lambertw()}static ssqrt(e){return T(e).ssqrt()}static pentate(e,t=2,r=te(1,0,1)){return T(e).pentate(t,r)}static sin(e){return T(e).sin()}static cos(e){return T(e).cos()}static tan(e){return T(e).tan()}static asin(e){return T(e).asin()}static acos(e){return T(e).acos()}static atan(e){return T(e).atan()}static sinh(e){return T(e).sinh()}static cosh(e){return T(e).cosh()}static tanh(e){return T(e).tanh()}static asinh(e){return T(e).asinh()}static acosh(e){return T(e).acosh()}static atanh(e){return T(e).atanh()}static affordGeometricSeries(e,t,r,a){return this.affordGeometricSeries_core(T(e),T(t),T(r),a)}static sumGeometricSeries(e,t,r,a){return this.sumGeometricSeries_core(e,T(t),T(r),a)}static affordArithmeticSeries(e,t,r,a){return this.affordArithmeticSeries_core(T(e),T(t),T(r),T(a))}static sumArithmeticSeries(e,t,r,a){return this.sumArithmeticSeries_core(T(e),T(t),T(r),T(a))}static efficiencyOfPurchase(e,t,r){return this.efficiencyOfPurchase_core(T(e),T(t),T(r))}static randomDecimalForTesting(e){if(Math.random()*20<1)return te(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return te(t,0,1);const r=Math.floor(Math.random()*(e+1));let a=r===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(a=Math.trunc(a));let s=Math.pow(10,a);return Math.random()>.9&&(s=Math.trunc(s)),Z(t,r,s)}static affordGeometricSeries_core(e,t,r,a){const s=t.mul(r.pow(a));return C.floor(e.div(s).mul(r.sub(1)).add(1).log10().div(r.log10()))}static sumGeometricSeries_core(e,t,r,a){return t.mul(r.pow(a)).mul(C.sub(1,r.pow(e))).div(C.sub(1,r))}static affordArithmeticSeries_core(e,t,r,a){const l=t.add(a.mul(r)).sub(r.div(2)),o=l.pow(2);return l.neg().add(o.add(r.mul(e).mul(2)).sqrt()).div(r).floor()}static sumArithmeticSeries_core(e,t,r,a){const s=t.add(a.mul(r));return e.div(2).mul(s.mul(2).plus(e.sub(1).mul(r)))}static efficiencyOfPurchase_core(e,t,r){return e.div(t).add(e.div(r))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<es)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Xa)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Qa&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,r){return this.sign=e,this.layer=t,this.mag=r,this.normalize(),this}fromComponents_noNormalize(e,t,r){return this.sign=e,this.layer=t,this.mag=r,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,r=C.fromStringCache.get(t);if(r!==void 0)return this.fromDecimal(r);e=e.replace(",","");const a=e.split("^^^");if(a.length===2){const N=parseFloat(a[0]),x=parseFloat(a[1]),S=a[1].split(";");let E=1;if(S.length===2&&(E=parseFloat(S[1]),isFinite(E)||(E=1)),isFinite(N)&&isFinite(x)){const V=C.pentate(N,x,E);return this.sign=V.sign,this.layer=V.layer,this.mag=V.mag,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}}const s=e.split("^^");if(s.length===2){const N=parseFloat(s[0]),x=parseFloat(s[1]),S=s[1].split(";");let E=1;if(S.length===2&&(E=parseFloat(S[1]),isFinite(E)||(E=1)),isFinite(N)&&isFinite(x)){const V=C.tetrate(N,x,E);return this.sign=V.sign,this.layer=V.layer,this.mag=V.mag,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}}const l=e.split("^");if(l.length===2){const N=parseFloat(l[0]),x=parseFloat(l[1]);if(isFinite(N)&&isFinite(x)){const S=C.pow(N,x);return this.sign=S.sign,this.layer=S.layer,this.mag=S.mag,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}}e=e.trim().toLowerCase();let o,d,p=e.split("pt");if(p.length===2){o=10,d=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let N=parseFloat(p[1]);if(isFinite(N)||(N=1),isFinite(o)&&isFinite(d)){const x=C.tetrate(o,d,N);return this.sign=x.sign,this.layer=x.layer,this.mag=x.mag,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}}if(p=e.split("p"),p.length===2){o=10,d=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let N=parseFloat(p[1]);if(isFinite(N)||(N=1),isFinite(o)&&isFinite(d)){const x=C.tetrate(o,d,N);return this.sign=x.sign,this.layer=x.layer,this.mag=x.mag,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}}const g=e.split("e"),v=g.length-1;if(v===0){const N=parseFloat(e);if(isFinite(N))return this.fromNumber(N),C.fromStringCache.size>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}else if(v===1){const N=parseFloat(e);if(isFinite(N)&&N!==0)return this.fromNumber(N),C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}const k=e.split("e^");if(k.length===2){this.sign=1,k[0].charAt(0)=="-"&&(this.sign=-1);let N="";for(let x=0;x<k[1].length;++x){const S=k[1].charCodeAt(x);if(S>=43&&S<=57||S===101)N+=k[1].charAt(x);else return this.layer=parseFloat(N),this.mag=parseFloat(k[1].substr(x+1)),this.normalize(),C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}}if(v<1)return this.sign=0,this.layer=0,this.mag=0,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this;const f=parseFloat(g[0]);if(f===0)return this.sign=0,this.layer=0,this.mag=0,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this;let b=parseFloat(g[g.length-1]);if(v>=2){const N=parseFloat(g[g.length-2]);isFinite(N)&&(b*=Math.sign(N),b+=tr(N))}if(!isFinite(f))this.sign=g[0]==="-"?-1:1,this.layer=v,this.mag=b;else if(v===1)this.sign=Math.sign(f),this.layer=1,this.mag=b+Math.log10(Math.abs(f));else if(this.sign=Math.sign(f),this.layer=v,v===2){const N=C.mul(Z(1,2,b),T(f));return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}else this.mag=b;return this.normalize(),C.fromStringCache.maxSize>=1&&C.fromStringCache.set(t,C.fromDecimal(this)),this}fromValue(e){return e instanceof C?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:vt(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:vt(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=_r?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):vt(this.m,e)+"e"+vt(this.e,e):this.layer===1?vt(this.m,e)+"e"+vt(this.e,e):this.layer<=_r?(this.sign===-1?"-":"")+"e".repeat(this.layer)+vt(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+vt(this.mag,e)}abs(){return te(this.sign===0?0:1,this.layer,this.mag)}neg(){return te(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?C.dZero:this.layer===0?Z(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?C.dZero:this.layer===0?Z(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?C.dZero:this.layer===0?Z(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?C.dZero:this.layer===0?Z(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=T(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return te(0,0,0);let r,a;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(C.cmpabs(this,t)>0?(r=this,a=t):(r=t,a=this),r.layer===0&&a.layer===0)return C.fromNumber(r.sign*r.mag+a.sign*a.mag);const s=r.layer*Math.sign(r.mag),l=a.layer*Math.sign(a.mag);if(s-l>=2)return r;if(s===0&&l===-1){if(Math.abs(a.mag-Math.log10(r.mag))>er)return r;{const p=Math.pow(10,Math.log10(r.mag)-a.mag),g=a.sign+r.sign*p;return Z(Math.sign(g),1,a.mag+Math.log10(Math.abs(g)))}}if(s===1&&l===0){if(Math.abs(r.mag-Math.log10(a.mag))>er)return r;{const p=Math.pow(10,r.mag-Math.log10(a.mag)),g=a.sign+r.sign*p;return Z(Math.sign(g),1,Math.log10(a.mag)+Math.log10(Math.abs(g)))}}if(Math.abs(r.mag-a.mag)>er)return r;const o=Math.pow(10,r.mag-a.mag),d=a.sign+r.sign*o;return Z(Math.sign(d),1,a.mag+Math.log10(Math.abs(d)))}plus(e){return this.add(e)}sub(e){return this.add(T(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=T(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return te(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return te(this.sign*t.sign,0,1);let r,a;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(r=this,a=t):(r=t,a=this),r.layer===0&&a.layer===0)return C.fromNumber(r.sign*a.sign*r.mag*a.mag);if(r.layer>=3||r.layer-a.layer>=2)return Z(r.sign*a.sign,r.layer,r.mag);if(r.layer===1&&a.layer===0)return Z(r.sign*a.sign,1,r.mag+Math.log10(a.mag));if(r.layer===1&&a.layer===1)return Z(r.sign*a.sign,1,r.mag+a.mag);if(r.layer===2&&a.layer===1){const s=Z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(Z(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return Z(r.sign*a.sign,s.layer+1,s.sign*s.mag)}if(r.layer===2&&a.layer===2){const s=Z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(Z(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return Z(r.sign*a.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=T(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?C.dNaN:this.layer===0?Z(this.sign,0,1/this.mag):Z(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=T(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=T(e),r=this.mag>0?this.layer:-this.layer,a=t.mag>0?t.layer:-t.layer;return r>a?1:r<a?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=T(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=T(e);return this.lt(t)?t:this}min(e){const t=T(e);return this.gt(t)?t:this}maxabs(e){const t=T(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=T(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const r=T(e);return this.eq_tolerance(r,t)?0:this.cmp(r)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const r=T(e);if(t==null&&(t=1e-7),this.sign!==r.sign||Math.abs(this.layer-r.layer)>1)return!1;let a=this.mag,s=r.mag;return this.layer>r.layer&&(s=tr(s)),this.layer<r.layer&&(a=tr(a)),Math.abs(a-s)<=t*Math.max(Math.abs(a),Math.abs(s))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const r=T(e);return!this.eq_tolerance(r,t)&&this.lt(r)}lte_tolerance(e,t){const r=T(e);return this.eq_tolerance(r,t)||this.lt(r)}gt_tolerance(e,t){const r=T(e);return!this.eq_tolerance(r,t)&&this.gt(r)}gte_tolerance(e,t){const r=T(e);return this.eq_tolerance(r,t)||this.gt(r)}pLog10(){return this.lt(C.dZero)?C.dZero:this.log10()}absLog10(){return this.sign===0?C.dNaN:this.layer>0?Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):Z(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?C.dNaN:this.layer>0?Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):Z(this.sign,0,Math.log10(this.mag))}log(e){return e=T(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?C.dNaN:this.layer===0&&e.layer===0?Z(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):C.div(this.log10(),e.log10())}log2(){return this.sign<=0?C.dNaN:this.layer===0?Z(this.sign,0,Math.log2(this.mag)):this.layer===1?Z(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?Z(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?C.dNaN:this.layer===0?Z(this.sign,0,Math.log(this.mag)):this.layer===1?Z(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?Z(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=T(e),r=this,a=t;if(r.sign===0)return a.eq(0)?te(1,0,1):r;if(r.sign===1&&r.layer===0&&r.mag===1)return r;if(a.sign===0)return te(1,0,1);if(a.sign===1&&a.layer===0&&a.mag===1)return r;const s=r.absLog10().mul(a).pow10();return this.sign===-1?Math.abs(a.toNumber()%2)%2===1?s.neg():Math.abs(a.toNumber()%2)%2===0?s:C.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return C.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return Z(1,0,t);if(e.sign===0)return C.dOne;e=te(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?Z(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?Z(-e.sign,e.layer+1,-e.mag):C.dOne}pow_base(e){return T(e).pow(this)}root(e){const t=T(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?C.exp(C.mul(this,C.ln(this).sub(1))):C.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(te(1,0,24)))return C.fromNumber(ls(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const r=e*e;let a=e,s=12*a,l=1/s,o=t+l;if(o===t||(t=o,a=a*r,s=360*a,l=1/s,o=t-l,o===t))return C.exp(t);t=o,a=a*r,s=1260*a;let d=1/s;return t=t+d,a=a*r,s=1680*a,d=1/s,t=t-d,C.exp(t)}else return this.layer===1?C.exp(C.mul(this,C.ln(this).sub(1))):C.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?C.dOne:this.layer===0&&this.mag<=709.7?C.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?Z(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?Z(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):Z(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return C.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return Z(1,2,Math.log10(this.mag)-.3010299956639812);{const e=C.div(te(this.sign,this.layer-1,this.mag),te(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=te(1,0,1)){if(e===1)return C.pow(this,t);if(e===0)return new C(t);if(this.eq(C.dOne))return C.dOne;if(this.eq(-1))return C.pow(this,t);if(e===Number.POSITIVE_INFINITY){const s=this.toNumber();if(s<=1.444667861009766&&s>=.06598803584531254){if(s>1.444667861009099)return C.fromNumber(Math.E);const l=C.ln(this).neg();return l.lambertw().div(l)}else return s>1.444667861009766?C.fromNumber(Number.POSITIVE_INFINITY):C.dNaN}if(this.eq(C.dZero)){let s=Math.abs((e+1)%2);return s>1&&(s=2-s),C.fromNumber(s)}if(e<0)return C.iteratedlog(t,this,-e);t=T(t);const r=e;e=Math.trunc(e);const a=r-e;if(this.gt(C.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let s=0;s<e;++s){const l=t;if(t=this.pow(t),l.eq(t))return t}if(a!=0){const s=this.pow(t);return t.mul(1-a).add(s.mul(a))}return t}a!==0&&(t.eq(C.dOne)?this.gt(10)?t=this.pow(a):(t=C.fromNumber(C.tetrate_critical(this.toNumber(),a)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let s=0;s<e;++s){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return te(t.sign,t.layer+(e-s-1),t.mag);if(s>1e4)return t}return t}iteratedexp(e=2,t=te(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return C.tetrate(e,-t,this);e=T(e);let r=C.fromDecimal(this);const a=t;t=Math.trunc(t);const s=a-t;if(r.layer-e.layer>3){const l=Math.min(t,r.layer-e.layer-3);t-=l,r.layer-=l}for(let l=0;l<t;++l){if(r=r.log(e),!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(l>1e4)return r}return s>0&&s<1&&(e.eq(10)?r=r.layeradd10(-s):r=r.layeradd(-s,e)),r}slog(e=10,t=100){let r=.001,a=!1,s=!1,l=this.slog_internal(e).toNumber();for(let o=1;o<t;++o){const p=new C(e).tetrate(l).gt(this);if(o>1&&s!=p&&(a=!0),s=p,a?r/=2:r*=2,r=Math.abs(r)*(p?-1:1),l+=r,r===0)break}return C.fromNumber(l)}slog_internal(e=10){if(e=T(e),e.lte(C.dZero)||e.eq(C.dOne))return C.dNaN;if(e.lt(C.dOne))return this.eq(C.dOne)?C.dZero:this.eq(C.dZero)?C.dNegOne:C.dNaN;if(this.mag<0||this.eq(C.dZero))return C.dNegOne;let t=0,r=C.fromDecimal(this);if(r.layer-e.layer>3){const a=r.layer-e.layer-3;t+=a,r.layer-=a}for(let a=0;a<100;++a)if(r.lt(C.dZero))r=C.pow(e,r),t-=1;else{if(r.lte(C.dOne))return C.fromNumber(t+C.slog_critical(e.toNumber(),r.toNumber()));t+=1,r=C.log(r,e)}return C.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:C.critical_section(e,t,ss)}static tetrate_critical(e,t){return C.critical_section(e,t,as)}static critical_section(e,t,r){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let a=0,s=0;for(let o=0;o<At.length;++o)if(At[o]==e){a=r[o][Math.floor(t)],s=r[o][Math.ceil(t)];break}else if(At[o]<e&&At[o+1]>e){const d=(e-At[o])/(At[o+1]-At[o]);a=r[o][Math.floor(t)]*(1-d)+r[o+1][Math.floor(t)]*d,s=r[o][Math.ceil(t)]*(1-d)+r[o+1][Math.ceil(t)]*d;break}const l=t-Math.floor(t);return a<=0||s<=0?a*(1-l)+s*l:Math.pow(e,Math.log(a)/Math.log(e)*(1-l)+Math.log(s)/Math.log(e)*l)}layeradd10(e){e=C.fromValue_noAlloc(e).toNumber();const t=C.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const r=Math.trunc(e);e-=r,t.layer+=r}if(e<=-1){const r=Math.trunc(e);if(e-=r,t.layer+=r,t.layer<0)for(let a=0;a<100;++a){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const a=this.slog(t).toNumber()+e;return a>=0?C.tetrate(t,a):Number.isFinite(a)?a>=-1?C.log(C.tetrate(t,a+1),t):C.log(C.log(C.tetrate(t,a+2),t),t):C.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return C.fromNumber(Or(this.toNumber()));if(this.layer===0)return C.fromNumber(Or(this.sign*this.mag));if(this.layer===1)return Fr(this);if(this.layer===2)return Fr(this);if(this.layer>=3)return te(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return te(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=te(1,0,1)){t=T(t);const r=e;e=Math.trunc(e);const a=r-e;a!==0&&(t.eq(C.dOne)?(++e,t=C.fromNumber(a)):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let s=0;s<e;++s){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(s>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?C.fromNumber(Math.sin(this.sign*this.mag)):te(0,0,0)}cos(){return this.mag<0?C.dOne:this.layer===0?C.fromNumber(Math.cos(this.sign*this.mag)):te(0,0,0)}tan(){return this.mag<0?this:this.layer===0?C.fromNumber(Math.tan(this.sign*this.mag)):te(0,0,0)}asin(){return this.mag<0?this:this.layer===0?C.fromNumber(Math.asin(this.sign*this.mag)):te(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?C.fromNumber(Math.acos(this.toNumber())):this.layer===0?C.fromNumber(Math.acos(this.sign*this.mag)):te(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?C.fromNumber(Math.atan(this.sign*this.mag)):C.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return C.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return C.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?te(Number.NaN,Number.NaN,Number.NaN):C.ln(this.add(1).div(C.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(C.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};O(C,"dZero"),O(C,"dOne"),O(C,"dNegOne"),O(C,"dTwo"),O(C,"dTen"),O(C,"dNaN"),O(C,"dInf"),O(C,"dNegInf"),O(C,"dNumberMax"),O(C,"dNumberMin"),O(C,"fromStringCache",new Ja(rs));let i=C;i.dZero=te(0,0,0);i.dOne=te(1,0,1);i.dNegOne=te(-1,0,1);i.dTwo=te(1,0,2);i.dTen=te(1,0,10);i.dNaN=te(Number.NaN,Number.NaN,Number.NaN);i.dInf=te(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);i.dNegInf=te(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);i.dNumberMax=Z(1,0,Number.MAX_VALUE);i.dNumberMin=Z(1,0,Number.MIN_VALUE);T=i.fromValue_noAlloc;Z=i.fromComponents;te=i.fromComponents_noNormalize;i.fromMantissaExponent;i.fromMantissaExponent_noNormalize;const os=new i(1);function mn(n,e,t=!0){let r=i.log10(n).floor(),a=i.div(n,i.pow(10,r));a.toStringWithDecimalPlaces(e)==="10"&&(a=os,r=r.add(1));const s=r.gte(1e9)?z(r,Math.max(Math.max(e,3),re.defaultDecimalsShown)):r.gte(1e4)?Fn(r,0):r.toStringWithDecimalPlaces(0);return t?a.toStringWithDecimalPlaces(e)+"e"+s:"e"+s}function Fn(n,e){if(n==null)return"NaN";if(n=new i(n),n.mag<.001)return 0 .toFixed(e);const r=n.toStringWithDecimalPlaces(e).split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.length===1?r[0]:r[0]+"."+r[1]}function fi(n,e){return n==null?"NaN":(n=new i(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),re.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}const us=new i("eeee1000"),cs=new i("e100000"),Vr=new i("e1000"),pi=new i(1e9),ds=new i(1e6),ms=new i(1e3),fs=new i(.98),ps=new i(.001),vi=new i(0);function z(n,e,t){if(e==null&&(e=re.defaultDecimalsShown),t=t??re.defaultShowSmall,n=new i(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag))return"NaN";if(n.sign<0)return"-"+z(n.neg(),e);if(n.mag===Number.POSITIVE_INFINITY)return"Infinity";if(n.gte(us)){const r=n.slog();return r.gte(ds)?"F"+z(r.floor()):i.pow(10,r.sub(r.floor())).toStringWithDecimalPlaces(3)+"F"+Fn(r.floor(),0)}else{if(n.gte(cs))return mn(n,0,!1);if(n.gte(Vr))return mn(n,0);if(n.gte(pi))return mn(n,e);if(n.gte(ms))return Fn(n,0);if(n.gte(ps)||!t)return fi(n,e);if(n.eq(vi))return 0 .toFixed(e)}return n=hi(n),n.lt(Vr)?mn(n,e).replace(/([^(?:e|F)]*)$/,"-$1"):z(n,e)+"⁻¹"}function Ze(n){return n=new i(n),n.sign<0?"-"+Ze(n.neg()):n.gte(pi)||n.lte(fs)&&!n.eq(vi)?z(n):z(n,0)}function gi(n){return i.lt(n,0)?"-"+gi(i.neg(n)):i.gt(n,2**51)?z(i.div(n,31536e3))+"y":(n=new i(n).toNumber(),n<60?z(n)+"s":n<3600?Ze(Math.floor(n/60))+"m "+z(n%60)+"s":n<86400?Ze(Math.floor(n/3600))+"h "+Ze(Math.floor(n/60)%60)+"m "+Ze(n%60)+"s":n<31536e3?Ze(Math.floor(n/84600)%365)+"d "+Ze(Math.floor(n/3600)%24)+"h "+Ze(Math.floor(n/60)%60)+"m":Ze(Math.floor(n/31536e3))+"y "+Ze(Math.floor(n/84600)%365)+"d "+Ze(Math.floor(n/3600)%24)+"h")}function vs(n,e,t){n=new i(n);let r=n.toStringWithDecimalPlaces(e);return new i(r).gte(t)&&(r=i.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),r}function gs(n,e){return z(n,e,!0)}function hi(n){let e=i.log10(n).ceil();const t=i.div(n,i.pow(10,e));return e=e.neg(),n=new i(10).pow(e).times(t),n}const hs=Object.freeze(Object.defineProperty({__proto__:null,commaFormat:Fn,default:i,exponentialFormat:mn,format:z,formatSmall:gs,formatTime:gi,formatWhole:Ze,invertOOM:hi,regularFormat:fi,toPlaces:vs},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:bs,commaFormat:ys,regularFormat:ks,format:$,formatWhole:yn,formatTime:jn,toPlaces:Cs,formatSmall:zn,invertOOM:ws}=hs;window.Decimal=i;window.exponentialFormat=bs;window.commaFormat=ys;window.regularFormat=ks;window.format=$;window.formatWhole=yn;window.formatTime=jn;window.toPlaces=Cs;window.formatSmall=zn;window.invertOOM=ws;const bi=i.ln(10);function Rn(n){return n}function cn(n,...e){const t=e.find(r=>D(r));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function Ns(n,e){return D(e)?e.invert(i.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ss(n,e){return D(e)?e.isIntegrable()?m.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function Ms(n){return m.neg(n)}function Ts(n,e,t){return D(e)?e.invert(i.sub(n,Se(t))):D(t)?t.invert(i.sub(n,Se(e))):(console.error("Could not invert due to no input being a variable"),0)}function xs(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.times(t,e.innermostVariable??0).add(r)}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n);return m.times(e,t.innermostVariable??0).add(r)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Is(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.add(r,t)}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n);return m.add(r,e)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Ds(n,e,t){return D(e)?e.invert(i.add(n,Se(t))):D(t)?t.invert(i.sub(Se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function As(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.sub(r,m.times(t,e.innermostVariable??0))}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n);return m.times(e,t.innermostVariable??0).sub(r)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Es(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.sub(r,t)}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n);return m.sub(r,e)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function $s(n,e,t){return D(e)?e.invert(i.div(n,Se(t))):D(t)?t.invert(i.div(n,Se(e))):(console.error("Could not invert due to no input being a variable"),0)}function Ps(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.times(r,t)}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n);return m.times(r,e)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function qs(n,e,t){return D(e)?m.div(n,t):D(t)?m.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),m.constant(0))}function Rs(n,e,t){return D(e)?e.invert(i.mul(n,Se(t))):D(t)?t.invert(i.div(Se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Ls(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.div(r,t)}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n);return m.div(e,r)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function _s(n,e,t){return D(e)?m.mul(n,t):D(t)?m.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),m.constant(0))}function Os(n,e){return D(e)?e.invert(i.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function Fs(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.ln(t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Vs(n,e){return D(e)?e.invert(i.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function Bs(n){return i.ln(n).sub(1).times(n).div(bi)}function Gs(n,e){if(D(e)){const t=bi.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Us(n,e){return D(e)?e.isIntegrable()?new m({inputs:[e.getIntegralFormula(n)],evaluate:Bs,invert:Gs}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function js(n,e,t){return D(e)?e.invert(i.pow(Se(t),n)):D(t)?t.invert(i.root(Se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function zs(n,e){return i.ln(n).sub(1).times(n).div(i.ln(e))}function Hs(n,e,t){if(D(e)){const r=i.ln(Se(t)).times(n);return e.invert(r.div(r.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ws(n,e,t){return D(e)?e.isIntegrable()?new m({inputs:[e.getIntegralFormula(n),t],evaluate:zs,invert:Hs}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function Zs(n,e){return D(e)?e.invert(i.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function Ys(n){return i.ln(n).sub(1).times(n).div(i.ln(2))}function Js(n,e){if(D(e)){const t=i.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ks(n,e){return D(e)?e.isIntegrable()?new m({inputs:[e.getIntegralFormula(n)],evaluate:Ys,invert:Js}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function Xs(n,e){return D(e)?e.invert(i.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function Qs(n){return i.ln(n).sub(1).times(n)}function el(n,e){return D(e)?e.invert(i.div(n,i.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function tl(n,e){return D(e)?e.isIntegrable()?new m({inputs:[e.getIntegralFormula(n)],evaluate:Qs,invert:el}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function nl(n,e,t){return D(e)?e.invert(i.root(n,Se(t))):D(t)?t.invert(i.ln(n).div(i.ln(Se(e)))):(console.error("Could not invert due to no input being a variable"),0)}function rl(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n),a=m.add(t,1);return m.pow(r,a).div(a)}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n);return m.pow(e,r).div(m.ln(e))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function il(n,e){return D(e)?e.invert(i.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function al(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.pow10(t).div(m.ln(10))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function sl(n,e,t){return D(e)?e.invert(i.ln(n).div(i.ln(Se(t)))):D(t)?t.invert(i.root(Se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ll(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.pow(t,r).div(m.ln(t))}else if(D(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(n),a=m.add(e,1);return m.pow(r,a).div(a)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ol(n,e,t){return D(e)?e.invert(i.root(n,i.recip(Se(t)))):D(t)?t.invert(i.ln(Se(e)).div(i.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function ul(n,e,t){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=e.getIntegralFormula(n);return m.pow(r,m.recip(t).add(1)).times(t).div(m.add(t,1))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function cl(n,e){return D(e)?e.invert(i.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function dl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.exp(t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ml(n,e=2,t=i.fromComponents_noNormalize(1,0,1)){const r=i.minabs(e,1e308).toNumber();return i.tetrate(n,r,t)}function fl(n,e,t,r){return D(e)?e.invert(i.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function pl(n,e=2,t=i.fromComponents_noNormalize(1,0,1)){const r=i.minabs(e,1e308).toNumber();return i.iteratedexp(n,r,new i(t))}function vl(n,e,t,r){return D(e)?e.invert(i.iteratedlog(n,Math.E,i.minabs(1e308,Se(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function gl(n,e=10,t=2){const r=i.minabs(t,1e308).toNumber();return i.iteratedlog(n,e,r)}function hl(n,e=10){const t=i.minabs(e,1e308).toNumber();return i.slog(n,t)}function bl(n,e,t){return D(e)?e.invert(i.tetrate(n,i.minabs(1e308,Se(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function yl(n,e,t){const r=i.minabs(e,1e308).toNumber();return i.layeradd(n,r,t)}function kl(n,e,t,r){return D(e)?e.invert(i.layeradd(n,i.minabs(1e308,Se(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Cl(n,e){return D(e)?e.invert(i.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function wl(n,e){return D(e)?e.invert(i.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function Nl(n,e,t){const r=i.minabs(e,1e308).toNumber();return i.pentate(n,r,t)}function Sl(n,e){return D(e)?e.invert(i.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ml(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Tl(n,e){return D(e)?e.invert(i.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function xl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.sin(t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Il(n,e){return D(e)?e.invert(i.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function Dl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Al(n,e){return D(e)?e.invert(i.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function El(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.asin(t).times(t).add(m.sqrt(m.sub(1,m.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function $l(n,e){return D(e)?e.invert(i.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function Pl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.acos(t).times(t).sub(m.sqrt(m.sub(1,m.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ql(n,e){return D(e)?e.invert(i.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function Rl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.atan(t).times(t).sub(m.ln(m.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Ll(n,e){return D(e)?e.invert(i.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function _l(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.cosh(t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Ol(n,e){return D(e)?e.invert(i.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Fl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.sinh(t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Vl(n,e){return D(e)?e.invert(i.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Bl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Gl(n,e){return D(e)?e.invert(i.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ul(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.asinh(t).times(t).sub(m.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function jl(n,e){return D(e)?e.invert(i.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function zl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.acosh(t).times(t).sub(m.add(t,1).sqrt().times(m.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Hl(n,e){return D(e)?e.invert(i.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Wl(n,e){if(D(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const t=e.getIntegralFormula(n);return m.atanh(t).times(t).add(m.sub(1,m.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Gt(n){return(e,t)=>new m({inputs:[e,t],evaluate:n,invert:Rn})}function D(n){return n instanceof kn&&n.hasVariable()}function Se(n,e){return n instanceof kn?n.evaluate(e):c(n)}function Zl(){return m.pow(this,2).div(2)}function Yl(){return this}const W=class W{constructor(e){O(this,"inputs");O(this,"internalEvaluate");O(this,"internalInvert");O(this,"internalIntegrate");O(this,"internalIntegrateInner");O(this,"applySubstitution");O(this,"description");O(this,"internalVariables");O(this,"innermostVariable");O(this,"negate",this.neg);O(this,"negated",this.neg);O(this,"sgn",this.sign);O(this,"plus",this.add);O(this,"subtract",this.sub);O(this,"minus",this.sub);O(this,"multiply",this.mul);O(this,"times",this.mul);O(this,"divide",this.div);O(this,"divideBy",this.div);O(this,"dividedBy",this.div);O(this,"reciprocal",this.recip);O(this,"reciprocate",this.recip);O(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(r=>typeof r=="object"&&rt in r?r[rt]:r)),"variable"in e?(typeof e.variable=="object"&&rt in e.variable&&(e.variable=e.variable[rt]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Zl,internalIntegrateInner:Yl,applySubstitution:Rn}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:r,invert:a,integrate:s,integrateInner:l,applySubstitution:o}=e,d=t.reduce((f,b)=>f+(b instanceof W?b.internalVariables:0),0),p=t.find(f=>f instanceof W&&f.hasVariable()),g=d===1?p==null?void 0:p.innermostVariable:void 0,v=(p==null?void 0:p.isInvertible())??!1,k=(p==null?void 0:p.isIntegrable())??!1;return{inputs:t,internalEvaluate:r,internalInvert:v?a:void 0,internalIntegrate:k?s:void 0,internalIntegrateInner:l,applySubstitution:o,innermostVariable:g,internalVariables:d}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(r=>Se(r,e))))??(this.hasVariable()?e:null)??Se(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,r)=>t instanceof W&&e.inputs[r]instanceof W?t.equals(e.inputs[r]):!(t instanceof W)&&!(e.inputs[r]instanceof W)&&i.eq(c(t),c(e.inputs[r])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new m({inputs:[e]})}static variable(e){return new m({variable:e})}static stringify(e){return e instanceof W?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":$(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(m.stringify).join(", ")})`:$(c(e))}static step(e,t,r){const a=r(m.variable(0)),s=q(t);function l(d){return i.lt(d,c(s))?d:i.add(a.evaluate(i.sub(d,c(s))),c(s))}function o(d,p){return D(p)&&a.isInvertible()?(i.gt(d,c(s))&&(d=i.add(a.invert(i.sub(d,c(s))),c(s))),p.invert(d)):(console.error("Could not invert due to no input being a variable"),0)}return new m({inputs:[e],evaluate:l,invert:a.isInvertible()&&a.hasVariable()?o:void 0,description:"indeterminate"})}static if(e,t,r,a){const s=G(0),l=m.variable(s),o=r(l),d=a==null?void 0:a(l),p=q(t);function g(k){return c(p)?(s.value=k,o.evaluate()):d?(s.value=k,d.evaluate()):k}function v(k,f){return!D(f)||!o.isInvertible()||d!=null&&!d.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):c(p)?f.invert(o.invert(k)):d?f.invert(d.invert(k)):f.invert(k)}return new m({inputs:[e],evaluate:g,invert:o.isInvertible()&&o.hasVariable()?v:void 0,description:"indeterminate"})}static conditional(e,t,r,a){return m.if(e,t,r,a)}static abs(e){return new m({inputs:[e],evaluate:i.abs})}static neg(e){return new m({inputs:[e],evaluate:i.neg,invert:Ns,applySubstitution:Ms,integrate:Ss})}static sign(e){return new m({inputs:[e],evaluate:i.sign})}static round(e){return new m({inputs:[e],evaluate:i.round,invert:cn})}static floor(e){return new m({inputs:[e],evaluate:i.floor,invert:cn})}static ceil(e){return new m({inputs:[e],evaluate:i.ceil,invert:cn})}static trunc(e){return new m({inputs:[e],evaluate:i.trunc,invert:cn})}static add(e,t){return new m({inputs:[e,t],evaluate:i.add,invert:Ts,integrate:xs,integrateInner:Is,applySubstitution:Rn})}static sub(e,t){return new m({inputs:[e,t],evaluate:i.sub,invert:Ds,integrate:As,integrateInner:Es,applySubstitution:Rn})}static mul(e,t){return new m({inputs:[e,t],evaluate:i.mul,invert:$s,integrate:Ps,applySubstitution:qs})}static div(e,t){return new m({inputs:[e,t],evaluate:i.div,invert:Rs,integrate:Ls,applySubstitution:_s})}static recip(e){return new m({inputs:[e],evaluate:i.recip,invert:Os,integrate:Fs})}static clamp(e,t,r){return new m({inputs:[e,t,r],evaluate:i.clamp,invert:cn})}static pLog10(e){return new m({inputs:[e],evaluate:i.pLog10})}static absLog10(e){return new m({inputs:[e],evaluate:i.absLog10})}static log10(e){return new m({inputs:[e],evaluate:i.log10,invert:Vs,integrate:Us})}static log(e,t){return new m({inputs:[e,t],evaluate:i.log,invert:js,integrate:Ws})}static log2(e){return new m({inputs:[e],evaluate:i.log2,invert:Zs,integrate:Ks})}static ln(e){return new m({inputs:[e],evaluate:i.ln,invert:Xs,integrate:tl})}static pow(e,t){return new m({inputs:[e,t],evaluate:i.pow,invert:nl,integrate:rl})}static pow10(e){return new m({inputs:[e],evaluate:i.pow10,invert:il,integrate:al})}static pow_base(e,t){return new m({inputs:[e,t],evaluate:i.pow_base,invert:sl,integrate:ll})}static root(e,t){return new m({inputs:[e,t],evaluate:i.root,invert:ol,integrate:ul})}static factorial(e){return new m({inputs:[e],evaluate:i.factorial})}static gamma(e){return new m({inputs:[e],evaluate:i.gamma})}static lngamma(e){return new m({inputs:[e],evaluate:i.lngamma})}static exp(e){return new m({inputs:[e],evaluate:i.exp,invert:cl,integrate:dl})}static sqr(e){return m.pow(e,2)}static sqrt(e){return m.root(e,2)}static cube(e){return m.pow(e,3)}static cbrt(e){return m.root(e,3)}static tetrate(e,t=2,r=i.fromComponents_noNormalize(1,0,1)){return new m({inputs:[e,t,r],evaluate:ml,invert:fl})}static iteratedexp(e,t=2,r=i.fromComponents_noNormalize(1,0,1)){return new m({inputs:[e,t,r],evaluate:pl,invert:vl})}static iteratedlog(e,t=10,r=1){return new m({inputs:[e,t,r],evaluate:gl})}static slog(e,t=10){return new m({inputs:[e,t],evaluate:hl,invert:bl})}static layeradd10(e,t){return new m({inputs:[e,t],evaluate:i.layeradd10})}static layeradd(e,t,r=10){return new m({inputs:[e,t,r],evaluate:yl,invert:kl})}static lambertw(e){return new m({inputs:[e],evaluate:i.lambertw,invert:Cl})}static ssqrt(e){return new m({inputs:[e],evaluate:i.ssqrt,invert:wl})}static pentate(e,t=2,r=i.fromComponents_noNormalize(1,0,1)){return new m({inputs:[e,t,r],evaluate:Nl})}static sin(e){return new m({inputs:[e],evaluate:i.sin,invert:Al,integrate:Ml})}static cos(e){return new m({inputs:[e],evaluate:i.cos,invert:$l,integrate:xl})}static tan(e){return new m({inputs:[e],evaluate:i.tan,invert:ql,integrate:Dl})}static asin(e){return new m({inputs:[e],evaluate:i.asin,invert:Sl,integrate:El})}static acos(e){return new m({inputs:[e],evaluate:i.acos,invert:Tl,integrate:Pl})}static atan(e){return new m({inputs:[e],evaluate:i.atan,invert:Il,integrate:Rl})}static sinh(e){return new m({inputs:[e],evaluate:i.sinh,invert:Gl,integrate:_l})}static cosh(e){return new m({inputs:[e],evaluate:i.cosh,invert:jl,integrate:Fl})}static tanh(e){return new m({inputs:[e],evaluate:i.tanh,invert:Hl,integrate:Bl})}static asinh(e){return new m({inputs:[e],evaluate:i.asinh,invert:Ll,integrate:Ul})}static acosh(e){return new m({inputs:[e],evaluate:i.acosh,invert:Ol,integrate:zl})}static atanh(e){return new m({inputs:[e],evaluate:i.atanh,invert:Vl,integrate:Wl})}stringify(){return m.stringify(this)}step(e,t){return m.step(this,e,t)}if(e,t){return m.if(this,e,t)}conditional(e,t){return m.if(this,e,t)}abs(){return m.abs(this)}neg(){return m.neg(this)}sign(){return m.sign(this)}round(){return m.round(this)}floor(){return m.floor(this)}ceil(){return m.ceil(this)}trunc(){return m.trunc(this)}add(e){return m.add(this,e)}sub(e){return m.sub(this,e)}mul(e){return m.mul(this,e)}div(e){return m.div(this,e)}recip(){return m.recip(this)}max(e){return m.max(this,e)}min(e){return m.min(this,e)}maxabs(e){return m.maxabs(this,e)}minabs(e){return m.minabs(this,e)}clamp(e,t){return m.clamp(this,e,t)}clampMin(e){return m.clampMin(this,e)}clampMax(e){return m.clampMax(this,e)}pLog10(){return m.pLog10(this)}absLog10(){return m.absLog10(this)}log10(){return m.log10(this)}log(e){return m.log(this,e)}log2(){return m.log2(this)}ln(){return m.ln(this)}pow(e){return m.pow(this,e)}pow10(){return m.pow10(this)}pow_base(e){return m.pow_base(this,e)}root(e){return m.root(this,e)}factorial(){return m.factorial(this)}gamma(){return m.gamma(this)}lngamma(){return m.lngamma(this)}exp(){return m.exp(this)}sqr(){return m.pow(this,2)}sqrt(){return m.root(this,2)}cube(){return m.pow(this,3)}cbrt(){return m.root(this,3)}tetrate(e=2,t=i.fromComponents_noNormalize(1,0,1)){return m.tetrate(this,e,t)}iteratedexp(e=2,t=i.fromComponents_noNormalize(1,0,1)){return m.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return m.iteratedlog(this,e,t)}slog(e=10){return m.slog(this,e)}layeradd10(e){return m.layeradd10(this,e)}layeradd(e,t){return m.layeradd(this,e,t)}lambertw(){return m.lambertw(this)}ssqrt(){return m.ssqrt(this)}pentate(e=2,t=i.fromComponents_noNormalize(1,0,1)){return m.pentate(this,e,t)}sin(){return m.sin(this)}cos(){return m.cos(this)}tan(){return m.tan(this)}asin(){return m.asin(this)}acos(){return m.acos(this)}atan(){return m.atan(this)}sinh(){return m.sinh(this)}cosh(){return m.cosh(this)}tanh(){return m.tanh(this)}asinh(){return m.asinh(this)}acosh(){return m.acosh(this)}atanh(){return m.atanh(this)}};O(W,"negate",W.neg),O(W,"negated",W.neg),O(W,"sgn",W.sign),O(W,"plus",W.add),O(W,"subtract",W.sub),O(W,"minus",W.sub),O(W,"multiply",W.mul),O(W,"times",W.mul),O(W,"divide",W.div),O(W,"divideBy",W.div),O(W,"dividedBy",W.div),O(W,"reciprocal",W.recip),O(W,"reciprocate",W.recip),O(W,"max",Gt(i.max)),O(W,"min",Gt(i.min)),O(W,"minabs",Gt(i.minabs)),O(W,"maxabs",Gt(i.maxabs)),O(W,"clampMin",Gt(i.clampMin)),O(W,"clampMax",Gt(i.clampMax)),O(W,"logarithm",W.log);let kn=W;class m extends kn{constructor(){super(...arguments);O(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),r=i.add(this.evaluate(0),this.evaluate(1)).div(2);return i.sub(r,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),m.constant(0);let r=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(a=>r=a(r)),this.integralFormula=r}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),m.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),m.constant(0)):(t.push(r=>this.applySubstitution.call(this,r,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),m.constant(0)))}}function Jl(n,e,t=!0,r,a=i.dInf){const s=q(t),l=q(r),o=q(a);return h(()=>{const d=c(o);if(i.eq(d,1))return i.gte(e.value,n.evaluate())?i.dOne:i.dZero;const p=c(s),g=c(l)??(p?10:0);let v=0;if(i.gt(d,g)){if(!n.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(p){if(!n.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;v=i.floor(n.invertIntegral(i.add(e.value,n.evaluateIntegral()))).sub(c(n.innermostVariable)??0)}else v=i.floor(n.invert(e.value))}if(v=i.clampMax(v,d),g>0){const k=v;v=i.sub(v,g).clampMin(0);let f;for(p?f=Ln(n,v,!0,0):f=n.evaluate(i.add(c(n.innermostVariable)??0,v));i.lt(v,d)&&i.lt(v,Number.MAX_SAFE_INTEGER)&&i.add(k,1).gte(v);){const b=n.evaluate(v.add(c(n.innermostVariable)??0));if(i.add(f,b).lte(e.value))v=v.add(1),f=i.add(f,b);else break}}return v})}function Ln(n,e,t=!0,r){if(i.eq(e,1))return n.evaluate();const a=c(n.innermostVariable)??0;let s=i.add(e,a);const l=s;r??(r=t?10:0),s=s.sub(r).clampMin(a);let o=0;if(i.gt(e,r)){if(!n.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(t){if(!n.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(o=i.sub(n.evaluateIntegral(s),n.evaluateIntegral()),l.gt(1e308))return i.add(o,i.sub(l,s).times(n.evaluate(s)))}else if(o=n.evaluate(s),s=s.add(1),l.gt(1e308))return i.sub(l,s).add(1).times(o)}for(let d=s.toNumber();d<l.toNumber();d++)o=i.add(o,n.evaluate(d));return o}const yt=Symbol("PersistentState"),Re=Symbol("DefaultValue"),Vn=Symbol("StackTrace"),ar=Symbol("Deleted"),rt=Symbol("NonPersistent"),Pt=Symbol("SaveDataPath"),Ke=Symbol("SkipPersistence");function Kl(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function Br(n,e){var t;i.isNaN(e)&&(le.hasNaN||(L.autosave=!1,le.hasNaN=!0,le.NaNPath=n[Pt],le.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[Pt])==null?void 0:t.join(".")}`)),n[yt].value=e}function _e(n,e=!0){const t=qe(n)?n:G(n);qe(n)&&(n=n.value);const r=h({get(){return t.value},set(s){e?Br(a,s):a[yt].value=s}});r[Re]=n;const a={get value(){return t.value},set value(s){e?Br(a,s):a[yt].value=s},__v_isRef:!0,[yt]:t,[Re]:n,[Vn]:Kl(),[ar]:!1,[rt]:r,[Pt]:void 0};return tt.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",a,`
Created at:
`+a[Vn]):fn[tt[tt.length-1]].add(a),a}function Xl(n){return n!=null&&typeof n=="object"&&yt in n}function P(n){return!(ht in n)&&rt in n?n[rt]:new Proxy(n,{get(e,t){if(t!==yt)return t===Ke?!0:e[t]},set(e,t,r){return e[t]=r,!0},has(e,t){return t===yt?!1:t===Ke?!0:Reflect.has(e,t)}})}Pe.on("addLayer",(n,e)=>{const t=[],r=(a,s=[])=>{let l=!1;return Object.keys(a).forEach(o=>{let d=a[o];if(d!=null&&typeof d=="object"){if(Ke in d&&d[Ke]===!0)return;if(ht in d&&(d=d[ht]),Xl(d)){if(l=!0,d[ar]){console.warn("Deleted persistent ref present in returned object. Ignoring...",d,`
Created at:
`+d[Vn]);return}fn[n.id].delete(d);const p=[n.id,...s,o];d[Pt]!=null&&JSON.stringify(p)!==JSON.stringify(d[Pt])&&console.error(`Persistent ref is being saved to \`${p.join(".")}\` when it's already present at \`${d[Pt].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),d[Pt]=p;const g=s.reduce((k,f)=>(f in k||(k[f]={}),k[f]),e),v=g[o];g[o]=d[yt],Zi(g)?v!=null?g[o]=v:g[o]=d[Re]:v!=null?g[o].value=v:g[o].value=d[Re]}else!(d instanceof i)&&!(d instanceof m)&&!qe(d)&&!t.includes(d)&&(typeof d.type=="symbol"&&t.push(d),r(d,[...s,o])&&(Array.isArray(d)&&!Array.isArray(a)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",ht in a?a[ht]:a,o):l=!0))}}),l};r(n[ht]),fn[n.id].forEach(a=>{a[ar]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+a[Vn])}),fn[n.id].clear()});function he(n,e="points",t=0,r=void 0){const s=qe(n)?n:_e(n);if(s.displayName=e,s.precision=t,s.small=r,s.defaultValue=c(n),!qe(n)){const l=s[rt];l.displayName=e,l.precision=t,l.small=r,l.defaultValue=n}return s}function yi(n){const e=_e(n.value);return Ne(n,t=>{Zn.value||i.gt(t,e.value)&&(e.value=t)}),e}function _t(n){const e=_e(n.value);return Ne(n,(t,r)=>{Zn.value||i.gt(t,r)&&(e.value=i.add(e.value,i.sub(t,r)))}),e}new i("10^^8");new i("1e100");function Lt(n,e){const t=e??n.value;return i.eq(n.precision,0)?yn(n.small?t:i.floor(t)):$(t,n.precision,n.small)}const Ql={class:"table"},qt=J({__name:"Column",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=h(()=>Ot[H.theme].mergeAdjacent&&e.dontMerge!==!0);return(r,a)=>(M(),I("div",Ql,[y("div",{class:ue(["col",{mergeAdjacent:t.value}])},[it(r.$slots,"default")],2)]))}}),eo={class:"table"},Gr=J({__name:"Row",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=h(()=>Ot[H.theme].mergeAdjacent&&e.dontMerge!==!0);return(r,a)=>(M(),I("div",eo,[y("div",{class:ue(["row",{mergeAdjacent:t.value}])},[it(r.$slots,"default")],2)]))}});let to=0;function no(n="feature-"){return n+to++}var kt=(n=>(n[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.None=2]="None",n))(kt||{});function Cn(n){const e=c(n);return e!==2&&e!==!1}function ro(n){return c(n)===1}function Ur(n,e){return n!=null&&typeof n=="object"&&"type"in n&&n.type===e}function io(n,...e){const t=[],r=a=>{Object.keys(a).forEach(s=>{const l=a[s];l!=null&&typeof l=="object"&&l.__v_isVNode!==!0&&(e.includes(l.type)?t.push(l):!(l instanceof i)&&!qe(l)&&r(l))})};return r(n),t}const ao=J({__name:"Node",props:{id:{}},setup(n){const e=n,t=On(oi,()=>{}),r=On(ui,()=>{}),a=Un(null),s=h(()=>a.value&&a.value.parentElement);return Ne([s,wt(e,"id")],([l,o],[d,p])=>{d&&r(c(p)),l&&t(o,l)}),Qr(()=>r(e.id)),(l,o)=>(M(),I("div",{class:"node",ref_key:"node",ref:a},null,512))}}),_n=ae(ao,[["__scopeId","data-v-4673aca5"]]),so=J({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((r,a)=>()=>a(r),()=>u(_,null,[e.components.map(r=>R(r))]))();return(r,a)=>c(Cn)(c(r.visibility))?(M(),I("div",{key:0,style:xe([{visibility:c(ro)(c(r.visibility))?"hidden":void 0},c(r.style)]),class:ue({feature:!0,...c(r.classes)})},[u(t),u(_n,{id:r.id},null,8,["id"])],6)):F("",!0)}}),lo=["disabled"],oo=J({__name:"Clickable",props:{canClick:{},display:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.display==null?u(_,null,null):R(t.display),{start:s,stop:l}=mr(()=>r("hold"));return(o,d)=>(M(),I("button",{onClick:d[0]||(d[0]=p=>r("click",p)),onMousedown:d[1]||(d[1]=(...p)=>c(s)&&c(s)(...p)),onMouseleave:d[2]||(d[2]=(...p)=>c(l)&&c(l)(...p)),onMouseup:d[3]||(d[3]=(...p)=>c(l)&&c(l)(...p)),onTouchstartPassive:d[4]||(d[4]=(...p)=>c(s)&&c(s)(...p)),onTouchendPassive:d[5]||(d[5]=(...p)=>c(l)&&c(l)(...p)),onTouchcancelPassive:d[6]||(d[6]=(...p)=>c(l)&&c(l)(...p)),class:ue({clickable:!0,can:c(o.canClick),locked:!c(o.canClick)}),disabled:!c(o.canClick)},[u(a)],42,lo))}}),dr=ae(oo,[["__scopeId","data-v-396784a5"]]),uo=Symbol("Clickable");function Bn(n){return ye(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:r,onClick:a,onHold:s,...l}=e;let o;typeof r=="object"&&!Wt(r)?o=()=>u("span",null,[r.title!=null?u("div",null,[R(r.title,p=>u("h3",null,[p]))]):null,R(r.description,p=>u("div",null,[p]))]):r!=null&&(o=r);const d={type:uo,...l,...Xe("clickable",e,()=>u(dr,{canClick:d.canClick,onClick:d.onClick,onHold:d.onClick,display:d.display},null)),canClick:q(t)??!0,display:o,onClick:a==null?void 0:function(p){c(d.canClick)!==!1&&a.call(d,p)},onHold:s==null?void 0:function(){c(d.canClick)!==!1&&s.call(d)}};return d})}const co=["x1","y1","x2","y2"],mo=J({__name:"Link",props:{link:{},startNode:{},endNode:{},boundingRect:{}},setup(n){const e=n,t=h(()=>{const s=e.startNode.rect,l=e.boundingRect,o=l?{x:s.x+s.width/2-l.x,y:s.y+s.height/2-l.y}:{x:0,y:0};return e.link.offsetStart&&(o.x+=e.link.offsetStart.x,o.y+=e.link.offsetStart.y),o}),r=h(()=>{const s=e.endNode.rect,l=e.boundingRect,o=l?{x:s.x+s.width/2-l.x,y:s.y+s.height/2-l.y}:{x:0,y:0};return e.link.offsetEnd&&(o.x+=e.link.offsetEnd.x,o.y+=e.link.offsetEnd.y),o}),a=h(()=>ko(e.link));return(s,l)=>(M(),I("line",dt({"stroke-width":"15px",stroke:"white"},a.value,{x1:t.value.x,y1:t.value.y,x2:r.value.x,y2:r.value.y}),null,16,co))}}),fo=J({__name:"Links",props:{links:{}},setup(n){var p;const e=n;function t(){var g;o.value=(g=a.value)==null?void 0:g.getBoundingClientRect()}const r=new ResizeObserver(t),a=Un(null),s=On(ci,G({})),l=On(di,G(void 0)),o=G((p=a.value)==null?void 0:p.getBoundingClientRect());Ne(l,t),en(()=>{const g=a.value;g!=null&&r.observe(g),t()});const d=h(()=>{var v;const g=s.value;return((v=c(e.links))==null?void 0:v.filter(k=>{var f,b;return((f=g[k.startNode.id])==null?void 0:f.rect)&&((b=g[k.endNode.id])==null?void 0:b.rect)}))??[]});return(g,v)=>(M(),I(_,null,[d.value?(M(),I("svg",Yi(dt({key:0},g.$attrs)),[(M(!0),I(_,null,gt(d.value,(k,f)=>(M(),oe(mo,{key:f,link:k,boundingRect:o.value,startNode:c(s)[k.startNode.id],endNode:c(s)[k.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):F("",!0),y("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}}),ki=ae(fo,[["__scopeId","data-v-95f1a2c2"]]),po=J({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{},wrapper:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.display==null?u(_,null,null):R(t.display,p=>u("div",null,[p])),s=h(()=>t.wrapper??u("div",null,null)),{start:l,stop:o}=mr(()=>r("hold")),d=h(()=>{const p=c(t.glowColor);return{backgroundColor:c(t.color),boxShadow:p?`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${p}`:"none"}});return(p,g)=>(M(),oe(c(s),null,{default:j(()=>[y("button",{style:xe(d.value),class:ue({treeNode:!0,can:c(p.canClick)}),onClick:g[0]||(g[0]=v=>r("click",v)),onMousedown:g[1]||(g[1]=(...v)=>c(l)&&c(l)(...v)),onMouseleave:g[2]||(g[2]=(...v)=>c(o)&&c(o)(...v)),onMouseup:g[3]||(g[3]=(...v)=>c(o)&&c(o)(...v)),onTouchstartPassive:g[4]||(g[4]=(...v)=>c(l)&&c(l)(...v)),onTouchendPassive:g[5]||(g[5]=(...v)=>c(o)&&c(o)(...v)),onTouchcancelPassive:g[6]||(g[6]=(...v)=>c(o)&&c(o)(...v))},[u(a)],38)]),_:1}))}}),vo=ae(po,[["__scopeId","data-v-1155fb74"]]),go=Symbol("TreeNode");function ho(n){return ye(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:r,display:a,glowColor:s,onClick:l,onHold:o,wrapper:d,...p}=e,g={type:go,...p,...Xe("treeNode",e,()=>u(vo,{canClick:g.canClick,display:g.display,onClick:g.onClick,onHold:g.onHold,color:g.color,glowColor:g.glowColor,wrapper:g.wrapper},null)),canClick:q(t)??!0,color:q(r),display:a,glowColor:q(s),wrapper:d,onClick:l==null?void 0:function(v){c(g.canClick)!==!1&&l.call(g,v)},onHold:o==null?void 0:function(){c(g.canClick)!==!1&&o.call(g)}};return g})}function Ci(n){const e=Bn(()=>{const t=n(),{conversion:r,tree:a,treeNode:s,resetTime:l,resetDescription:o,showNextAt:d,minimumGain:p,display:g,canClick:v,onClick:k,resetTree:f,...b}=t;return{...b,conversion:r,tree:a,treeNode:s,resetTree:f??!0,resetTime:l,resetDescription:q(o)??h(()=>i.lt(r.gainResource.value,1e3)?"Reset for ":""),showNextAt:q(d)??!0,minimumGain:q(p)??1,canClick:q(v)??h(()=>i.gte(c(r.actualGain),c(e.minimumGain))),display:g??(()=>u("span",null,[c(e.resetDescription),u("b",null,[Lt(r.gainResource,i.max(c(r.actualGain),c(e.minimumGain)))])," ",r.gainResource.displayName,c(e.showNextAt)!==!1?u("div",null,[u("br",null,null),c(r.buyMax)?"Next:":"Req:"," ",Lt(r.baseResource,!c(r.buyMax)&&i.gte(c(r.actualGain),1)?c(r.currentAt):c(r.nextAt))," ",r.baseResource.displayName]):null])),onClick:function(N){c(e.canClick)!==!1&&(r.convert(),f&&a&&a.reset(s),l&&(l.value=l[Re]),k==null||k.call(e,N))}}});return e}function Nn(n){const e=ho(()=>{const t=n(),{display:r,append:a,layerID:s,...l}=t;return{...l,layerID:s,display:r??s,append:q(a)??!1,onClick(){if(c(e.append))if(L.tabs.includes(s)){const o=L.tabs.lastIndexOf(s);L.tabs.splice(o,1)}else L.tabs.push(s);else L.tabs.splice(1,1,s)}}});return e}function bo(n,e){return Array.from({length:Math.ceil(n.length/e)},(t,r)=>n.slice(r*e,r*e+e))}const wi=Symbol("VueFeature");function Xe(n,e,t){return{id:no(n),visibility:q(e.visibility),classes:q(e.classes),style:q(e.style),components:t==null?[]:[t],wrappers:[],[wi]:!0}}function R(n,e){if(typeof n=="object"&&wi in n){const{id:t,visibility:r,style:a,classes:s,components:l,wrappers:o}=n;return u(so,{id:t,visibility:r,style:a,classes:s,components:l,wrappers:o},null)}return n=Ji(n),(e==null?void 0:e(n))??n}function Ht(n,e){return n.reduce((t,r)=>u(_,null,[t,e,R(r)]),u(_,null,null))}function yo(n){return Object.keys(n).map(e=>n[e]?e:null).filter(e=>e!=null)}function Ve(n,e,t,r){const s=[...yo({row:!0,mergeAdjacent:!0}),r],l=n instanceof Array?n:Object.values(n),o=bo(l,e);return R(u(_,null,[u("div",{class:"table grouped-table"},[o.map(d=>u(_,null,[u("div",{style:t,class:s},[d.map(p=>R(p))])]))])]))}function Wt(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function mr(n){const e=G(null),t=G(void 0);function r(l){e.value==null&&(e.value=setInterval(s,250)),t.value=l}function a(){e.value!=null&&(clearInterval(e.value),e.value=null)}function s(){n(t.value)}return Qr(a),{start:r,stop:a,handleHolding:s}}function ko(n){return Object.keys(n).reduce((e,t)=>(e[Wa(t)]=n[t],e),{})}const Co=Symbol("Reset");function mt(n){return ye(()=>{const e=n(),{thingsToReset:t,onReset:r,...a}=e,s={type:Co,...a,onReset:r,thingsToReset:q(t),reset:function(){const l=o=>{if(o!=null&&typeof o=="object"&&!(o instanceof i)&&!(o instanceof m)){if(Ke in o&&o[Ke]===!0)return;if(Re in o){const d=o;d.value=d[Re]}else!(o instanceof i)&&!qe(o)&&Object.values(o).forEach(d=>l(d))}};c(s.thingsToReset).forEach(l),Pe.emit("reset",s),r==null||r()}};return s})}const En={};Pe.on("removeLayer",n=>{var e;(e=En[n.id])==null||e.call(En),En[n.id]=void 0});function Rt(n){return ye(()=>{const{addend:e,description:t,enabled:r,smallerIsBetter:a}=n(),s=q(e),l=r==null?void 0:q(r);return{apply:o=>i.add(o,c(s)),invert:o=>i.sub(o,c(s)),getFormula:o=>m.add(o,s),enabled:l,description:t==null?void 0:()=>u("div",{class:"modifier-container"},[u("span",{class:"modifier-description"},[R(t)]),u("span",{class:"modifier-amount",style:(a===!0?i.gt(c(s),0):i.lt(c(s),0))?"color: var(--danger)":""},[i.gte(c(s),0)?"+":"",zn(c(s))])])}})}function De(n){return ye(()=>{const{multiplier:e,description:t,enabled:r,smallerIsBetter:a}=n(),s=q(e),l=r==null?void 0:q(r);return{apply:o=>i.times(o,c(s)),invert:o=>i.div(o,c(s)),getFormula:o=>m.times(o,s),enabled:l,description:t==null?void 0:()=>u("div",{class:"modifier-container"},[u("span",{class:"modifier-description"},[R(t)]),u("span",{class:"modifier-amount",style:(a===!0?i.gt(c(s),1):i.lt(c(s),1))?"color: var(--danger)":""},[w("×"),zn(c(s))])])}})}function Ut(n){return ye(()=>{const{exponent:e,description:t,enabled:r,supportLowNumbers:a,smallerIsBetter:s}=n(),l=q(e),o=r==null?void 0:q(r);return{apply:d=>{let p=d;return a&&(p=i.add(p,1)),p=i.pow(p,c(l)),a&&(p=i.sub(p,1)),p},invert:d=>{let p=d;return a&&(p=i.add(p,1)),p=i.root(p,c(l)),a&&(p=i.sub(p,1)),p},getFormula:d=>a?m.add(d,1).pow(l).sub(1):m.pow(d,l),enabled:o,description:t==null?void 0:()=>u("div",{class:"modifier-container"},[u("span",{class:"modifier-description"},[R(t),a?" (+1 effective)":null]),u("span",{class:"modifier-amount",style:(s===!0?i.gt(c(l),1):i.lt(c(l),1))?"color: var(--danger)":""},[w("^"),zn(c(l))])])}})}function ve(n){return ye(()=>{const e=n();return{apply:t=>e.filter(r=>c(r.enabled)!==!1).reduce((r,a)=>a.apply(r),t),invert:e.every(t=>t.invert!=null)?t=>e.filter(r=>c(r.enabled)!==!1).reduceRight((r,a)=>a.invert(r),t):void 0,getFormula:e.every(t=>t.getFormula!=null)?t=>e.reduce((r,a)=>a.enabled==null||a.enabled===!0?a.getFormula(r):m.if(r,a.enabled,s=>a.getFormula(s)),t):void 0,enabled:e.some(t=>t.enabled!=null)?h(()=>e.filter(t=>c(t.enabled)!==!1).length>0):void 0,description:e.some(t=>t.description!=null)?()=>e.filter(t=>c(t.enabled)!==!1).map(t=>c(t.description)).filter(t=>t).map(t=>R(t)):void 0}})}const K=J({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(n){return(e,t)=>(M(),I("div",{style:xe({width:e.width,height:e.height})},null,4))}}),wo={class:"field"},No={key:0,class:"field-title"},fr=J({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.title?R(t.title,o=>u("span",null,[o])):u(_,null,null),s=G(t.options.find(o=>o.value===t.modelValue)??null);Ne(wt(t,"modelValue"),o=>{c(s)!==o&&(s.value=t.options.find(d=>d.value===o)??null)});function l(o){r("update:modelValue",o.value)}return(o,d)=>(M(),I("div",wo,[o.title?(M(),I("span",No,[u(a)])):F("",!0),u(c(ta),{options:o.options,modelValue:s.value,"onUpdate:modelValue":[d[0]||(d[0]=p=>s.value=p),l],min:1,placeholder:o.placeholder,"close-on-select":o.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}});Pe.on("setupVue",n=>n.use(na));function So(n="white",e="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${e} ${n}`,zIndex:1}}function A(n){return ye(e=>{const t=n.call(e),{visibility:r,cost:a,resource:s,requiresPay:l,cumulativeCost:o,maxBulkAmount:d,directSum:p,pay:g}=t,v={[Ke]:!0,resource:s,visibility:q(r)??kt.Visible,cost:q(a),requiresPay:q(l)??!0,cumulativeCost:q(o)??!0,maxBulkAmount:q(d)??1,directSum:q(p),partialDisplay:k=>u("span",{style:i.gt(c(v.requirementMet),0)?"":"color: var(--danger)"},[Lt(s,v.cost instanceof m?Ln(v.cost,k??1,c(v.cumulativeCost),c(v.directSum)):c(v.cost))," ",s.displayName]),display:k=>u("div",null,[c(v.requiresPay)?"Costs: ":"Requires: ",Lt(s,v.cost instanceof m?Ln(v.cost,k??1,c(v.cumulativeCost),c(v.directSum)):c(v.cost))," ",s.displayName]),canMaximize:h(()=>{if(!(v.cost instanceof m))return!1;const k=c(v.maxBulkAmount);if(i.lte(k,1))return!1;const f=c(v.cumulativeCost),b=c(v.directSum)??(f?10:0);return i.lte(k,b)?!0:!(!v.cost.isInvertible()||f===!0&&!v.cost.isIntegrable())}),requirementMet:a instanceof m?Jl(a,s,o??!0,p,d):h(()=>i.gte(s.value,c(v.cost))?1:0),pay:g??function(k){const f=v.cost instanceof m?Ln(v.cost,k??1,c(v.cumulativeCost),c(v.directSum)):c(v.cost);s.value=i.sub(s.value,f).max(0)}};return v})}function Et(n,e){return ye(()=>{const t=q(n),r=q(e);return{[Ke]:!0,requirementMet:h(()=>i.gte(c(t),c(r))),requiresPay:!1,visibility:!1}})}function pr(n){return ye(()=>({[Ke]:!0,requirementMet:h(()=>Cn(n)),visibility:kt.None,requiresPay:!1}))}function Ni(n,e){return ye(()=>({[Ke]:!0,requirementMet:q(n),partialDisplay:void 0,display:void 0,visibility:kt.None,requiresPay:!1}))}function Hn(n){if(Array.isArray(n))return n.every(Hn);const e=c(n.requirementMet);return typeof e=="boolean"?e:i.gt(e,0)}function Si(n){if(Array.isArray(n))return n.map(Si).reduce(i.min);const e=c(n.requirementMet);return typeof e=="boolean"?e?i.dInf:0:i.gt(e,1)&&c(n.canMaximize)!==!0?1:e}function Kt(n,e=1){var t;if(Array.isArray(n)&&(n=n.filter(r=>Cn(r.visibility??!0)),n.length===1&&(n=n[0])),Array.isArray(n)){n=n.filter(s=>"partialDisplay"in s);const r=n.filter(s=>c(s.requiresPay)),a=n.filter(s=>!c(s.requiresPay));return u(_,null,[r.length>0?u("div",null,[w("Costs:")," ",Ht(r.map(s=>s.partialDisplay(e)),u(_,null,[w(", ")]))]):null,a.length>0?u("div",null,[w("Requires:")," ",Ht(a.map(s=>s.partialDisplay(e)),u(_,null,[w(", ")]))]):null])}return((t=n.display)==null?void 0:t.call(n))??u(_,null,null)}function Mi(n,e=1){var t;Array.isArray(n)?n.filter(r=>c(r.requiresPay)).forEach(r=>{var a;return(a=r.pay)==null?void 0:a.call(r,e)}):c(n.requiresPay)&&((t=n.pay)==null||t.call(n,e))}const Mo=J({__name:"Achievement",props:{display:{},earned:{},requirements:{},image:{},small:{}},setup(n){const e=n,t=()=>e.display==null?u(_,null,null):R(e.display);return(r,a)=>(M(),I("button",{style:xe({backgroundImage:c(r.earned)&&c(r.image)&&`url(${r.image})`||""}),class:ue({achievement:!0,locked:!c(r.earned),done:c(r.earned),small:c(r.small)})},[u(t)],6))}}),To=ae(Mo,[["__scopeId","data-v-1c89c911"]]),xo=ri(),Io=Symbol("Achievement");let zt=function(n){return n.All="all",n.Configurable="configurable",n.Incomplete="incomplete",n.None="none",n}({});function $t(n){const e=_e(!1,!1);return ye(()=>{const t=(n==null?void 0:n())??{},{requirements:r,display:a,small:s,image:l,showPopups:o,onComplete:d,...p}=t,g=Xe("achievement",t,()=>u(To,{display:k.display,earned:k.earned,requirements:k.requirements,image:k.image,small:k.small},null));let v;if(typeof a=="object"&&!Wt(a)){const{requirement:f,effectDisplay:b,optionsDisplay:N}=a;v=()=>u("span",null,[f==null?Kt(r??[]):R(f,x=>u("h3",null,[x])),b==null?null:u("div",null,[R(b,x=>u("b",null,[x]))]),N!=null?u("div",{class:"equal-spaced"},[R(N)]):null])}else a!=null&&(v=a);const k={type:Io,...p,...g,visibility:h(()=>{switch(H.msDisplay){default:case zt.All:return c(g.visibility)??!0;case zt.Configurable:return c(e)&&!(a!=null&&typeof a=="object"&&!Wt(a))?kt.None:c(g.visibility)??!0;case zt.Incomplete:return c(e)?kt.None:c(g.visibility)??!0;case zt.None:return kt.None}}),earned:e,onComplete:d,small:q(s),image:q(l),showPopups:q(o)??!0,display:v,requirements:r==null?void 0:[pr(g.visibility??!0),Ni(()=>!e.value),...Array.isArray(r)?r:[r]],complete(){var f;if(!e.value&&(e.value=!0,(f=k.onComplete)==null||f.call(k),k.display!=null&&c(k.showPopups)===!0)){let b=k.display;typeof a=="object"&&!Wt(a)&&(a.requirement!=null?b=a.requirement:b=Kt(r??[])),xo.info(u("div",null,[u("h3",null,[w("Achievement earned!")]),u("div",null,[R(b)])]))}}};return k.requirements!=null&&ei(()=>{H.active===L.id&&Hn(k.requirements??[])&&k.complete()}),k})}Pe.on("loadSettings",n=>{n.msDisplay??(n.msDisplay=zt.All)});const Do=Object.values(zt).map(n=>({label:si(n),value:n}));Pe.on("setupVue",()=>wu(()=>u(fr,{title:u("span",{class:"option-title"},[w("Show achievements"),u("desc",null,[w("Select which achievements to display based on criterias.")])]),options:Do,"onUpdate:modelValue":n=>H.msDisplay=n,modelValue:H.msDisplay},null)));const Ao=Symbol("Upgrade");function B(n){const e=_e(!1,!1);return ye(()=>{const t=n(),{requirements:r,display:a,onHold:s,...l}=t;if(t.classes==null)t.classes=h(()=>({bought:c(g.bought)}));else{const v=q(t.classes);t.classes=h(()=>({...c(v),bought:c(g.bought)}))}const o=Xe("upgrade",t,()=>u(dr,{onClick:g.purchase,onHold:g.onHold,canClick:g.canPurchase,display:g.display},null)),d=Array.isArray(r)?r:[r];o.visibility!=null&&d.push(pr(o.visibility));let p;if(typeof a=="object"&&!Wt(a)){const{title:v,description:k,effectDisplay:f}=a;p=()=>u("span",null,[v!=null?u("div",null,[R(v,b=>u("h3",null,[b]))]):null,R(k,b=>u("div",null,[b])),f!=null?u("div",null,[w("Currently: "),R(f)]):null,e.value?null:u(_,null,[u("br",null,null),Kt(d)])])}else a!=null&&(p=a);const g={type:Ao,...l,...o,bought:e,canPurchase:h(()=>!e.value&&Hn(d)),requirements:d,display:p,onHold:s,purchase(){var v;c(g.canPurchase)&&(Mi(d),e.value=!0,(v=t.onPurchase)==null||v.call(t))}};return g})}const Eo=J({__name:"TabButton",props:{display:{},floating:{},glowColor:{},active:{type:Boolean},style:{}},emits:["selectTab"],setup(n,{emit:e}){const t=n,r=e,a=()=>R(t.display),s=h(()=>{const d=c(t.glowColor);let p={};return d&&(p={boxShadow:`0px 9px 5px -6px ${d}`}),c(t.active)&&l.value&&(p=So(d)),{...t.style,...p}}),l=h(()=>Ot[H.theme].floatingTabs||t.floating);function o(){r("selectTab")}return(d,p)=>(M(),I("button",{onClick:o,class:ue(["tabButton",{active:d.active}]),style:xe(s.value)},[u(a)],6))}}),$o=ae(Eo,[["__scopeId","data-v-25d6a2c0"]]),Po=J({__name:"Sticky",setup(n){const e=G("0"),t=new ResizeObserver(a),r=Un(null);function a(){let s=r.value;if(s==null)return;let l=0;for(;s.previousSibling;){const o=s.previousSibling;o.dataset&&"vSticky"in o.dataset&&(l+=o.offsetHeight),s=o}e.value=l+"px"}return Yt(a),document.fonts.ready.then(a),en(()=>{var l;const s=(l=r.value)==null?void 0:l.parentElement;s&&t.observe(s)}),(s,l)=>(M(),I("div",{class:"sticky",style:xe({top:e.value}),ref_key:"element",ref:r,"data-v-sticky":""},[it(s.$slots,"default",{},void 0,!0)],4))}}),qo=ae(Po,[["__scopeId","data-v-10a04be9"]]),sr=Symbol("Tab");function He(n){return ye(()=>{const e=(n==null?void 0:n())??{},{display:t,...r}=e;return{type:sr,...r,...Xe("tab",e,t),display:t}})}const Ro=J({__name:"TabFamily",props:{activeTab:{},tabs:{},buttonContainerClasses:{},buttonContainerStyle:{},floating:{}},setup(n){const e=n,t=()=>{const o=c(e.activeTab);if(o!=null)return R(o)},r=h(()=>Ot[H.theme].floatingTabs||c(e.floating)),a=()=>Object.values(e.tabs).map(o=>R(o)),s=h(()=>{const o=c(e.activeTab);if(Ur(o,sr))return c(o.classes)}),l=h(()=>{const o=c(e.activeTab);if(Ur(o,sr))return c(o.style)});return(o,d)=>(M(),I("div",{class:ue(["tab-family-container",s.value]),style:xe(l.value)},[u(qo,{class:ue(["tab-buttons-container",[c(o.buttonContainerClasses),{floating:r.value}]]),style:xe(c(o.buttonContainerStyle))},{default:j(()=>[y("div",{class:ue(["tab-buttons",{floating:r.value}])},[u(a)],2)]),_:1},8,["class","style"]),c(o.activeTab)!=null?(M(),oe(t,{key:0})):F("",!0)],6))}}),Lo=ae(Ro,[["__scopeId","data-v-41130dd7"]]),_o=Symbol("TabButton"),Oo=Symbol("TabFamily");function Wn(n,e){Object.keys(n).length===0&&console.error("Cannot create tab family with 0 tabs");const t=_e(Object.keys(n)[0],!1);return ye(()=>{const r=(e==null?void 0:e())??{},{buttonContainerClasses:a,buttonContainerStyle:s,buttonStyle:l,floating:o,...d}=r,p={type:Oo,...d,...Xe("tabFamily",r,()=>u(Lo,{floating:p.floating,activeTab:p.activeTab,tabs:p.tabs,buttonContainerClasses:p.buttonContainerClasses,buttonContainerStyle:p.buttonContainerStyle},null)),tabs:Object.keys(n).reduce((g,v)=>{const k=n[v](),{tab:f,glowColor:b,display:N,...x}=k,S={type:_o,...x,...Xe("tabButton",k,()=>u($o,{floating:p.floating,style:p.buttonStyle,display:S.display,glowColor:S.glowColor,active:c(S.tab)===c(p.activeTab),onSelectTab:()=>p.selected.value=v},null)),tab:f,glowColor:q(b),display:N};return g[v]=S,g},{}),buttonContainerClasses:q(a),buttonContainerStyle:q(s),buttonStyle:q(l),floating:q(o),selected:t,activeTab:h(()=>{if(t.value in p.tabs&&Cn(p.tabs[t.value].visibility??!0))return c(p.tabs[t.value].tab);const g=Object.values(p.tabs).find(v=>Cn(v.visibility??!0));return g!=null?c(g.tab):null})};return p})}const pn=J({__name:"CelestialBodyIcon",props:{body:{},style:{}},setup(n){const e={Moon:"A",Sun:"B",Venus:"C",Mercury:"D",Mars:"E",Jupiter:"F",Saturn:"G",Uranus:"H",Neptune:"J",Ceres:"K",Earth:"L",Palas:"N",Juno:"O","5 Astrea":"P",Vesta:"Q",Pluto:"T",Sedna:"U",Eris:"V",Makemake:"W",Orcus:"X",Ixion:"Y"},t=h(()=>e[n.body]);return(r,a)=>(M(),I("span",{class:"celestial-body-icon",style:xe(r.style)},Y(t.value),5))}}),Fo=J({__name:"SkillTree",props:{nodes:{},branches:{},treeRowStyle:{}},setup(n){const e=n,t=()=>c(e.nodes).map(r=>{const a=e.treeRowStyle?c(e.treeRowStyle):"margin: 50px auto;";return u("span",{class:"row tree-row",style:a},[r.map(s=>R(s))])});return(r,a)=>(M(),I(_,null,[u(t),r.branches?(M(),oe(ki,{key:0,links:c(r.branches)},null,8,["links"])):F("",!0)],64))}}),Vo=ae(Fo,[["__scopeId","data-v-bf5baf26"]]),Bo=J({__name:"SkillTreeNode",props:{canClick:{},display:{},color:{},glowColor:{},wrapper:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.display==null?u(_,null,null):R(t.display,l=>u("div",null,[l])),s=h(()=>t.wrapper??u("div",null,null));return mr(()=>r("hold")),(l,o)=>(M(),oe(c(s),null,{default:j(()=>[y("div",{style:xe({backgroundColor:c(l.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${c(l.glowColor)}`})},[u(a)],4)]),_:1}))}}),Go=ae(Bo,[["__scopeId","data-v-55a7a25f"]]),Uo=Symbol("SkillTreeNode"),jo=Symbol("SkillTree"),zo=Symbol("BlankSkillTreeNode");function Ue(n){const e=P(Array.isArray(n)?n:[n]);return Ni(()=>e.every(t=>t.bought.value))}function Ho(n){return ye(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:r,display:a,glowColor:s,onClick:l,onHold:o,wrapper:d,...p}=e,v={bought:_e(!1),type:Uo,...p,...Xe("skillTreeNode",e,()=>u(Go,{canClick:v.canClick,onClick:v.onClick,onHold:v.onHold,color:v.color,glowColor:v.glowColor,display:v.display,wrapper:v.wrapper},null)),canClick:q(t)??!0,color:q(r),display:a,glowColor:q(s),wrapper:d,onClick:l==null?void 0:function(k){c(v.canClick)!==!1&&l.call(v,k)},onHold:o==null?void 0:function(){c(v.canClick)!==!1&&o.call(v)}};return v})}const ot=Ho(()=>({visibility:!1,[zo]:!0,[Ke]:!0}));function Ti(n){return ye(()=>{const e=n(),{branches:t,nodes:r,style:a,treeRowStyle:s,...l}=e,o=q(a);e.style=()=>({position:"static",...c(o)??{}});const d=t==null?void 0:q(t),p={type:jo,...l,...Xe("skill-tree",e,()=>u(Vo,{nodes:p.nodes,branches:p.branches,treeRowStyle:p.treeRowStyle},null)),branches:d,nodes:q(r),links:d==null?[]:P(d),treeRowStyle:c(q(s))};return p})}function Wo(n){const e=h(()=>l.solarSpeed.bought.value?2:1),t=h(()=>l.solarFriedDust.bought.value?2:1),r=h(()=>l.eightyEight.bought.value?2:1),a=h(()=>l.nowIHaveTwo.bought.value?2:1),s=h(()=>l.likeThatBlueGuy.bought.value?1.5:1),l={solarFriedDust:B(()=>({requirements:A(()=>({resource:n,cost:1})),display:{title:"Solar Fried Dust",description:"Multiply Dust Gain by x2",effectDisplay:()=>`x${$(t.value)}`}})),solarSpeed:B(()=>({requirements:[A(()=>({resource:n,cost:1})),Ue(l.solarFriedDust)],display:{title:"𝘴𝘰𝘭𝘢𝘳 𝘴𝘱𝘦𝘦𝘥",description:"Multiply time speed by x2",effectDisplay:()=>`x${$(e.value)}`}})),dustyTomes:B(()=>({requirements:[A(()=>({resource:n,cost:1})),Ue(l.solarFriedDust)],display:{title:"Dusty Tomes",description:"Keep the first row of Dust upgrades."}})),eightyEight:B(()=>({requirements:[A(()=>({resource:n,cost:1})),Ue(l.solarFriedDust)],display:{title:"88",description:"Multiply Acceleron Gain by x2.",effectDisplay:()=>`x${$(r.value)}`}})),nowIHaveTwo:B(()=>({requirements:[A(()=>({resource:n,cost:1})),Ue(l.solarFriedDust)],display:{title:"Now I Have Two!",description:"Divide Chunks cost by ÷2.",effectDisplay:()=>`÷${$(a.value)}`}})),snortingDust:B(()=>({requirements:[A(()=>({resource:n,cost:3})),Ue(l.dustyTomes)],display:{title:"Snorting Dust",description:"Start each reset with a base of 5% Dust per second."}})),secretChunkStash:B(()=>({requirements:[A(()=>({resource:n,cost:3})),Ue(l.eightyEight)],display:{title:"ˢᵉᶜʳᵉᵗ ᶜʰᵘⁿᵏ ˢᵗᵃˢʰ",description:"Start each reset with 3 Chunks."}})),youGetAPile:B(()=>({requirements:[A(()=>({resource:n,cost:5})),Ue([l.snortingDust,l.secretChunkStash])],display:{title:"You get a pile, and you get...",description:"Keep 'Dust Piles' unlocked and start with 1 level of each buyable."}})),likeThatBlueGuy:B(()=>({requirements:[A(()=>({resource:n,cost:5})),Ue(l.youGetAPile)],display:{title:"Like that blue guy",description:"All Acceleron intervals are divided by ÷1.5.",effectDisplay:()=>`÷${$(s.value)}`}})),autoAutoChunks:B(()=>({requirements:[A(()=>({resource:n,cost:5})),Ue(l.likeThatBlueGuy)],display:{title:"AUTO Autoin' Chunks",description:"Keep 'Autoin' Chunks' on reset."}})),nTropy:B(()=>({requirements:[A(()=>({resource:n,cost:5})),Ue(l.likeThatBlueGuy)],display:{title:"Tropy, N. Dr.",description:"Keep Accelerons Unlocked on reset."}})),mastery:B(()=>({requirements:[A(()=>({resource:n,cost:10})),Ue([l.likeThatBlueGuy])],display:{title:"Mastery",description:"Unlock Mercury Mastery."}}))},o=Ti(()=>({nodes:P([[l.solarSpeed,ot,l.nowIHaveTwo],[ot,l.solarFriedDust,ot],[l.dustyTomes,ot,l.eightyEight],[l.snortingDust,ot,l.secretChunkStash],[ot,l.youGetAPile,ot],[l.nTropy,l.likeThatBlueGuy,l.autoAutoChunks],[ot,l.mastery,ot]]),branches:P([{startNode:l.solarFriedDust,endNode:l.solarSpeed},{startNode:l.solarFriedDust,endNode:l.nowIHaveTwo},{startNode:l.solarFriedDust,endNode:l.dustyTomes},{startNode:l.solarFriedDust,endNode:l.eightyEight},{startNode:l.dustyTomes,endNode:l.snortingDust},{startNode:l.eightyEight,endNode:l.secretChunkStash},{startNode:l.snortingDust,endNode:l.youGetAPile},{startNode:l.secretChunkStash,endNode:l.youGetAPile},{startNode:l.youGetAPile,endNode:l.likeThatBlueGuy},{startNode:l.likeThatBlueGuy,endNode:l.nTropy},{startNode:l.likeThatBlueGuy,endNode:l.autoAutoChunks},{startNode:l.likeThatBlueGuy,endNode:l.mastery}])}));return{upgrades:l,skillTree:o,effects:{solarSpeed:e,solarFriedDust:t,eightyEight:r,nowIHaveTwo:a,likeThatBlueGuy:s}}}const xi=Symbol("Repeatable");function Te(n){const e=_e(0);return ye(()=>{const t=n(),{requirements:r,display:a,limit:s,onClick:l,initialAmount:o,clickableStyle:d,...p}=t;if(t.classes==null)t.classes=h(()=>({bought:c(b.maxed)}));else{const N=q(t.classes);t.classes=h(()=>({...c(N),bought:c(b.maxed)}))}const g=Xe("repeatable",t,()=>u(dr,{style:b.clickableStyle,canClick:b.canClick,onClick:b.onClick,onHold:b.onClick,display:b.display},null)),v={requirementMet:h(()=>i.sub(c(b.limit),c(e))),requiresPay:!1,visibility:kt.None,canMaximize:!0},k=[...Array.isArray(r)?r:[r],v];g.visibility!=null&&k.push(pr(g.visibility));let f;if(typeof a=="object"&&!Wt(a)){const{title:N,description:x,effectDisplay:S,showAmount:E}=a;f=()=>u("span",null,[N==null?null:u("div",null,[R(N,V=>u("h3",null,[V]))]),R(x),E===!1?null:u("div",null,[u("br",null,null),u(_,null,[w("Amount: "),yn(c(e))]),i.isFinite(c(b.limit))?u(_,null,[w(" / "),yn(c(b.limit))]):void 0]),S==null?null:u("div",null,[u("br",null,null),w("Currently: "),R(S)]),c(b.maxed)?null:u("div",null,[u("br",null,null),Kt(k,c(b.amountToIncrease))])])}else a!=null&&(f=a);e[Re]=0;const b={type:xi,...p,...g,amount:e,requirements:k,initialAmount:q(o),clickableStyle:d,limit:q(s)??i.dInf,classes:h(()=>{const N=c(g.classes)||{};return c(b.maxed)&&(N.bought=!0),N}),maxed:h(()=>i.gte(c(e),c(b.limit))),canClick:h(()=>Hn(k)),amountToIncrease:h(()=>i.clampMin(Si(k),1)),purchase(N=!0){if(!c(b.canClick))return;const x=c(b.amountToIncrease)??1;N&&Mi(k,x),e.value=i.add(c(e),x)},onClick(N){c(b.canClick)&&(b.purchase(),l==null||l(N))},ensureHasMinimum(){const N=c(b.initialAmount)??i.dZero;i.gte(e.value,N)||(e.value=i.min(N,c(b.limit)))},display:f};return Ne(e,()=>b.ensureHasMinimum()),Ne(wt(b.initialAmount),()=>b.ensureHasMinimum()),b.ensureHasMinimum(),b})}function Zo(n,e,t=[],r,a=!0){t=t.length===0?io(n,xi):t;const s=li(e)?h(e):e,l=c(r)===void 0?Number.MAX_SAFE_INTEGER:c(q(r));n.on("update",()=>{c(s)&&t.forEach(o=>{i.gte(o.amount.value,l)||o.purchase(a)})})}const jr="S",ne=Mt(jr,()=>{const n="Solar",e="#FFCC33",t=he(1,"Solar Energy"),r=yi(t),a=_t(t),s=he(0,"Solar Rays"),l=he(0,"Mercury Cores"),o=he(0,"Venus Cores"),d=mt(()=>({thingsToReset:()=>[ne]})),p={first:$t(()=>({requirements:Et(a,1),display:{requirement:"1 Solar Energy",optionsDisplay:"Start your journey. Unlock the Solar System."}})),second:$t(()=>({requirements:Et(a,4),display:{requirement:"2 Solar Energy",optionsDisplay:"Unlock Planet Cores & Mastery Trees"}}))},{skillTree:g,upgrades:v,effects:k}=Wo(s),f={mercury:B(()=>({display:{title:"Mercury",description:"Unlock Mercury"},requirements:[A(()=>({resource:t,cost:1}))]})),venus:B(()=>({display:{title:"Venus",description:"Unlock Venus"},requirements:[A(()=>({resource:l,cost:5})),Ue(f.mercury)]})),earth:B(()=>({visibility:!1,display:"??",requirements:[A(()=>({resource:P(s),cost:3})),Ue(f.venus)]}))},b=Ti(()=>({nodes:P([[f.mercury],[f.venus],[f.earth]]),branches:P([{startNode:f.mercury,endNode:f.venus},{startNode:f.venus,endNode:f.earth}])})),N=h(()=>{const ee=Object.values(f).some(ie=>ie.canPurchase.value),pe=Object.values(v).some(ie=>ie.canPurchase.value);return ee||pe}),x=Nn(()=>({layerID:jr,color:e,display:()=>u(pn,{body:"Sun"},null),glowColor:()=>N.value?e:null,reset:d})),S=ee=>{if(i.lte(ee,1))return 1;let pe=1,ie=1;for(let se=2;i.lte(se,ee);se++)[pe,ie]=[ie,pe+ie];return ie},E={solarEnergy:Te(()=>({requirements:A(()=>({resource:t,cost:()=>S(E.solarEnergy.amount.value)})),display:{showAmount:!1,description:`Convert 1 ${t.displayName} to 1 ${s.displayName}.`},clickableStyle:{width:"200px",minHeight:"0"}}))},V=Wn({milestones:()=>({display:"Milestones",tab:He(()=>({display:()=>u(_,null,[Object.values(p).map(ee=>R(ee))])}))}),solarSystem:()=>({display:"Solar System",tab:He(()=>({display:()=>u(_,null,[R(b)])}))}),mercury:()=>({display:"Mercury",visibility:p.second.earned,tab:He(()=>{const ee=c($e.color);return{display:()=>u(_,null,[u("h2",null,[u(pn,{body:"Mercury",style:{display:"inline",color:ee}},null)," ",z(l.value,0),w(" "),l.displayName]),u("hr",{style:{width:"256px",margin:"auto",background:ee,marginTop:"6px"}},null),u(K,null,null),R(g)])}})})},()=>({style:{height:"100%"}}));return{name:n,energy:t,best:r,total:a,color:e,milestones:p,tabs:V,mercuryCores:l,venusCores:o,solarRays:s,solarSystemTree:b,solarSystemUpgrades:f,mercuryTree:g,mercuryTreeUpgrades:v,mercuryTreeEffects:k,converters:E,display:()=>u(_,null,[u("h2",null,[w("You have "),u(pn,{body:"Sun",style:{display:"inline",color:e}},null)," ",z(t.value),w(" "),t.displayName]),u("h4",null,[w("You have made a total of "),z(a.value)]),u(K,null,null),R(V)]),treeNode:x}}),Yo=Symbol("Conversion");function Ii(n){return ye(()=>{const e=n(),{baseResource:t,gainResource:r,formula:a,currentGain:s,actualGain:l,currentAt:o,nextAt:d,convert:p,spend:g,buyMax:v,onConvert:k,...f}=e,b=s==null?h(()=>{let x=i.floor(N.formula.evaluate(t.value)).max(0);return c(N.buyMax)===!1&&(x=x.min(1)),x}):q(s),N={type:Yo,...f,baseResource:t,gainResource:r,formula:a(m.variable(t)),currentGain:b,actualGain:l==null?b:q(l),currentAt:o==null?h(()=>N.formula.invert(i.floor(c(N.currentGain)))):q(o),nextAt:d==null?h(()=>N.formula.invert(i.floor(c(N.currentGain)).add(1))):q(d),convert:p??function(){const x=c(N.currentGain);r.value=i.add(r.value,x),N.spend(x),k==null||k(x)},spend:g??(()=>t.value=0),buyMax:q(v)??!0,onConvert:k};return N})}function Di(n){return Ii(n)}function Ai(n){const e=Ii(()=>{const t=n();return t.buyMax??(t.buyMax=!1),t.currentGain??(t.currentGain=h(()=>{let r=i.floor(e.formula.evaluate(t.baseResource.value)).max(t.gainResource.value);return c(t.buyMax)===!1&&(r=r.min(i.add(t.gainResource.value,1))),r})),t.actualGain??(t.actualGain=h(()=>{let r=i.sub(e.formula.evaluate(t.baseResource.value),t.gainResource.value).floor().max(0);return c(t.buyMax)===!1&&(r=r.min(1)),r})),t.convert??(t.convert=function(){var a;const r=c(e.actualGain);t.gainResource.value=c(e.currentGain),e.spend(r),(a=e.onConvert)==null||a.call(e,r)}),t});return e}function Ei(n,e,t=1,r=i.dInf){const a=q(t),s=q(r);n.on("preUpdate",l=>{const o=c(a);i.neq(o,0)&&(e.gainResource.value=i.add(e.gainResource.value,i.times(o,l).times(i.ceil(c(e.actualGain)))).min(c(s)).max(e.gainResource.value))})}const Jo=J({__name:"Bar",props:{width:{},height:{},direction:{},borderStyle:{},baseStyle:{},textStyle:{},fillStyle:{},containerStyle:{},progress:{},display:{}},setup(n){const e=n,t=h(()=>{const o=e.width;return typeof o=="string"?o:`${o}px`}),r=h(()=>{const o=e.height;return typeof o=="string"?o:`${o}px`}),a=h(()=>{const o=c(e.progress),d=o instanceof i?o.toNumber():Number(o);return(1-Math.min(Math.max(d,0),1))*100}),s=h(()=>{const o={width:`calc(${t.value} + 0.5px)`,height:`calc(${r.value} + 0.5px)`};switch(e.direction){case Q.Up:o.clipPath=`inset(${a.value}% 0% 0% 0%)`,o.width=`calc(${t.value} + 1px)`;break;case Q.Down:o.clipPath=`inset(0% 0% ${a.value}% 0%)`,o.width=`calc(${t.value} + 1px)`;break;case Q.Right:o.clipPath=`inset(0% ${a.value}% 0% 0%)`;break;case Q.Left:o.clipPath=`inset(0% 0% 0% ${a.value}%)`;break;case Q.Default:o.clipPath="inset(0% 50% 0% 0%)";break}return o}),l=()=>e.display?R(e.display):null;return(o,d)=>(M(),I("div",{style:xe([{width:t.value,height:r.value},c(o.containerStyle)??{}]),class:"bar"},[y("div",{class:"overlayTextContainer border",style:xe([{width:t.value,height:r.value},c(o.borderStyle)??{}])},[o.display?(M(),I("span",{key:0,class:"overlayText",style:xe(c(o.textStyle))},[u(l)],4)):F("",!0)],4),y("div",{class:"border",style:xe([{width:t.value,height:r.value},c(o.baseStyle)??{},c(o.borderStyle)??{}])},[y("div",{class:"fill",style:xe([s.value,c(o.fillStyle)??{}])},null,4)],4)],4))}}),Ko=ae(Jo,[["__scopeId","data-v-aef11dbe"]]),Xo=Symbol("Bar");function bt(n){return ye(()=>{const e=n==null?void 0:n(),{width:t,height:r,direction:a,borderStyle:s,baseStyle:l,containerStyle:o,textStyle:d,fillStyle:p,progress:g,display:v,...k}=e,f={type:Xo,...k,...Xe("bar",e,()=>u(Ko,{width:f.width,height:f.height,direction:f.direction,borderStyle:f.borderStyle,baseStyle:f.baseStyle,textStyle:f.textStyle,fillStyle:f.fillStyle,progress:f.progress,display:f.display,containerStyle:f.containerStyle},null)),width:q(t),height:q(r),direction:q(a),borderStyle:q(s),baseStyle:q(l),textStyle:q(d),fillStyle:q(p),progress:q(g),containerStyle:q(o),display:v};return f})}function dn(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ti(n)}const zr="Ma",Ce=Mt(zr,n=>{const e="Mercury",t="#8c8c94",r={direction:Q.Right,height:18,width:256},a={timer:he(0),resource:he(0,"Dust Accelerons"),gainComputed:h(()=>i.times(1,a.dustAcceleratorGainModifier.apply(1)).times(s.dustAcceleratorModifierEffect.value).times(a.dustyJeansEffect.value).times(ne.mercuryTreeEffects.eightyEight.value)),bar:bt(()=>({...r,progress:()=>i.div(a.timer.value,a.timerMax.value)})),intervalBuyable:Te(()=>({requirements:A(()=>({resource:P(be.mercurialDust),cost:()=>m.variable(a.intervalBuyable.amount.value).pow_base(7).times(1e10).evaluate(),requiresPay:!1})),clickableStyle:{minHeight:"0",width:"fit-content",paddingLeft:"12px",paddingRight:"12px"},display:()=>u(_,null,[u("div",null,[w("Decrease timer interval"),u("br",null,null),w("Currently: "),$(a.dustAcceleratorTimerMaxEffect.value),Kt(a.intervalBuyable.requirements,c(a.intervalBuyable.amountToIncrease))])])})),timerMax:h(()=>i.div(120,a.dustAcceleratorTimerMaxEffect.value).div(a.acceleratingTheAcceleratorEffect.value).div(l.levelTwoTimeRaiseEffect.value).div(ne.mercuryTreeEffects.likeThatBlueGuy.value).clampMin(.1)),timerTickSpeedDisplay:h(()=>i.fromValue(a.timerMax.value).div(ne.mercuryTreeEffects.solarSpeed.value)),isAtLeastLevelOne:h(()=>i.gte(a.acceleratorLevel.value,1)),isAtLeastLevelTwo:h(()=>i.gte(a.acceleratorLevel.value,2)),isAtLeastLevelThree:h(()=>i.gte(a.acceleratorLevel.value,3)),acceleratorLevel:h(()=>a.levelBuyable.amount.value),bonusLevels:f=>i.lt(a.acceleratorLevel.value,f)?i.dZero:i.sub(a.acceleratorLevel.value,i.sub(f,1)).add(1).clampMin(1),dustGainMultiplierModifier:ve(()=>[De(()=>({enabled:()=>i.gt(a.resource.value,0),multiplier:()=>{const f=a.bonusLevels(1).clampMin(1);return i.add(a.resource.value,1).pow(.25).mul(f).clampMin(1)},description:"Dust Accelerons"}))]),dustAcceleratorGainModifier:ve(()=>[De(()=>({enabled:()=>a.isAtLeastLevelOne.value&&i.gt(a.resource.value,0),multiplier:()=>{const f=a.bonusLevels(2).clampMin(1);return i.add(a.resource.value,1).pow(.2).times(f).clampMin(1)}}))]),dustAcceleratorDustRaiseEffect:h(()=>{if(a.isAtLeastLevelTwo.value){const f=a.bonusLevels(3).times(.1),b=i.add(.1,f);return i.add(a.resource.value,1).slog().pow(b).clampMin(1)}return i.dOne}),dustAcceleratorsGainComputed:h(()=>i.times(1,a.dustAcceleratorGainModifier.apply(1))),acceleratingTheAcceleratorEffect:h(()=>a.upgrades.second.bought.value?i.fromValue(m.variable(i.add(a.resource.value,1)).mul(.004).add(1).step(2,f=>f.pow(.1)).evaluate()):i.dOne),dustAcceleratorTimerMaxEffect:h(()=>i.gt(a.intervalBuyable.amount.value,0)?i.mul(a.intervalBuyable.amount.value,.025).add(1).clampMin(1):i.dOne),dustBuyableCapEffect:h(()=>a.isAtLeastLevelThree.value?i.add(a.resource.value,1).log2().sqrt().floor().clampMin(1):i.dZero),levelBuyable:Te(()=>({limit:3,requirements:A(()=>({requiresPay:!1,resource:P(a.resource),cost:m.variable(a.levelBuyable.amount).pow_base(5).times(100)})),display:{title:"Upgrade",description:"Reset Dust Accelerons to unlock a new effect and buff previous effects."},onClick:()=>{a.resource.value=0}})),dustyJeansEffect:h(()=>a.upgrades.dustyJeans.bought.value?i.add(a.resource.value,1).log2().clampMin(1):i.dOne),upgrades:{second:B(()=>({requirements:A(()=>({resource:P(a.resource),cost:i.fromNumber(25)})),display:{title:"Accelerating the Accelerator",description:"Decrease timer interval based on accelerons",effectDisplay:()=>`/${$(a.acceleratingTheAcceleratorEffect.value)}`}})),chunksUnlock:B(()=>({requirements:A(()=>({resource:P(a.resource),cost:i.fromNumber(125)})),display:{title:"je ne sais chunks",description:"Unlock Chunk Accelerons"}})),first:B(()=>({requirements:A(()=>({resource:P(a.resource),cost:i.fromNumber(150)})),display:{title:"Speed Dust",description:"Unlock more Dust upgrades"}})),dustyJeans:B(()=>({requirements:A(()=>({resource:a.resource,cost:i.fromNumber(1e9)})),display:{title:"Dusty Jeans",description:"Boost Dust Acceleron gain based on Dust Accelerons.",effectDisplay:()=>`x${$(a.dustyJeansEffect.value)}`}}))},tick:f=>{be.unlocks.accelerators.bought.value&&(a.timer.value=i.add(a.timer.value,i.dOne.times(ne.mercuryTreeEffects.solarSpeed.value).times(f)),i.gte(a.timer.value,a.timerMax.value)&&(a.timer.value=0,a.resource.value=i.add(a.resource.value,a.gainComputed.value)))},levelEffectsDisplay:()=>{const f=[u("h5",null,[w("A x"),$(a.dustGainMultiplierModifier.apply(1)),w(" boost to Dust gain.")])];return a.isAtLeastLevelOne.value&&f.push(u("h5",null,[w("A x"),$(a.dustAcceleratorGainModifier.apply(1)),w(" boost to accelerons gain.")])),a.isAtLeastLevelTwo.value&&f.push(u("h5",null,[w("A ^"),$(a.dustAcceleratorDustRaiseEffect.value),w(" boost to dust gain.")])),a.isAtLeastLevelThree.value&&f.push(u("h5",null,[w("Adding +"),$(a.dustBuyableCapEffect.value),w(" to Dust buyable caps.")])),Ht(f,u(_,null,null))}},s={timer:he(0),resource:he(0,"Chunk Accelerons"),gainComputed:h(()=>i.times(1,s.acceleratorGainModifier.apply(1)).times(l.chunkAcceleronGainModifier.apply(1)).times(ne.mercuryTreeEffects.eightyEight.value)),bar:bt(()=>({...r,progress:()=>i.div(s.timer.value,s.timerMax.value)})),intervalBuyable:Te(()=>({requirements:A(()=>({resource:P(me.chunks),cost:()=>m.variable(s.intervalBuyable.amount.value).pow_base(1.1).times(18).floor().evaluate(),requiresPay:!1})),clickableStyle:{minHeight:"0",width:"fit-content",paddingLeft:"12px",paddingRight:"12px"},display:()=>u(_,null,[u("div",null,[w("Decrease timer interval"),u("br",null,null),w("Currently: "),$(s.intervalBuyableEffect.value),Kt(s.intervalBuyable.requirements,c(s.intervalBuyable.amountToIncrease))])])})),timerMax:h(()=>i.fromNumber(120).div(s.intervalBuyableEffect.value).div(s.dustAcceleratorIntervalEffect.value).div(l.levelTwoTimeRaiseEffect.value).div(ne.mercuryTreeEffects.likeThatBlueGuy.value)),timerTickSpeedDisplay:h(()=>i.fromValue(s.timerMax.value).div(ne.mercuryTreeEffects.solarSpeed.value)),dustAcceleratorIntervalEffect:h(()=>s.upgrades.chunksMeetDust.bought.value?i.add(a.resource.value,1).pow(.12).sqrt().clampMin(1):i.dOne),intervalBuyableEffect:h(()=>i.gt(s.intervalBuyable.amount.value,0)?i.mul(s.intervalBuyable.amount.value,.03).add(1).clampMin(1):i.dOne),levelBuyable:Te(()=>({limit:3,requirements:A(()=>({requiresPay:!1,resource:P(s.resource),cost:m.variable(s.levelBuyable.amount).pow_base(3).times(30)})),display:{title:"Upgrade",description:"Reset Chunk Accelerons to unlock a new effect and buff previous effects."},onClick:()=>{s.resource.value=0}})),pebbleSmasherEffect:h(()=>s.upgrades.pebbleSmasher.bought.value?i.add(s.gainComputed.value,1).pow(.1).sqrt().clampMin(1):i.dOne),upgrades:{chunksMeetDust:B(()=>({requirements:A(()=>({resource:P(s.resource),cost:i.fromNumber(25)})),display:{title:"Chunks, meet Dust",description:"Decrease timer interval based on Dust Accelerons",effectDisplay:()=>`÷${$(s.dustAcceleratorIntervalEffect.value)}`}})),moreChunkUpgrades:B(()=>({requirements:A(()=>({resource:P(s.resource),cost:i.fromNumber(100)})),display:{title:"Speed Chunks",description:"Unlock more Chunk upgrades"}})),timeUnlock:B(()=>({requirements:A(()=>({resource:P(s.resource),cost:i.fromNumber(150)})),display:{title:"Time go brrr",description:"Unlock Time Accelerons"}})),pebbleSmasher:B(()=>({requirements:A(()=>({resource:s.resource,cost:i.fromNumber(1e6)})),display:{title:"Pebble Smasher",description:"Divide chunk cost based on Chunk Acceleron gain",effectDisplay:()=>`÷${$(s.pebbleSmasherEffect.value)}`}}))},isAtLeastLevelOne:h(()=>i.gte(s.acceleratorLevel.value,1)),isAtLeastLevelTwo:h(()=>i.gte(s.acceleratorLevel.value,2)),isAtLeastLevelThree:h(()=>i.gte(s.acceleratorLevel.value,3)),acceleratorLevel:h(()=>s.levelBuyable.amount.value),bonusLevels:f=>i.lt(s.acceleratorLevel.value,f)?i.dZero:i.sub(s.acceleratorLevel.value,i.sub(f,1)).add(1).clampMin(1),dustAcceleratorModifierEffect:h(()=>{if(i.lt(s.resource.value,1))return i.dOne;const f=s.bonusLevels(1).clampMin(1);return i.add(s.resource.value,2).log2().times(f).pow(s.levelThreeRaiseEffect.value).clampMin(1)}),chunkCostDivisionEffect:h(()=>{if(s.isAtLeastLevelTwo.value&&i.gt(s.resource.value,0)){const f=s.bonusLevels(3).clampMin(1);return i.add(s.resource.value,1).pow(.3).cbrt().times(f).pow(s.levelThreeRaiseEffect.value).clampMin(1)}return i.dOne}),acceleratorGainModifier:ve(()=>[De(()=>({enabled:()=>s.isAtLeastLevelOne.value,multiplier:()=>{if(i.lt(s.resource.value,1))return i.dOne;const f=s.bonusLevels(2).clampMin(1);return i.add(s.resource.value,1).pow(.2).times(f).pow(s.levelThreeRaiseEffect.value).clampMin(1)}}))]),levelThreeRaiseEffect:h(()=>s.isAtLeastLevelThree.value?i.add(s.resource.value,1).pow(.1).cbrt().clampMin(1):i.dOne),levelEffectsDisplay:()=>{const f=[u("h5",null,[w("A x"),$(s.dustAcceleratorModifierEffect.value),w(" boost to Dust Acceleron gain.")])];return s.isAtLeastLevelOne.value&&f.push(u("h5",null,[w("A x"),$(s.acceleratorGainModifier.apply(1)),w(" boost to Chunk Acceleron gain.")])),s.isAtLeastLevelTwo.value&&f.push(u("h5",null,[w("Reduces Chunk cost by ÷"),$(s.chunkCostDivisionEffect.value),w(".")])),s.isAtLeastLevelThree.value&&f.push(u("h5",null,[w("Raising above effects by ^"),$(s.levelThreeRaiseEffect.value),w(".")])),Ht(f,u(_,null,null))},tick:f=>{a.upgrades.chunksUnlock.bought.value&&(s.timer.value=i.add(s.timer.value,i.dOne.times(ne.mercuryTreeEffects.solarSpeed.value).times(f)),i.gte(s.timer.value,s.timerMax.value)&&(s.timer.value=0,s.resource.value=i.add(s.resource.value,s.gainComputed.value)))}},l={timer:he(0),resource:he(0,"time Accelerons"),gainComputed:h(()=>i.times(1,l.finalCountdownEffect.value).times(me.speedingChunksEffect.value).times(ne.mercuryTreeEffects.eightyEight.value)),bar:bt(()=>({...r,progress:()=>i.div(l.timer.value,l.timerMax.value)})),bonusLevels:f=>i.lt(l.acceleratorLevel.value,f)?i.dZero:i.sub(l.acceleratorLevel.value,i.sub(f,1)).add(1).clampMin(1),acceleronTimerDivisionModifier:h(()=>{if(i.lt(l.resource.value,1))return i.dOne;const f=l.bonusLevels(1).times(25);return i.add(l.resource.value,10).add(f).log10().sqrt().pow(l.levelThreeRaiseEffect.value).clampMin(1)}),timerMax:h(()=>i.fromNumber(120).div(l.acceleronTimerDivisionModifier.value).div(l.doomsdayClockEffect.value).div(l.levelTwoTimeRaiseEffect.value).div(ne.mercuryTreeEffects.likeThatBlueGuy.value)),timerTickSpeedDisplay:h(()=>i.fromValue(l.timerMax.value).div(ne.mercuryTreeEffects.solarSpeed.value)),levelBuyable:Te(()=>({limit:3,requirements:A(()=>({requiresPay:!1,resource:P(l.resource),cost:m.variable(l.levelBuyable.amount).pow_base(5).times(10)})),display:{title:"Upgrade",description:"Reset Time Accelerons to unlock a new effect and buff previous effects."},onClick:()=>{l.resource.value=0}})),upgrades:{autoVonDoom:B(()=>({requirements:A(()=>({resource:P(l.resource),cost:i.fromNumber(10)})),display:{title:"Auto Von Doom",description:"Automate Accelerator interval buyables."}})),doomsDayClock:B(()=>({requirements:A(()=>({resource:P(l.resource),cost:i.fromNumber(25)})),display:{title:"Doomsday Clock",description:"Reduce interval based on Collision Time.",effectDisplay:()=>`÷${$(l.doomsdayClockEffect.value)}`}})),finalCountdown:B(()=>({requirements:A(()=>({resource:P(l.resource),cost:i.fromNumber(100)})),display:{title:"Final Countdown",description:"Multiply Time Acceleron gain based on Collision Time.",effectDisplay:()=>`x${$(l.finalCountdownEffect.value)}`}})),bringItHome:B(()=>({requirements:A(()=>({resource:P(l.resource),cost:i.fromNumber(500)})),display:{title:"Bring It Home",description:"Multiply Collision Time based on Time Accelerons.",effectDisplay:()=>`x${$(l.bringItHomeEffect.value)}`}}))},doomsdayClockEffect:h(()=>l.upgrades.doomsDayClock.bought.value?i.add($e.collisionTimeGainComputed.value,1).log10().cbrt().clampMin(1):i.dOne),finalCountdownEffect:h(()=>l.upgrades.finalCountdown.bought.value?i.add($e.collisionTimeGainComputed.value,1).log(8).sqrt().clampMin(1):i.dOne),bringItHomeEffect:h(()=>l.upgrades.bringItHome.bought.value?i.add(l.resource.value,1).pow(.15).sqrt().clampMin(1):i.dOne),isAtLeastLevelOne:h(()=>i.gte(l.acceleratorLevel.value,1)),isAtLeastLevelTwo:h(()=>i.gte(l.acceleratorLevel.value,2)),isAtLeastLevelThree:h(()=>i.gte(l.acceleratorLevel.value,3)),acceleratorLevel:h(()=>l.levelBuyable.amount.value),chunkAcceleratorModifierEffect:h(()=>i.add(s.resource.value,1).log2().clampMin(1)),chunkAcceleronGainModifier:ve(()=>[De(()=>({enabled:()=>l.isAtLeastLevelOne.value&&i.gt(l.resource.value,0),multiplier:()=>{const f=l.bonusLevels(2).clampMin(1);return i.add(l.resource.value,2).log2().sqrt().times(f).pow(l.levelThreeRaiseEffect.value).clampMin(1)}}))]),levelTwoTimeRaiseEffect:h(()=>{if(l.isAtLeastLevelTwo.value){const f=l.bonusLevels(3).times(.1),b=i.add(.25,f);return i.add(l.resource.value,10).log10().pow(b).cbrt().pow(l.levelThreeRaiseEffect.value).clampMin(1)}return i.dOne}),levelThreeRaiseEffect:h(()=>l.isAtLeastLevelThree.value&&i.gt(l.resource.value,0)?i.add(l.resource.value,10).log10().pow(.1).sqrt().add(l.bringItHomeEffect.value).clampMin(1):i.dOne),levelEffectsDisplay:()=>{const f=[u("h5",null,[w("Decreasing the timer interval by ÷"),$(l.acceleronTimerDivisionModifier.value),w(".")])];return l.isAtLeastLevelOne.value&&f.push(u("h5",null,[w("A x"),$(l.chunkAcceleronGainModifier.apply(1)),w(" boost to Chunk Acceleron gain.")])),l.isAtLeastLevelTwo.value&&f.push(u("h5",null,[w("Raising time speed by ^"),$(l.levelTwoTimeRaiseEffect.value),w(".")])),l.isAtLeastLevelThree.value&&f.push(u("h5",null,[w("Raising above effects by ^"),$(l.levelThreeRaiseEffect.value),w(".")])),Ht(f,u(_,null,null))},tick:f=>{s.upgrades.timeUnlock.bought.value&&(l.timer.value=i.add(l.timer.value,i.dOne.times(ne.mercuryTreeEffects.solarSpeed.value).times(f)),i.gte(l.timer.value,l.timerMax.value)&&(l.timer.value=0,l.resource.value=i.add(l.resource.value,l.gainComputed.value)))}};n.on("preUpdate",f=>{a.tick(f),s.tick(f),l.tick(f)});const o=ye(()=>(Zo(Ce,l.upgrades.autoVonDoom.bought,[a.intervalBuyable,s.intervalBuyable]),{})),d=Wn({dust:()=>({display:"Dust",tab:He(()=>({display:()=>{let f,b;return u(_,null,[u("h2",null,[$(a.resource.value),w(" Dust Accelerons")]),u("h6",null,[w("You are gaining "),$(a.gainComputed.value),w(" every")," ",$(a.timerTickSpeedDisplay.value),w(" seconds.")]),u(K,null,null),R(a.bar),u(K,null,null),u("h4",null,[w("You have "),$(be.mercurialDust.value),w(" mercurial dust.")]),u(Gr,null,dn(f=R(a.intervalBuyable))?f:{default:()=>[f]}),u(K,null,null),u("h4",null,[w("Granting you:")]),R(a.levelEffectsDisplay),u(K,null,null),R(a.levelBuyable),u(K,null,null),u("h4",null,[w("Upgrades")]),u(qt,null,dn(b=Ve(a.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?b:{default:()=>[b]})])}}))}),chunks:()=>({display:"Chunks",visibility:a.upgrades.chunksUnlock.bought,tab:He(()=>({display:()=>{let f,b;return u(_,null,[u("h2",null,[$(s.resource.value),w(" Chunk Accelerons")]),u("h6",null,[w("You are gaining "),$(s.gainComputed.value),w(" every")," ",$(s.timerTickSpeedDisplay.value),w(" seconds.")]),u(K,null,null),R(s.bar),u(K,null,null),u("h4",null,[w("You have "),$(me.chunks.value),w(" mercurial chunks.")]),u(Gr,null,dn(f=R(s.intervalBuyable))?f:{default:()=>[f]}),u(K,null,null),u("h4",null,[w("Granting you:")]),R(s.levelEffectsDisplay),u(K,null,null),R(s.levelBuyable),u(K,null,null),u("h4",null,[w("Upgrades")]),u(qt,null,dn(b=Ve(s.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?b:{default:()=>[b]})])}}))}),time:()=>({display:"Time",visibility:s.upgrades.timeUnlock.bought,tab:He(()=>({display:()=>{let f;return u(_,null,[u("h2",null,[$(l.resource.value),w(" time Accelerons")]),u("h6",null,[w("You are gaining "),$(l.gainComputed.value),w(" every")," ",$(l.timerTickSpeedDisplay.value),w(" seconds.")]),u(K,null,null),R(l.bar),u(K,null,null),u("h4",null,[w("Granting you:")]),R(l.levelEffectsDisplay),u(K,null,null),R(l.levelBuyable),u(K,null,null),u("h4",null,[w("Upgrades")]),u(qt,null,dn(f=Ve(l.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?f:{default:()=>[f]})])}}))})},()=>({floating:!0,buttonStyle:{border:"solid 2px",borderRadius:"12px"}})),p=mt(()=>({thingsToReset:()=>[Ce],onReset:()=>{}})),g=()=>{p.reset(),a.resource.value=0,s.resource.value=0,l.resource.value=0},v=h(()=>a.levelBuyable.canClick.value||s.levelBuyable.canClick.value||l.levelBuyable.canClick.value),k=h(()=>v.value||Object.values(a.upgrades).some(f=>f.canPurchase.value)||Object.values(s.upgrades).some(f=>f.canPurchase.value)||Object.values(l.upgrades).some(f=>f.canPurchase.value));return{id:zr,name:e,color:t,dustAccelerator:a,chunkAccelerator:s,timeAccelerator:l,tabs:d,autoIntervalBuyers:o,showExclamation:v,displayGlow:k,fullReset:g,display:()=>u(_,null,[R(d)])}}),nr="Mc",me=Mt(nr,()=>{const n="Mercury Chunks",e="#68696d",t=he(0,"Mercurial Chunks"),r=_t(t),a=Ai(()=>{const V=h(()=>i.clampMin(o.apply(0),1)),ee=h(()=>i.lt(t.value,10)?i.dOne:i.sub(t.value,9).add(1).clampMin(1)),pe=h(()=>{if(i.lt(t.value,20))return i.dOne;const se=i.sub(t.value,19);return i.times(90,i.pow(1.125,i.pow(se,1.45)))}),ie=h(()=>i.lt(t.value,1e3)?i.dOne:i.sub(t.value,999).times(3).clampMin(1));return{formula:se=>se.mul(V).mul(Ce.chunkAccelerator.chunkCostDivisionEffect).mul(p).mul(g).mul(ne.mercuryTreeEffects.nowIHaveTwo).mul(Ce.chunkAccelerator.pebbleSmasherEffect).div(1e3).step(1,ce=>ce.div(30)).step(5,ce=>ce.div(2)).step(10,ce=>ce.cbrt().div(ee)).step(20,ce=>ce.sqrt().div(pe)).step(29,ce=>ce.sqrt()).step(100,ce=>ce.div(350).pow(.7)).step(1e3,ce=>ce.sqrt().div(ie)),baseResource:be.mercurialDust,gainResource:P(t),currentGain:h(()=>i.floor(a.formula.evaluate(be.totalMercurialDust.value)).max(t.value).min(i.add(t.value,1))),actualGain:h(()=>i.sub(a.formula.evaluate(be.totalMercurialDust.value),t.value).floor().max(0).min(1).clampMax(1)),spend:()=>{},convert:()=>{t.value=i.add(t.value,1)}}}),s=ye(()=>(Ne(be.mercurialDust,()=>{!k.autoChunks.bought.value||c(N.canClick)===!1||i.lt(c(a.actualGain),1)||a.convert()}),{})),l=ve(()=>[Rt(()=>({enabled:k.chuckingChunks.bought,addend:()=>r.value,description:"Chuckin' Chunks"}))]),o=ve(()=>[Rt(()=>({enabled:k.lovingChunks.bought,addend:()=>i.add(be.mercurialDust.value,1).log10().pow(.2),description:"Lovin' Chunks"}))]),d=h(()=>k.collidingChunks.bought.value?i.add(r.value,1).log10().sqrt().clampMin(1):i.dOne),p=h(()=>k.splinteringChunks.bought.value?i.add($e.collisionTimeGainComputed.value,1).log10().sqrt().clampMin(1):i.dOne),g=h(()=>k.cheapingChunks.bought.value?i.cbrt(t.value).clampMin(1):i.dOne),v=h(()=>k.speedingChunks.bought.value?i.pow(t.value,.5).log2().clampMin(1):i.dOne),k={chuckingChunks:B(()=>({requirements:A(()=>({resource:P(t),cost:i.fromNumber(3)})),display:{title:"Chuckin' Chunks",description:"Increase base reset time by your total chunks",effectDisplay:()=>`+${z(l.apply(0))}`}})),grindingChunks:B(()=>({requirements:A(()=>({resource:P(t),cost:i.fromNumber(3)})),display:{title:"Grindin' Chunks",description:"Gain dust per second equal to your total chunks",effectDisplay:()=>`${z(i.times(be.passiveGenerationPerSecondEffect.value,100))}%/s`}})),lovingChunks:B(()=>({requirements:A(()=>({resource:P(t),cost:i.fromNumber(3)})),display:{title:"Lovin' Chunks",description:"Reduce chunk cost based on dust",effectDisplay:()=>`+${z(o.apply(0))}`}})),autoChunks:B(()=>({visibility:()=>Ce.chunkAccelerator.upgrades.moreChunkUpgrades.bought.value||k.autoChunks.bought.value,requirements:A(()=>({resource:P(t),cost:i.fromNumber(35)})),display:{title:"Autoin' Chunks",description:"Automatically reset for chunks, and they reset nothing."}})),collidingChunks:B(()=>({visibility:Ce.chunkAccelerator.upgrades.moreChunkUpgrades.bought,requirements:A(()=>({resource:t,cost:50})),display:{title:"Collidin' Chunks",description:"Raise collision time rate based on chunks",effectDisplay:()=>`^${z(d.value)}`}})),splinteringChunks:B(()=>({visibility:Ce.chunkAccelerator.upgrades.moreChunkUpgrades.bought,requirements:A(()=>({resource:t,cost:70})),display:{title:"Splinterin' Chunks",description:"Reduce chunk cost based on collision time rate",effectDisplay:()=>`÷${z(p.value)}`}})),cheapingChunks:B(()=>({visibility:Ce.chunkAccelerator.upgrades.moreChunkUpgrades.bought,requirements:A(()=>({resource:t,cost:85})),display:{title:"Cheapin' Chunks",description:"Reduce Chunk cost based on Chunks",effectDisplay:()=>`÷${z(g.value)}`}})),speedingChunks:B(()=>({visibility:Ce.chunkAccelerator.upgrades.moreChunkUpgrades.bought,requirements:A(()=>({resource:t,cost:100})),display:{title:"Speedin' Chunks",description:"Boost Time Acceleron gain based on Chunks.",effectDisplay:()=>`x${z(v.value)}`}}))},f=Nn(()=>({layerID:nr,color:e,reset:b,display:"C",classes:{small:!0}})),b=mt(()=>({thingsToReset:()=>[be,$e]})),N=Ci(()=>({conversion:a,treeNode:f,resetDescription:()=>"Condense your dust & time for ",onClick:()=>{be.reset.reset()}})),x=()=>{mt(()=>({thingsToReset:()=>[me]})).reset(),ne.mercuryTreeUpgrades.secretChunkStash.bought.value&&(be.unlocks.chunks.bought.value=!0,t.value=3,r.value=3)};Ne(ne.mercuryTreeUpgrades.secretChunkStash.bought,V=>{V&&(t.value=i.max(t.value,3),be.unlocks.chunks.bought.value=!0)});const S=h(()=>i.gte(c(a.actualGain),1)&&!k.autoChunks.bought.value),E=h(()=>S.value||Object.values(k).some(V=>V.canPurchase.value));return{id:nr,name:n,color:e,fullReset:x,resetButton:N,chunks:t,totalChunks:r,conversion:a,upgrades:k,chuckingChunksModifier:l,treeNode:f,collidingChunksEffect:d,autoChunker:s,showExclamation:S,speedingChunksEffect:v,displayGlow:E,display:()=>u(_,null,[u("h2",null,[w("You have "),z(t.value),w(" "),t.displayName]),u("h4",null,[w("You have condensed a total of "),z(r.value)]),u("h6",null,[w("You have gathered a total of "),z(be.totalMercurialDust.value)]),u(K,null,null),R(N),u(K,null,null),u("h3",null,[w("Upgrades")]),u(K,null,null),Ve(k,4)])}}),Qo="Mm",ze=Mt(Qo,()=>{const n="Mercury",e="#8c8c94",t=ve(()=>[De(()=>({multiplier:()=>i.times(1.5,me.totalChunks.value).clampMin(1),enabled:s.first.earned,description:"First Chunk Milestone"}))]),r=h(()=>s.four.earned.value===!0?i.add(me.totalChunks.value,1).slog().pow(.5).clampMin(1):i.dOne),a=h(()=>Object.values(s).filter(d=>d.earned.value).length),s={first:$t(()=>({requirements:Et(me.totalChunks,1),display:{requirement:"1 Mercurial Chunk",effectDisplay:()=>`x${z(t.apply(1))}`,optionsDisplay:()=>u(_,null,[w("Unlock the `Dust Piles` buyable"),u("br",null,null),w("Boost time by x1.5 per total chunk")])}})),second:$t(()=>({requirements:Et(me.totalChunks,2),display:{requirement:"2 Total Mercurial Chunks",optionsDisplay:"Keep 1 Dust upgrade per milestone achieved.",effectDisplay:()=>`${a.value} upgrades are kept`}})),three:$t(()=>({requirements:Et(me.totalChunks,3),display:{requirement:"3 Total Mercurial Chunks",optionsDisplay:"Unlock Chunk Upgrades"}})),four:$t(()=>({requirements:Et(me.totalChunks,10),display:{requirement:"10 Total Mercurial Chunks",optionsDisplay:"Raise time rate by total chunks at a heavily reduced rate.",effectDisplay:()=>`^${z(r.value)}`}})),five:$t(()=>({requirements:Et(me.totalChunks,20),display:{requirement:"20 Total Mercurial Chunks",optionsDisplay:"Keep some buyable levels on reset equal to your total chunks.",effectDisplay:()=>`Up to ${me.totalChunks.value} buyable levels are kept.`}}))},l=mt(()=>({thingsToReset:()=>[ze]}));return{name:n,color:e,milestones:s,completedMilestonesCount:a,firstMilestoneModifier:t,fourthMilestoneModifier:r,fullReset:()=>{l.reset(),Object.values(s).forEach(d=>d.earned.value=!1)},display:()=>u(_,null,[u("h4",null,[w("You have condensed "),z(me.totalChunks.value),w(" total chunks.")]),Object.values(s).map(d=>R(d))])}});function $n(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ti(n)}const Hr="Md",be=Mt(Hr,n=>{const e="Mercury",t="#b1adad",r=he(0,"Mercurial Dust",2),a=_t(r),s=he(0),l=_t(s),o=P($e.unlocked),d={messengerGodUpgrade:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(50)})),display:{title:"The Messenger God",description:"Multiply Dust & Collision Time by x1.5.",effectDisplay:()=>`x${z(ie.apply(1))}`}})),slippingTimeUpgrade:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(100)})),display:{title:"Slippery Time",description:"Multiplies Dust Time based on Dust Time.",effectDisplay:()=>`x${z(se.apply(1))}`}})),collisionCourse:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(250)})),display:{title:"Collision Course",description:"Raise Dust & Collision Time based on Dust.",effectDisplay:()=>`^${z(ce.value)}`}})),acummulatingDust:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e3)})),display:{title:"Accumulating Dust",description:"Multiply Dust gain based on itself.",effectDisplay:()=>`x${z(V.apply(1))}`}})),totalUpgrade:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(5e4)})),display:{title:"Seasoned Dust",description:"Increases base Dust Time based on Dust Time.",effectDisplay:()=>`+${z(ee.apply(0))}`}})),killingTime:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e8)})),display:{title:"Killin' Time",description:"Increase base Dust gain based on OOM of Dust Time.",effectDisplay:()=>`+${z(Qe.apply(0))}`}})),latestUpgrade:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e15)})),display:{title:"Acceleration",description:"Multiply Dust Time gain based on Collision Time.",effectDisplay:()=>`x${z(k.apply(1))}`}})),accelerationUpgrade:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e20)})),display:{title:"Acceleration 2: This time it's personal",description:"Multiply Collision Time based on Dust Time.",effectDisplay:()=>`x${z(nn.apply(1))}`}}))},p=ve(()=>[De(()=>({enabled:b.chunkingTime.bought,multiplier:()=>i.add(me.totalChunks.value,1).sqrt().clampMin(1)}))]),g=ve(()=>[De(()=>({enabled:b.iHateDinosaurs.bought,multiplier:()=>i.add(me.totalChunks.value,1).log(2).pow(1.2).clampMin(1)}))]),v=ve(()=>[De(()=>({enabled:b.fedexManager.bought,multiplier:()=>i.add(me.totalChunks.value,1).log2().clampMin(1)}))]),k=ve(()=>[De(()=>({enabled:d.latestUpgrade.bought,multiplier:()=>i.add($e.collisionTimeGainComputed.value,1).log10().cbrt().clampMin(1)}))]),f=ve(()=>[De(()=>({enabled:b.dustBunnies.bought,multiplier:()=>i.add(me.totalChunks.value,1).log2().pow(1.1).clampMin(1)}))]),b={chunkingTime:B(()=>({visibility:()=>Ce.dustAccelerator.upgrades.first.bought.value,requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e30)})),display:{title:"It's Chunkin' time",description:`Multiply "Killin' Time" based on chunks`,effectDisplay:()=>`*${z(p.apply(1))}`}})),fedexManager:B(()=>({visibility:()=>Ce.dustAccelerator.upgrades.first.bought.value,requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e40)})),display:{title:"FedEx Manager",description:'Multiply "The Messenger God" based on chunks',effectDisplay:()=>`*${z(v.apply(1))}`}})),dustBunnies:B(()=>({visibility:()=>Ce.dustAccelerator.upgrades.first.bought.value,requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e50)})),display:{title:"Dust Bunnies",description:'Multiply "Accumulating Dust" based on total chunks',effectDisplay:()=>`*${z(f.apply(1))}`}})),iHateDinosaurs:B(()=>({visibility:()=>Ce.dustAccelerator.upgrades.first.bought.value,requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e60)})),display:{title:"eyehatedinosaurs",description:'Multiply "Acceleration 2" based on total chunks',effectDisplay:()=>`*${z(g.apply(1))}`}}))},N=h(()=>i.add(30,Ce.dustAccelerator.dustBuyableCapEffect.value)),x={baseDustTime:_e(0),baseDustGain:_e(0),dustMultiplier:_e(0),dustPiles:_e(0)},S={baseDustTime:Te(()=>({bestAmount:x.baseDustTime,limit:()=>N.value,initialAmount:E(S.baseDustTime),requirements:A(()=>({resource:P(r),cost:m.variable(S.baseDustTime.amount).pow_base(1.3).times(10)})),display:{title:"Align the Stars",description:"Increase base Dust Time gain by +1",effectDisplay:()=>`+${z(pe.apply(0))}/s`}})),baseDustGain:Te(()=>({bestAmount:x.baseDustGain,limit:()=>N.value,initialAmount:E(S.baseDustGain),requirements:A(()=>({resource:P(r),cost:m.variable(S.baseDustGain.amount).pow_base(1.8).times(15)})),display:{title:"Salted Dust",description:"Increase base Dust gain by 1",effectDisplay:()=>`+${z(Ie.apply(0))}`}})),dustMultiplier:Te(()=>({bestAmount:x.dustMultiplier,limit:()=>N.value,initialAmount:E(S.dustMultiplier),requirements:A(()=>({resource:P(r),cost:m.variable(S.dustMultiplier.amount).pow_base(1.3).times(30)})),display:{title:"Enriched Dust",description:"Multiply Dust gain by x1.1",effectDisplay:()=>`x${z(X.apply(1),1)}`}})),dustPiles:Te(()=>({bestAmount:x.dustPiles,limit:()=>N.value,initialAmount:E(S.dustPiles),requirements:A(()=>({resource:P(r),cost:m.variable(S.dustPiles.amount).pow_base(2.5).times(75)})),display:{title:"Dust Piles",description:"Raise Dust gain to ^1.1",effectDisplay:()=>`^${z(de.value,1)}`},visibility:()=>ze.milestones.first.earned.value===!0||ne.mercuryTreeUpgrades.youGetAPile.bought.value===!0}))},E=ge=>()=>ze.milestones.five.earned.value===!0?i.min(me.totalChunks.value,ge.bestAmount.value):ne.mercuryTreeUpgrades.youGetAPile.bought.value?i.dOne:i.dZero,V=ve(()=>[De(()=>({enabled:d.acummulatingDust.bought,multiplier:()=>i.add(r.value,10).log10().sqrt().mul(f.apply(1)).clampMin(1),description:"Accumulating Dust"}))]),ee=ve(()=>[Rt(()=>({enabled:d.totalUpgrade.bought,addend:()=>i.add(l.value,1).log2().sqrt().clampMin(1),description:"Seasoned Dust"}))]),pe=ve(()=>[Rt(()=>({addend:()=>S.baseDustTime.amount.value,description:"Align the Stars"}))]),ie=ve(()=>[De(()=>({multiplier:()=>i.fromNumber(1.5).times(v.apply(1)),enabled:d.messengerGodUpgrade.bought,description:"Messenger God"}))]),se=ve(()=>[De(()=>({enabled:d.slippingTimeUpgrade.bought,multiplier:()=>i.add(s.value,10).log10().pow(.6).clampMin(1),description:"Slippery Time"}))]),ce=h(()=>d.collisionCourse.bought.value?i.add(r.value,10).log10().sqrt().pow(.2).clampMin(1):i.dOne),Me=Ut(()=>({enabled:d.collisionCourse.bought,exponent:()=>ce.value,description:"Collision Course"})),we=ve(()=>[ee,pe,me.chuckingChunksModifier,ze.firstMilestoneModifier,se,ie,k,De(()=>({multiplier:ne.mercuryTreeEffects.solarSpeed})),Me,Ut(()=>({exponent:()=>ze.fourthMilestoneModifier.value})),Ut(()=>({exponent:()=>Ce.timeAccelerator.levelTwoTimeRaiseEffect.value}))]),Be={chunks:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e3)})),display:{title:"Chunks",description:"Unlock Mercurial Chunks"}})),accelerators:B(()=>({requirements:A(()=>({resource:P(r),cost:i.fromNumber(1e9)})),display:{title:"Accelerators",description:"Unlock Accelerators"}}))},Ie=ve(()=>[Rt(()=>({enabled:()=>i.gt(S.baseDustGain.amount.value,0),addend:()=>S.baseDustGain.amount.value}))]),X=ve(()=>[De(()=>({multiplier:()=>i.dOne.add(i.times(.1,S.dustMultiplier.amount.value)).clampMin(1),enabled:()=>i.gt(S.dustMultiplier.amount.value,0)}))]),de=h(()=>c(S.dustPiles.visibility)===!1?i.dOne:i.dOne.add(i.times(.1,S.dustPiles.amount.value)).clampMin(1)),Tt=ve(()=>[Ut(()=>({enabled:()=>i.gt(S.dustPiles.amount.value,0),exponent:()=>de.value}))]),Qe=ve(()=>[Rt(()=>({enabled:d.killingTime.bought,addend:()=>i.pow(i.add(s.value,1).e,1.5)}))]),Sn=ve(()=>[Ie,Qe,X,V,Ce.dustAccelerator.dustGainMultiplierModifier,De(()=>({multiplier:ne.mercuryTreeEffects.solarFriedDust})),Tt,Ut(()=>({exponent:()=>Ce.dustAccelerator.dustAcceleratorDustRaiseEffect.value})),Ut(()=>({exponent:()=>Ce.timeAccelerator.levelTwoTimeRaiseEffect.value}))]),xt=Di(()=>({formula:ge=>Sn.getFormula(ge.div(2).pow(.3)).step(1e6,Ge=>Ge.div(3)),baseResource:s,gainResource:P(r),currentGain:h(()=>i.lt(s.value,10)?i.dZero:i.fromValue(xt.formula.evaluate(s.value))),spend:()=>{s.value=i.dZero,$e.collisionTime.value=new i($e.collisionTime.defaultValue)}})),nn=ve(()=>[De(()=>({enabled:()=>d.accelerationUpgrade.bought.value,multiplier:()=>i.add(s.value,1).sqrt().pow(.25).mul(g.apply(1)).clampMin(1)}))]),rn=mt(()=>({thingsToReset:()=>[d,S,b],onReset:()=>{r.value=r[Re],a.value=i.dZero,s.value=s[Re],l.value=i.dZero,$e.collisionTime.value=new i($e.collisionTime[Re]),Yn(),Mn()}})),an=()=>{rn.reset(),r.value=0,a.value=0,s.value=0,l.value=0,Object.values(x).forEach(ge=>ge.value=0),Mn(),Tn(),sn()};Ne(ze.completedMilestonesCount,()=>Yn()),Ne(ne.mercuryTreeUpgrades.dustyTomes.bought,()=>Mn()),Ne(ne.mercuryTreeUpgrades.nTropy.bought,()=>Tn()),Ne(ne.mercuryTreeUpgrades.autoAutoChunks.bought,()=>sn());function Yn(){if(ze.milestones.second.earned.value===!1)return;const ge=ze.completedMilestonesCount.value;Object.values(d).slice(0,ge).forEach(Ge=>Ge.bought.value=!0)}function Mn(){ne.mercuryTreeUpgrades.dustyTomes.bought.value&&(d.messengerGodUpgrade.bought.value=!0,d.slippingTimeUpgrade.bought.value=!0,d.collisionCourse.bought.value=!0,d.acummulatingDust.bought.value=!0)}function Tn(){ne.mercuryTreeUpgrades.nTropy.bought.value&&(Be.accelerators.bought.value=!0)}function sn(){ne.mercuryTreeUpgrades.autoAutoChunks.bought.value&&(me.upgrades.autoChunks.bought.value=!0)}const xn=Ci(()=>({conversion:xt,treeNode:ln,showNextAt:!1,resetDescription:()=>"Reset Dust Time & Collision Time for "})),ln=Nn(()=>({layerID:Hr,color:t,reset:rn,classes:{small:!0},display:"D"})),Ae=h(()=>{if(!on.value)return i.dZero;const ge=i.fromNumber(.05);return me.upgrades.grindingChunks.bought.value?i.mul(me.totalChunks.value,.01).add(ge).clampMin(.01):ge}),on=h(()=>me.upgrades.grindingChunks.bought.value||ne.mercuryTreeUpgrades.snortingDust.bought.value),In=h(()=>i.times(Ae.value,c(xt.actualGain)));Ei(n,xt,()=>Ae.value),n.on("update",ge=>{if(!o.value)return;const Ge=i.times(we.apply(1),ge);s.value=i.add(s.value,Ge)});const Jn=h(()=>Object.values(S).some(ge=>ge.canClick.value)||Object.values(d).some(ge=>ge.canPurchase.value)||Object.values(Be).some(ge=>ge.canPurchase.value)),It="gap: 8px; margin-bottom: 8px;";return{name:e,color:t,timeSinceReset:s,totalTimeSinceReset:l,mercurialDust:r,totalMercurialDust:a,baseDustAmountModifier:pe,baseDustGainModifier:Ie,dustMultiplierModifier:X,unlocks:Be,slippingTimeModifier:se,repeatables:S,basicUpgrades:d,acceleratorUpgrades:b,totalTimeModifier:ee,accelerationModifier:nn,collisionCourseEffect:ce,collisionCourseModifier:Me,reset:rn,passiveGenerationPerSecondEffect:Ae,displayGlow:Jn,fullReset:an,display:()=>{let ge,Ge,Ft,ft;return u(_,null,[u("h2",null,[z(r.value),w(" "),r.displayName]),on.value?u(_,null,[u("h6",null,[w("Gaining "),z(In.value),w("/s")])]):null,u("h5",null,[w("You have "),z(s.value),w(" Dust Time.")]),u("h6",null,[w("("),z(we.apply(1)),w("/s)")]),u(K,null,null),R(xn),u(K,null,null),u(K,null,null),u(qt,null,$n(ge=Ve(S,4,It))?ge:{default:()=>[ge]}),u(K,null,null),u("h4",null,[w("Upgrades")]),u(qt,null,$n(Ge=Ve(d,4,It))?Ge:{default:()=>[Ge]}),u(qt,null,$n(Ft=Ve(b,4,It))?Ft:{default:()=>[Ft]}),u(K,null,null),u("h4",null,[w("Unlocks")]),u(qt,null,$n(ft=Ve(Be,4,It))?ft:{default:()=>[ft]})])},treeNode:ln}}),eu={key:0,class:"material-icons pinned"},tu=J({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=G(!1),r=h(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0||t.value}),a=()=>R(e.display);function s(o){const d=e.pinned;o.shiftKey&&d!=null&&(d.value=!d.value,o.stopPropagation(),o.preventDefault())}const l=h(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0&&Ot[H.theme].showPin});return(o,d)=>(M(),I("div",{class:ue(["tooltip-container",{shown:r.value}]),onMouseenter:d[0]||(d[0]=p=>t.value=!0),onMouseleave:d[1]||(d[1]=p=>t.value=!1),onClickCapture:s},[it(o.$slots,"default",{},void 0,!0),u(Xr,{name:"fade"},{default:j(()=>[r.value?(M(),I("div",{key:0,class:ue(["tooltip",{top:c(o.direction)===c(Q).Up,left:c(o.direction)===c(Q).Left,right:c(o.direction)===c(Q).Right,bottom:c(o.direction)===c(Q).Down,...c(o.classes)}]),style:xe([{"--xoffset":c(o.xoffset)||"0px","--yoffset":c(o.yoffset)||"0px"},c(o.style)??{}])},[l.value?(M(),I("span",eu,"push_pin")):F("",!0),u(a)],6)):F("",!0)]),_:1})],34))}}),ke=ae(tu,[["__scopeId","data-v-ad4ea959"]]),Wr="M",$e=Mt(Wr,n=>{const e="Mercury",t="#8c8c94",r=P(ne.solarSystemUpgrades.mercury.bought),a=i.times(1e88,84600),s=he(a),l=he(0),o=bt(()=>({progress:()=>i.sub(1,i.div(i.ln(p.value),i.ln(a))),width:512,height:10,direction:Q.Right,containerStyle:{"text-align":"center"}})),d=ve(()=>[De(()=>({multiplier:1.5,enabled:be.basicUpgrades.messengerGodUpgrade.bought,description:"Messenger God"}))]),p=h(()=>new i(1).times(d.apply(1)).times(be.accelerationModifier.apply(1)).times(ze.firstMilestoneModifier.apply(1)).times(ne.mercuryTreeEffects.solarSpeed.value).pow(be.collisionCourseEffect.value).pow(ze.fourthMilestoneModifier.value).pow(me.collidingChunksEffect.value)),g=h(()=>i.lte(s.value,0));n.on("update",V=>{r.value&&(s.value=i.sub(s.value,i.times(p.value,V)).clampMin(0))});const v=mt(()=>({thingsToReset:()=>[$e]})),k=h(()=>be.displayGlow.value||me.displayGlow.value||Ce.displayGlow.value),f=Nn(()=>({visibility:r,layerID:Wr,display:()=>u(pn,{body:"Mercury"},null),wrapper:u(ke,{display:"Mercury",direction:Q.Down},null),glowColor:()=>k.value?t:null,color:t,reset:v})),b=Wn({dust:()=>({display:"Dust",tab:He(()=>({display:be.display}))}),chunks:()=>({visibility:()=>be.unlocks.chunks.bought.value,display:()=>u(_,null,[w("Chunks "),me.showExclamation.value?"!":null]),tab:He(()=>({display:me.display}))}),accelerators:()=>({visibility:be.unlocks.accelerators.bought,display:()=>u(_,null,[w("Accelerators "),Ce.showExclamation.value?"!":null]),tab:He(()=>({display:Ce.display}))}),milestones:()=>({visibility:be.unlocks.chunks.bought,display:"Milestones",tab:He(()=>({display:ze.display}))})}),N=h(()=>u(_,null,[u("h2",null,[w("Mercury")]),u("br",null,null),i.lt(s.value,86400)?u("h3",null,[$(i.div(s.value,3600)),w(" hours until collision")]):u("h3",null,[$(i.div(s.value,86400)),w(" days until collision")]),u("h4",null,[w("-"),$(p.value),w("/s")]),R(o),u(K,null,null),R(b)])),x=Bn(()=>({display:{title:"Mercury has collided with the Sun.",description:"Reset for 1 Solar Energy."},onClick:()=>{ne.energy.value=i.add(ne.energy.value,1),ne.mercuryCores.value=i.add(ne.mercuryCores.value,1),l.value=i.add(l.value,1),Ce.fullReset(),ze.fullReset(),me.fullReset(),be.fullReset(),v.reset(),s.value=a}})),S=h(()=>u(_,null,[u("div",{style:"height: 100%; display: flex;"},[R(x)])])),E=()=>g.value?S.value:N.value;return{name:e,color:t,collisionTime:s,maxCollisionTime:a,tabs:b,collisionTimeGainComputed:p,display:()=>E(),treeNode:f,totalResets:l,unlocked:r}}),nu={class:"field"},ru=J({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,a=()=>R(t.title??"",l=>u("span",null,[l])),s=h({get(){return!!t.modelValue},set(l){r("update:modelValue",l)}});return(l,o)=>(M(),I("label",nu,[bn(y("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=d=>s.value=d)},null,512),[[Ki,s.value]]),u(a)]))}}),je=ae(ru,[["__scopeId","data-v-faad62a6"]]),iu={class:"field"},au={key:0,class:"field-title"},su=["min","max"],lu=["min","max"],ou=J({__name:"Slider",props:{title:{},modelValue:{},min:{},max:{},displayTooltip:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(n,{emit:e}){const t=e,r=h({get(){return String(n.modelValue??0)},set(a){t("update:modelValue",Number(a))}});return(a,s)=>(M(),I("div",iu,[a.title?(M(),I("span",au,Y(a.title),1)):F("",!0),a.displayTooltip?(M(),I(_,{key:1},[a.displayTooltip?(M(),oe(ke,{key:0,display:`${r.value}`,class:ue({fullWidth:!a.title}),direction:c(Q).Down},{default:j(()=>[bn(y("input",{type:"range","onUpdate:modelValue":s[0]||(s[0]=l=>r.value=l),min:a.min,max:a.max},null,8,su),[[ir,r.value]])]),_:1},8,["display","class","direction"])):F("",!0)],64)):F("",!0),a.displayTooltip?F("",!0):bn((M(),I("input",{key:2,type:"range","onUpdate:modelValue":s[1]||(s[1]=l=>r.value=l),min:a.min,max:a.max},null,8,lu)),[[ir,r.value]])]))}}),uu=ae(ou,[["__scopeId","data-v-2b441e88"]]),Zr=()=>Math.random()*100,rr=0,cu=1,Pn=2,Yr="V",Xt=Mt(Yr,n=>{const e="Venus",t="#f8e2b0",r=h(()=>ne.solarSystemUpgrades.venus.bought.value),a=he(i.fromNumber(2e256),"Planet Mass"),s=he(1,"Pressure"),l=he(0),o=.6,d=h(()=>i.add(o,1).div(Ge.value)),p=h(()=>i.times(15,i.times(o,k.value).add(1)).div(xn.value).div(In.value).div(Ge.value).div(ge.value).pow(xr.value)),g=h(()=>i.add(10,sn.apply(0)).add(on.value).add(It.value).pow(Tr.value)),v=h(()=>i.times(1.3,ln.value).times(Ft.value).pow(Nr.value)),k=he(0),f=h(()=>{const U=i.pow(2,k.value);return i.fromNumber(1e25).pow(U)}),b=h(()=>i.eq(s.value,f.value)),N=he(0,"Volcanics"),x=h(()=>i.fromNumber(100).times(i.times(Qn.value,2).clampMin(1))),S=he(0,"Lava"),E=_t(S),V=h(()=>i.fromNumber(250).times(i.times(Xn.value,2).clampMin(1))),ee=h(()=>i.fromNumber(4)),pe=h(()=>i.fromNumber(8)),ie=h(()=>i.fromNumber(3)),se=h(()=>{let U=i.fromNumber(.5).add(yr.value);return at.value===rr&&(U=i.times(U,ie.value)),U.pow(Mr.value)}),ce=h(()=>{const U=i.fromNumber(15).div(kr.value);switch(at.value){case rr:return i.times(U,pe.value);case Pn:return i.div(U,ee.value);default:return U}}),Me=h(()=>{switch(at.value){case Pn:return i.fromNumber(5);case cu:return i.fromNumber(.1);default:return i.dZero}}),we=he(0,"Tephra"),Be=_t(we),Ie=bt(()=>({direction:Q.Right,height:18,width:256,progress:()=>i.div(i.ln(s.value),i.ln(f.value))})),X=bt(()=>({direction:Q.Right,height:24,width:128,progress:()=>i.div(l.value,p.value),display:()=>$(i.sub(p.value,l.value)),textStyle:{color:"#ad8d54"}})),de=bt(()=>({direction:Q.Right,height:18,width:256,progress:()=>i.div(i.ln(a.value),i.ln(a[Re]))})),Tt=_e(new i(0)),Qe=G(10),Sn=G(0);let xt=i.div(15,4),nn=i.fromNumber(.1);const rn=.05;let an=!1;xt=i.div(15,ee.value),nn=i.fromNumber(.1),an=!0,n.on("preUpdate",U=>{if(r.value,Tt.value=i.add(Tt.value,U),Tn(U),Kn.value&&i.gt(S.value,0)&&i.lt(N.value,x.value)){const fe=i.div(1,ce.value),Ye=i.min(S.value,i.times(fe,U)),st=i.times(Ye,se.value);if(N.value=i.add(N.value,st).clampMax(x.value),S.value=i.sub(S.value,Ye),i.gt(Me.value,0)){const pt=i.times(Me.value,.01);S.value=i.sub(S.value,i.times(S.value,pt).times(U))}}if(i.gt(Qe.value,0)){const fe=an?U:10,Ye=i.div(1,xt),st=i.min(Qe.value,i.times(Ye,fe)),pt=i.times(st,nn);Sn.value=i.add(Sn.value,pt).clampMax(1e3),Qe.value=i.sub(Qe.value,st),an&&(Qe.value=i.sub(Qe.value,i.times(Qe.value,rn).times(fe)))}});const Tn=U=>{if(b.value){l.value=i.dZero;return}if(l.value=i.add(l.value,i.times(1,U)),!l.value.lt(p.value)&&(l.value=0,i.gte(g.value,Zr()))){let fe=v.value;Oe.extraKick.bought.value&&i.gte(10,Zr())&&(fe=fe.times(5),console.log("KICK")),s.value=i.multiply(i.clampMin(s.value,1),fe).clampMax(f.value)}},sn=ve(()=>[Rt(()=>({enabled:()=>i.gt(Ae.pressureChance.amount.value,0),addend:()=>i.div(Ae.pressureChance.amount.value,4).add(ft.value).add(br.value)}))]),xn=h(()=>i.lt(Ae.pressureInterval.amount.value,1)?i.dOne:i.add(1,i.times(.075,Ae.pressureInterval.amount.value))),ln=h(()=>i.lt(Ae.pressureMult.amount.value,1)?i.dOne:i.times(.1,Ae.pressureMult.amount.value).add(1).times(hr.value)),Ae={pressureChance:Te(()=>({requirements:A(()=>({resource:P(S),cost:m.variable(Ae.pressureChance.amount).pow_base(1.2).times(3)})),display:{title:"What're the odds?",description:"Increase the Pressure Build Chance by 0.25% per level.",effectDisplay:()=>`+${$(sn.apply(0))}%`}})),pressureMult:Te(()=>({requirements:A(()=>({resource:P(S),cost:m.variable(Ae.pressureMult.amount).pow_base(1.35).times(5)})),display:{title:"UNDER PRESSURE",description:"Multiply Pressure Build gain",effectDisplay:()=>`x${$(ln.value)}`}})),pressureInterval:Te(()=>({requirements:A(()=>({resource:P(S),cost:m.variable(Ae.pressureInterval.amount).pow_base(1.45).times(8)})),display:{title:"Anxiety Inducing",description:"Divide the Pressure Build interval",effectDisplay:()=>`÷${$(xn.value)}`}}))},on=h(()=>Oe.floorIsLava.bought.value?m.variable(S.value).pow(.5).sqrt().clampMin(1).step(2,U=>U.sqrt()).evaluate():i.dOne),In=h(()=>Oe.lavaIsFloor.bought.value?m.variable(S.value).pow(.5).times(.05).add(1).step(1.5,U=>U.div(15)).clampMin(1).evaluate():i.dOne),Jn=h(()=>Oe.boilingPot.bought.value?i.add(s.value,10).log10().sqrt().clampMin(1):i.dOne),It=h(()=>Oe.bubbling.bought.value?i.log10(Tt.value).clampMin(1):i.dZero),ge=h(()=>Oe.hotPot.bought.value?m.variable(new i(s.value).e).times(.1).add(1).step(1.5,U=>U.div(5)).clampMin(1).evaluate():i.dOne),Ge=h(()=>Vt.mafic.bought.value?i.pow(N.value,.1).sqrt().clampMin(1):i.dOne),Ft=h(()=>Oe.riceCooker.bought.value?i.pow(c(Dt.currentGain),.1).sqrt().clampMin(1):i.dOne),ft=h(()=>Oe.luckyCastIron.bought.value?7:0),hr=h(()=>Oe.diamonds.bought.value?i.fromNumber(2):i.dOne),br=h(()=>Oe.sevens.bought.value?i.fromNumber(7.77):i.dZero),Oe={bubbling:B(()=>({requirements:A(()=>({resource:P(s),cost:i.fromNumber(5)})),display:{title:"Bubbling",description:"Increase Pressure Build Chance based time since Eruption.",effectDisplay:()=>`+${$(It.value)}%`}})),hotPot:B(()=>({requirements:A(()=>({resource:P(s),cost:i.fromNumber(15)})),display:{title:"Hot Pot",description:"Divide Pressure Build Interval based on OOM of Pressure.",effectDisplay:()=>`/${$(ge.value)}`}})),riceCooker:B(()=>({requirements:A(()=>({resource:P(s),cost:i.fromNumber(50)})),display:{title:"Rice Cooker",description:`Multiply Pressure Build Gain based on pending ${S.displayName}.`,effectDisplay:()=>`x${$(Ft.value)}`}})),luckyCastIron:B(()=>({requirements:A(()=>({resource:P(s),cost:i.fromNumber(250)})),display:{title:"Lucky Cast Iron",description:"Add +7% to the base of 'What're the odds?'",effectDisplay:()=>`+${ft.value}%`}})),floorIsLava:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(S),cost:i.fromNumber(15)})),display:{title:"Floor is Lava",description:"Increase Pressure Build Chance based on Lava.",effectDisplay:()=>`+${$(on.value)}%`}})),lavaIsFloor:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(S),cost:i.fromNumber(25)})),display:{title:"Lava is Floor",description:"Decrease Pressure Interval based on Lava.",effectDisplay:()=>`÷${$(In.value)}`}})),extraKick:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(S),cost:i.fromNumber(75)})),display:{title:"Lil' Extra Kick",description:"10% chance for Pressure to build by an extra x5"}})),boilingPot:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(S),cost:i.fromNumber(125)})),display:{title:"Boiling Pot",description:"Increase Pressure Build Chance based on Pressure",effectDisplay:()=>`÷${$(Jn.value)}`}})),diamonds:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(s),cost:i.fromNumber(1e10)})),display:{title:"Diamonds",description:"Multiplies UNDER PRESSURE effect by x2",effectDisplay:()=>`x${hr.value}`}})),sevens:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(s),cost:i.fromNumber(1e100)})),display:{title:"777",description:"Adds +7.77% to the base of What're the odds?",effectDisplay:()=>`+${br.value}%`}})),SSssSssssSSS3:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(s),cost:i.fromMantissaExponent(1,1e3)})),display:{title:"SSssSssssSSS3",description:"Does Stuff",effectDisplay:()=>`+${ft.value}%`}})),SSssSssssSSS4:B(()=>({visibility:()=>i.gt(S.value,0),requirements:A(()=>({resource:P(s),cost:i.fromMantissaExponent(1,1e4)})),display:{title:"SSssSssssSSS4",description:"Does Stuff",effectDisplay:()=>`+${ft.value}%`}}))},yr=h(()=>i.gt(et.buckForYourBang.amount.value,0)?i.times(et.buckForYourBang.amount.value,.1):i.dZero),kr=h(()=>i.gt(et.shorterFuse.amount.value,0)?i.times(et.shorterFuse.amount.value,.1).add(1):i.dOne),et={buckForYourBang:Te(()=>({requirements:A(()=>({resource:P(N),cost:m.variable(et.buckForYourBang.amount).add(et.buckForYourBang.amount).pow_base(1.4).times(2)})),display:{title:"Buck for your BANG",description:"Increase conversion rate by +0.1 per level.",effectDisplay:()=>`x${$(yr.value,1)}`}})),shorterFuse:Te(()=>({requirements:A(()=>({resource:P(N),cost:m.variable(et.shorterFuse.amount).add(et.shorterFuse.amount).pow_base(1.4).times(2)})),display:{title:"Shorter Fuse",description:"Divide conversion interval by 1+(0.1*level).",effectDisplay:()=>`x${$(kr.value,1)}`}}))},Cr=h(()=>Vt.residualHeat.bought.value?i.log2(N.value).sqrt().clampMin(1):i.dZero),wr=h(()=>Vt.undergroundLava.bought.value?i.log10(s.value):i.dZero),Vt={undergroundLava:B(()=>({requirements:A(()=>({resource:P(N),cost:i.fromNumber(10)})),display:{title:"Underground Lava",description:`Keep log10 of ${s.displayName} on Explosive Eruptions.`,effectDisplay:()=>`x${$(wr.value)}`}})),residualHeat:B(()=>({requirements:A(()=>({resource:P(N),cost:i.fromNumber(25)})),display:{title:"Residual Heat",description:`Increase base ${S.displayName} gain based on ${N.displayName}`,effectDisplay:()=>`+${$(Cr.value)}`}})),mafic:B(()=>({requirements:A(()=>({resource:P(N),cost:i.fromNumber(50)})),display:{title:"Mafic",description:`Soften Eruption penalty based on ${N.displayName}`,effectDisplay:()=>`÷${$(Ge.value)}`}}))},Dn=(U,fe=.1)=>i.gt(U.amount.value,0)?i.times(U.amount.value,fe).add(1):i.dOne,Nr=h(()=>Dn(Fe.pressureGain)),Sr=h(()=>Dn(Fe.lavaGain)),Mr=h(()=>Dn(Fe.volcanicsGain)),Tr=h(()=>Dn(Fe.pressureChance,.05)),xr=h(()=>i.gt(Fe.pressureInterval.amount.value,0)?i.sub(1,i.times(Fe.pressureInterval.amount.value,.01)).clampMin(.01):i.dOne),un=U=>m.variable(U).add(1),Fe={pressureGain:Te(()=>({requirements:A(()=>({resource:P(we),cost:un(Fe.pressureGain.amount)})),display:{title:"Rising",description:"Raise Pressure Build Gain by 1.1 per level",effectDisplay:()=>`^${$(Nr.value)}`}})),pressureChance:Te(()=>({requirements:A(()=>({resource:P(we),cost:un(Fe.pressureChance.amount)})),display:{title:"idk",description:"Raise Pressure Chance by 1.05 per level",effectDisplay:()=>`^${$(Tr.value)}`}})),pressureInterval:Te(()=>({requirements:A(()=>({resource:P(we),cost:un(Fe.pressureInterval.amount)})),display:{title:"idk 2",description:"Raise Pressure Interval by ^0.01 per level",effectDisplay:()=>`^${$(xr.value)}`}})),lavaGain:Te(()=>({requirements:A(()=>({resource:P(we),cost:un(Fe.lavaGain.amount)})),display:{title:"Burning",description:"Raise Lava Gain by 1.1 per level",effectDisplay:()=>`^${$(Sr.value)}`}})),volcanicsGain:Te(()=>({requirements:A(()=>({resource:P(we),cost:un(Fe.volcanicsGain.amount)})),display:{title:"Settling",description:"Raise Volcanics Gain by 1.1 per level",effectDisplay:()=>`^${$(Mr.value)}`}}))},Ir=h(()=>i.gt(Bt.lavaGenerator.amount.value,0)?i.times(Bt.lavaGenerator.amount.value,.005):i.dZero),Bt={lavaGenerator:Te(()=>({requirements:A(()=>({resource:P(we),cost:m.variable(Bt.lavaGenerator.amount).add(3)})),display:{title:"Effusive Tunnels",description:`Gain 0.005% of pending ${S.displayName}/s`,effectDisplay:()=>`${Ir.value}/s`}}))},Dt=Di(()=>({formula:U=>U.log2().add(Cr).if(()=>b.value,fe=>fe.times(1.5)).pow(Sr.value).clampMax(V.value),baseResource:s,gainResource:P(S),onConvert:U=>{console.log({gain:U.toString(),lava:S.value.toString(),capped:i.min(S.value,V.value).toString()}),s.value=1,S.value=i.min(S.value,V.value)}})),Li=ye(()=>(Ei(Xt,Dt,()=>b.value||i.eq(N.value,x.value)?0:Ir.value),{})),Dr=Ai(()=>({gainResource:P(we),baseResource:s,formula:()=>m.variable(i.dZero).if(()=>b.value,()=>m.variable(i.dOne)),convert:()=>we.value=i.add(we.value,1)})),Ar=h(()=>i.sub(.99,i.times(k.value,.01))),Er=Bn(()=>({classes:{"fit-content":!0},display:()=>{const U=(fe,Ye)=>{const st=i.gte(c(fe.currentGain),Ye),pt=i.gte(i.add(c(fe.currentGain),fe.gainResource.value),Ye),Gi=pt?i.sub(Ye,fe.gainResource.value):i.max(c(fe.currentGain),1),Ui=st?"(capped)":pt?"(after cap)":null;return Ht([u("b",null,[Lt(fe.gainResource,Gi)]),u(_,null,[w(" ")]),u(_,null,[fe.gainResource.displayName,w(" "),Ui])],u(_,null,null))};return b.value?u(_,null,[u("span",null,[u("h3",null,[w("Explosive Eruption")]),u("br",null,null),w("Reset The ENTIRE Pressure Tab for:"),u("br",null,null),U(Dt,V.value),u("br",null,null),U(Dr,999),u("br",null,null),w("Destroy ^"),$(Ar.value),w(" of the planet's mass."),u("br",null,null),w("Raise Explosive Eruption requirement to ^2."),u("br",null,null),w("Decrease interval by x"),$(d.value),w(".")])]):u("span",null,[u("h3",null,[w("Effusive Eruption")]),u("br",null,null),w("Reset Pressure for "),U(Dt,V.value)])},onClick:()=>{if(Er.canClick!==!1){if(b.value){a.value=i.pow(a.value,Ar.value);const U=wr.value;Dt.convert(),Dr.convert(),k.value=i.add(k.value,1),_i.reset(),i.gt(U,0)&&(s.value=U)}else Dt.convert();Tt.value=i.dZero}},canClick:h(()=>i.gte(c(Dt.actualGain),1))})),$r=mt(()=>({thingsToReset:()=>[Xt,Ae,Oe,Fe,Vt,Bt],onReset:()=>{s.value=s[Re],S.value=S[Re],E.value=i.dZero,N.value=N[Re],we.value=we[Re],Be.value=i.dZero}})),_i=mt(()=>({thingsToReset:()=>[Ae,Oe]})),Oi=Nn(()=>({visibility:r,layerID:Yr,display:()=>u(pn,{body:"Venus"},null),wrapper:u(ke,{display:"Venus",direction:Q.Left},null),color:t,reset:$r})),Kn=G(!1),at=_e(1),Fi=h(()=>{const U=[];at.value===rr?U.push(u("h6",null,[w("Conversion is x"),$(pe.value)," ",w("slower, but you gain x"),$(ie.value)," ",w("more "),N.displayName,w(".")])):at.value===Pn&&U.push(u("h6",null,[w("Conversion is x"),ee.value,w(" faster")])),i.gt(Me.value,0)&&U.push(u("h6",null,[w("You will lose "),$(Me.value),w("% of lava per second.")]));const fe=i.times(S.value,se.value);return u(_,null,[u("h6",null,[w("1 "),S.displayName,w(" will convert into "),$(se.value)," ",N.displayName,w(" every "),$(ce.value),w(" seconds.")]),u("h6",null,[w("All "),S.displayName,w(" converted would create "),$(fe)," ",N.displayName,w(".")," ",at.value===Pn?"(Ignoring Loss)":null]),U])}),Pr=(U,fe,Ye)=>{const st=Bn(()=>({canClick:()=>i.eq(U.value,fe.value),classes:{"squashed-clickable":!0,flex:!0},display:{title:"Increase Cap",description:u(_,null,[w("Reset "),U.displayName,w(" to double cap.")])},onClick:()=>{c(st.canClick)!==!1&&(U.value=0,Ye.value=i.add(Ye.value,1))}})),pt=bt(()=>({direction:Q.Right,height:14,width:"100%",style:{overflow:"hidden"},borderStyle:{borderRadius:"0"},progress:()=>i.gt(fe.value,1e10)?i.div(i.ln(U.value),i.ln(fe.value)):i.div(U.value,fe.value)}));return h(()=>u("div",{class:"cappable-resource-container"},[u("h3",{class:"title"},[U.displayName]),R(pt),u("div",{class:"resource-display"},[u("h4",null,[$(U.value),w("/"),$(fe.value)])]),u("div",{class:"increase-cap-action"},[R(st)])]))},Xn=he(0),Qn=he(0),Vi=Pr(S,V,Xn),Bi=Pr(N,x,Qn),qr=Wn({pressure:()=>({display:"Pressure",tab:He(()=>({display:()=>u(_,null,[u("h3",null,[s.displayName]),u("h4",null,[$(s.value),w("/"),$(f.value)]),u(K,{height:"8px"},null),R(Ie),u(K,null,null),u("h6",null,[$(g.value),w("% chance for pressure to build by x"),$(v.value),w(" every")," ",$(p.value),w(" seconds.")]),u(K,null,null),R(X),u(K,null,null),R(Er),u(K,null,null),u(K,null,null),u("h3",null,[$(S.value),w(" "),S.displayName]),u(K,null,null),Ve(Object.values(Ae),3),u(K,null,null),Ve(Oe,4)])}))}),volcanics:()=>({display:N.displayName,visibility:()=>i.gt(E.value,0),tab:He(()=>({display:()=>u(_,null,[u("div",{class:"flex",style:"gap: 12px;"},[R(Vi.value),u("div",null,[w("->")]),R(Bi.value)]),u(K,null,null),u("h4",null,[w("Converter Priority")]),u("div",{class:"flex",style:"gap: 16px; justify-content: center;"},[u("h4",{class:"mx-0"},[N.displayName]),u(uu,{min:0,max:2,"onUpdate:modelValue":U=>at.value=U,modelValue:at.value,displayTooltip:!1},null),u("h4",{class:"mx-0"},[w("Speed")])]),R(Fi.value),u(K,null,null),u("div",{style:"display: flex; justify-content: center;"},[u(je,{"onUpdate:modelValue":U=>Kn.value=U,modelValue:Kn.value,title:"Toggle Lava Conversion"},null)]),u(K,null,null),u(K,null,null),Ve(et,3),u(K,null,null),Ve(Vt,3)])}))}),tephra:()=>({display:we.displayName,visibility:()=>i.gt(Be.value,0),tab:He(()=>({display:()=>u(_,null,[u("h2",null,[Lt(we),w(" "),we.displayName]),u(K,null,null),Ve(Fe,3),u(K,null,null),Ve(Bt,3)])}))})});return{name:e,color:t,volcanics:N,volcanicsMax:x,lava:S,lavaTotal:E,planetMass:a,pressure:s,pressureTimer:l,treeNode:Oi,pressureBuyables:Ae,pressureUpgrades:Oe,tephra:we,tephraTotal:Be,eruptions:k,tabs:qr,fullReset:$r,volcanicsUpgrades:Vt,timeSinceLastEruption:Tt,lavaConversionPriority:at,tephraBuyables:Fe,volcanicsBuyables:et,tephraGenerators:Bt,autoLava:Li,lavaCapIncreases:Xn,volcanicsCapIncreases:Qn,unlocked:r,display:()=>u(_,null,[u("h2",null,[Lt(a),w(" Planet Mass")]),R(de),u(K,null,null),R(qr)])}}),du=J({__name:"SolarSystemLayer",props:{rightSideNodes:{},branches:{}},setup(n){const e=n,t=()=>e.rightSideNodes==null?u(_,null,null):u("span",{class:"side-nodes small"},[c(e.rightSideNodes).map(x=>R(x))]),r=G(null),a=G(null),s=G(null),l=G(null),o=G(null),d=G(null),p=G(null),g=G(null),v=G(null),k=G(null);function f(x){const E=29.333333333333332,V=x>1e3?4:1;return x/V/E*1e3}function b(x){return x/8*2*Math.PI}const N=[{element:a,orbitRadius:235,orbitTime:f(88),initialAngle:b(0)},{element:s,orbitRadius:280,orbitTime:f(225),initialAngle:b(1)},{element:l,orbitRadius:330,orbitTime:f(365),initialAngle:b(2)},{element:o,orbitRadius:380,orbitTime:f(687),initialAngle:b(3)},{element:d,orbitRadius:480,orbitTime:f(4333),initialAngle:b(4)},{element:g,orbitRadius:625,orbitTime:f(10759),initialAngle:b(5)},{element:v,orbitRadius:740,orbitTime:f(30687),initialAngle:b(6)},{element:k,orbitRadius:830,orbitTime:f(60190),initialAngle:b(7)}];return en(()=>{let x=null,S=null,E=0;function V(){if(!p.value||!r.value)return null;const ie=p.value.getBoundingClientRect(),se=r.value.getBoundingClientRect();return{x:ie.left-se.left+ie.width/2,y:ie.top-se.top+ie.height/2}}function ee(ie){S||(S=ie),x&&ie<x&&(E+=x-ie);const se=ie-S-E,ce=V();if(!ce||!H.showPlanetOrbitAnimation){requestAnimationFrame(ee);return}N.forEach(Me=>{if(!Me.element.value)return;const Be=se%Me.orbitTime/Me.orbitTime*2*Math.PI+Me.initialAngle,Ie=ce.x+Me.orbitRadius*Math.cos(Be)-Me.element.value.offsetWidth/2,X=ce.y+Me.orbitRadius*Math.sin(Be)-Me.element.value.offsetHeight/2;Me.element.value.style.transform=`translate(${Ie}px, ${X}px)`}),x=ie,requestAnimationFrame(ee)}function pe(){const ie=V();ie&&N.forEach(se=>{if(!se.element.value)return;const ce=ie.x+se.orbitRadius*Math.cos(se.initialAngle)-se.element.value.offsetWidth/2,Me=ie.y+se.orbitRadius*Math.sin(se.initialAngle)-se.element.value.offsetHeight/2;se.element.value.style.transform=`translate(${ce}px, ${Me}px)`})}document.addEventListener("visibilitychange",()=>{document.hidden&&(x=null)}),pe(),requestAnimationFrame(ee)}),(x,S)=>(M(),I(_,null,[y("div",{id:"circle-orbit-container",ref_key:"orbitContainer",ref:r},[y("div",{id:"sun",ref_key:"sun",ref:p},null,512),c($e).unlocked.value||c(H).forceShowAllPlanets?(M(),I("div",{key:0,id:"mercury",ref_key:"mercury",ref:a},null,512)):F("",!0),c(Xt).unlocked.value||c(H).forceShowAllPlanets?(M(),I("div",{key:1,id:"venus",ref_key:"venus",ref:s},null,512)):F("",!0),c(H).forceShowAllPlanets?(M(),I("div",{key:2,id:"earth",ref_key:"earth",ref:l},null,512)):F("",!0),c(H).forceShowAllPlanets?(M(),I("div",{key:3,id:"mars",ref_key:"mars",ref:o},null,512)):F("",!0),c(H).forceShowAllPlanets?(M(),I("div",{key:4,id:"jupiter",ref_key:"jupiter",ref:d},null,512)):F("",!0),c(H).forceShowAllPlanets?(M(),I("div",{key:5,id:"saturn",ref_key:"saturn",ref:g},null,512)):F("",!0),c(H).forceShowAllPlanets?(M(),I("div",{key:6,id:"uranus",ref_key:"uranus",ref:v},null,512)):F("",!0),c(H).forceShowAllPlanets?(M(),I("div",{key:7,id:"neptune",ref_key:"neptune",ref:k},null,512)):F("",!0)],512),x.rightSideNodes?(M(),oe(t,{key:0})):F("",!0),x.branches?(M(),oe(ki,{key:1,links:c(x.branches)},null,8,["links"])):F("",!0)],64))}}),mu=ae(du,[["__scopeId","data-v-03d70f38"]]),fu=J({__name:"SideNodes",props:{nodes:{},classes:{}},setup(n){const e=n,t=h(()=>({small:!0,...c(e.classes)})),r=()=>u(_,null,[c(e.nodes).map(a=>R(a))]);return(a,s)=>(M(),I("span",{class:ue(t.value)},[u(r)],2))}}),pu=ae(fu,[["__scopeId","data-v-4821d873"]]),vu=Mt("main",()=>{const n=he(1),e=yi(n),t=_t(n),r=P([ne.treeNode,$e.treeNode,Xt.treeNode]),a=[{startNode:ne.treeNode,endNode:$e.treeNode},{startNode:$e.treeNode,endNode:Xt.treeNode}],s=u(mu,{rightSideNodes:r,branches:a},null),l=u(_,null,[u(pu,{nodes:r,style:{position:"absolute",right:"6px",display:"flex",gap:"20px",marginTop:"8px"}},null)]);return{name:"Galaxy",links:[],minWidth:"250",minimizable:!0,display:()=>u(_,null,[L.devSpeed===0?u("div",null,[w("Game Paused"),u(_n,{id:"paused"},null)]):null,L.devSpeed!=null&&L.devSpeed!==0&&L.devSpeed!==1?u("div",null,[w("Dev Speed: "),$(L.devSpeed),w("x"),u(_n,{id:"devspeed"},null)]):null,L.offlineTime!=null&&L.offlineTime!==0?u("div",null,[w("Offline Time: "),jn(L.offlineTime),u(_n,{id:"offline"},null)]):null,u(K,null,null),R(s)]),points:n,best:e,total:t,minimizedDisplay:()=>l}}),gu=n=>[vu,ne,$e,Xt,be,me,Ce,ze],vn=h(()=>!1);function ut(n={}){return Object.assign({id:`${re.id}-0`,name:"Default Save",tabs:re.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:re.id,modVersion:re.versionNumber,layers:{}},n)}function Ee(n){const e=Nt.compressToUTF16(Jt(n??L));return localStorage.setItem((n??L).id,e),e}async function hu(){Cu();try{let n=localStorage.getItem(H.active);if(n==null){await ct(Zt());return}if(n=Ct(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==re.id){await ct(Zt());return}e.id=H.active,await ct(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await ct(Zt())}}function Ct(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="ᯡ")n=Nt.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function Zt(){const n=gn(),e=ut({id:n});return Ee(e),H.saves.push(n),e}function gn(){let n,e=0;do n=`${re.id}-${e++}`;while(localStorage.getItem(n)!=null);return n}const Zn=G(!1);async function ct(n){console.info("Loading save",n),Zn.value=!0;for(const e in Le){const t=Le[e];t!=null&&Ya(t)}gu().forEach(e=>Za(e,n)),n=ut(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,re.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==re.versionNumber&&(n.modVersion,n.modVersion=re.versionNumber),Object.assign(L,n),H.active=L.id,Pe.emit("onLoad")}const Je=or({});function bu(n){if(Je[n]==null){let e=localStorage.getItem(n);if(e==null)Je[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")Je[n]={error:"Save is undefined",id:n};else try{if(e=Ct(e),e==null)return console.warn("Unable to determine preset encoding",e),Je[n]={error:"Unable to determine preset encoding",id:n},Je[n];Je[n]={...JSON.parse(e),id:n}}catch(t){Je[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return Je[n]}function yu(){Object.keys(Je).forEach(n=>delete Je[n])}function qn(n){Je[n]=void 0}setInterval(()=>{L.autosave&&Ee()},1e3);window.onbeforeunload=()=>{L.autosave&&Ee()};window.save=Ee;const ku=window.hardReset=async()=>{await ct(Zt())};window.deleteLowerSaves=()=>{const n=Object.values(H.saves).indexOf(L.id)+1;Object.values(H.saves).slice(n).forEach(e=>localStorage.removeItem(e)),H.saves=H.saves.slice(0,n)};const wn=Qt({active:"",saves:[],showTPS:!0,theme:cr.Drift,unthrottled:!1,alignUnits:!1,showHealthWarning:!0,showPlanetOrbitAnimation:!0,forceShowAllPlanets:!1});Ne(wn,n=>{const e=Nt.compressToUTF16(JSON.stringify(n));localStorage.setItem(re.id,e)},{deep:!0});const H=window.settings=wn;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!0,theme:cr.Drift,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};Pe.emit("loadSettings",n),Object.assign(wn,n),ku()};function Cu(){try{let n=localStorage.getItem(re.id);if(n!=null&&n!==""){if(n=Ct(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(wn,e)}Pe.emit("loadSettings",wn)}catch{}}const $i=Qt([]);function wu(n){$i.push(n)}const Nu=Qt([]),Su=Qt([]),We=G(),nt=G([]),tn=G([]);function Mu(){var n;((n=We.value)==null?void 0:n.loggedIn)===!0&&(nt.value.length>0||We.value.getSaveList().then(Pi).then(e=>{tn.value=e.map(t=>t.content.id)}).catch(console.error))}ra({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:Jr}).then(n=>{We.value=n,Jr(n)}).catch(console.error);function Jr(n){n.loggedIn===!0&&(nt.value.length>0||(n.getSaveList().then(e=>{const t=Pi(e);if(tn.value=t.map(r=>r.content.id),L.timePlayed<120*1e3&&t.length>0){const r=t.reduce((a,s)=>a.content.time<s.content.time?s:a);ct(r.content)}}).catch(console.error),setInterval(Mu,60*1e3)))}function Pi(n){const e=new Set(H.saves.slice()),t=new Set(new Array(11).fill(0).map((a,s)=>s)),r=Object.keys(n).map(a=>{const{label:s,content:l}=n[parseInt(a)];try{return{slot:parseInt(a),label:s,content:JSON.parse(Ct(l)??"")}}catch{return null}}).filter(a=>a!=null&&typeof a.content.id=="string"&&typeof a.content.time=="number"&&typeof a.content.timePlayed=="number").filter(a=>{var l;a.label!=null&&(a.content.name=a.label),t.delete(a.slot);const s=H.saves.find(o=>o===a.content.id);if(s==null)H.saves.push(a.content.id),Ee(ut(a.content));else{e.delete(s);try{const o=JSON.parse(Ct(localStorage.getItem(s)??"")??"");if(o==null)return!1;o.id=s,o.time=o.time??0,o.timePlayed=o.timePlayed??0;const d=Math.abs(o.timePlayed-a.content.timePlayed),p=Math.abs(o.time-a.content.time);d<120*1e3&&p<120*1e3?o.time<a.content.time?(Ee(ut(a.content)),H.active===s&&ct(a.content)):((l=We.value)==null||l.save(a.slot,Nt.compressToUTF16(Jt(ut(o))),o.name??a.label).catch(console.error),a.content=o):nt.value.push({id:s,cloud:a.content,local:o,slot:a.slot})}catch{return!1}}return!0});return e.forEach(a=>{var s;try{if(t.size>0){const l=localStorage.getItem(a)??"",o=JSON.parse(Ct(l)??""),d=t.values().next().value;if(d==null)return;(s=We.value)==null||s.save(d,l,o.name).then(()=>tn.value.push(o.id)).catch(console.error),t.delete(d)}}catch{}}),r}const Tu={class:"field"},xu={key:0,class:"field-title"},Iu=["placeholder"],Du=J({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.title==null?u(_,null,null):R(t.title,p=>u("span",null,[p])),s=Un(null);en(()=>{var p;(p=s.value)==null||p.focus()});const l=h({get(){return c(t.modelValue)??""},set(p){r("update:modelValue",p)}});function o(){r("submit")}function d(){t.submitOnBlur!==!1?r("submit"):r("cancel")}return(p,g)=>(M(),I("form",{onSubmit:hn(o,["prevent"])},[y("div",Tu,[p.title?(M(),I("span",xu,[u(a)])):F("",!0),p.textArea?(M(),oe(c(aa),{key:1,modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=v=>l.value=v),placeholder:p.placeholder,maxHeight:p.maxHeight,onBlur:d,ref_key:"field",ref:s},null,8,["modelValue","placeholder","maxHeight"])):bn((M(),I("input",{key:2,type:"text","onUpdate:modelValue":g[1]||(g[1]=v=>l.value=v),placeholder:p.placeholder,class:ue({fullWidth:!p.title}),onBlur:d,ref_key:"field",ref:s},null,42,Iu)),[[ir,l.value]])])],32))}}),qi=ae(Du,[["__scopeId","data-v-495d5085"]]),Au={key:0},Eu=["disabled"],$u={key:0},Pu=J({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,r=e,a=G(!1);Ne(a,o=>{r("confirmingChanged",o)});function s(){if(t.skipConfirm){r("click");return}a.value&&r("click"),a.value=!a.value}function l(){a.value=!1}return(o,d)=>(M(),I("span",{class:ue(["container",{confirming:a.value}])},[a.value?(M(),I("span",Au,"Are you sure?")):F("",!0),y("button",{onClick:hn(s,["stop"]),class:"button danger",disabled:o.disabled},[a.value?(M(),I("span",$u,"Yes")):it(o.$slots,"default",{key:1},void 0,!0)],8,Eu),a.value?(M(),I("button",{key:1,class:"button",onClick:hn(l,["stop"])},"No")):F("",!0)],2))}}),qu=ae(Pu,[["__scopeId","data-v-b3b9693a"]]),Ru={key:0,class:"handle material-icons"},Lu={key:1,class:"actions"},_u={key:2,class:"actions"},Ou={key:3,class:"details"},Fu=["disabled"],Vu={class:"save-version"},Bu={key:1,class:"time"},Gu={key:4,class:"details"},Uu={key:5,class:"details error"},ju=J({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,r=e,a=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),s=G(!1),l=G(!1),o=G("");Ne(s,()=>o.value=t.save.name??"");const d=h(()=>t.save!=null&&t.save.id===L.id&&!t.readonly),p=h(()=>d.value?L.time:(t.save!=null&&t.save.time)??0),g=h(()=>{var k;return!t.readonly&&((k=We.value)==null?void 0:k.loggedIn)===!0&&tn.value.includes(t.save.id)});function v(){r("editName",o.value),s.value=!1}return(k,f)=>(M(),I("div",{class:ue(["save",{active:d.value,readonly:k.readonly}])},[k.readonly!==!0?(M(),I("div",Ru,"drag_handle")):F("",!0),!s.value&&k.readonly!==!0?(M(),I("div",Lu,[k.save.error==null&&!l.value?(M(),oe(ur,{key:0,onClick:f[0]||(f[0]=b=>r("export")),class:"button",left:""},{default:j(()=>[u(ke,{display:"Export",direction:c(Q).Left,class:"info"},{default:j(()=>f[8]||(f[8]=[y("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):F("",!0),k.save.error==null&&!l.value?(M(),I("button",{key:1,onClick:f[1]||(f[1]=b=>r("duplicate")),class:"button"},[u(ke,{display:"Duplicate",direction:c(Q).Left,class:"info"},{default:j(()=>f[9]||(f[9]=[y("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):F("",!0),k.save.error==null&&!l.value?(M(),I("button",{key:2,onClick:f[2]||(f[2]=b=>s.value=!s.value),class:"button"},[u(ke,{display:"Edit Name",direction:c(Q).Left,class:"info"},{default:j(()=>f[10]||(f[10]=[y("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):F("",!0),u(qu,{disabled:d.value,onClick:f[3]||(f[3]=b=>r("delete")),onConfirmingChanged:f[4]||(f[4]=b=>l.value=b)},{default:j(()=>[u(ke,{display:"Delete",direction:c(Q).Left,class:"info"},{default:j(()=>f[11]||(f[11]=[y("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):k.readonly!==!0?(M(),I("div",_u,[y("button",{onClick:v,class:"button"},[u(ke,{display:"Save",direction:c(Q).Left,class:"info"},{default:j(()=>f[12]||(f[12]=[y("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),y("button",{onClick:f[5]||(f[5]=b=>s.value=!s.value),class:"button"},[u(ke,{display:"Cancel",direction:c(Q).Left,class:"info"},{default:j(()=>f[13]||(f[13]=[y("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):F("",!0),k.save.error==null&&!s.value?(M(),I("div",Ou,[g.value?(M(),oe(ke,{key:0,display:"Synced!",direction:c(Q).Right},{default:j(()=>f[14]||(f[14]=[y("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction"])):F("",!0),y("button",{class:"button open",onClick:f[6]||(f[6]=b=>r("open")),disabled:k.readonly},[y("h3",null,Y(k.save.name),1)],8,Fu),y("span",Vu,"v"+Y(k.save.modVersion),1),f[15]||(f[15]=y("br",null,null,-1)),p.value?(M(),I("div",Bu," Last played "+Y(c(a).format(p.value)),1)):F("",!0)])):k.save.error==null&&s.value?(M(),I("div",Gu,[u(qi,{modelValue:o.value,"onUpdate:modelValue":f[7]||(f[7]=b=>o.value=b),class:"editname",onSubmit:v},null,8,["modelValue"])])):(M(),I("div",Uu,[w(" Error: Failed to load save with id "+Y(k.save.id),1),f[16]||(f[16]=y("br",null,null,-1)),w(Y(k.save.error),1)]))],2))}}),lr=ae(ju,[["__scopeId","data-v-0058f767"]]),zu={key:0,style:{color:"var(--danger)"}},Hu={class:"modal-footer"},Wu={class:"field"},Zu={class:"field-buttons"},Yu={class:"footer"},Ju=J({__name:"SavesManager",setup(n,{expose:e}){const t=G(!1),r=G(null);e({open(){t.value=!0}});const a=G(!1),s=G(""),l=G(null);Ne(s,S=>{S?Yt(()=>{try{if(S=Ct(S)??"",S===""){console.warn("Unable to determine preset encoding",S),a.value=!0;return}const E=JSON.parse(S);if(typeof E!="object"){a.value=!0;return}const V=gn();E.id=V,Ee(E),s.value="",a.value=!1,H.saves.push(V)}catch{a.value=!0}}):a.value=!1});let o=Object.assign({}),d=G(Object.keys(o).reduce((S,E)=>(S.push({label:E.split("/").slice(-1)[0].slice(0,-4),value:o[E]}),S),[]));Ne(t,S=>{S&&yu()});const p=h(()=>H.saves.reduce((S,E)=>(S[E]=bu(E),S),{})),g=h(()=>{var S;return((S=We.value)==null?void 0:S.loggedIn)===!0&&H.saves.length<tn.value.length});function v(S){let E;switch(L.id===S?E=Jt(L):E=JSON.stringify(p.value[S]),re.exportEncoding){default:console.warn(`Unknown save encoding: ${re.exportEncoding}. Defaulting to lz`);case"lz":E=Nt.compressToUTF16(E);break;case"base64":E=btoa(unescape(encodeURIComponent(E)));break;case"plain":break}const V=document.createElement("textarea");V.value=E,document.body.appendChild(V),V.select(),V.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(V)}function k(S){L.id===S&&Ee();const E={...p.value[S],id:gn()};Ee(E),H.saves.push(E.id)}function f(S){var E;((E=We.value)==null?void 0:E.loggedIn)===!0&&We.value.getSaveList().then(V=>{var pe;const ee=Object.keys(V).find(ie=>{const se=V[parseInt(ie)].content;try{if(JSON.parse(se).id===S)return!0}catch{return!1}});ee!=null&&((pe=We.value)==null||pe.save(parseInt(ee),"","").catch(console.error))}),H.saves=H.saves.filter(V=>V!==S),localStorage.removeItem(S),qn(S)}function b(S){p.value[L.id].time=L.time,Ee(),qn(L.id),ct(p.value[S]),qn(S)}function N(S){if(l.value=S,Yt(()=>{l.value=null}),S=Ct(S)??"",S===""){console.warn("Unable to determine preset encoding",S);return}const E=JSON.parse(S);E.id=gn(),Ee(E),H.saves.push(E.id),b(E.id)}function x(S,E){const V=p.value[S];V!=null&&(V.name=E,L.id===S?(L.name=E,Ee()):(Ee(V),qn(S)))}return(S,E)=>(M(),oe(St,{modelValue:t.value,"onUpdate:modelValue":E[4]||(E[4]=V=>t.value=V),ref_key:"modal",ref:r},{header:j(()=>E[5]||(E[5]=[y("h2",null,"Saves Manager",-1)])),body:j(({shown:V})=>[g.value?(M(),I("div",zu," Not all saves are synced! You may need to delete stale saves. ")):F("",!0),V?(M(),oe(c(ia),{key:1,list:c(H).saves,handle:".handle",itemKey:ee=>ee},{item:j(({element:ee})=>[u(lr,{save:p.value[ee],onOpen:pe=>b(ee),onExport:pe=>v(ee),onEditName:pe=>x(ee,pe),onDuplicate:pe=>k(ee),onDelete:pe=>f(ee)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):F("",!0)]),footer:j(()=>[y("div",Hu,[u(qi,{modelValue:s.value,"onUpdate:modelValue":E[0]||(E[0]=V=>s.value=V),title:"Import Save",placeholder:"Paste your save here!",class:ue({importingFailed:a.value})},null,8,["modelValue","class"]),y("div",Wu,[E[6]||(E[6]=y("span",{class:"field-title"},"Create Save",-1)),y("div",Zu,[y("button",{class:"button",onClick:E[1]||(E[1]=V=>b(c(Zt)().id))},"New Game"),Object.keys(c(d)).length>0?(M(),oe(fr,{key:0,options:c(d),modelValue:l.value,"onUpdate:modelValue":E[2]||(E[2]=V=>N(V)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):F("",!0)])]),y("div",Yu,[E[7]||(E[7]=y("div",{style:{"flex-grow":"1"}},null,-1)),y("button",{class:"button modal-default-button",onClick:E[3]||(E[3]=V=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),vr=ae(Ju,[["__scopeId","data-v-99458d64"]]),Ku={class:"vga-footer"},Xu=J({__name:"AddictionWarning",setup(n){const e=G(!1);ei(()=>{re.disableHealthWarning===!1&&H.showHealthWarning&&le.mouseActivity.filter(r=>r).length>6&&(e.value=!0)});function t(){H.showHealthWarning=!1,e.value=!1}return(r,a)=>(M(),I(_,null,[u(St,dt({modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e.value=s)},r.$attrs),{header:j(()=>a[2]||(a[2]=[y("div",{class:"vga-modal-header"},[y("h2",null,"Kindly consider taking a break.")],-1)])),body:j(()=>a[3]||(a[3]=[y("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),y("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),y("h4",null,"Resources:",-1),y("p",null,[y("span",null,[y("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),w(" ("),y("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),w(") ")]),y("br"),y("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)])),footer:j(()=>[y("div",Ku,[y("button",{onClick:t,class:"button"},"Never show this again"),y("button",{onClick:a[0]||(a[0]=s=>e.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),u(vr,{ref:"savesManager"},null,512)],64))}}),Qu=ae(Xu,[["__scopeId","data-v-84eac81b"]]),ec={class:"cloud-saves-modal-header"},tc=["onClick"],nc={key:0,class:"note"},rc={key:1,class:"note"},ic=["onClick"],ac={key:0,class:"note"},sc={key:1,class:"note"},lc=["onClick"],oc=J({__name:"CloudSaveResolver",setup(n){const e=G(!1),t=G([]),r=h(()=>nt.value.length>1?"saves":"save"),a=G(null);Ne(()=>nt.value.length>0,p=>{p&&(t.value=nt.value.map(({local:g,cloud:v})=>(g.time??0)<(v.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),Ne(()=>{var p;return(p=a.value)==null?void 0:p.isOpen},p=>{p===!1&&(nt.value=[])});function s(p){t.value[p]="local"}function l(p){t.value[p]="cloud"}function o(p){t.value[p]="both"}function d(){var p,g;for(let v=0;v<t.value.length;v++){const{slot:k,local:f,cloud:b}=nt.value[v];switch(t.value[v]){case"local":(p=We.value)==null||p.save(k,Nt.compressToUTF16(Jt(ut(f))),b.name).catch(console.error);break;case"cloud":Ee(ut(b));break;case"both":const N=gn();Ee({...ut(b),id:N}),H.saves.push(N),(g=We.value)==null||g.save(k,Nt.compressToUTF16(Jt(ut(f))),b.name).catch(console.error);break}}e.value=!1}return(p,g)=>(M(),oe(St,{modelValue:e.value,"onUpdate:modelValue":g[0]||(g[0]=v=>e.value=v),width:"960px",ref_key:"modal",ref:a,"prevent-closing":!0},{header:j(()=>[y("div",ec,[y("h2",null,"Cloud "+Y(r.value)+" loaded!",1)])]),body:j(()=>[y("div",null," Upon loading, your cloud "+Y(r.value)+" "+Y(c(nt).length>1?"appear":"appears")+" to be out of sync with your local "+Y(r.value)+". Which "+Y(r.value)+" do you want to keep? ",1),g[4]||(g[4]=y("br",null,null,-1)),(M(!0),I(_,null,gt(c(c(nt)),(v,k)=>(M(),I("div",{key:v.id,class:"conflict-container"},[y("div",{onClick:f=>l(k),class:ue({selected:t.value[k]==="cloud"})},[y("h2",null,[g[1]||(g[1]=w(" Cloud ")),(v.cloud.time??0)>(v.local.time??0)?(M(),I("span",nc,"(more recent)")):F("",!0),(v.cloud.timePlayed??0)>(v.local.timePlayed??0)?(M(),I("span",rc,"(more playtime)")):F("",!0)]),u(lr,{save:v.cloud,readonly:!0},null,8,["save"])],10,tc),y("div",{onClick:f=>s(k),class:ue({selected:t.value[k]==="local"})},[y("h2",null,[g[2]||(g[2]=w(" Local ")),(v.cloud.time??0)<=(v.local.time??0)?(M(),I("span",ac,"(more recent)")):F("",!0),(v.cloud.timePlayed??0)<=(v.local.timePlayed??0)?(M(),I("span",sc,"(more playtime)")):F("",!0)]),u(lr,{save:v.local,readonly:!0},null,8,["save"])],10,ic),y("div",{onClick:f=>o(k),class:ue({selected:t.value[k]==="both"}),style:{"flex-basis":"30%"}},g[3]||(g[3]=[y("h2",null,"Both",-1),y("div",{class:"save"},"Keep Both",-1)]),10,lc)]))),128))]),footer:j(()=>[y("div",{class:"cloud-saves-footer"},[y("button",{onClick:d,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),uc=ae(oc,[["__scopeId","data-v-c79a1b2e"]]),cc={class:"game-over-modal-header"},dc=["src","alt"],mc={class:"game-over-modal-title"},fc={key:0},pc={key:0},vc=["href"],gc={key:1},hc=J({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:r,discordLink:a,versionNumber:s,versionTitle:l}=re,o=h(()=>jn(L.timePlayed)),d=h(()=>vn.value&&!L.keepGoing),p=wt(L,"autosave");function g(){L.keepGoing=!0}function v(){ct(Zt())}return(k,f)=>(M(),oe(St,{"model-value":d.value},{header:j(()=>[y("div",cc,[c(t)?(M(),I("img",{key:0,class:"game-over-modal-logo",src:c(t),alt:c(e)},null,8,dc)):F("",!0),y("div",mc,[f[1]||(f[1]=y("h2",null,"Congratulations!",-1)),y("h4",null,"You've beaten "+Y(c(e))+" v"+Y(c(s))+": "+Y(c(l)),1)])])]),body:j(({shown:b})=>[b?(M(),I("div",fc,[y("div",null,"It took you "+Y(o.value)+" to beat the game.",1),f[4]||(f[4]=y("br",null,null,-1)),f[5]||(f[5]=y("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),f[6]||(f[6]=y("br",null,null,-1)),c(a)&&c(r)?(M(),I("div",pc,[y("a",{href:c(a),class:"game-over-modal-discord-link"},[f[2]||(f[2]=y("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),w(" "+Y(c(r)),1)],8,vc)])):(M(),I("div",gc,f[3]||(f[3]=[y("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[y("span",{class:"material-icons game-over-modal-discord"},"discord"),w(" Profectus & Friends ")],-1)]))),u(je,{title:"Autosave",modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=N=>p.value=N)},null,8,["modelValue"])])):F("",!0)]),footer:j(()=>[y("div",{class:"game-over-footer"},[y("button",{onClick:g,class:"button"},"Keep Going"),y("button",{onClick:v,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),bc=ae(hc,[["__scopeId","data-v-c9c5bad4"]]),yc={key:0},kc=["href"],Cc={class:"nan-footer"},wc=J({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=re,r=G(!0),a=G(!0),s=wt(le,"hasNaN"),l=G(null);Ne(s,k=>{k?(r.value=L.autosave,a.value=L.devSpeed===0):(L.autosave=r.value,L.devSpeed=a.value?0:null)});const o=h(()=>{var k;return(k=le.NaNPath)==null?void 0:k.join(".")}),d=h(()=>le.NaNPersistent!=null?le.NaNPersistent.value:null);function p(){le.NaNPersistent!=null&&(le.NaNPersistent.value=new i(0),le.hasNaN=!1)}function g(){le.NaNPersistent&&(le.NaNPersistent.value=new i(1),le.hasNaN=!1)}function v(){le.NaNPersistent&&(le.NaNPersistent.value=new i(NaN),le.hasNaN=!1)}return(k,f)=>(M(),I(_,null,[u(St,dt({modelValue:s.value,"onUpdate:modelValue":f[4]||(f[4]=b=>s.value=b)},k.$attrs),{header:j(()=>f[5]||(f[5]=[y("div",{class:"nan-modal-header"},[y("h2",null,"NaN value detected!")],-1)])),body:j(()=>[y("div",null,[w(' Attempted to assign "'+Y(o.value)+'" to NaN',1),d.value?(M(),I("span",yc,Y(" ")+"(previously "+Y(c($)(d.value))+")",1)):F("",!0),w(". Auto-saving has been "+Y(r.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),f[7]||(f[7]=y("br",null,null,-1)),y("div",null,[y("a",{href:c(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[f[6]||(f[6]=y("span",{class:"material-icons nan-modal-discord"},"discord",-1)),w(" "+Y(c(e)||"Profectus & Friends"),1)],8,kc)]),f[8]||(f[8]=y("br",null,null,-1)),u(je,{title:"Autosave",modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=b=>r.value=b)},null,8,["modelValue"]),c(re).enablePausing?(M(),oe(je,{key:0,title:"Pause game",modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=b=>a.value=b)},null,8,["modelValue"])):F("",!0)]),footer:j(()=>[y("div",Cc,[y("button",{onClick:f[2]||(f[2]=b=>{var N;return(N=l.value)==null?void 0:N.open()}),class:"button"},"Open Saves Manager"),y("button",{onClick:p,class:"button"},"Set to 0"),y("button",{onClick:g,class:"button"},"Set to 1"),d.value&&c(i).neq(d.value,0)&&c(i).neq(d.value,1)?(M(),I("button",{key:0,onClick:f[3]||(f[3]=b=>s.value=!1),class:"button"}," Set to previous ")):F("",!0),y("button",{onClick:v,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),u(vr,{ref_key:"savesManager",ref:l},null,512)],64))}}),Nc=ae(wc,[["__scopeId","data-v-cab8d401"]]),Sc={key:1},Mc=J({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},setup(n){const e=n,t=()=>R(e.display),r=()=>e.minimizedDisplay==null?void 0:R(e.minimizedDisplay),a=h(()=>re.allowGoBack&&!c(e.forceHideGoBack)&&e.index>0&&!c(e.minimized));function s(){L.tabs.splice(c(e.index),1/0)}function l(d){e.nodes.value=d}const o=G([]);return Xi((d,p,g)=>(console.warn(`Error caught in "${e.name}" layer`,d,p,g),o.value.push(d instanceof Error?d:new Error(JSON.stringify(d))),!1)),(d,p)=>o.value.length>0?(M(),oe(ii,{key:0,errors:o.value},null,8,["errors"])):(M(),I("div",dt({key:1,class:"layer-container",style:{"--layer-color":c(d.color)}},d.$attrs),[a.value?(M(),I("button",{key:0,class:"goBack",onClick:s},"❌")):F("",!0),c(d.minimized)?(M(),I("button",{key:1,class:"layer-tab minimized",onClick:p[0]||(p[0]=g=>d.$emit("setMinimized",!1))},[d.minimizedDisplay?(M(),oe(r,{key:0})):(M(),I("div",Sc,Y(c(d.name)),1))])):(M(),I("div",{key:2,class:ue(["layer-tab",{showGoBack:a.value}])},[u(ai,{onUpdateNodes:l},{default:j(()=>[u(t)]),_:1})],2)),c(d.minimizable)?(M(),I("button",{key:3,class:"minimize",onClick:p[1]||(p[1]=g=>d.$emit("setMinimized",!0))}," ▼ ")):F("",!0)],16))}}),Tc=ae(Mc,[["__scopeId","data-v-1259ff99"]]),xc=J({__name:"Changelog",setup(n,{expose:e}){const t=G(!1);return e({open(){t.value=!0}}),(r,a)=>(M(),oe(St,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=s=>t.value=s)},{header:j(()=>a[1]||(a[1]=[y("h2",null,"Changelog",-1)])),body:j(()=>a[2]||(a[2]=[y("details",{open:""},[y("summary",null,[w("v0.0 Initial Commit - "),y("time",null,"2021-09-04")]),w(" This is the first release :D "),y("ul",null,[y("li",{class:"feature"},"Did everything"),y("li",{class:"fix"},"Had some fun"),y("li",{class:"breaking"},"Removed everything"),y("li",{class:"balancing"},"Created some bugs to fix later")])],-1)])),_:1},8,["modelValue"]))}}),Ic=ae(xc,[["__scopeId","data-v-0fdea059"]]),Dc={class:"info-modal-header"},Ac=["src","alt"],Ec={class:"info-modal-title"},$c={key:0},Pc={key:0},qc={key:0},Rc=["href"],Lc=J({__name:"Info",emits:["openChangelog"],setup(n,{expose:e,emit:t}){const{title:r,logo:a,author:s,discordName:l,discordLink:o,versionNumber:d,versionTitle:p}=re,g=t,v=G(!1),k=h(()=>jn(L.timePlayed)),f=()=>Nu.map(b=>R(b));return e({open(){v.value=!0}}),(b,N)=>(M(),oe(St,{modelValue:v.value,"onUpdate:modelValue":N[1]||(N[1]=x=>v.value=x)},{header:j(()=>[y("div",Dc,[c(a)?(M(),I("img",{key:0,class:"info-modal-logo",src:c(a),alt:c(r)},null,8,Ac)):F("",!0),y("div",Ec,[y("h2",null,Y(c(r)),1),y("h4",null,[w(" v"+Y(c(d)),1),c(p)?(M(),I("span",$c,": "+Y(c(p)),1)):F("",!0)])])])]),body:j(({shown:x})=>[x?(M(),I("div",Pc,[c(s)?(M(),I("div",qc,"By "+Y(c(s)),1)):F("",!0),N[3]||(N[3]=y("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),N[4]||(N[4]=y("br",null,null,-1)),y("div",{class:"link",onClick:N[0]||(N[0]=S=>g("openChangelog"))},"Changelog"),N[5]||(N[5]=y("br",null,null,-1)),y("div",null,[c(o)?(M(),I("a",{key:0,href:c(o),class:"info-modal-discord-link",target:"_blank"},[N[2]||(N[2]=y("span",{class:"material-icons info-modal-discord"},"discord",-1)),w(" "+Y(c(l)),1)],8,Rc)):F("",!0)]),N[6]||(N[6]=y("div",null,[y("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[y("span",{class:"material-icons info-modal-discord"},"discord"),w(" Profectus & Friends ")])],-1)),N[7]||(N[7]=y("div",null,[y("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[y("span",{class:"material-icons info-modal-discord"},"discord"),w(" The Modding Tree ")])],-1)),N[8]||(N[8]=y("br",null,null,-1)),y("div",null,"Time Played: "+Y(k.value),1),u(f)])):F("",!0)]),_:1},8,["modelValue"]))}}),_c=ae(Lc,[["__scopeId","data-v-e80d3d22"]]),Oc={class:"header"},Fc={class:"option-tabs"},Vc={key:0},Bc={key:1},Gc=J({__name:"Options",setup(n,{expose:e}){const t=G(!1),r=G("behaviour");function a(Ie){return Ie==r.value}function s(Ie){r.value=Ie}e({isTab:a,setTab:s,save:Ee,open(){t.value=!0}});const l=Object.keys(Ot).map(Ie=>({label:si(Ie),value:Ie})),o=()=>$i.map(Ie=>R(Ie)),{showTPS:d,theme:p,unthrottled:g,alignUnits:v,showHealthWarning:k,showPlanetOrbitAnimation:f,forceShowAllPlanets:b}=Rr(H),{autosave:N,offlineProd:x}=Rr(L),S=h({get(){return L.devSpeed===0},set(Ie){L.devSpeed=Ie?0:null}}),E=u("span",{class:"option-title"},[w("Unthrottled"),u("desc",null,[w("Allow the game to run as fast as possible. Not battery friendly.")])]),V=u("span",{class:"option-title"},[w("Offline production"),u(ke,{display:"Save-specific",direction:Q.Right},{default:()=>[w("*")]}),u("desc",null,[w("Simulate production that occurs while the game is closed.")])]),ee=u("span",{class:"option-title"},[w("Show videogame addiction warning"),u("desc",null,[w("Show a helpful warning after playing for a long time about video game addiction and encouraging you to take a break.")])]),pe=u("span",{class:"option-title"},[w("Autosave"),u(ke,{display:"Save-specific",direction:Q.Right},{default:()=>[w("*")]}),u("desc",null,[w("Automatically save the game every second or when the game is closed.")])]),ie=u("span",{class:"option-title"},[w("Pause game"),u(ke,{display:"Save-specific",direction:Q.Right},{default:()=>[w("*")]}),u("desc",null,[w("Stop everything from moving.")])]),se=u("span",{class:"option-title"},[w("Theme"),u("desc",null,[w("How the game looks.")])]),ce=u("span",{class:"option-title"},[w("Show TPS"),u("desc",null,[w("Show TPS meter at the bottom-left corner of the page.")])]),Me=u("span",{class:"option-title"},[w("Align modifier units"),u("desc",null,[w("Align numbers to the beginning of the unit in modifier view.")])]),we=u("span",{class:"option-title"},[w("Planet Orbit Animation"),u("desc",null,[w("Enable/disable the planet orbit animation")])]),Be=u("span",{class:"option-title"},[w("Force Show All Planets"),u("desc",null,[w("Show all planets in orbit, regardless of unlock status.")])]);return(Ie,X)=>(M(),oe(St,{modelValue:t.value,"onUpdate:modelValue":X[13]||(X[13]=de=>t.value=de)},{header:j(()=>[y("div",Oc,[X[14]||(X[14]=y("h2",null,"Settings",-1)),y("div",Fc,[y("button",{class:ue({selected:a("behaviour")}),onClick:X[0]||(X[0]=de=>s("behaviour"))},"Behaviour",2),y("button",{class:ue({selected:a("appearance")}),onClick:X[1]||(X[1]=de=>s("appearance"))},"Appearance",2)])])]),body:j(()=>[a("behaviour")?(M(),I("div",Vc,[u(je,{title:c(E),modelValue:c(g),"onUpdate:modelValue":X[2]||(X[2]=de=>qe(g)?g.value=de:null)},null,8,["title","modelValue"]),c(re).enablePausing?(M(),oe(je,{key:0,title:c(ie),modelValue:S.value,"onUpdate:modelValue":X[3]||(X[3]=de=>S.value=de)},null,8,["title","modelValue"])):F("",!0),u(je,{title:c(V),modelValue:c(x),"onUpdate:modelValue":X[4]||(X[4]=de=>qe(x)?x.value=de:null)},null,8,["title","modelValue"]),c(re).disableHealthWarning?F("",!0):(M(),oe(je,{key:1,title:c(ee),modelValue:c(k),"onUpdate:modelValue":X[5]||(X[5]=de=>qe(k)?k.value=de:null)},null,8,["title","modelValue"])),u(je,{title:c(pe),modelValue:c(N),"onUpdate:modelValue":X[6]||(X[6]=de=>qe(N)?N.value=de:null)},null,8,["title","modelValue"]),c(N)?F("",!0):(M(),oe(ur,{key:2,class:"button save-button",onClick:X[7]||(X[7]=de=>c(Ee)())},{default:j(()=>X[15]||(X[15]=[w("Manually save")])),_:1}))])):F("",!0),a("appearance")?(M(),I("div",Bc,[u(fr,{title:c(se),options:c(l),modelValue:c(p),"onUpdate:modelValue":X[8]||(X[8]=de=>qe(p)?p.value=de:null)},null,8,["title","options","modelValue"]),u(o),u(je,{title:c(ce),modelValue:c(d),"onUpdate:modelValue":X[9]||(X[9]=de=>qe(d)?d.value=de:null)},null,8,["title","modelValue"]),u(je,{title:c(Me),modelValue:c(v),"onUpdate:modelValue":X[10]||(X[10]=de=>qe(v)?v.value=de:null)},null,8,["title","modelValue"]),u(je,{title:c(we),modelValue:c(f),"onUpdate:modelValue":X[11]||(X[11]=de=>qe(f)?f.value=de:null)},null,8,["title","modelValue"]),u(je,{title:c(Be),modelValue:c(b),"onUpdate:modelValue":X[12]||(X[12]=de=>qe(b)?b.value=de:null)},null,8,["title","modelValue"])])):F("",!0)]),_:1},8,["modelValue"]))}}),Uc=["src","alt"],jc={key:1,class:"title"},zc={class:"discord"},Hc={class:"discord-links"},Wc={key:0},Zc=["href"],Yc={href:"https://forums.moddingtree.com/",target:"_blank"},Jc={href:"https://forums.moddingtree.com/",target:"_blank"},Kc={class:"discord"},Xc={class:"discord-links"},Qc={key:0},ed=["href"],td=J({__name:"Nav",setup(n){const e=G(null),t=G(null),r=G(null),a=G(null),{useHeader:s,banner:l,title:o,discordName:d,discordLink:p,versionNumber:g}=re;function v(){window.open(p,"mywindow")}const k=h(()=>{var f;return((f=We.value)==null?void 0:f.loggedIn)===!0&&!tn.value.includes(H.active)});return(f,b)=>(M(),I(_,null,[c(s)?(M(),I("div",dt({key:0,class:"nav"},f.$attrs),[c(l)?(M(),I("img",{key:0,src:c(l),class:"banner",alt:c(o)},null,8,Uc)):(M(),I("div",jc,Y(c(o)),1)),y("div",{onClick:b[0]||(b[0]=N=>{var x;return(x=a.value)==null?void 0:x.open()}),class:"version-container"},[u(ke,{display:"Changelog",direction:c(Q).Down,class:"version"},{default:j(()=>[y("span",null,"v"+Y(c(g)),1)]),_:1},8,["direction"])]),b[14]||(b[14]=y("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),y("div",zc,[y("span",{onClick:v,class:"material-icons"},"discord"),y("ul",Hc,[c(p)?(M(),I("li",Wc,[y("a",{href:c(p),target:"_blank"},Y(c(d)),9,Zc)])):F("",!0),b[9]||(b[9]=y("li",null,[y("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),b[10]||(b[10]=y("li",null,[y("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])]),y("div",null,[y("a",Yc,[u(ke,{display:"Forums",direction:c(Q).Down,yoffset:"5px"},{default:j(()=>b[11]||(b[11]=[y("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),y("div",{onClick:b[1]||(b[1]=N=>{var x;return(x=e.value)==null?void 0:x.open()})},[u(ke,{display:"Info",direction:c(Q).Down,class:"info"},{default:j(()=>b[12]||(b[12]=[y("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),y("div",{onClick:b[2]||(b[2]=N=>{var x;return(x=t.value)==null?void 0:x.open()})},[u(ke,{display:"Saves",direction:c(Q).Down,xoffset:"-20px"},{default:j(()=>[y("span",{class:ue(["material-icons",{needsSync:k.value}])},"library_books",2)]),_:1},8,["direction"])]),y("div",{onClick:b[3]||(b[3]=N=>{var x;return(x=r.value)==null?void 0:x.open()})},[u(ke,{display:"Settings",direction:c(Q).Down,xoffset:"-66px"},{default:j(()=>b[13]||(b[13]=[y("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])])],16)):(M(),I("div",dt({key:1,class:"overlay-nav"},f.$attrs),[y("div",{onClick:b[4]||(b[4]=N=>{var x;return(x=a.value)==null?void 0:x.open()}),class:"version-container"},[u(ke,{display:"Changelog",direction:c(Q).Right,xoffset:"25%",class:"version"},{default:j(()=>[y("span",null,"v"+Y(c(g)),1)]),_:1},8,["direction"])]),y("div",{onClick:b[5]||(b[5]=N=>{var x;return(x=t.value)==null?void 0:x.open()})},[u(ke,{display:"Saves",direction:c(Q).Right},{default:j(()=>[y("span",{class:ue(["material-icons",{needsSync:k.value}])},"library_books",2)]),_:1},8,["direction"])]),y("div",{onClick:b[6]||(b[6]=N=>{var x;return(x=r.value)==null?void 0:x.open()})},[u(ke,{display:"Settings",direction:c(Q).Right},{default:j(()=>b[15]||(b[15]=[y("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])]),y("div",{onClick:b[7]||(b[7]=N=>{var x;return(x=e.value)==null?void 0:x.open()})},[u(ke,{display:"Info",direction:c(Q).Right},{default:j(()=>b[16]||(b[16]=[y("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),y("div",null,[y("a",Jc,[u(ke,{display:"Forums",direction:c(Q).Right,xoffset:"7px"},{default:j(()=>b[17]||(b[17]=[y("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),y("div",Kc,[y("span",{onClick:v,class:"material-icons"},"discord"),y("ul",Xc,[c(p)?(M(),I("li",Qc,[y("a",{href:c(p),target:"_blank"},Y(c(d)),9,ed)])):F("",!0),b[18]||(b[18]=y("li",null,[y("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),b[19]||(b[19]=y("li",null,[y("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])])],16)),u(_c,{ref_key:"info",ref:e,onOpenChangelog:b[8]||(b[8]=N=>{var x;return(x=a.value)==null?void 0:x.open()})},null,512),u(vr,{ref_key:"savesManager",ref:t},null,512),u(Gc,{ref_key:"options",ref:r},null,512),u(Ic,{ref_key:"changelog",ref:a},null,512)],64))}}),Ri=ae(td,[["__scopeId","data-v-fcec1ed1"]]),nd={class:"inner-tab"},rd=J({__name:"Game",setup(n){const e=wt(L,"tabs"),t=h(()=>Object.keys(Le)),r=re.useHeader;function a(s){const{display:l,name:o,color:d,minimizable:p,minimizedDisplay:g,minimized:v,nodes:k,forceHideGoBack:f}=s;return{display:l,name:o,color:d,minimizable:p,minimizedDisplay:g,minimized:v,nodes:k,forceHideGoBack:f}}return(s,l)=>(M(),I("div",{class:ue(["tabs-container",{useHeader:c(r)}])},[(M(!0),I(_,null,gt(e.value,(o,d)=>{var p,g;return M(),I("div",{key:d,class:ue(["tab",c((p=c(Le)[o])==null?void 0:p.classes)]),style:xe(c((g=c(Le)[o])==null?void 0:g.style))},[d===0&&!c(r)?(M(),oe(Ri,{key:0})):F("",!0),y("div",nd,[t.value.includes(o)?(M(),oe(Tc,dt({key:0,ref_for:!0},a(c(Le)[o]),{index:d,onSetMinimized:v=>c(Le)[o].minimized.value=v}),null,16,["index","onSetMinimized"])):(M(),oe(Qi(o),{key:1,index:d},null,8,["index"]))])],6)}),128))],2))}}),id=ae(rd,[["__scopeId","data-v-d0a3afce"]]),ad={key:0,class:"tpsDisplay"},sd=J({__name:"TPS",setup(n){const e=h(()=>i.div(le.lastTenTicks.length,le.lastTenTicks.reduce((t,r)=>t+r,0)));return(t,r)=>e.value.isNan()?F("",!0):(M(),I("div",ad,"TPS: "+Y(c(yn)(e.value)),1))}}),ld=ae(sd,[["__scopeId","data-v-7df31503"]]),od=J({__name:"App",setup(n){const e=re.useHeader,t=h(()=>Ot[H.theme].variables),r=wt(H,"showTPS"),a=wt(le,"errors"),s=()=>Su.map(l=>R(l));return(l,o)=>a.value.length>0?(M(),I("div",{key:0,class:"error-container",style:xe(t.value)},[u(ii,{errors:a.value},null,8,["errors"])],4)):(M(),I(_,{key:1},[y("div",{id:"modal-root",style:xe(t.value)},null,4),y("div",{class:ue(["app",{useHeader:c(e)}]),style:xe(t.value)},[c(e)?(M(),oe(Ri,{key:0})):F("",!0),u(id),c(r.value)?(M(),oe(ld,{key:1})):F("",!0),u(Qu),u(bc),u(Nc),u(uc),u(s)],6)],64))}}),ud=ae(od,[["__scopeId","data-v-b45f2ee2"]]),cd="modulepreload",dd=function(n,e){return new URL(n,e).href},Kr={},md=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){const l=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(t.map(p=>{if(p=dd(p,r),p in Kr)return;Kr[p]=!0;const g=p.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(!!r)for(let b=l.length-1;b>=0;b--){const N=l[b];if(N.href===p&&(!g||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${v}`))return;const f=document.createElement("link");if(f.rel=g?"stylesheet":cd,g||(f.as="script"),f.crossOrigin="",f.href=p,d&&f.setAttribute("nonce",d),document.head.appendChild(f),g)return new Promise((b,N)=>{f.addEventListener("load",b),f.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function fd(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:a,onRegisteredSW:s,onRegisterError:l}=n;let o,d;const p=async(v=!0)=>{await d};async function g(){if("serviceWorker"in navigator){if(o=await md(async()=>{const{Workbox:v}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:v}},[],import.meta.url).then(({Workbox:v})=>new v("./sw.js",{scope:"./",type:"classic"})).catch(v=>{l==null||l(v)}),!o)return;o.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),o.addEventListener("installed",v=>{v.isUpdate||r==null||r()}),o.register({immediate:e}).then(v=>{s?s("./sw.js",v):a==null||a(v)}).catch(v=>{l==null||l(v)})}}return d=g(),p}function pd(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:a,onRegisteredSW:s,onRegisterError:l}=n,o=G(!1),d=G(!1);return{updateServiceWorker:fd({immediate:e,onNeedRefresh(){o.value=!0,t==null||t()},onOfflineReady(){d.value=!0,r==null||r()},onRegistered:a,onRegisteredSW:s,onRegisterError:l}),offlineReady:d,needRefresh:o}}let jt=null;function Gn(){const n=Date.now();let e=(n-L.time)/1e3;L.time=n;const t=e;if(le.lastTenTicks.push(t),le.lastTenTicks.length>10&&(le.lastTenTicks=le.lastTenTicks.slice(1)),!(vn!=null&&vn.value&&!L.keepGoing)&&!le.hasNaN&&(e=Math.max(e,0),L.devSpeed!==0)){if(Zn.value=!1,L.offlineTime!=null){if(i.gt(L.offlineTime,re.offlineLimit*3600)&&(L.offlineTime=re.offlineLimit*3600),i.gt(L.offlineTime,0)&&L.devSpeed!==0){const r=Math.max(L.offlineTime/10,e);L.offlineTime=L.offlineTime-r,e+=r}else L.devSpeed===0&&(L.offlineTime+=e);(!L.offlineProd||i.lt(L.offlineTime,0))&&(L.offlineTime=null)}e=Math.min(e,re.maxTickLength),L.devSpeed!=null&&(e*=L.devSpeed),Number.isFinite(e)||(e=1e308),!i.eq(e,0)&&(L.timePlayed+=e,Number.isFinite(L.timePlayed)||(L.timePlayed=1e308),Pe.emit("update",e,t),H.unthrottled?(requestAnimationFrame(Gn),jt!=null&&(clearInterval(jt),jt=null)):jt==null&&(jt=setInterval(Gn,50)))}}async function vd(){H.unthrottled?requestAnimationFrame(Gn):jt=setInterval(Gn,50)}Ne(vn,n=>{n&&Pe.emit("gameWon")});setInterval(()=>{le.mouseActivity=[...le.mouseActivity.slice(-7),!1]},1e3*60*60);const gr=console.error;console.error=function(...n){gr(...n)};window.onerror=function(n,e,t,r,a){return le.errors.push(a instanceof Error?a:new Error(JSON.stringify(a))),gr(a),!0};window.onunhandledrejection=function(n){le.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),gr(n.reason)};document.title=re.title;window.projInfo=re;re.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await hu();const n=window.vue=ea(ud);n.config.errorHandler=function(e,t,r){console.error(e,r,t)},Pe.emit("setupVue",n),n.mount("#app"),Yt(()=>{const e=ri();pd({immediate:!0,onOfflineReady(){e.info("App ready to work offline")},onRegisterError:console.warn,onRegistered:console.info})}),vd()});
