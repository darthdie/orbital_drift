var hi=Object.defineProperty;var yi=(n,e,t)=>e in n?hi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _=(n,e,t)=>yi(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-GVBARt8q.js";import{aX as qt,bo as c,X,aZ as U,aR as S,A,b0 as bt,bS as mn,aA as he,az as Yt,w as v,aJ as tn,G as k,bf as W,F as E,a$ as At,z as V,aC as Ae,P as h,Q as l,bN as j,b9 as Rn,aT as wn,y as ve,bP as ar,bF as ki,ay as ht,l as Or,T as Ci,ap as wi,ar as ze,bI as ke,am as Pn,bb as On,bj as Lt,aO as Fr,aB as Mi,bl as xi,bJ as sr,au as nn,bE as Ni,bA as Si,aI as Ti,bk as hr,b3 as Di,x as Ai}from"./@vue-CCfogNd1.js";import{L as Bt}from"./lz-string-BZNGtwso.js";import{c as _r}from"./nanoevents-BxCKNB1V.js";import{Y as Ei}from"./vue-next-select-CgtHQcl0.js";import{s as Ii,u as Vr}from"./vue-toastification-CjoTmBGg.js";import{i as Pi}from"./unofficial-galaxy-sdk-C_siawBx.js";import{D as $i}from"./vuedraggable-BgvaSe-I.js";import{p as Li}from"./vue-textarea-autosize-DLc4kbjP.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const Bi="./projInfo-schema.json",qi="Orbital Drift",Ri="WHEEEeeee eee ee e e    e  e",Oi="orbital_drift",Fi="DarthDie",_i="",Vi="",Gi="0.0.11121",Ui="Initial Commit",Hi=!0,ji=!1,zi=2,Wi=!0,Zi=null,Ji="",Ki=["main"],Yi=3600,Xi=1,Qi=!0,ea="base64",ta=!1,na=2,le={$schema:Bi,title:qi,description:Ri,id:Oi,author:Fi,discordName:_i,discordLink:Vi,versionNumber:Gi,versionTitle:Ui,allowGoBack:Hi,defaultShowSmall:ji,defaultDecimalsShown:zi,useHeader:Wi,banner:Zi,logo:Ji,initialTabs:Ki,maxTickLength:Yi,offlineLimit:Xi,enablePausing:Qi,exportEncoding:ea,disableHealthWarning:ta,defaultDecimalShown:na},ra=qt({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}}),R=window.player=ra;function Xt(n){return JSON.stringify(n,(e,t)=>c(t)??null)}const ia=X({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,r=U(!1),a=U(null);function s(){t("click"),a.value!=null&&clearTimeout(a.value),r.value=!1,Yt(()=>{r.value=!0,a.value=setTimeout(()=>r.value=!1,500)})}return(u,o)=>(S(),A("button",{onClick:mn(s,["stop"]),class:he(["feedback",{activated:r.value,left:u.left}])},[bt(u.$slots,"default",{},void 0,!0)],2))}}),de=(n,e)=>{const t=n.__vccOpts||n;for(const[r,a]of e)t[r]=a;return t},lr=de(ia,[["__scopeId","data-v-a1ab3b47"]]),aa={class:"error"},sa={class:"error-title"},la={class:"error-details",style:{"margin-top":"-10px"}},oa={key:0},ua={class:"instructions"},ca=["href"],da={key:0,style:{"margin-top":"20px"}},fa={class:"error-details"},ma={key:0,style:{"margin-top":"10px"}},pa={key:1,style:{"margin-top":"10px"}},va=X({__name:"Error",props:{errors:{}},setup(n){const e=n,t=v(()=>e.errors[0]),r=v(()=>e.errors.map(u=>u.stack==null?[]:u.stack.split(`
`))),a=v(()=>e.errors.map(u=>u.cause==null?[]:(typeof u.cause=="string"?u.cause:JSON.stringify(u.cause)).split(`
`)));function s(){let u=Xt(R);switch(le.exportEncoding){default:console.warn(`Unknown save encoding: ${le.exportEncoding}. Defaulting to lz`);case"lz":u=Bt.compressToUTF16(u);break;case"base64":u=btoa(unescape(encodeURIComponent(u)));break;case"plain":break}console.log(u);const o=document.createElement("textarea");o.value=u,document.body.appendChild(o),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(o)}return tn(()=>{R.autosave=!1,R.devSpeed=0}),(u,o)=>(S(),A("div",aa,[k("h1",sa,W(t.value.name)+": "+W(t.value.message),1),k("div",la,[t.value.cause?(S(),A("div",oa,[(S(!0),A(E,null,At(a.value[0],f=>(S(),A("div",{key:f},W(f),1))),128))])):V("",!0),t.value.stack?(S(),A("div",{key:1,style:Ae(t.value.cause?"margin-top: 10px":"")},[(S(!0),A(E,null,At(r.value[0],f=>(S(),A("div",{key:f},W(f),1))),128))],4)):V("",!0)]),k("div",ua,[o[2]||(o[2]=h(" Check the console for more details, and consider sharing it with the developers on ")),k("a",{href:c(le).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,ca),o[3]||(o[3]=h("! ")),l(lr,{onClick:s,class:"button",style:{display:"inline-flex"}},{default:j(()=>o[0]||(o[0]=[k("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),k("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),o[4]||(o[4]=k("br",null,null,-1)),u.errors.length>1?(S(),A("div",da,o[1]||(o[1]=[k("h3",null,"Other errors",-1)]))):V("",!0),(S(!0),A(E,null,At(u.errors.slice(1),(f,m)=>(S(),A("div",{key:m,style:{"margin-top":"20px"}},[k("details",fa,[k("summary",null,W(f.name)+": "+W(f.message),1),f.cause?(S(),A("div",ma,[(S(!0),A(E,null,At(a.value[m+1],p=>(S(),A("div",{key:p},W(p),1))),128))])):V("",!0),f.stack?(S(),A("div",pa,[(S(!0),A(E,null,At(r.value[m+1],p=>(S(),A("div",{key:p},W(p),1))),128))])):V("",!0)])]))),128))])]))}}),Gr=de(va,[["__scopeId","data-v-87a88b90"]]),Ct={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var or=(n=>(n.Classic="classic",n.Paper="paper",n.Nordic="nordic",n.Aqua="aqua",n.Drift="drift",n))(or||{});const rn={classic:Ct,paper:{...Ct,variables:{...Ct.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Ct,variables:{...Ct.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Ct,variables:{...Ct.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}},drift:{...Ct,variables:{...Ct.variables,"--background":"#010b19","--feature-foreground":"#fff","--raised-background":"#333c4a","--locked":"#21252C","--bought":"#011719","--outline":"#333c4a","--border-radius":"2px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1}},me=window.state=Rn({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:qt([])}),$e=_r();"fonts"in document&&(document.fonts.onloadingdone=()=>$e.emit("fontsLoaded"));document.onmousemove=function(){me.mouseActivity[me.mouseActivity.length-1]=!0};const ga=X({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var g;const t=e,r=U({}),a=new ResizeObserver(f),s=U(null);tn(()=>{const w=s.value;w!=null&&a.observe(w)});let u=!0,o=U((g=s.value)==null?void 0:g.getBoundingClientRect());function f(){u&&(u=!1,Yt(()=>{var w;o.value=(w=s.value)==null?void 0:w.getBoundingClientRect(),Object.values(r.value).filter(b=>b).forEach(b=>b.rect=b.element.getBoundingClientRect()),t("updateNodes",r.value),u=!0}))}$e.on("fontsLoaded",f);const m={attributes:!1,childList:!0,subtree:!1};wn(jr,(w,b)=>{const x=new MutationObserver(()=>p(w));x.observe(b,m),r.value[w]={element:b,observer:x,rect:b.getBoundingClientRect()},f()}),wn(zr,w=>{var b;(b=r.value[w])==null||b.observer.disconnect(),r.value[w]=void 0,f()}),wn(Wr,r),wn(Zr,o);function p(w){const b=r.value[w];b!=null&&(b.rect=b.element.getBoundingClientRect(),t("updateNodes",r.value))}return(w,b)=>(S(),A(E,null,[bt(w.$slots,"default",{},void 0,!0),k("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}}),er=de(ga,[["__scopeId","data-v-a2d0fc14"]]),ba={class:"modal-wrapper"},ha=["width"],ya={class:"modal-header"},ka={class:"modal-body"},Ca={class:"modal-footer"},Rt=X({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const r=n,a=t,s=v(()=>r.modelValue||o.value);function u(){r.preventClosing!==!0&&a("update:modelValue",!1)}const o=U(!1),f=U(null),m=v(()=>{var p;return((p=f.value)==null?void 0:p.nodes)??null});return e({isOpen:s,nodes:m}),(p,g)=>(S(),ve(Ci,{to:"#modal-root"},[l(Or,{name:"modal",onBeforeEnter:g[0]||(g[0]=w=>o.value=!0),onAfterLeave:g[1]||(g[1]=w=>o.value=!1),appear:""},{default:j(()=>[ar(k("div",ht({class:"modal-mask",onPointerdown:mn(u,["self"])},p.$attrs),[k("div",ba,[k("div",{class:"modal-container",width:p.width},[k("div",ya,[bt(p.$slots,"header",{shown:s.value})]),k("div",ka,[l(er,{ref_key:"contextRef",ref:f},{default:j(()=>[bt(p.$slots,"body",{shown:s.value})]),_:3},512)]),k("div",Ca,[bt(p.$slots,"footer",{shown:s.value},()=>[k("div",{class:"modal-default-footer"},[g[2]||(g[2]=k("div",{class:"modal-default-flex-grow"},null,-1)),k("button",{class:"button modal-default-button",onClick:u}," Close ")])])])],8,ha)])],16),[[ki,p.modelValue]])]),_:3})]))}});function Ur(n){let e=n.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1),e}function wa(n){return(n[0]+n.slice(1).replace(/[A-Z]/g,e=>`-${e}`)).toLowerCase()}function Hr(n){return typeof n=="function"}var ee=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(ee||{});function $(n){return Hr(n)&&n.length===0?v(n):n}const Et=Symbol("ProxyState"),yr=Symbol("AfterEvaluation");function Me(n,e={}){const t=e;let r=!1,a=!1;const s=[];function u(){if(!r){if(a)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");a=!0,Object.assign(t,n.call(t,t)),r=!0,s.forEach(f=>f(t))}return t}function o(f){r?f(t):s.push(f)}return new Proxy(t,{get(f,m){if(m===Et)return u();if(m===yr)return o;const p=u()[m];return p!=null&&typeof p=="object"&&vt in p?p[vt]:p},set(f,m,p){return u()[m]=p,!0},has(f,m){return m===Et||m===yr?!0:Reflect.has(u(),m)},ownKeys(){return Reflect.ownKeys(u())},getOwnPropertyDescriptor(f,m){return r||(Object.assign(t,n.call(t,t)),r=!0),Object.getOwnPropertyDescriptor(f,m)}})}const jr=Symbol("RegisterNode"),zr=Symbol("UnregisterNode"),Wr=Symbol("Nodes"),Zr=Symbol("Bounds"),Je=Rn({});window.layers=Je;const cn={},mt=[];function nt(n,e){return Me(()=>{const t=_r();mt.push(n),cn[n]=new Set;const r={id:n,emitter:t,...t,nodes:U({}),minimized:Ke(!1,!1)},a=e(r),{color:s,display:u,classes:o,style:f,name:m,forceHideGoBack:p,minWidth:g,minimizable:w,minimizedDisplay:b,...x}=a;if(mt[mt.length-1]==null||mt[mt.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${mt}
Trying to pop ${n}`);mt.pop();const C=$(f),N={...r,...x,color:$(s),display:u,classes:$(o),style:v(()=>{let y=c(N.minWidth);return(typeof y=="number"||!Number.isNaN(parseInt(y)))&&(y=y+"px"),{...c(C),...r.minimized.value?{flexGrow:"0",flexShrink:"0",width:"80px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:y,flexBasis:y,margin:""}}}),name:$(m)??n,forceHideGoBack:$(p),minWidth:$(g)??600,minimizable:$(w)??!1,minimizedDisplay:b};return N})}function Ma(n,e){if(console.info("Adding layer",n.id),Je[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,Je[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),Je[n.id]=n,$e.emit("addLayer",n,e.layers[n.id])}function xa(n){console.info("Removing layer",n.id),$e.emit("removeLayer",n),delete Je[n.id]}$e.on("update",function(e){Object.values(Je).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(Je).forEach(t=>{t==null||t.emit("update",e)}),Object.values(Je).forEach(t=>{t==null||t.emit("postUpdate",e)})});class Na{constructor(e){_(this,"map",new Map);_(this,"first");_(this,"last");_(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const r=new Sa(e,t);for(this.first===void 0?(this.first=r,this.last=r):(r.next=this.first,this.first.prev=r,this.first=r),this.map.set(e,r);this.map.size>this.maxSize;){const a=this.last;this.map.delete(a.key),this.last=a.prev,this.last.next=void 0}}}class Sa{constructor(e,t){_(this,"key");_(this,"value");_(this,"next");_(this,"prev");this.key=e,this.value=t}}const Jn=17,Ta=9e15,Da=Math.log10(9e15),Aa=1/9e15,Ea=308,Ia=-324,kr=5,Pa=1023,$a=function(){const n=[];for(let t=Ia+1;t<=Ea;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),Ot=[2,Math.E,3,4,5,6,7,8,9,10],La=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Ba=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let T=function(e){return i.fromValue_noAlloc(e)},K=function(n,e,t){return i.fromComponents(n,e,t)},se=function(e,t,r){return i.fromComponents_noNormalize(e,t,r)};const Dt=function(e,t){const r=t+1,a=Math.ceil(Math.log10(Math.abs(e))),s=Math.round(e*Math.pow(10,r-a))*Math.pow(10,a-r);return parseFloat(s.toFixed(Math.max(r-a,0)))},Kn=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},qa=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const r=n*n;let a=n;return t=t+1/(12*a),a=a*r,t=t+1/(360*a),a=a*r,t=t+1/(1260*a),a=a*r,t=t+1/(1680*a),a=a*r,t=t+1/(1188*a),a=a*r,t=t+691/(360360*a),a=a*r,t=t+7/(1092*a),a=a*r,t=t+3617/(122400*a),Math.exp(t)/e},Jr=.5671432904097838,Cr=function(n,e=1e-10){let t,r;if(!Number.isFinite(n)||n===0)return n;if(n===1)return Jr;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let a=0;a<100;++a){if(r=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(r-t)<e*Math.abs(r))return r;t=r}throw Error(`Iteration failed to converge: ${n.toString()}`)};function wr(n,e=1e-10){let t,r,a,s;if(!Number.isFinite(n.mag)||n.eq(i.dZero))return n;if(n.eq(i.dOne))return i.fromNumber(Jr);t=i.ln(n);for(let u=0;u<100;++u){if(r=t.neg().exp(),a=t.sub(n.mul(r)),s=t.sub(a.div(t.add(1).sub(t.add(2).mul(a).div(i.mul(2,t).add(2))))),i.abs(s.sub(t)).lt(i.abs(s).mul(e)))return s;t=s}throw Error(`Iteration failed to converge: ${n.toString()}`)}const M=class M{constructor(e){_(this,"sign",0);_(this,"mag",0);_(this,"layer",0);e instanceof M?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/$a(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,r){return new M().fromComponents(e,t,r)}static fromComponents_noNormalize(e,t,r){return new M().fromComponents_noNormalize(e,t,r)}static fromMantissaExponent(e,t){return new M().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new M().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new M().fromDecimal(e)}static fromNumber(e){return new M().fromNumber(e)}static fromString(e){return new M().fromString(e)}static fromValue(e){return new M().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof M)return e;if(typeof e=="string"){const t=M.fromStringCache.get(e);return t!==void 0?t:M.fromString(e)}else return typeof e=="number"?M.fromNumber(e):M.dZero}static abs(e){return T(e).abs()}static neg(e){return T(e).neg()}static negate(e){return T(e).neg()}static negated(e){return T(e).neg()}static sign(e){return T(e).sign}static sgn(e){return T(e).sign}static round(e){return T(e).round()}static floor(e){return T(e).floor()}static ceil(e){return T(e).ceil()}static trunc(e){return T(e).trunc()}static add(e,t){return T(e).add(t)}static plus(e,t){return T(e).add(t)}static sub(e,t){return T(e).sub(t)}static subtract(e,t){return T(e).sub(t)}static minus(e,t){return T(e).sub(t)}static mul(e,t){return T(e).mul(t)}static multiply(e,t){return T(e).mul(t)}static times(e,t){return T(e).mul(t)}static div(e,t){return T(e).div(t)}static divide(e,t){return T(e).div(t)}static recip(e){return T(e).recip()}static reciprocal(e){return T(e).recip()}static reciprocate(e){return T(e).reciprocate()}static cmp(e,t){return T(e).cmp(t)}static cmpabs(e,t){return T(e).cmpabs(t)}static compare(e,t){return T(e).cmp(t)}static isNaN(e){return e=T(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=T(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return T(e).eq(t)}static equals(e,t){return T(e).eq(t)}static neq(e,t){return T(e).neq(t)}static notEquals(e,t){return T(e).notEquals(t)}static lt(e,t){return T(e).lt(t)}static lte(e,t){return T(e).lte(t)}static gt(e,t){return T(e).gt(t)}static gte(e,t){return T(e).gte(t)}static max(e,t){return T(e).max(t)}static min(e,t){return T(e).min(t)}static minabs(e,t){return T(e).minabs(t)}static maxabs(e,t){return T(e).maxabs(t)}static clamp(e,t,r){return T(e).clamp(t,r)}static clampMin(e,t){return T(e).clampMin(t)}static clampMax(e,t){return T(e).clampMax(t)}static cmp_tolerance(e,t,r){return T(e).cmp_tolerance(t,r)}static compare_tolerance(e,t,r){return T(e).cmp_tolerance(t,r)}static eq_tolerance(e,t,r){return T(e).eq_tolerance(t,r)}static equals_tolerance(e,t,r){return T(e).eq_tolerance(t,r)}static neq_tolerance(e,t,r){return T(e).neq_tolerance(t,r)}static notEquals_tolerance(e,t,r){return T(e).notEquals_tolerance(t,r)}static lt_tolerance(e,t,r){return T(e).lt_tolerance(t,r)}static lte_tolerance(e,t,r){return T(e).lte_tolerance(t,r)}static gt_tolerance(e,t,r){return T(e).gt_tolerance(t,r)}static gte_tolerance(e,t,r){return T(e).gte_tolerance(t,r)}static pLog10(e){return T(e).pLog10()}static absLog10(e){return T(e).absLog10()}static log10(e){return T(e).log10()}static log(e,t){return T(e).log(t)}static log2(e){return T(e).log2()}static ln(e){return T(e).ln()}static logarithm(e,t){return T(e).logarithm(t)}static pow(e,t){return T(e).pow(t)}static pow10(e){return T(e).pow10()}static pow_base(e,t){return T(e).pow_base(t)}static root(e,t){return T(e).root(t)}static factorial(e,t){return T(e).factorial()}static gamma(e,t){return T(e).gamma()}static lngamma(e,t){return T(e).lngamma()}static exp(e){return T(e).exp()}static sqr(e){return T(e).sqr()}static sqrt(e){return T(e).sqrt()}static cube(e){return T(e).cube()}static cbrt(e){return T(e).cbrt()}static tetrate(e,t=2,r=se(1,0,1)){return T(e).tetrate(t,r)}static iteratedexp(e,t=2,r=se(1,0,1)){return T(e).iteratedexp(t,r)}static iteratedlog(e,t=10,r=1){return T(e).iteratedlog(t,r)}static layeradd10(e,t){return T(e).layeradd10(t)}static layeradd(e,t,r=10){return T(e).layeradd(t,r)}static slog(e,t=10){return T(e).slog(t)}static lambertw(e){return T(e).lambertw()}static ssqrt(e){return T(e).ssqrt()}static pentate(e,t=2,r=se(1,0,1)){return T(e).pentate(t,r)}static sin(e){return T(e).sin()}static cos(e){return T(e).cos()}static tan(e){return T(e).tan()}static asin(e){return T(e).asin()}static acos(e){return T(e).acos()}static atan(e){return T(e).atan()}static sinh(e){return T(e).sinh()}static cosh(e){return T(e).cosh()}static tanh(e){return T(e).tanh()}static asinh(e){return T(e).asinh()}static acosh(e){return T(e).acosh()}static atanh(e){return T(e).atanh()}static affordGeometricSeries(e,t,r,a){return this.affordGeometricSeries_core(T(e),T(t),T(r),a)}static sumGeometricSeries(e,t,r,a){return this.sumGeometricSeries_core(e,T(t),T(r),a)}static affordArithmeticSeries(e,t,r,a){return this.affordArithmeticSeries_core(T(e),T(t),T(r),T(a))}static sumArithmeticSeries(e,t,r,a){return this.sumArithmeticSeries_core(T(e),T(t),T(r),T(a))}static efficiencyOfPurchase(e,t,r){return this.efficiencyOfPurchase_core(T(e),T(t),T(r))}static randomDecimalForTesting(e){if(Math.random()*20<1)return se(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return se(t,0,1);const r=Math.floor(Math.random()*(e+1));let a=r===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(a=Math.trunc(a));let s=Math.pow(10,a);return Math.random()>.9&&(s=Math.trunc(s)),K(t,r,s)}static affordGeometricSeries_core(e,t,r,a){const s=t.mul(r.pow(a));return M.floor(e.div(s).mul(r.sub(1)).add(1).log10().div(r.log10()))}static sumGeometricSeries_core(e,t,r,a){return t.mul(r.pow(a)).mul(M.sub(1,r.pow(e))).div(M.sub(1,r))}static affordArithmeticSeries_core(e,t,r,a){const u=t.add(a.mul(r)).sub(r.div(2)),o=u.pow(2);return u.neg().add(o.add(r.mul(e).mul(2)).sqrt()).div(r).floor()}static sumArithmeticSeries_core(e,t,r,a){const s=t.add(a.mul(r));return e.div(2).mul(s.mul(2).plus(e.sub(1).mul(r)))}static efficiencyOfPurchase_core(e,t,r){return e.div(t).add(e.div(r))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Aa)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Ta)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Da&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,r){return this.sign=e,this.layer=t,this.mag=r,this.normalize(),this}fromComponents_noNormalize(e,t,r){return this.sign=e,this.layer=t,this.mag=r,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,r=M.fromStringCache.get(t);if(r!==void 0)return this.fromDecimal(r);e=e.replace(",","");const a=e.split("^^^");if(a.length===2){const C=parseFloat(a[0]),N=parseFloat(a[1]),y=a[1].split(";");let D=1;if(y.length===2&&(D=parseFloat(y[1]),isFinite(D)||(D=1)),isFinite(C)&&isFinite(N)){const F=M.pentate(C,N,D);return this.sign=F.sign,this.layer=F.layer,this.mag=F.mag,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}}const s=e.split("^^");if(s.length===2){const C=parseFloat(s[0]),N=parseFloat(s[1]),y=s[1].split(";");let D=1;if(y.length===2&&(D=parseFloat(y[1]),isFinite(D)||(D=1)),isFinite(C)&&isFinite(N)){const F=M.tetrate(C,N,D);return this.sign=F.sign,this.layer=F.layer,this.mag=F.mag,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}}const u=e.split("^");if(u.length===2){const C=parseFloat(u[0]),N=parseFloat(u[1]);if(isFinite(C)&&isFinite(N)){const y=M.pow(C,N);return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}}e=e.trim().toLowerCase();let o,f,m=e.split("pt");if(m.length===2){o=10,f=parseFloat(m[0]),m[1]=m[1].replace("(",""),m[1]=m[1].replace(")","");let C=parseFloat(m[1]);if(isFinite(C)||(C=1),isFinite(o)&&isFinite(f)){const N=M.tetrate(o,f,C);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}}if(m=e.split("p"),m.length===2){o=10,f=parseFloat(m[0]),m[1]=m[1].replace("(",""),m[1]=m[1].replace(")","");let C=parseFloat(m[1]);if(isFinite(C)||(C=1),isFinite(o)&&isFinite(f)){const N=M.tetrate(o,f,C);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}}const p=e.split("e"),g=p.length-1;if(g===0){const C=parseFloat(e);if(isFinite(C))return this.fromNumber(C),M.fromStringCache.size>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}else if(g===1){const C=parseFloat(e);if(isFinite(C)&&C!==0)return this.fromNumber(C),M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}const w=e.split("e^");if(w.length===2){this.sign=1,w[0].charAt(0)=="-"&&(this.sign=-1);let C="";for(let N=0;N<w[1].length;++N){const y=w[1].charCodeAt(N);if(y>=43&&y<=57||y===101)C+=w[1].charAt(N);else return this.layer=parseFloat(C),this.mag=parseFloat(w[1].substr(N+1)),this.normalize(),M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}}if(g<1)return this.sign=0,this.layer=0,this.mag=0,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this;const b=parseFloat(p[0]);if(b===0)return this.sign=0,this.layer=0,this.mag=0,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this;let x=parseFloat(p[p.length-1]);if(g>=2){const C=parseFloat(p[p.length-2]);isFinite(C)&&(x*=Math.sign(C),x+=Kn(C))}if(!isFinite(b))this.sign=p[0]==="-"?-1:1,this.layer=g,this.mag=x;else if(g===1)this.sign=Math.sign(b),this.layer=1,this.mag=x+Math.log10(Math.abs(b));else if(this.sign=Math.sign(b),this.layer=g,g===2){const C=M.mul(K(1,2,x),T(b));return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}else this.mag=x;return this.normalize(),M.fromStringCache.maxSize>=1&&M.fromStringCache.set(t,M.fromDecimal(this)),this}fromValue(e){return e instanceof M?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Dt(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Dt(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=kr?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Dt(this.m,e)+"e"+Dt(this.e,e):this.layer===1?Dt(this.m,e)+"e"+Dt(this.e,e):this.layer<=kr?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Dt(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Dt(this.mag,e)}abs(){return se(this.sign===0?0:1,this.layer,this.mag)}neg(){return se(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?M.dZero:this.layer===0?K(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?M.dZero:this.layer===0?K(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?M.dZero:this.layer===0?K(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?M.dZero:this.layer===0?K(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=T(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return se(0,0,0);let r,a;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(M.cmpabs(this,t)>0?(r=this,a=t):(r=t,a=this),r.layer===0&&a.layer===0)return M.fromNumber(r.sign*r.mag+a.sign*a.mag);const s=r.layer*Math.sign(r.mag),u=a.layer*Math.sign(a.mag);if(s-u>=2)return r;if(s===0&&u===-1){if(Math.abs(a.mag-Math.log10(r.mag))>Jn)return r;{const m=Math.pow(10,Math.log10(r.mag)-a.mag),p=a.sign+r.sign*m;return K(Math.sign(p),1,a.mag+Math.log10(Math.abs(p)))}}if(s===1&&u===0){if(Math.abs(r.mag-Math.log10(a.mag))>Jn)return r;{const m=Math.pow(10,r.mag-Math.log10(a.mag)),p=a.sign+r.sign*m;return K(Math.sign(p),1,Math.log10(a.mag)+Math.log10(Math.abs(p)))}}if(Math.abs(r.mag-a.mag)>Jn)return r;const o=Math.pow(10,r.mag-a.mag),f=a.sign+r.sign*o;return K(Math.sign(f),1,a.mag+Math.log10(Math.abs(f)))}plus(e){return this.add(e)}sub(e){return this.add(T(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=T(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return se(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return se(this.sign*t.sign,0,1);let r,a;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(r=this,a=t):(r=t,a=this),r.layer===0&&a.layer===0)return M.fromNumber(r.sign*a.sign*r.mag*a.mag);if(r.layer>=3||r.layer-a.layer>=2)return K(r.sign*a.sign,r.layer,r.mag);if(r.layer===1&&a.layer===0)return K(r.sign*a.sign,1,r.mag+Math.log10(a.mag));if(r.layer===1&&a.layer===1)return K(r.sign*a.sign,1,r.mag+a.mag);if(r.layer===2&&a.layer===1){const s=K(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(K(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return K(r.sign*a.sign,s.layer+1,s.sign*s.mag)}if(r.layer===2&&a.layer===2){const s=K(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)).add(K(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return K(r.sign*a.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=T(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?M.dNaN:this.layer===0?K(this.sign,0,1/this.mag):K(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=T(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=T(e),r=this.mag>0?this.layer:-this.layer,a=t.mag>0?t.layer:-t.layer;return r>a?1:r<a?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=T(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=T(e);return this.lt(t)?t:this}min(e){const t=T(e);return this.gt(t)?t:this}maxabs(e){const t=T(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=T(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const r=T(e);return this.eq_tolerance(r,t)?0:this.cmp(r)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const r=T(e);if(t==null&&(t=1e-7),this.sign!==r.sign||Math.abs(this.layer-r.layer)>1)return!1;let a=this.mag,s=r.mag;return this.layer>r.layer&&(s=Kn(s)),this.layer<r.layer&&(a=Kn(a)),Math.abs(a-s)<=t*Math.max(Math.abs(a),Math.abs(s))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const r=T(e);return!this.eq_tolerance(r,t)&&this.lt(r)}lte_tolerance(e,t){const r=T(e);return this.eq_tolerance(r,t)||this.lt(r)}gt_tolerance(e,t){const r=T(e);return!this.eq_tolerance(r,t)&&this.gt(r)}gte_tolerance(e,t){const r=T(e);return this.eq_tolerance(r,t)||this.gt(r)}pLog10(){return this.lt(M.dZero)?M.dZero:this.log10()}absLog10(){return this.sign===0?M.dNaN:this.layer>0?K(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):K(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?M.dNaN:this.layer>0?K(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):K(this.sign,0,Math.log10(this.mag))}log(e){return e=T(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?M.dNaN:this.layer===0&&e.layer===0?K(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):M.div(this.log10(),e.log10())}log2(){return this.sign<=0?M.dNaN:this.layer===0?K(this.sign,0,Math.log2(this.mag)):this.layer===1?K(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?K(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):K(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?M.dNaN:this.layer===0?K(this.sign,0,Math.log(this.mag)):this.layer===1?K(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?K(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):K(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=T(e),r=this,a=t;if(r.sign===0)return a.eq(0)?se(1,0,1):r;if(r.sign===1&&r.layer===0&&r.mag===1)return r;if(a.sign===0)return se(1,0,1);if(a.sign===1&&a.layer===0&&a.mag===1)return r;const s=r.absLog10().mul(a).pow10();return this.sign===-1?Math.abs(a.toNumber()%2)%2===1?s.neg():Math.abs(a.toNumber()%2)%2===0?s:M.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return M.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return K(1,0,t);if(e.sign===0)return M.dOne;e=se(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?K(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?K(-e.sign,e.layer+1,-e.mag):M.dOne}pow_base(e){return T(e).pow(this)}root(e){const t=T(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?M.exp(M.mul(this,M.ln(this).sub(1))):M.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(se(1,0,24)))return M.fromNumber(qa(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const r=e*e;let a=e,s=12*a,u=1/s,o=t+u;if(o===t||(t=o,a=a*r,s=360*a,u=1/s,o=t-u,o===t))return M.exp(t);t=o,a=a*r,s=1260*a;let f=1/s;return t=t+f,a=a*r,s=1680*a,f=1/s,t=t-f,M.exp(t)}else return this.layer===1?M.exp(M.mul(this,M.ln(this).sub(1))):M.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?M.dOne:this.layer===0&&this.mag<=709.7?M.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?K(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?K(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):K(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return M.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return K(1,2,Math.log10(this.mag)-.3010299956639812);{const e=M.div(se(this.sign,this.layer-1,this.mag),se(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=se(1,0,1)){if(e===1)return M.pow(this,t);if(e===0)return new M(t);if(this.eq(M.dOne))return M.dOne;if(this.eq(-1))return M.pow(this,t);if(e===Number.POSITIVE_INFINITY){const s=this.toNumber();if(s<=1.444667861009766&&s>=.06598803584531254){if(s>1.444667861009099)return M.fromNumber(Math.E);const u=M.ln(this).neg();return u.lambertw().div(u)}else return s>1.444667861009766?M.fromNumber(Number.POSITIVE_INFINITY):M.dNaN}if(this.eq(M.dZero)){let s=Math.abs((e+1)%2);return s>1&&(s=2-s),M.fromNumber(s)}if(e<0)return M.iteratedlog(t,this,-e);t=T(t);const r=e;e=Math.trunc(e);const a=r-e;if(this.gt(M.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let s=0;s<e;++s){const u=t;if(t=this.pow(t),u.eq(t))return t}if(a!=0){const s=this.pow(t);return t.mul(1-a).add(s.mul(a))}return t}a!==0&&(t.eq(M.dOne)?this.gt(10)?t=this.pow(a):(t=M.fromNumber(M.tetrate_critical(this.toNumber(),a)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let s=0;s<e;++s){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return se(t.sign,t.layer+(e-s-1),t.mag);if(s>1e4)return t}return t}iteratedexp(e=2,t=se(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return M.tetrate(e,-t,this);e=T(e);let r=M.fromDecimal(this);const a=t;t=Math.trunc(t);const s=a-t;if(r.layer-e.layer>3){const u=Math.min(t,r.layer-e.layer-3);t-=u,r.layer-=u}for(let u=0;u<t;++u){if(r=r.log(e),!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(u>1e4)return r}return s>0&&s<1&&(e.eq(10)?r=r.layeradd10(-s):r=r.layeradd(-s,e)),r}slog(e=10,t=100){let r=.001,a=!1,s=!1,u=this.slog_internal(e).toNumber();for(let o=1;o<t;++o){const m=new M(e).tetrate(u).gt(this);if(o>1&&s!=m&&(a=!0),s=m,a?r/=2:r*=2,r=Math.abs(r)*(m?-1:1),u+=r,r===0)break}return M.fromNumber(u)}slog_internal(e=10){if(e=T(e),e.lte(M.dZero)||e.eq(M.dOne))return M.dNaN;if(e.lt(M.dOne))return this.eq(M.dOne)?M.dZero:this.eq(M.dZero)?M.dNegOne:M.dNaN;if(this.mag<0||this.eq(M.dZero))return M.dNegOne;let t=0,r=M.fromDecimal(this);if(r.layer-e.layer>3){const a=r.layer-e.layer-3;t+=a,r.layer-=a}for(let a=0;a<100;++a)if(r.lt(M.dZero))r=M.pow(e,r),t-=1;else{if(r.lte(M.dOne))return M.fromNumber(t+M.slog_critical(e.toNumber(),r.toNumber()));t+=1,r=M.log(r,e)}return M.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:M.critical_section(e,t,Ba)}static tetrate_critical(e,t){return M.critical_section(e,t,La)}static critical_section(e,t,r){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let a=0,s=0;for(let o=0;o<Ot.length;++o)if(Ot[o]==e){a=r[o][Math.floor(t)],s=r[o][Math.ceil(t)];break}else if(Ot[o]<e&&Ot[o+1]>e){const f=(e-Ot[o])/(Ot[o+1]-Ot[o]);a=r[o][Math.floor(t)]*(1-f)+r[o+1][Math.floor(t)]*f,s=r[o][Math.ceil(t)]*(1-f)+r[o+1][Math.ceil(t)]*f;break}const u=t-Math.floor(t);return a<=0||s<=0?a*(1-u)+s*u:Math.pow(e,Math.log(a)/Math.log(e)*(1-u)+Math.log(s)/Math.log(e)*u)}layeradd10(e){e=M.fromValue_noAlloc(e).toNumber();const t=M.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const r=Math.trunc(e);e-=r,t.layer+=r}if(e<=-1){const r=Math.trunc(e);if(e-=r,t.layer+=r,t.layer<0)for(let a=0;a<100;++a){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const a=this.slog(t).toNumber()+e;return a>=0?M.tetrate(t,a):Number.isFinite(a)?a>=-1?M.log(M.tetrate(t,a+1),t):M.log(M.log(M.tetrate(t,a+2),t),t):M.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return M.fromNumber(Cr(this.toNumber()));if(this.layer===0)return M.fromNumber(Cr(this.sign*this.mag));if(this.layer===1)return wr(this);if(this.layer===2)return wr(this);if(this.layer>=3)return se(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return se(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=se(1,0,1)){t=T(t);const r=e;e=Math.trunc(e);const a=r-e;a!==0&&(t.eq(M.dOne)?(++e,t=M.fromNumber(a)):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let s=0;s<e;++s){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(s>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?M.fromNumber(Math.sin(this.sign*this.mag)):se(0,0,0)}cos(){return this.mag<0?M.dOne:this.layer===0?M.fromNumber(Math.cos(this.sign*this.mag)):se(0,0,0)}tan(){return this.mag<0?this:this.layer===0?M.fromNumber(Math.tan(this.sign*this.mag)):se(0,0,0)}asin(){return this.mag<0?this:this.layer===0?M.fromNumber(Math.asin(this.sign*this.mag)):se(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?M.fromNumber(Math.acos(this.toNumber())):this.layer===0?M.fromNumber(Math.acos(this.sign*this.mag)):se(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?M.fromNumber(Math.atan(this.sign*this.mag)):M.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return M.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return M.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?se(Number.NaN,Number.NaN,Number.NaN):M.ln(this.add(1).div(M.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(M.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};_(M,"dZero"),_(M,"dOne"),_(M,"dNegOne"),_(M,"dTwo"),_(M,"dTen"),_(M,"dNaN"),_(M,"dInf"),_(M,"dNegInf"),_(M,"dNumberMax"),_(M,"dNumberMin"),_(M,"fromStringCache",new Na(Pa));let i=M;i.dZero=se(0,0,0);i.dOne=se(1,0,1);i.dNegOne=se(-1,0,1);i.dTwo=se(1,0,2);i.dTen=se(1,0,10);i.dNaN=se(Number.NaN,Number.NaN,Number.NaN);i.dInf=se(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);i.dNegInf=se(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);i.dNumberMax=K(1,0,Number.MAX_VALUE);i.dNumberMin=K(1,0,Number.MIN_VALUE);T=i.fromValue_noAlloc;K=i.fromComponents;se=i.fromComponents_noNormalize;i.fromMantissaExponent;i.fromMantissaExponent_noNormalize;const Ra=new i(1);function un(n,e,t=!0){let r=i.log10(n).floor(),a=i.div(n,i.pow(10,r));a.toStringWithDecimalPlaces(e)==="10"&&(a=Ra,r=r.add(1));const s=r.gte(1e9)?P(r,Math.max(Math.max(e,3),le.defaultDecimalsShown)):r.gte(1e4)?$n(r,0):r.toStringWithDecimalPlaces(0);return t?a.toStringWithDecimalPlaces(e)+"e"+s:"e"+s}function $n(n,e){if(n==null)return"NaN";if(n=new i(n),n.mag<.001)return 0 .toFixed(e);const r=n.toStringWithDecimalPlaces(e).split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.length===1?r[0]:r[0]+"."+r[1]}function Kr(n,e){return n==null?"NaN":(n=new i(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),le.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}const Oa=new i("eeee1000"),Fa=new i("e100000"),Mr=new i("e1000"),Yr=new i(1e9),_a=new i(1e6),Va=new i(1e3),Ga=new i(.98),Ua=new i(.001),Xr=new i(0);function P(n,e,t){if(e==null&&(e=le.defaultDecimalsShown),t=t??le.defaultShowSmall,n=new i(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag))return"NaN";if(n.sign<0)return"-"+P(n.neg(),e);if(n.mag===Number.POSITIVE_INFINITY)return"Infinity";if(n.gte(Oa)){const r=n.slog();return r.gte(_a)?"F"+P(r.floor()):i.pow(10,r.sub(r.floor())).toStringWithDecimalPlaces(3)+"F"+$n(r.floor(),0)}else{if(n.gte(Fa))return un(n,0,!1);if(n.gte(Mr))return un(n,0);if(n.gte(Yr))return un(n,e);if(n.gte(Va))return $n(n,0);if(n.gte(Ua)||!t)return Kr(n,e);if(n.eq(Xr))return 0 .toFixed(e)}return n=ei(n),n.lt(Mr)?un(n,e).replace(/([^(?:e|F)]*)$/,"-$1"):P(n,e)+"⁻¹"}function it(n){return n=new i(n),n.sign<0?"-"+it(n.neg()):n.gte(Yr)||n.lte(Ga)&&!n.eq(Xr)?P(n):P(n,0)}function Qr(n){return i.lt(n,0)?"-"+Qr(i.neg(n)):i.gt(n,2**51)?P(i.div(n,31536e3))+"y":(n=new i(n).toNumber(),n<60?P(n)+"s":n<3600?it(Math.floor(n/60))+"m "+P(n%60)+"s":n<86400?it(Math.floor(n/3600))+"h "+it(Math.floor(n/60)%60)+"m "+it(n%60)+"s":n<31536e3?it(Math.floor(n/84600)%365)+"d "+it(Math.floor(n/3600)%24)+"h "+it(Math.floor(n/60)%60)+"m":it(Math.floor(n/31536e3))+"y "+it(Math.floor(n/84600)%365)+"d "+it(Math.floor(n/3600)%24)+"h")}function Ha(n,e,t){n=new i(n);let r=n.toStringWithDecimalPlaces(e);return new i(r).gte(t)&&(r=i.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),r}function ja(n,e){return P(n,e,!0)}function ei(n){let e=i.log10(n).ceil();const t=i.div(n,i.pow(10,e));return e=e.neg(),n=new i(10).pow(e).times(t),n}const za=Object.freeze(Object.defineProperty({__proto__:null,commaFormat:$n,default:i,exponentialFormat:un,format:P,formatSmall:ja,formatTime:Qr,formatWhole:it,invertOOM:ei,regularFormat:Kr,toPlaces:Ha},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:Wa,commaFormat:Za,regularFormat:Ja,format:q,formatWhole:pn,formatTime:Fn,toPlaces:Ka,formatSmall:_n,invertOOM:Ya}=za;window.Decimal=i;window.exponentialFormat=Wa;window.commaFormat=Za;window.regularFormat=Ja;window.format=q;window.formatWhole=pn;window.formatTime=Fn;window.toPlaces=Ka;window.formatSmall=_n;window.invertOOM=Ya;const ti=i.ln(10);function Dn(n){return n}function ln(n,...e){const t=e.find(r=>L(r));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function Xa(n,e){return L(e)?e.invert(i.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function Qa(n,e){return L(e)?e.isIntegrable()?d.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function es(n){return d.neg(n)}function ts(n,e,t){return L(e)?e.invert(i.sub(n,Ee(t))):L(t)?t.invert(i.sub(n,Ee(e))):(console.error("Could not invert due to no input being a variable"),0)}function ns(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.times(t,e.innermostVariable??0).add(r)}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n);return d.times(e,t.innermostVariable??0).add(r)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function rs(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.add(r,t)}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n);return d.add(r,e)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function is(n,e,t){return L(e)?e.invert(i.add(n,Ee(t))):L(t)?t.invert(i.sub(Ee(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function as(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.sub(r,d.times(t,e.innermostVariable??0))}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n);return d.times(e,t.innermostVariable??0).sub(r)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ss(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.sub(r,t)}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n);return d.sub(r,e)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ls(n,e,t){return L(e)?e.invert(i.div(n,Ee(t))):L(t)?t.invert(i.div(n,Ee(e))):(console.error("Could not invert due to no input being a variable"),0)}function os(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.times(r,t)}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n);return d.times(r,e)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function us(n,e,t){return L(e)?d.div(n,t):L(t)?d.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),d.constant(0))}function cs(n,e,t){return L(e)?e.invert(i.mul(n,Ee(t))):L(t)?t.invert(i.div(Ee(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ds(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.div(r,t)}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n);return d.div(e,r)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function fs(n,e,t){return L(e)?d.mul(n,t):L(t)?d.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),d.constant(0))}function ms(n,e){return L(e)?e.invert(i.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function ps(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.ln(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function vs(n,e){return L(e)?e.invert(i.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function gs(n){return i.ln(n).sub(1).times(n).div(ti)}function bs(n,e){if(L(e)){const t=ti.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function hs(n,e){return L(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n)],evaluate:gs,invert:bs}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function ys(n,e,t){return L(e)?e.invert(i.pow(Ee(t),n)):L(t)?t.invert(i.root(Ee(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ks(n,e){return i.ln(n).sub(1).times(n).div(i.ln(e))}function Cs(n,e,t){if(L(e)){const r=i.ln(Ee(t)).times(n);return e.invert(r.div(r.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function ws(n,e,t){return L(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n),t],evaluate:ks,invert:Cs}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function Ms(n,e){return L(e)?e.invert(i.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function xs(n){return i.ln(n).sub(1).times(n).div(i.ln(2))}function Ns(n,e){if(L(e)){const t=i.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ss(n,e){return L(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n)],evaluate:xs,invert:Ns}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function Ts(n,e){return L(e)?e.invert(i.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ds(n){return i.ln(n).sub(1).times(n)}function As(n,e){return L(e)?e.invert(i.div(n,i.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Es(n,e){return L(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n)],evaluate:Ds,invert:As}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function Is(n,e,t){return L(e)?e.invert(i.root(n,Ee(t))):L(t)?t.invert(i.ln(n).div(i.ln(Ee(e)))):(console.error("Could not invert due to no input being a variable"),0)}function Ps(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n),a=d.add(t,1);return d.pow(r,a).div(a)}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n);return d.pow(e,r).div(d.ln(e))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function $s(n,e){return L(e)?e.invert(i.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function Ls(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.pow10(t).div(d.ln(10))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Bs(n,e,t){return L(e)?e.invert(i.ln(n).div(i.ln(Ee(t)))):L(t)?t.invert(i.root(Ee(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function qs(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.pow(t,r).div(d.ln(t))}else if(L(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=t.getIntegralFormula(n),a=d.add(e,1);return d.pow(r,a).div(a)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Rs(n,e,t){return L(e)?e.invert(i.root(n,i.recip(Ee(t)))):L(t)?t.invert(i.ln(Ee(e)).div(i.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function Os(n,e,t){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const r=e.getIntegralFormula(n);return d.pow(r,d.recip(t).add(1)).times(t).div(d.add(t,1))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Fs(n,e){return L(e)?e.invert(i.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function _s(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.exp(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Vs(n,e=2,t=i.fromComponents_noNormalize(1,0,1)){const r=i.minabs(e,1e308).toNumber();return i.tetrate(n,r,t)}function Gs(n,e,t,r){return L(e)?e.invert(i.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function Us(n,e=2,t=i.fromComponents_noNormalize(1,0,1)){const r=i.minabs(e,1e308).toNumber();return i.iteratedexp(n,r,new i(t))}function Hs(n,e,t,r){return L(e)?e.invert(i.iteratedlog(n,Math.E,i.minabs(1e308,Ee(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function js(n,e=10,t=2){const r=i.minabs(t,1e308).toNumber();return i.iteratedlog(n,e,r)}function zs(n,e=10){const t=i.minabs(e,1e308).toNumber();return i.slog(n,t)}function Ws(n,e,t){return L(e)?e.invert(i.tetrate(n,i.minabs(1e308,Ee(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Zs(n,e,t){const r=i.minabs(e,1e308).toNumber();return i.layeradd(n,r,t)}function Js(n,e,t,r){return L(e)?e.invert(i.layeradd(n,i.minabs(1e308,Ee(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Ks(n,e){return L(e)?e.invert(i.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ys(n,e){return L(e)?e.invert(i.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function Xs(n,e,t){const r=i.minabs(e,1e308).toNumber();return i.pentate(n,r,t)}function Qs(n,e){return L(e)?e.invert(i.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function el(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function tl(n,e){return L(e)?e.invert(i.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function nl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.sin(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function rl(n,e){return L(e)?e.invert(i.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function il(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function al(n,e){return L(e)?e.invert(i.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function sl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.asin(t).times(t).add(d.sqrt(d.sub(1,d.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ll(n,e){return L(e)?e.invert(i.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function ol(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.acos(t).times(t).sub(d.sqrt(d.sub(1,d.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ul(n,e){return L(e)?e.invert(i.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function cl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.atan(t).times(t).sub(d.ln(d.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function dl(n,e){return L(e)?e.invert(i.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function fl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cosh(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ml(n,e){return L(e)?e.invert(i.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function pl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.sinh(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function vl(n,e){return L(e)?e.invert(i.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function gl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function bl(n,e){return L(e)?e.invert(i.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function hl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.asinh(t).times(t).sub(d.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function yl(n,e){return L(e)?e.invert(i.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function kl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.acosh(t).times(t).sub(d.add(t,1).sqrt().times(d.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Cl(n,e){return L(e)?e.invert(i.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function wl(n,e){if(L(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.atanh(t).times(t).add(d.sub(1,d.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ut(n){return(e,t)=>new d({inputs:[e,t],evaluate:n,invert:Dn})}function L(n){return n instanceof vn&&n.hasVariable()}function Ee(n,e){return n instanceof vn?n.evaluate(e):c(n)}function Ml(){return d.pow(this,2).div(2)}function xl(){return this}const J=class J{constructor(e){_(this,"inputs");_(this,"internalEvaluate");_(this,"internalInvert");_(this,"internalIntegrate");_(this,"internalIntegrateInner");_(this,"applySubstitution");_(this,"description");_(this,"internalVariables");_(this,"innermostVariable");_(this,"negate",this.neg);_(this,"negated",this.neg);_(this,"sgn",this.sign);_(this,"plus",this.add);_(this,"subtract",this.sub);_(this,"minus",this.sub);_(this,"multiply",this.mul);_(this,"times",this.mul);_(this,"divide",this.div);_(this,"divideBy",this.div);_(this,"dividedBy",this.div);_(this,"reciprocal",this.recip);_(this,"reciprocate",this.recip);_(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(r=>typeof r=="object"&&vt in r?r[vt]:r)),"variable"in e?(typeof e.variable=="object"&&vt in e.variable&&(e.variable=e.variable[vt]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Ml,internalIntegrateInner:xl,applySubstitution:Dn}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:r,invert:a,integrate:s,integrateInner:u,applySubstitution:o}=e,f=t.reduce((b,x)=>b+(x instanceof J?x.internalVariables:0),0),m=t.find(b=>b instanceof J&&b.hasVariable()),p=f===1?m==null?void 0:m.innermostVariable:void 0,g=(m==null?void 0:m.isInvertible())??!1,w=(m==null?void 0:m.isIntegrable())??!1;return{inputs:t,internalEvaluate:r,internalInvert:g?a:void 0,internalIntegrate:w?s:void 0,internalIntegrateInner:u,applySubstitution:o,innermostVariable:p,internalVariables:f}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(r=>Ee(r,e))))??(this.hasVariable()?e:null)??Ee(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,r)=>t instanceof J&&e.inputs[r]instanceof J?t.equals(e.inputs[r]):!(t instanceof J)&&!(e.inputs[r]instanceof J)&&i.eq(c(t),c(e.inputs[r])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new d({inputs:[e]})}static variable(e){return new d({variable:e})}static stringify(e){return e instanceof J?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":q(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(d.stringify).join(", ")})`:q(c(e))}static step(e,t,r){const a=r(d.variable(0)),s=$(t);function u(f){return i.lt(f,c(s))?f:i.add(a.evaluate(i.sub(f,c(s))),c(s))}function o(f,m){return L(m)&&a.isInvertible()?(i.gt(f,c(s))&&(f=i.add(a.invert(i.sub(f,c(s))),c(s))),m.invert(f)):(console.error("Could not invert due to no input being a variable"),0)}return new d({inputs:[e],evaluate:u,invert:a.isInvertible()&&a.hasVariable()?o:void 0,description:"indeterminate"})}static if(e,t,r,a){const s=U(0),u=d.variable(s),o=r(u),f=a==null?void 0:a(u),m=$(t);function p(w){return c(m)?(s.value=w,o.evaluate()):f?(s.value=w,f.evaluate()):w}function g(w,b){return!L(b)||!o.isInvertible()||f!=null&&!f.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):c(m)?b.invert(o.invert(w)):f?b.invert(f.invert(w)):b.invert(w)}return new d({inputs:[e],evaluate:p,invert:o.isInvertible()&&o.hasVariable()?g:void 0,description:"indeterminate"})}static conditional(e,t,r,a){return d.if(e,t,r,a)}static abs(e){return new d({inputs:[e],evaluate:i.abs})}static neg(e){return new d({inputs:[e],evaluate:i.neg,invert:Xa,applySubstitution:es,integrate:Qa})}static sign(e){return new d({inputs:[e],evaluate:i.sign})}static round(e){return new d({inputs:[e],evaluate:i.round,invert:ln})}static floor(e){return new d({inputs:[e],evaluate:i.floor,invert:ln})}static ceil(e){return new d({inputs:[e],evaluate:i.ceil,invert:ln})}static trunc(e){return new d({inputs:[e],evaluate:i.trunc,invert:ln})}static add(e,t){return new d({inputs:[e,t],evaluate:i.add,invert:ts,integrate:ns,integrateInner:rs,applySubstitution:Dn})}static sub(e,t){return new d({inputs:[e,t],evaluate:i.sub,invert:is,integrate:as,integrateInner:ss,applySubstitution:Dn})}static mul(e,t){return new d({inputs:[e,t],evaluate:i.mul,invert:ls,integrate:os,applySubstitution:us})}static div(e,t){return new d({inputs:[e,t],evaluate:i.div,invert:cs,integrate:ds,applySubstitution:fs})}static recip(e){return new d({inputs:[e],evaluate:i.recip,invert:ms,integrate:ps})}static clamp(e,t,r){return new d({inputs:[e,t,r],evaluate:i.clamp,invert:ln})}static pLog10(e){return new d({inputs:[e],evaluate:i.pLog10})}static absLog10(e){return new d({inputs:[e],evaluate:i.absLog10})}static log10(e){return new d({inputs:[e],evaluate:i.log10,invert:vs,integrate:hs})}static log(e,t){return new d({inputs:[e,t],evaluate:i.log,invert:ys,integrate:ws})}static log2(e){return new d({inputs:[e],evaluate:i.log2,invert:Ms,integrate:Ss})}static ln(e){return new d({inputs:[e],evaluate:i.ln,invert:Ts,integrate:Es})}static pow(e,t){return new d({inputs:[e,t],evaluate:i.pow,invert:Is,integrate:Ps})}static pow10(e){return new d({inputs:[e],evaluate:i.pow10,invert:$s,integrate:Ls})}static pow_base(e,t){return new d({inputs:[e,t],evaluate:i.pow_base,invert:Bs,integrate:qs})}static root(e,t){return new d({inputs:[e,t],evaluate:i.root,invert:Rs,integrate:Os})}static factorial(e){return new d({inputs:[e],evaluate:i.factorial})}static gamma(e){return new d({inputs:[e],evaluate:i.gamma})}static lngamma(e){return new d({inputs:[e],evaluate:i.lngamma})}static exp(e){return new d({inputs:[e],evaluate:i.exp,invert:Fs,integrate:_s})}static sqr(e){return d.pow(e,2)}static sqrt(e){return d.root(e,2)}static cube(e){return d.pow(e,3)}static cbrt(e){return d.root(e,3)}static tetrate(e,t=2,r=i.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,r],evaluate:Vs,invert:Gs})}static iteratedexp(e,t=2,r=i.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,r],evaluate:Us,invert:Hs})}static iteratedlog(e,t=10,r=1){return new d({inputs:[e,t,r],evaluate:js})}static slog(e,t=10){return new d({inputs:[e,t],evaluate:zs,invert:Ws})}static layeradd10(e,t){return new d({inputs:[e,t],evaluate:i.layeradd10})}static layeradd(e,t,r=10){return new d({inputs:[e,t,r],evaluate:Zs,invert:Js})}static lambertw(e){return new d({inputs:[e],evaluate:i.lambertw,invert:Ks})}static ssqrt(e){return new d({inputs:[e],evaluate:i.ssqrt,invert:Ys})}static pentate(e,t=2,r=i.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,r],evaluate:Xs})}static sin(e){return new d({inputs:[e],evaluate:i.sin,invert:al,integrate:el})}static cos(e){return new d({inputs:[e],evaluate:i.cos,invert:ll,integrate:nl})}static tan(e){return new d({inputs:[e],evaluate:i.tan,invert:ul,integrate:il})}static asin(e){return new d({inputs:[e],evaluate:i.asin,invert:Qs,integrate:sl})}static acos(e){return new d({inputs:[e],evaluate:i.acos,invert:tl,integrate:ol})}static atan(e){return new d({inputs:[e],evaluate:i.atan,invert:rl,integrate:cl})}static sinh(e){return new d({inputs:[e],evaluate:i.sinh,invert:bl,integrate:fl})}static cosh(e){return new d({inputs:[e],evaluate:i.cosh,invert:yl,integrate:pl})}static tanh(e){return new d({inputs:[e],evaluate:i.tanh,invert:Cl,integrate:gl})}static asinh(e){return new d({inputs:[e],evaluate:i.asinh,invert:dl,integrate:hl})}static acosh(e){return new d({inputs:[e],evaluate:i.acosh,invert:ml,integrate:kl})}static atanh(e){return new d({inputs:[e],evaluate:i.atanh,invert:vl,integrate:wl})}stringify(){return d.stringify(this)}step(e,t){return d.step(this,e,t)}if(e,t){return d.if(this,e,t)}conditional(e,t){return d.if(this,e,t)}abs(){return d.abs(this)}neg(){return d.neg(this)}sign(){return d.sign(this)}round(){return d.round(this)}floor(){return d.floor(this)}ceil(){return d.ceil(this)}trunc(){return d.trunc(this)}add(e){return d.add(this,e)}sub(e){return d.sub(this,e)}mul(e){return d.mul(this,e)}div(e){return d.div(this,e)}recip(){return d.recip(this)}max(e){return d.max(this,e)}min(e){return d.min(this,e)}maxabs(e){return d.maxabs(this,e)}minabs(e){return d.minabs(this,e)}clamp(e,t){return d.clamp(this,e,t)}clampMin(e){return d.clampMin(this,e)}clampMax(e){return d.clampMax(this,e)}pLog10(){return d.pLog10(this)}absLog10(){return d.absLog10(this)}log10(){return d.log10(this)}log(e){return d.log(this,e)}log2(){return d.log2(this)}ln(){return d.ln(this)}pow(e){return d.pow(this,e)}pow10(){return d.pow10(this)}pow_base(e){return d.pow_base(this,e)}root(e){return d.root(this,e)}factorial(){return d.factorial(this)}gamma(){return d.gamma(this)}lngamma(){return d.lngamma(this)}exp(){return d.exp(this)}sqr(){return d.pow(this,2)}sqrt(){return d.root(this,2)}cube(){return d.pow(this,3)}cbrt(){return d.root(this,3)}tetrate(e=2,t=i.fromComponents_noNormalize(1,0,1)){return d.tetrate(this,e,t)}iteratedexp(e=2,t=i.fromComponents_noNormalize(1,0,1)){return d.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return d.iteratedlog(this,e,t)}slog(e=10){return d.slog(this,e)}layeradd10(e){return d.layeradd10(this,e)}layeradd(e,t){return d.layeradd(this,e,t)}lambertw(){return d.lambertw(this)}ssqrt(){return d.ssqrt(this)}pentate(e=2,t=i.fromComponents_noNormalize(1,0,1)){return d.pentate(this,e,t)}sin(){return d.sin(this)}cos(){return d.cos(this)}tan(){return d.tan(this)}asin(){return d.asin(this)}acos(){return d.acos(this)}atan(){return d.atan(this)}sinh(){return d.sinh(this)}cosh(){return d.cosh(this)}tanh(){return d.tanh(this)}asinh(){return d.asinh(this)}acosh(){return d.acosh(this)}atanh(){return d.atanh(this)}};_(J,"negate",J.neg),_(J,"negated",J.neg),_(J,"sgn",J.sign),_(J,"plus",J.add),_(J,"subtract",J.sub),_(J,"minus",J.sub),_(J,"multiply",J.mul),_(J,"times",J.mul),_(J,"divide",J.div),_(J,"divideBy",J.div),_(J,"dividedBy",J.div),_(J,"reciprocal",J.recip),_(J,"reciprocate",J.recip),_(J,"max",Ut(i.max)),_(J,"min",Ut(i.min)),_(J,"minabs",Ut(i.minabs)),_(J,"maxabs",Ut(i.maxabs)),_(J,"clampMin",Ut(i.clampMin)),_(J,"clampMax",Ut(i.clampMax)),_(J,"logarithm",J.log);let vn=J;class d extends vn{constructor(){super(...arguments);_(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),r=i.add(this.evaluate(0),this.evaluate(1)).div(2);return i.sub(r,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),d.constant(0);let r=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(a=>r=a(r)),this.integralFormula=r}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),d.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),d.constant(0)):(t.push(r=>this.applySubstitution.call(this,r,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),d.constant(0)))}}function Nl(n,e,t=!0,r,a=i.dInf){const s=$(t),u=$(r),o=$(a);return v(()=>{const f=c(o);if(i.eq(f,1))return i.gte(e.value,n.evaluate())?i.dOne:i.dZero;const m=c(s),p=c(u)??(m?10:0);let g=0;if(i.gt(f,p)){if(!n.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(m){if(!n.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;g=i.floor(n.invertIntegral(i.add(e.value,n.evaluateIntegral()))).sub(c(n.innermostVariable)??0)}else g=i.floor(n.invert(e.value))}if(g=i.clampMax(g,f),p>0){const w=g;g=i.sub(g,p).clampMin(0);let b;for(m?b=An(n,g,!0,0):b=n.evaluate(i.add(c(n.innermostVariable)??0,g));i.lt(g,f)&&i.lt(g,Number.MAX_SAFE_INTEGER)&&i.add(w,1).gte(g);){const x=n.evaluate(g.add(c(n.innermostVariable)??0));if(i.add(b,x).lte(e.value))g=g.add(1),b=i.add(b,x);else break}}return g})}function An(n,e,t=!0,r){if(i.eq(e,1))return n.evaluate();const a=c(n.innermostVariable)??0;let s=i.add(e,a);const u=s;r??(r=t?10:0),s=s.sub(r).clampMin(a);let o=0;if(i.gt(e,r)){if(!n.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(t){if(!n.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(o=i.sub(n.evaluateIntegral(s),n.evaluateIntegral()),u.gt(1e308))return i.add(o,i.sub(u,s).times(n.evaluate(s)))}else if(o=n.evaluate(s),s=s.add(1),u.gt(1e308))return i.sub(u,s).add(1).times(o)}for(let f=s.toNumber();f<u.toNumber();f++)o=i.add(o,n.evaluate(f));return o}window.Formula=d;const It=Symbol("PersistentState"),ut=Symbol("DefaultValue"),Ln=Symbol("StackTrace"),tr=Symbol("Deleted"),vt=Symbol("NonPersistent"),Ft=Symbol("SaveDataPath"),ct=Symbol("SkipPersistence");function Sl(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function xr(n,e){var t;i.isNaN(e)&&(me.hasNaN||(R.autosave=!1,me.hasNaN=!0,me.NaNPath=n[Ft],me.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[Ft])==null?void 0:t.join(".")}`)),n[It].value=e}function Ke(n,e=!0){const t=ze(n)?n:U(n);ze(n)&&(n=n.value);const r=v({get(){return t.value},set(s){e?xr(a,s):a[It].value=s}});r[ut]=n;const a={get value(){return t.value},set value(s){e?xr(a,s):a[It].value=s},__v_isRef:!0,[It]:t,[ut]:n,[Ln]:Sl(),[tr]:!1,[vt]:r,[Ft]:void 0};return mt.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",a,`
Created at:
`+a[Ln]):cn[mt[mt.length-1]].add(a),a}function Tl(n){return n!=null&&typeof n=="object"&&It in n}function Y(n){return!(Et in n)&&vt in n?n[vt]:new Proxy(n,{get(e,t){if(t!==It)return t===ct?!0:e[t]},set(e,t,r){return e[t]=r,!0},has(e,t){return t===It?!1:t===ct?!0:Reflect.has(e,t)}})}$e.on("addLayer",(n,e)=>{const t=[],r=(a,s=[])=>{let u=!1;return Object.keys(a).forEach(o=>{let f=a[o];if(f!=null&&typeof f=="object"){if(ct in f&&f[ct]===!0)return;if(Et in f&&(f=f[Et]),Tl(f)){if(u=!0,f[tr]){console.warn("Deleted persistent ref present in returned object. Ignoring...",f,`
Created at:
`+f[Ln]);return}cn[n.id].delete(f);const m=[n.id,...s,o];f[Ft]!=null&&JSON.stringify(m)!==JSON.stringify(f[Ft])&&console.error(`Persistent ref is being saved to \`${m.join(".")}\` when it's already present at \`${f[Ft].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),f[Ft]=m;const p=s.reduce((w,b)=>(b in w||(w[b]={}),w[b]),e),g=p[o];p[o]=f[It],wi(p)?g!=null?p[o]=g:p[o]=f[ut]:g!=null?p[o].value=g:p[o].value=f[ut]}else!(f instanceof i)&&!(f instanceof d)&&!ze(f)&&!t.includes(f)&&(typeof f.type=="symbol"&&t.push(f),r(f,[...s,o])&&(Array.isArray(f)&&!Array.isArray(a)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",Et in a?a[Et]:a,o):u=!0))}}),u};r(n[Et]),cn[n.id].forEach(a=>{a[tr]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+a[Ln])}),cn[n.id].clear()});function we(n,e="points",t=0,r=void 0){const s=ze(n)?n:Ke(n);if(s.displayName=e,s.precision=t,s.small=r,s.defaultValue=c(n),!ze(n)){const u=s[vt];u.displayName=e,u.precision=t,u.small=r,u.defaultValue=n}return s}function Vn(n){const e=Ke(n.value);return ke(n,t=>{Hn.value||i.gt(t,e.value)&&(e.value=t)}),e}function Bn(n){const e=Ke(n.value);return ke(n,(t,r)=>{Hn.value||i.gt(t,r)&&(e.value=i.add(e.value,i.sub(t,r)))}),e}new i("10^^8");new i("1e100");function St(n,e){const t=e??n.value;return i.eq(n.precision,0)?pn(n.small?t:i.floor(t)):q(t,n.precision,n.small)}const Dl={class:"table"},_t=X({__name:"Column",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=v(()=>rn[z.theme].mergeAdjacent&&e.dontMerge!==!0);return(r,a)=>(S(),A("div",Dl,[k("div",{class:he(["col",{mergeAdjacent:t.value}])},[bt(r.$slots,"default")],2)]))}});let Al=0;function El(n="feature-"){return n+Al++}var Pt=(n=>(n[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.None=2]="None",n))(Pt||{});function Qt(n){const e=c(n);return e!==2&&e!==!1}function Il(n){return c(n)===1}function Nr(n,e){return n!=null&&typeof n=="object"&&"type"in n&&n.type===e}function ur(n,...e){const t=[],r=a=>{Object.keys(a).forEach(s=>{const u=a[s];u!=null&&typeof u=="object"&&u.__v_isVNode!==!0&&(e.includes(u.type)?t.push(u):!(u instanceof i)&&!ze(u)&&!(u instanceof d)&&r(u))})};return r(n),t}const Pl=X({__name:"Node",props:{id:{}},setup(n){const e=n,t=Pn(jr,()=>{}),r=Pn(zr,()=>{}),a=On(null),s=v(()=>a.value&&a.value.parentElement);return ke([s,Lt(e,"id")],([u,o],[f,m])=>{f&&r(c(m)),u&&t(o,u)}),Fr(()=>r(e.id)),(u,o)=>(S(),A("div",{class:"node",ref_key:"node",ref:a},null,512))}}),En=de(Pl,[["__scopeId","data-v-8bf3567f"]]),$l=X({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((r,a)=>()=>a(r),()=>l(E,null,[e.components.map(r=>B(r))]))();return(r,a)=>c(Qt)(c(r.visibility))?(S(),A("div",{key:0,style:Ae([{visibility:c(Il)(c(r.visibility))?"hidden":void 0},c(r.style)]),class:he({feature:!0,...c(r.classes)})},[l(t),l(En,{id:r.id},null,8,["id"])],6)):V("",!0)}}),Ll=["disabled"],Bl=X({__name:"Clickable",props:{canClick:{},display:{},dataAttributes:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=v(()=>t.dataAttributes?Object.fromEntries(Object.entries(c(t.dataAttributes)).map(([f,m])=>[`data-${f}`,m])):{}),a=e,s=()=>t.display==null?l(E,null,null):B(t.display),{start:u,stop:o}=fr(()=>a("hold"));return(f,m)=>(S(),A("button",ht({onClick:m[0]||(m[0]=p=>a("click",p)),onMousedown:m[1]||(m[1]=(...p)=>c(u)&&c(u)(...p)),onMouseleave:m[2]||(m[2]=(...p)=>c(o)&&c(o)(...p)),onMouseup:m[3]||(m[3]=(...p)=>c(o)&&c(o)(...p)),onTouchstartPassive:m[4]||(m[4]=(...p)=>c(u)&&c(u)(...p)),onTouchendPassive:m[5]||(m[5]=(...p)=>c(o)&&c(o)(...p)),onTouchcancelPassive:m[6]||(m[6]=(...p)=>c(o)&&c(o)(...p))},c(r.value),{class:{clickable:!0,can:c(f.canClick),locked:!c(f.canClick)},disabled:!c(f.canClick)}),[l(s)],16,Ll))}}),cr=de(Bl,[["__scopeId","data-v-da884652"]]),ql=Symbol("Clickable");function tt(n){return Me(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:r,onClick:a,onHold:s,dataAttributes:u,...o}=e;let f;typeof r=="object"&&!Zt(r)?f=()=>l("span",null,[r.title!=null?l("div",null,[B(r.title,p=>l("h3",null,[p]))]):null,B(r.description,p=>l("div",null,[p]))]):r!=null&&(f=r);const m={type:ql,...o,...lt("clickable",e,()=>l(cr,{canClick:m.canClick,onClick:m.onClick,onHold:m.onClick,display:m.display,dataAttributes:m.dataAttributes},null)),canClick:$(t)??!0,display:f,dataAttributes:u,onClick:a==null?void 0:function(p){c(m.canClick)!==!1&&a.call(m,p)},onHold:s==null?void 0:function(){c(m.canClick)!==!1&&s.call(m)}};return m})}const Rl=["x1","y1","x2","y2"],Ol=X({__name:"Link",props:{link:{},startNode:{},endNode:{},boundingRect:{}},setup(n){const e=n,t=v(()=>{const s=e.startNode.rect,u=e.boundingRect,o=u?{x:s.x+s.width/2-u.x,y:s.y+s.height/2-u.y}:{x:0,y:0};return e.link.offsetStart&&(o.x+=e.link.offsetStart.x,o.y+=e.link.offsetStart.y),o}),r=v(()=>{const s=e.endNode.rect,u=e.boundingRect,o=u?{x:s.x+s.width/2-u.x,y:s.y+s.height/2-u.y}:{x:0,y:0};return e.link.offsetEnd&&(o.x+=e.link.offsetEnd.x,o.y+=e.link.offsetEnd.y),o}),a=v(()=>zl(e.link));return(s,u)=>(S(),A("line",ht({"stroke-width":"15px",stroke:"white"},a.value,{x1:t.value.x,y1:t.value.y,x2:r.value.x,y2:r.value.y}),null,16,Rl))}}),Fl=X({__name:"Links",props:{links:{}},setup(n){var m;const e=n;function t(){var p;o.value=(p=a.value)==null?void 0:p.getBoundingClientRect()}const r=new ResizeObserver(t),a=On(null),s=Pn(Wr,U({})),u=Pn(Zr,U(void 0)),o=U((m=a.value)==null?void 0:m.getBoundingClientRect());ke(u,t),tn(()=>{const p=a.value;p!=null&&r.observe(p),t()});const f=v(()=>{var g;const p=s.value;return((g=c(e.links))==null?void 0:g.filter(w=>{var b,x;return((b=p[w.startNode.id])==null?void 0:b.rect)&&((x=p[w.endNode.id])==null?void 0:x.rect)}))??[]});return(p,g)=>(S(),A(E,null,[f.value?(S(),A("svg",Mi(ht({key:0},p.$attrs)),[(S(!0),A(E,null,At(f.value,(w,b)=>(S(),ve(Ol,{key:b,link:w,boundingRect:o.value,startNode:c(s)[w.startNode.id],endNode:c(s)[w.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):V("",!0),k("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}}),dr=de(Fl,[["__scopeId","data-v-0735ced9"]]),_l=X({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{},wrapper:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.display==null?l(E,null,null):B(t.display,m=>l("div",null,[m])),s=v(()=>t.wrapper??l("div",null,null)),{start:u,stop:o}=fr(()=>r("hold")),f=v(()=>{const m=c(t.glowColor);return{backgroundColor:c(t.color),boxShadow:m?`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${m}`:"none"}});return(m,p)=>(S(),ve(c(s),null,{default:j(()=>[k("button",{style:Ae(f.value),class:he({treeNode:!0,can:c(m.canClick)}),onClick:p[0]||(p[0]=g=>r("click",g)),onMousedown:p[1]||(p[1]=(...g)=>c(u)&&c(u)(...g)),onMouseleave:p[2]||(p[2]=(...g)=>c(o)&&c(o)(...g)),onMouseup:p[3]||(p[3]=(...g)=>c(o)&&c(o)(...g)),onTouchstartPassive:p[4]||(p[4]=(...g)=>c(u)&&c(u)(...g)),onTouchendPassive:p[5]||(p[5]=(...g)=>c(o)&&c(o)(...g)),onTouchcancelPassive:p[6]||(p[6]=(...g)=>c(o)&&c(o)(...g))},[l(a)],38)]),_:1}))}}),Vl=de(_l,[["__scopeId","data-v-a8be7a53"]]),Gl=Symbol("TreeNode");function Ul(n){return Me(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:r,display:a,glowColor:s,onClick:u,onHold:o,wrapper:f,...m}=e,p={type:Gl,...m,...lt("treeNode",e,()=>l(Vl,{canClick:p.canClick,display:p.display,onClick:p.onClick,onHold:p.onHold,color:p.color,glowColor:p.glowColor,wrapper:p.wrapper},null)),canClick:$(t)??!0,color:$(r),display:a,glowColor:$(s),wrapper:f,onClick:u==null?void 0:function(g){c(p.canClick)!==!1&&u.call(p,g)},onHold:o==null?void 0:function(){c(p.canClick)!==!1&&o.call(p)}};return p})}function ni(n){const e=tt(()=>{const t=n(),{conversion:r,tree:a,treeNode:s,resetTime:u,resetDescription:o,showNextAt:f,minimumGain:m,display:p,canClick:g,onClick:w,resetTree:b,classes:x,...C}=t;let N;return x==null?N=v(()=>({"reset-button":!0})):N=v(()=>({...c($(x)),"reset-button":!0})),{...C,classes:N,conversion:r,tree:a,treeNode:s,resetTree:b??!0,resetTime:u,resetDescription:$(o)??v(()=>i.lt(r.gainResource.value,1e3)?"Reset for ":""),showNextAt:$(f)??!0,minimumGain:$(m)??1,canClick:$(g)??v(()=>i.gte(c(r.actualGain),c(e.minimumGain))),display:p??(()=>l("span",null,[c(e.resetDescription),l("b",null,[St(r.gainResource,i.max(c(r.actualGain),c(e.minimumGain)))])," ",r.gainResource.displayName,c(e.showNextAt)!==!1?l("div",null,[l("br",null,null),c(r.buyMax)?"Next:":"Req:"," ",St(r.baseResource,!c(r.buyMax)&&i.gte(c(r.actualGain),1)?c(r.currentAt):c(r.nextAt))," ",r.baseResource.displayName]):null])),onClick:function(y){c(e.canClick)!==!1&&(r.convert(),c(e.resetTree)===!0&&a&&a.reset(s),u&&(u.value=u[ut]),w==null||w.call(e,y))}}});return e}function hn(n){const e=Ul(()=>{const t=n(),{display:r,append:a,layerID:s,...u}=t;return{...u,layerID:s,display:r??s,append:$(a)??!1,onClick(){if(c(e.append))if(R.tabs.includes(s)){const o=R.tabs.lastIndexOf(s);R.tabs.splice(o,1)}else R.tabs.push(s);else R.tabs.splice(1,1,s)}}});return e}function Hl(n,e){return Array.from({length:Math.ceil(n.length/e)},(t,r)=>n.slice(r*e,r*e+e))}const ri=Symbol("VueFeature");function lt(n,e,t){return{id:El(n),visibility:$(e.visibility),classes:$(e.classes),style:$(e.style),components:t==null?[]:[t],wrappers:[],[ri]:!0}}function B(n,e){if(typeof n=="object"&&ri in n){const{id:t,visibility:r,style:a,classes:s,components:u,wrappers:o}=n;return l($l,{id:t,visibility:r,style:a,classes:s,components:u,wrappers:o},null)}return n=xi(n),(e==null?void 0:e(n))??n}function nr(n,e){return l(E,null,[n.flatMap((t,r)=>r===n.length-1?[t]:[t,e])])}function jl(n){return Object.keys(n).map(e=>n[e]?e:null).filter(e=>e!=null)}function Ge(n,e,t,r){const s=[...jl({row:!0,mergeAdjacent:!0}),r],u=n instanceof Array?n:Object.values(n),o=Hl(u,e);return B(l(E,null,[l("div",{class:"table grouped-table"},[o.map(f=>l(E,null,[l("div",{style:t,class:s},[f.map(m=>B(m))])]))])]))}function Zt(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function fr(n){const e=U(null),t=U(void 0);function r(u){e.value==null&&(e.value=setInterval(s,250)),t.value=u}function a(){e.value!=null&&(clearInterval(e.value),e.value=null)}function s(){n(t.value)}return Fr(a),{start:r,stop:a,handleHolding:s}}function zl(n){return Object.keys(n).reduce((e,t)=>(e[wa(t)]=n[t],e),{})}const Wl=Symbol("Reset");function dt(n){return Me(()=>{const e=n(),{thingsToReset:t,onReset:r,...a}=e,s={type:Wl,...a,onReset:r,thingsToReset:$(t),reset:function(){const u=o=>{if(o!=null&&typeof o=="object"&&!(o instanceof i)&&!(o instanceof d)){if(ct in o&&o[ct]===!0)return;if(ut in o){const f=o;f.value=f[ut]}else!(o instanceof i)&&!ze(o)&&Object.values(o).forEach(f=>u(f))}};c(s.thingsToReset).forEach(u),$e.emit("reset",s),r==null||r()}};return s})}const Mn={};$e.on("removeLayer",n=>{var e;(e=Mn[n.id])==null||e.call(Mn),Mn[n.id]=void 0});function jt(n){return Me(()=>{const{addend:e,description:t,enabled:r,smallerIsBetter:a}=n(),s=$(e),u=r==null?void 0:$(r);return{apply:o=>i.add(o,c(s)),invert:o=>i.sub(o,c(s)),getFormula:o=>d.add(o,s),enabled:u,description:t==null?void 0:()=>l("div",{class:"modifier-container"},[l("span",{class:"modifier-description"},[B(t)]),l("span",{class:"modifier-amount",style:(a===!0?i.gt(c(s),0):i.lt(c(s),0))?"color: var(--danger)":""},[i.gte(c(s),0)?"+":"",_n(c(s))])])}})}function Le(n){return Me(()=>{const{multiplier:e,description:t,enabled:r,smallerIsBetter:a}=n(),s=$(e),u=r==null?void 0:$(r);return{apply:o=>i.times(o,c(s)),invert:o=>i.div(o,c(s)),getFormula:o=>d.times(o,s),enabled:u,description:t==null?void 0:()=>l("div",{class:"modifier-container"},[l("span",{class:"modifier-description"},[B(t)]),l("span",{class:"modifier-amount",style:(a===!0?i.gt(c(s),1):i.lt(c(s),1))?"color: var(--danger)":""},[h("×"),_n(c(s))])])}})}function Ht(n){return Me(()=>{const{exponent:e,description:t,enabled:r,supportLowNumbers:a,smallerIsBetter:s}=n(),u=$(e),o=r==null?void 0:$(r);return{apply:f=>{let m=f;return a&&(m=i.add(m,1)),m=i.pow(m,c(u)),a&&(m=i.sub(m,1)),m},invert:f=>{let m=f;return a&&(m=i.add(m,1)),m=i.root(m,c(u)),a&&(m=i.sub(m,1)),m},getFormula:f=>a?d.add(f,1).pow(u).sub(1):d.pow(f,u),enabled:o,description:t==null?void 0:()=>l("div",{class:"modifier-container"},[l("span",{class:"modifier-description"},[B(t),a?" (+1 effective)":null]),l("span",{class:"modifier-amount",style:(s===!0?i.gt(c(u),1):i.lt(c(u),1))?"color: var(--danger)":""},[h("^"),_n(c(u))])])}})}function Te(n){return Me(()=>{const e=n();return{apply:t=>e.filter(r=>c(r.enabled)!==!1).reduce((r,a)=>a.apply(r),t),invert:e.every(t=>t.invert!=null)?t=>e.filter(r=>c(r.enabled)!==!1).reduceRight((r,a)=>a.invert(r),t):void 0,getFormula:e.every(t=>t.getFormula!=null)?t=>e.reduce((r,a)=>a.enabled==null||a.enabled===!0?a.getFormula(r):d.if(r,a.enabled,s=>a.getFormula(s)),t):void 0,enabled:e.some(t=>t.enabled!=null)?v(()=>e.filter(t=>c(t.enabled)!==!1).length>0):void 0,description:e.some(t=>t.description!=null)?()=>e.filter(t=>c(t.enabled)!==!1).map(t=>c(t.description)).filter(t=>t).map(t=>B(t)):void 0}})}const Ue=X({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(n){return(e,t)=>(S(),A("div",{style:Ae({width:e.width,height:e.height})},null,4))}}),Zl={class:"field"},Jl={key:0,class:"field-title"},mr=X({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.title?B(t.title,o=>l("span",null,[o])):l(E,null,null),s=U(t.options.find(o=>o.value===t.modelValue)??null);ke(Lt(t,"modelValue"),o=>{c(s)!==o&&(s.value=t.options.find(f=>f.value===o)??null)});function u(o){r("update:modelValue",o.value)}return(o,f)=>(S(),A("div",Zl,[o.title?(S(),A("span",Jl,[l(a)])):V("",!0),l(c(Ei),{options:o.options,modelValue:s.value,"onUpdate:modelValue":[f[0]||(f[0]=m=>s.value=m),u],min:1,placeholder:o.placeholder,"close-on-select":o.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}});$e.on("setupVue",n=>n.use(Ii));function I(n){return Me(e=>{const t=n.call(e),{visibility:r,cost:a,resource:s,requiresPay:u,cumulativeCost:o,maxBulkAmount:f,directSum:m,pay:p}=t,g={[ct]:!0,resource:s,visibility:$(r)??Pt.Visible,cost:$(a),requiresPay:$(u)??!0,cumulativeCost:$(o)??!0,maxBulkAmount:$(f)??1,directSum:$(m),partialDisplay:w=>l("span",{style:i.gt(c(g.requirementMet),0)?"":"color: var(--danger)"},[St(s,g.cost instanceof d?An(g.cost,w??1,c(g.cumulativeCost),c(g.directSum)):c(g.cost))," ",s.displayName]),display:w=>l("div",null,[c(g.requiresPay)?"Costs: ":"Requires: ",St(s,g.cost instanceof d?An(g.cost,w??1,c(g.cumulativeCost),c(g.directSum)):c(g.cost))," ",s.displayName]),canMaximize:v(()=>{if(!(g.cost instanceof d))return!1;const w=c(g.maxBulkAmount);if(i.lte(w,1))return!1;const b=c(g.cumulativeCost),x=c(g.directSum)??(b?10:0);return i.lte(w,x)?!0:!(!g.cost.isInvertible()||b===!0&&!g.cost.isIntegrable())}),requirementMet:a instanceof d?Nl(a,s,o??!0,m,f):v(()=>i.gte(s.value,c(g.cost))?1:0),pay:p??function(w){const b=g.cost instanceof d?An(g.cost,w??1,c(g.cumulativeCost),c(g.directSum)):c(g.cost);s.value=i.sub(s.value,b).max(0)}};return g})}function He(n,e){return Me(()=>{const t=$(n),r=$(e);return{[ct]:!0,requirementMet:v(()=>i.gte(c(t),c(r))),requiresPay:!1,visibility:!1}})}function pr(n){return Me(()=>({[ct]:!0,requirementMet:v(()=>Qt(n)),visibility:Pt.None,requiresPay:!1}))}function ii(n,e){return Me(()=>({[ct]:!0,requirementMet:$(n),partialDisplay:void 0,display:void 0,visibility:Pt.None,requiresPay:!1}))}function Gn(n){if(Array.isArray(n))return n.every(Gn);const e=c(n.requirementMet);return typeof e=="boolean"?e:i.gt(e,0)}function ai(n){if(Array.isArray(n))return n.map(ai).reduce(i.min);const e=c(n.requirementMet);return typeof e=="boolean"?e?i.dInf:0:i.gt(e,1)&&c(n.canMaximize)!==!0?1:e}function en(n,e=1){var t;if(Array.isArray(n)&&(n=n.filter(r=>Qt(r.visibility??!0)),n.length===1&&(n=n[0])),Array.isArray(n)){n=n.filter(s=>"partialDisplay"in s);const r=n.filter(s=>c(s.requiresPay)),a=n.filter(s=>!c(s.requiresPay));return l(E,null,[r.length>0?l("div",null,[h("Costs:")," ",nr(r.map(s=>s.partialDisplay(e)),l(E,null,[h(", ")]))]):null,a.length>0?l("div",null,[h("Requires:")," ",nr(a.map(s=>s.partialDisplay(e)),l(E,null,[h(", ")]))]):null])}return((t=n.display)==null?void 0:t.call(n))??l(E,null,null)}function si(n,e=1){var t;Array.isArray(n)?n.filter(r=>c(r.requiresPay)).forEach(r=>{var a;return(a=r.pay)==null?void 0:a.call(r,e)}):c(n.requiresPay)&&((t=n.pay)==null||t.call(n,e))}const Kl=X({__name:"Achievement",props:{display:{},earned:{},requirements:{},image:{},small:{}},setup(n){const e=n,t=()=>e.display==null?l(E,null,null):B(e.display);return(r,a)=>(S(),A("button",{style:Ae({backgroundImage:c(r.earned)&&c(r.image)&&`url(${r.image})`||""}),class:he({achievement:!0,locked:!c(r.earned),done:c(r.earned),small:c(r.small)})},[l(t)],6))}}),Yl=de(Kl,[["__scopeId","data-v-2235e681"]]),Xl=Vr(),Ql=Symbol("Achievement");let Wt=function(n){return n.All="all",n.Configurable="configurable",n.Incomplete="incomplete",n.None="none",n}({});function je(n){const e=Ke(!1,!1);return Me(()=>{const t=(n==null?void 0:n())??{},{requirements:r,display:a,small:s,image:u,showPopups:o,onComplete:f,...m}=t,p=lt("achievement",t,()=>l(Yl,{display:w.display,earned:w.earned,requirements:w.requirements,image:w.image,small:w.small},null));let g;if(typeof a=="object"&&!Zt(a)){const{requirement:b,effectDisplay:x,optionsDisplay:C}=a;g=()=>l("span",null,[b==null?en(r??[]):B(b,N=>l("h3",null,[N])),x==null?null:l("div",null,[B(x,N=>l("b",null,[N]))]),C!=null?l("div",{class:"equal-spaced"},[B(C)]):null])}else a!=null&&(g=a);const w={type:Ql,...m,...p,visibility:v(()=>{switch(z.msDisplay){default:case Wt.All:return c(p.visibility)??!0;case Wt.Configurable:return c(e)&&!(a!=null&&typeof a=="object"&&!Zt(a))?Pt.None:c(p.visibility)??!0;case Wt.Incomplete:return c(e)?Pt.None:c(p.visibility)??!0;case Wt.None:return Pt.None}}),earned:e,onComplete:f,small:$(s),image:$(u),showPopups:$(o)??!0,display:g,requirements:r==null?void 0:[pr(p.visibility??!0),ii(()=>!e.value),...Array.isArray(r)?r:[r]],complete(){var b;if(!e.value&&(e.value=!0,(b=w.onComplete)==null||b.call(w),w.display!=null&&c(w.showPopups)===!0)){let x=w.display;typeof a=="object"&&!Zt(a)&&(a.requirement!=null?x=a.requirement:x=en(r??[])),Xl.info(l("div",null,[l("h3",null,[h("Achievement earned!")]),l("div",null,[B(x)])]))}}};return w.requirements!=null&&sr(()=>{z.active===R.id&&Gn(w.requirements??[])&&w.complete()}),w})}$e.on("loadSettings",n=>{n.msDisplay??(n.msDisplay=Wt.All)});const eo=Object.values(Wt).map(n=>({label:Ur(n),value:n}));$e.on("setupVue",()=>eu(()=>l(mr,{title:l("span",{class:"option-title"},[h("Show achievements"),l("desc",null,[h("Select which achievements to display based on criterias.")])]),options:eo,"onUpdate:modelValue":n=>z.msDisplay=n,modelValue:z.msDisplay},null)));const to=Symbol("Upgrade");function O(n){const e=Ke(!1,!1);return Me(()=>{const t=n(),{requirements:r,display:a,onHold:s,clickableDataAttributes:u,...o}=t;if(t.classes==null)t.classes=v(()=>({bought:c(g.bought),upgrade:!0}));else{const w=$(t.classes);t.classes=v(()=>({...c(w),bought:c(g.bought),upgrade:!0}))}const f=lt("upgrade",t,()=>l(cr,{onClick:g.purchase,onHold:g.onHold,canClick:g.canPurchase,display:g.display,dataAttributes:g.clickableDataAttributes},null)),m=Array.isArray(r)?r:[r];f.visibility!=null&&m.push(pr(f.visibility));let p;if(typeof a=="object"&&!Zt(a)){const{title:w,description:b,effectDisplay:x}=a;p=()=>l("span",{class:"upgrade-content"},[w!=null?l("div",{class:"title"},[B(w,C=>l("h3",null,[C]))]):null,l("hr",{class:"title-divider"},null),B(b,C=>l("div",{class:"description"},[C])),x!=null?l("div",{class:"effect"},[h("Currently: "),B(x)]):null,e.value?null:l("span",{class:"requirements"},[l("br",null,null),en(m)])])}else a!=null&&(p=a);const g={type:to,...o,...f,bought:e,canPurchase:v(()=>!e.value&&Gn(m)),requirements:m,display:p,onHold:s,clickableDataAttributes:u,purchase(){var w;c(g.canPurchase)&&(si(m),e.value=!0,(w=t.onPurchase)==null||w.call(t))}};return g})}const no=X({__name:"TabButton",props:{display:{},floating:{},glowColor:{},active:{type:Boolean},style:{},activeStyle:{}},emits:["selectTab"],setup(n,{emit:e}){const t=n,r=e,a=()=>B(t.display),s=v(()=>{const o=c(t.glowColor);let f={};return o&&(f={boxShadow:`0px 9px 5px -6px ${o}`}),c(t.active)&&c(t.activeStyle)&&(f={...f,...t.activeStyle}),{...t.style,...f}});v(()=>rn[z.theme].floatingTabs||t.floating);function u(){r("selectTab")}return(o,f)=>(S(),A("button",{onClick:u,class:he(["tabButton",{active:o.active}]),style:Ae(s.value)},[l(a)],6))}}),ro=de(no,[["__scopeId","data-v-594d59cc"]]),io=X({__name:"Sticky",setup(n){const e=U("0"),t=new ResizeObserver(a),r=On(null);function a(){let s=r.value;if(s==null)return;let u=0;for(;s.previousSibling;){const o=s.previousSibling;o.dataset&&"vSticky"in o.dataset&&(u+=o.offsetHeight),s=o}e.value=u+"px"}return Yt(a),document.fonts.ready.then(a),tn(()=>{var u;const s=(u=r.value)==null?void 0:u.parentElement;s&&t.observe(s)}),(s,u)=>(S(),A("div",{class:"sticky",style:Ae({top:e.value}),ref_key:"element",ref:r,"data-v-sticky":""},[bt(s.$slots,"default",{},void 0,!0)],4))}}),ao=de(io,[["__scopeId","data-v-a64474f5"]]),rr=Symbol("Tab");function gt(n){return Me(()=>{const e=(n==null?void 0:n())??{},{display:t,...r}=e;return{type:rr,...r,...lt("tab",e,t),display:t}})}const so=X({__name:"TabFamily",props:{activeTab:{},tabs:{},buttonContainerClasses:{},buttonContainerStyle:{},floating:{}},setup(n){const e=n,t=()=>{const o=c(e.activeTab);if(o!=null)return B(o)},r=v(()=>rn[z.theme].floatingTabs||c(e.floating)),a=()=>Object.values(e.tabs).map(o=>B(o)),s=v(()=>{const o=c(e.activeTab);if(Nr(o,rr))return c(o.classes)}),u=v(()=>{const o=c(e.activeTab);if(Nr(o,rr))return c(o.style)});return(o,f)=>(S(),A("div",{class:he(["tab-family-container",s.value]),style:Ae(u.value)},[l(ao,{class:he(["tab-buttons-container",[c(o.buttonContainerClasses),{floating:r.value}]]),style:Ae(c(o.buttonContainerStyle))},{default:j(()=>[k("div",{class:he(["tab-buttons",{floating:r.value}])},[l(a)],2)]),_:1},8,["class","style"]),c(o.activeTab)!=null?(S(),ve(t,{key:0})):V("",!0)],6))}}),lo=de(so,[["__scopeId","data-v-f8e27ceb"]]),oo=Symbol("TabButton"),uo=Symbol("TabFamily");function Un(n,e){Object.keys(n).length===0&&console.error("Cannot create tab family with 0 tabs");const t=Ke(Object.keys(n)[0],!1);return Me(()=>{const r=(e==null?void 0:e())??{},{buttonContainerClasses:a,buttonContainerStyle:s,buttonStyle:u,buttonActiveStyle:o,floating:f,...m}=r,p={type:uo,...m,...lt("tabFamily",r,()=>l(lo,{floating:p.floating,activeTab:p.activeTab,tabs:p.tabs,buttonContainerClasses:p.buttonContainerClasses,buttonContainerStyle:p.buttonContainerStyle},null)),tabs:Object.keys(n).reduce((g,w)=>{const b=n[w](),{tab:x,glowColor:C,display:N,...y}=b,D={type:oo,...y,...lt("tabButton",b,()=>l(ro,{floating:p.floating,style:p.buttonStyle,activeStyle:p.buttonActiveStyle,display:D.display,glowColor:D.glowColor,active:c(D.tab)===c(p.activeTab),onSelectTab:()=>p.selected.value=w},null)),tab:x,glowColor:$(C),display:N};return g[w]=D,g},{}),buttonContainerClasses:$(a),buttonContainerStyle:$(s),buttonStyle:$(u),buttonActiveStyle:$(o),floating:$(f),selected:t,activeTab:v(()=>{if(t.value in p.tabs&&Qt(p.tabs[t.value].visibility??!0))return c(p.tabs[t.value].tab);const g=Object.values(p.tabs).find(w=>Qt(w.visibility??!0));return g!=null?c(g.tab):null})};return p})}const dn=X({__name:"CelestialBodyIcon",props:{body:{},style:{}},setup(n){const e={Moon:"A",Sun:"B",Venus:"C",Mercury:"D",Mars:"E",Jupiter:"F",Saturn:"G",Uranus:"H",Neptune:"J",Ceres:"K",Earth:"L",Palas:"N",Juno:"O","5 Astrea":"P",Vesta:"Q",Pluto:"T",Sedna:"U",Eris:"V",Makemake:"W",Orcus:"X",Ixion:"Y"},t=v(()=>e[n.body]);return(r,a)=>(S(),A("span",{class:"celestial-body-icon",style:Ae(r.style)},W(t.value),5))}}),co=X({__name:"SkillTree",props:{nodes:{},branches:{},treeRowStyle:{}},setup(n){const e=n,t=()=>c(e.nodes).map(r=>{const a=e.treeRowStyle?c(e.treeRowStyle):"margin: 50px auto;";return l("span",{class:"row tree-row",style:a},[r.map(s=>B(s))])});return(r,a)=>(S(),A(E,null,[l(t),r.branches?(S(),ve(dr,{key:0,links:c(r.branches)},null,8,["links"])):V("",!0)],64))}}),fo=de(co,[["__scopeId","data-v-474a8e27"]]),mo=X({__name:"SkillTreeNode",props:{canClick:{},display:{},color:{},glowColor:{},wrapper:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.display==null?l(E,null,null):B(t.display,u=>l("div",null,[u])),s=v(()=>t.wrapper??l("div",null,null));return fr(()=>r("hold")),(u,o)=>(S(),ve(c(s),null,{default:j(()=>[k("div",{style:Ae({backgroundColor:c(u.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${c(u.glowColor)}`})},[l(a)],4)]),_:1}))}}),po=de(mo,[["__scopeId","data-v-e5a995fa"]]),vo=Symbol("SkillTreeNode"),go=Symbol("SkillTree"),bo=Symbol("BlankSkillTreeNode");function et(n){const e=Y(Array.isArray(n)?n:[n]);return ii(()=>e.every(t=>t.bought.value))}function ho(n){return Me(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:r,display:a,glowColor:s,onClick:u,onHold:o,wrapper:f,...m}=e,g={bought:Ke(!1),type:vo,...m,...lt("skillTreeNode",e,()=>l(po,{canClick:g.canClick,onClick:g.onClick,onHold:g.onHold,color:g.color,glowColor:g.glowColor,display:g.display,wrapper:g.wrapper},null)),canClick:$(t)??!0,color:$(r),display:a,glowColor:$(s),wrapper:f,onClick:u==null?void 0:function(w){c(g.canClick)!==!1&&u.call(g,w)},onHold:o==null?void 0:function(){c(g.canClick)!==!1&&o.call(g)}};return g})}const wt=ho(()=>({visibility:!1,[bo]:!0,[ct]:!0}));function li(n){return Me(()=>{const e=n(),{branches:t,nodes:r,style:a,treeRowStyle:s,...u}=e,o=$(a);e.style=()=>({position:"static",...c(o)??{}});const f=t==null?void 0:$(t),m={type:go,...u,...lt("skill-tree",e,()=>l(fo,{nodes:m.nodes,branches:m.branches,treeRowStyle:m.treeRowStyle},null)),branches:f,nodes:$(r),links:f==null?[]:Y(f),treeRowStyle:c($(s))};return m})}function yo(n){const e=v(()=>u.solarSpeed.bought.value?2:1),t=v(()=>u.solarFriedDust.bought.value?2:1),r=v(()=>u.eightyEight.bought.value?2:1),a=v(()=>u.nowIHaveTwo.bought.value?2:1),s=v(()=>u.likeThatBlueGuy.bought.value?1.5:1),u={solarFriedDust:O(()=>({requirements:I(()=>({resource:n,cost:1})),display:{title:"Solar Fried Dust",description:"Multiply Dust Gain by x2.",effectDisplay:()=>`x${q(t.value)}`}})),solarSpeed:O(()=>({requirements:[I(()=>({resource:n,cost:1})),et(u.solarFriedDust)],display:{title:"𝘴𝘰𝘭𝘢𝘳 𝘴𝘱𝘦𝘦𝘥",description:"Multiply time speed by x2.",effectDisplay:()=>`x${q(e.value)}`}})),dustyTomes:O(()=>({requirements:[I(()=>({resource:n,cost:1})),et(u.solarFriedDust)],display:{title:"Dusty Tomes",description:"Keep the first row of Dust upgrades."}})),eightyEight:O(()=>({requirements:[I(()=>({resource:n,cost:1})),et(u.solarFriedDust)],display:{title:"88",description:"Multiply Acceleron Gain by x2.",effectDisplay:()=>`x${q(r.value)}`}})),nowIHaveTwo:O(()=>({requirements:[I(()=>({resource:n,cost:1})),et(u.solarFriedDust)],display:{title:"Now I Have Two!",description:"Divide Chunks cost by ÷2.",effectDisplay:()=>`÷${q(a.value)}`}})),snortingDust:O(()=>({requirements:[I(()=>({resource:n,cost:3})),et(u.dustyTomes)],display:{title:"Snorting Dust",description:"Start each reset with a base of 5% Dust per second."}})),secretChunkStash:O(()=>({requirements:[I(()=>({resource:n,cost:3})),et(u.eightyEight)],display:{title:"ˢᵉᶜʳᵉᵗ ᶜʰᵘⁿᵏ ˢᵗᵃˢʰ",description:"Start each reset with 3 Chunks."}})),youGetAPile:O(()=>({requirements:[I(()=>({resource:n,cost:5})),et([u.snortingDust,u.secretChunkStash])],display:{title:"You get a pile, and you get...",description:"Keep 'Dust Piles' unlocked and start with 1 level of each buyable."}})),likeThatBlueGuy:O(()=>({requirements:[I(()=>({resource:n,cost:5})),et(u.youGetAPile)],display:{title:"Like that blue guy",description:"All Acceleron intervals are divided by ÷1.5.",effectDisplay:()=>`÷${q(s.value)}`}})),autoAutoChunks:O(()=>({requirements:[I(()=>({resource:n,cost:5})),et(u.likeThatBlueGuy)],display:{title:"AUTO Autoin' Chunks",description:"Keep 'Autoin' Chunks' on reset."}})),nTropy:O(()=>({requirements:[I(()=>({resource:n,cost:5})),et(u.likeThatBlueGuy)],display:{title:"Tropy, N. Dr.",description:"Keep Accelerons Unlocked on reset."}})),mastery:O(()=>({requirements:[I(()=>({resource:n,cost:10})),et([u.likeThatBlueGuy])],display:{title:"Mastery",description:"Unlock Mercury Mastery."}}))},o=li(()=>({nodes:Y([[u.solarSpeed,wt,u.nowIHaveTwo],[wt,u.solarFriedDust,wt],[u.dustyTomes,wt,u.eightyEight],[u.snortingDust,wt,u.secretChunkStash],[wt,u.youGetAPile,wt],[u.nTropy,u.likeThatBlueGuy,u.autoAutoChunks],[wt,u.mastery,wt]]),branches:Y([{startNode:u.solarFriedDust,endNode:u.solarSpeed},{startNode:u.solarFriedDust,endNode:u.nowIHaveTwo},{startNode:u.solarFriedDust,endNode:u.dustyTomes},{startNode:u.solarFriedDust,endNode:u.eightyEight},{startNode:u.dustyTomes,endNode:u.snortingDust},{startNode:u.eightyEight,endNode:u.secretChunkStash},{startNode:u.snortingDust,endNode:u.youGetAPile},{startNode:u.secretChunkStash,endNode:u.youGetAPile},{startNode:u.youGetAPile,endNode:u.likeThatBlueGuy},{startNode:u.likeThatBlueGuy,endNode:u.nTropy},{startNode:u.likeThatBlueGuy,endNode:u.autoAutoChunks},{startNode:u.likeThatBlueGuy,endNode:u.mastery}])}));return{upgrades:u,skillTree:o,effects:{solarSpeed:e,solarFriedDust:t,eightyEight:r,nowIHaveTwo:a,likeThatBlueGuy:s}}}const oi=Symbol("Repeatable");function Ce(n){const e=Ke(0);return Me(()=>{const t=n(),{requirements:r,display:a,limit:s,onClick:u,initialAmount:o,clickableStyle:f,clickableDataAttributes:m,...p}=t;if(t.classes==null)t.classes=v(()=>({bought:c(C.maxed),repeatable:!0}));else{const N=$(t.classes);t.classes=v(()=>({...c(N),bought:c(C.maxed),repeatable:!0}))}const g=lt("repeatable",t,()=>l(cr,{style:C.clickableStyle,canClick:C.canClick,onClick:C.onClick,onHold:C.onClick,display:C.display,dataAttributes:C.clickableDataAttributes},null)),w={requirementMet:v(()=>i.sub(c(C.limit),c(e))),requiresPay:!1,visibility:Pt.None,canMaximize:!0},b=[...Array.isArray(r)?r:[r],w];g.visibility!=null&&b.push(pr(g.visibility));let x;if(typeof a=="object"&&!Zt(a)){const{title:N,description:y,effectDisplay:D,showAmount:F}=a;x=()=>l("span",{class:"repeatable-content"},[N==null?null:l("div",null,[B(N,ne=>l("h3",{class:"title"},[ne]))]),l("span",{class:"description"},[B(y)]),F===!1?null:l("div",{class:"amount"},[l("br",null,null),l(E,null,[h("Amount: "),pn(c(e))]),i.isFinite(c(C.limit))?l(E,null,[h(" / "),pn(c(C.limit))]):void 0]),D==null?null:l("div",{class:"effect"},[l("br",null,null),h("Currently: "),B(D)]),c(C.maxed)?null:l("div",{class:"requirements"},[l("br",null,null),en(b,c(C.amountToIncrease))])])}else a!=null&&(x=a);e[ut]=0;const C={type:oi,...p,...g,amount:e,requirements:b,initialAmount:$(o),clickableStyle:f,clickableDataAttributes:m,limit:$(s)??i.dInf,classes:v(()=>{const N=c(g.classes)||{};return c(C.maxed)&&(N.bought=!0),N}),maxed:v(()=>i.gte(c(e),c(C.limit))),canClick:v(()=>Gn(b)),amountToIncrease:v(()=>i.clampMin(ai(b),1)),purchase(N=!0){if(!c(C.canClick))return;const y=c(C.amountToIncrease)??1;N&&si(b,y),e.value=i.add(c(e),y)},onClick(N){c(C.canClick)&&(C.purchase(),u==null||u(N))},ensureHasMinimum(){const N=c(C.initialAmount)??i.dZero;i.gte(e.value,N)||(e.value=i.min(N,c(C.limit)))},display:x};return ke(e,()=>C.ensureHasMinimum()),ke(Lt(C.initialAmount),()=>C.ensureHasMinimum()),C.ensureHasMinimum(),C})}function ko(n,e,t=[],r,a=!0){t=t.length===0?ur(n,oi):t;const s=Hr(e)?v(e):e,u=c(r)===void 0?Number.MAX_SAFE_INTEGER:c($(r));n.on("update",()=>{c(s)&&t.forEach(o=>{i.gte(o.amount.value,u)||o.purchase(a)})})}function In(n){if(i.lte(n,1))return 1;let e=1,t=1;for(let r=2;i.lte(r,n);r++)[e,t]=[t,e+t];return t}const Sr="S",ie=nt(Sr,()=>{const n="Solar",e="#FFCC33",t=we(1,"Solar Energy"),r=Vn(t),a=Bn(t),s=we(0,"Solar Rays"),u=we(0,"Mercury Cores"),o=we(0,"Venus Cores"),f=dt(()=>({thingsToReset:()=>[ie]})),m={first:je(()=>({requirements:He(a,1),display:{requirement:"1 Total Solar Energy",optionsDisplay:"Start your journey. Unlock the Solar System."}})),second:je(()=>({requirements:He(a,2),display:{requirement:"2 Total Solar Energy",optionsDisplay:"Unlock Planet Cores & Mastery Trees"}}))},{skillTree:p,upgrades:g,effects:w}=yo(u),b={mercury:O(()=>({display:{title:"Mercury",description:"Unlock Mercury"},requirements:[I(()=>({resource:t,cost:1}))],classes:{"solar-tree-node":!0}})),venus:O(()=>({display:{title:"Venus",description:"Unlock Venus"},requirements:[et(b.mercury)],classes:{"solar-tree-node":!0}})),earth:O(()=>({visibility:()=>b.venus.bought.value,display:"??",requirements:[I(()=>({resource:s,cost:100})),et(b.venus)],classes:{"solar-tree-node":!0}}))},x=li(()=>({nodes:Y([[b.mercury],[b.venus],[b.earth]]),branches:Y([{startNode:b.mercury,endNode:b.venus},{startNode:b.venus,endNode:b.earth}])})),C=v(()=>Object.values(g).some(ne=>ne.canPurchase.value)),N=hn(()=>({layerID:Sr,color:e,display:()=>l(dn,{body:"Sun"},null),glowColor:()=>C.value?e:null,reset:f})),y={solarEnergy:Ce(()=>({requirements:I(()=>({resource:t,cost:()=>In(y.solarEnergy.amount.value)})),display:{showAmount:!1,description:`Convert 1 ${t.displayName} to 1 ${s.displayName}.`},clickableStyle:{width:"200px",minHeight:"0"}}))},D=Un({milestones:()=>({display:"Milestones",tab:gt(()=>({display:()=>l(E,null,[Object.values(m).map(F=>B(F))])}))}),solarSystem:()=>({display:"Solar System",tab:gt(()=>({display:()=>l(E,null,[B(x)])}))}),mercury:()=>({display:"Mercury",visibility:()=>m.second.earned.value,tab:gt(()=>{const F=c(Ve.color);return{display:()=>l(E,null,[l("h2",null,[l(dn,{body:"Mercury",style:{display:"inline",color:F}},null)," ",P(u.value,0),h(" "),u.displayName]),l("hr",{style:{width:"256px",margin:"auto",background:F,marginTop:"6px"}},null),l(Ue,null,null),B(p)])}})})},()=>({style:{height:"100%"}}));return{name:n,energy:t,best:r,total:a,color:e,milestones:m,tabs:D,mercuryCores:u,venusCores:o,solarRays:s,solarSystemTree:x,solarSystemUpgrades:b,mercuryTree:p,mercuryTreeUpgrades:g,mercuryTreeEffects:w,converters:y,display:()=>l(E,null,[l("div",{id:"solar-layer"},[l("h2",null,[h("You have")," ",l(dn,{body:"Sun",style:{display:"inline",color:e}},null)," ",P(t.value),h(" "),t.displayName]),l("h4",null,[h("You have made a total of "),P(a.value)]),l(Ue,null,null),B(D)])]),treeNode:N}}),Co=Symbol("Conversion");function ui(n){return Me(()=>{const e=n(),{baseResource:t,gainResource:r,formula:a,currentGain:s,actualGain:u,currentAt:o,nextAt:f,convert:m,spend:p,buyMax:g,onConvert:w,...b}=e,x=s==null?v(()=>{let N=i.floor(C.formula.evaluate(t.value)).max(0);return c(C.buyMax)===!1&&(N=N.min(1)),N}):$(s),C={type:Co,...b,baseResource:t,gainResource:r,formula:a(d.variable(t)),currentGain:x,actualGain:u==null?x:$(u),currentAt:o==null?v(()=>C.formula.invert(i.floor(c(C.currentGain)))):$(o),nextAt:f==null?v(()=>C.formula.invert(i.floor(c(C.currentGain)).add(1))):$(f),convert:m??function(){const N=c(C.currentGain);r.value=i.add(r.value,N),C.spend(N),w==null||w(N)},spend:p??(()=>t.value=0),buyMax:$(g)??!0,onConvert:w};return C})}function wo(n){return ui(n)}function ci(n){const e=ui(()=>{const t=n();return t.buyMax??(t.buyMax=!1),t.currentGain??(t.currentGain=v(()=>{let r=i.floor(e.formula.evaluate(t.baseResource.value)).max(t.gainResource.value);return c(t.buyMax)===!1&&(r=r.min(i.add(t.gainResource.value,1))),r})),t.actualGain??(t.actualGain=v(()=>{let r=i.sub(e.formula.evaluate(t.baseResource.value),t.gainResource.value).floor().max(0);return c(t.buyMax)===!1&&(r=r.min(1)),r})),t.convert??(t.convert=function(){var a;const r=c(e.actualGain);t.gainResource.value=c(e.currentGain),e.spend(r),(a=e.onConvert)==null||a.call(e,r)}),t});return e}function Mo(n,e,t=1,r=i.dInf){const a=$(t),s=$(r);n.on("preUpdate",u=>{const o=c(a);i.neq(o,0)&&(e.gainResource.value=i.add(e.gainResource.value,i.times(o,u).times(i.ceil(c(e.actualGain)))).min(c(s)).max(e.gainResource.value))})}const xo=X({__name:"Bar",props:{width:{},height:{},direction:{},borderStyle:{},baseStyle:{},textStyle:{},fillStyle:{},containerStyle:{},progress:{},display:{}},setup(n){const e=n,t=v(()=>{const o=e.width;return typeof o=="string"?o:`${o}px`}),r=v(()=>{const o=e.height;return typeof o=="string"?o:`${o}px`}),a=v(()=>{const o=c(e.progress),f=o instanceof i?o.toNumber():Number(o);return(1-Math.min(Math.max(f,0),1))*100}),s=v(()=>{const o={width:`calc(${t.value} + 0.5px)`,height:`calc(${r.value} + 0.5px)`};switch(e.direction){case ee.Up:o.clipPath=`inset(${a.value}% 0% 0% 0%)`,o.width=`calc(${t.value} + 1px)`;break;case ee.Down:o.clipPath=`inset(0% 0% ${a.value}% 0%)`,o.width=`calc(${t.value} + 1px)`;break;case ee.Right:o.clipPath=`inset(0% ${a.value}% 0% 0%)`;break;case ee.Left:o.clipPath=`inset(0% 0% 0% ${a.value}%)`;break;case ee.Default:o.clipPath="inset(0% 50% 0% 0%)";break}return o}),u=()=>e.display?B(e.display):null;return(o,f)=>(S(),A("div",{style:Ae([{width:t.value,height:r.value},c(o.containerStyle)??{}]),class:"bar"},[k("div",{class:"overlayTextContainer border",style:Ae([{width:t.value,height:r.value},c(o.borderStyle)??{}])},[o.display?(S(),A("span",{key:0,class:"overlayText",style:Ae(c(o.textStyle))},[l(u)],4)):V("",!0)],4),k("div",{class:"border",style:Ae([{width:t.value,height:r.value},c(o.baseStyle)??{},c(o.borderStyle)??{}])},[k("div",{class:"fill",style:Ae([s.value,c(o.fillStyle)??{}])},null,4)],4)],4))}}),No=de(xo,[["__scopeId","data-v-3dbbb9d0"]]),So=Symbol("Bar");function st(n){return Me(()=>{const e=n==null?void 0:n(),{width:t,height:r,direction:a,borderStyle:s,baseStyle:u,containerStyle:o,textStyle:f,fillStyle:m,progress:p,display:g,...w}=e,b={type:So,...w,...lt("bar",e,()=>l(No,{width:b.width,height:b.height,direction:b.direction,borderStyle:b.borderStyle,baseStyle:b.baseStyle,textStyle:b.textStyle,fillStyle:b.fillStyle,progress:b.progress,display:b.display,containerStyle:b.containerStyle},null)),width:$(t),height:$(r),direction:$(a),borderStyle:$(s),baseStyle:$(u),textStyle:$(f),fillStyle:$(m),progress:$(p),containerStyle:$(o),display:g};return b})}const To="Mm",Fe=nt(To,()=>{const n="Mercury",e="#8c8c94",t=Te(()=>[Le(()=>({multiplier:()=>i.times(1.5,re.bestChunks.value).times(o.value).clampMin(1),enabled:f.first.earned,description:"First Chunk Milestone"}))]),r=v(()=>{if(f.four.earned.value===!0){const g=f.six.earned.value===!0?.65:.5;return i.add(re.bestChunks.value,1).slog().pow(g).clampMin(1)}return i.dOne}),a=v(()=>f.fifty.earned.value===!0?i.add(re.bestChunks.value,1).log10().clampMin(1):i.dOne),s=v(()=>f.eighty.earned.value===!0?i.pow(re.bestChunks.value,1.1):i.dZero),u=v(()=>Object.values(f).filter(g=>g.earned.value).length),o=v(()=>f.hundredFifty.earned.value===!0?i.sqrt(re.bestChunks.value):i.dOne),f={first:je(()=>({requirements:He(re.bestChunks,1),display:{requirement:"1 Best Mercurial Chunk",effectDisplay:()=>`Currently: x${P(t.apply(1))}`,optionsDisplay:()=>l(E,null,[h("Unlock the 'Dust Piles' buyable"),l("br",null,null),h("Boost Dust Time & Collision Time by +1.5x per best Chunk")])}})),second:je(()=>({requirements:He(re.bestChunks,2),display:{requirement:"2 Best Mercurial Chunks",optionsDisplay:"Keep 1 Dust upgrade per milestone earned.",effectDisplay:()=>`${u.value} upgrades are kept.`}})),three:je(()=>({requirements:He(re.bestChunks,3),display:{requirement:"3 Best Mercurial Chunks",optionsDisplay:"Unlock Chunk Upgrades."}})),four:je(()=>({requirements:He(re.bestChunks,10),display:{requirement:"10 Best Mercurial Chunks",optionsDisplay:"Raise Dust Time & Collision Time by best Chunks at a heavily reduced rate.",effectDisplay:()=>`^${P(r.value)}`}})),five:je(()=>({requirements:He(re.bestChunks,15),display:{requirement:"15 Best Mercurial Chunks",optionsDisplay:"Keep some buyable levels on reset equal to your best Chunks.",effectDisplay:()=>`Up to ${re.bestChunks.value} buyable levels are kept.`}})),twenty:je(()=>({requirements:He(re.bestChunks,20),display:{requirement:"25 Best Mercurial Chunks",optionsDisplay:"Keep 10% of Dust Time on reset."}})),fifty:je(()=>({requirements:He(re.bestChunks,50),display:{requirement:"50 Best Mercurial Chunks",optionsDisplay:"Divide Chunk Accelerons interval based on best Chunks.",effectDisplay:()=>`Currently: ÷${P(a.value)}`}})),six:je(()=>({requirements:He(re.bestChunks,65),display:{requirement:"65 Best Mercurial Chunks",optionsDisplay:"Improve the effect of Milestone 4."}})),eighty:je(()=>({requirements:He(re.bestChunks,80),display:{requirement:"80 Best Mercurial Chunks",optionsDisplay:"Increase base Collision Time based on best Chunks.",effectDisplay:()=>`Currently: +${P(s.value)}`}})),hundredFifty:je(()=>({requirements:He(re.bestChunks,150),display:{requirement:"150 Best Mercurial Chunks",optionsDisplay:"Multiply the effect of Milestone 1 based on best Chunks",effectDisplay:()=>`Currently: x${P(o.value)}`}}))},m=dt(()=>({thingsToReset:()=>[Fe]}));return{name:n,color:e,milestones:f,completedMilestonesCount:u,firstMilestoneModifier:t,fourthMilestoneModifier:r,fiftyMilestoneEffect:a,eightyMilestoneEffect:s,fullReset:()=>{m.reset(),Object.values(f).forEach(g=>g.earned.value=!1)},display:()=>l(E,null,[l("h4",null,[h("Your best condensed Chunks count is "),P(re.bestChunks.value,0)]),l(Ue,null,null),Object.values(f).map(g=>B(g))])}});function Yn(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!nn(n)}const Tr="Ma",Se=nt(Tr,n=>{const e="Mercury",t="#8c8c94",r=v(()=>be.unlocks.accelerators.bought.value),a={direction:ee.Right,height:14,width:"100%",style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline-lighter)"}},s={timer:we(0),resource:we(0,"Dust Accelerons"),gainComputed:v(()=>i.add(1,s.boostGainEffect.value).times(s.dustAcceleratorGainModifier.apply(1)).times(u.dustAcceleratorModifierEffect.value).times(s.dustyJeansEffect.value).times(ie.mercuryTreeEffects.eightyEight.value)),bar:st(()=>({...a,progress:()=>i.lte(s.timerMax.value,.1)?i.fromNumber(100):i.div(s.timer.value,s.timerMax.value)})),intervalBuyable:Ce(()=>({classes:{"clickable:h-fit!":!0},requirements:I(()=>({resource:Y(be.mercurialDust),cost:()=>d.variable(s.intervalBuyable.amount.value).pow_base(7).times(1e10).evaluate(),requiresPay:!1})),clickableStyle:{minHeight:"0",width:"100%",margin:"0",padding:"0",border:"0"},display:()=>l(E,null,[l("div",null,[l("div",{style:"padding: 6px 0 0 28px; text-align: left;"},[l("h2",null,[h("Decrease timer interval")])]),l("hr",{color:"var(--outline-lighter)",style:"height: 2px;"},null),l("div",{style:"padding-bottom: 12px;"},[l("div",{class:"py-1"},[l("h4",null,[h("You have "),q(be.mercurialDust.value)," ",be.mercurialDust.displayName,h(".")])]),l("hr",{color:"var(--outline-lighter)",style:"height: 2px;"},null),l("div",{style:"padding-left: 24px; display: flex;"},[l("span",null,[h("Currently: ÷"),q(s.dustAcceleratorTimerMaxEffect.value)]),l("div",{style:"border-left: 2px solid var(--outline-lighter); height: 12px"},null),l("span",null,[en(s.intervalBuyable.requirements,c(s.intervalBuyable.amountToIncrease))])])])])]),clickableDataAttributes:{"augmented-ui":"border tl-scoop-y"}})),timerMax:v(()=>i.div(120,s.dustAcceleratorTimerMaxEffect.value).div(s.acceleratingTheAcceleratorEffect.value).div(o.levelTwoTimeRaiseEffect.value).div(ie.mercuryTreeEffects.likeThatBlueGuy.value)),timerTickSpeedDisplay:v(()=>i.fromValue(s.timerMax.value).div(ie.mercuryTreeEffects.solarSpeed.value)),isAtLeastLevelOne:v(()=>i.gte(s.acceleratorLevel.value,1)),isAtLeastLevelTwo:v(()=>i.gte(s.acceleratorLevel.value,2)),isAtLeastLevelThree:v(()=>i.gte(s.acceleratorLevel.value,3)),acceleratorLevel:v(()=>s.levelBuyable.amount.value),bonusLevels:y=>i.lt(s.acceleratorLevel.value,y)?i.dZero:i.sub(s.acceleratorLevel.value,i.sub(y,1)).add(1).clampMin(1),dustGainMultiplierModifier:Te(()=>[Le(()=>({enabled:()=>i.gt(s.resource.value,0),multiplier:()=>{const y=s.bonusLevels(1).clampMin(1);return i.add(s.resource.value,1).pow(.25).mul(y).mul(s.boostBuffEffect.value).clampMin(1)},description:"Dust Accelerons"}))]),dustAcceleratorGainModifier:Te(()=>[Le(()=>({enabled:()=>s.isAtLeastLevelOne.value&&i.gt(s.resource.value,0),multiplier:()=>{const y=s.bonusLevels(2).clampMin(1);return i.add(s.resource.value,1).pow(.2).times(y).mul(s.boostBuffEffect.value).clampMin(1)}}))]),dustAcceleratorDustRaiseEffect:v(()=>{if(s.isAtLeastLevelTwo.value){const y=s.bonusLevels(3).times(.1),D=i.add(.1,y);return i.add(s.resource.value,1).slog().pow(D).mul(s.boostBuffEffect.value).clampMin(1)}return i.dOne}),dustBuyableCapEffect:v(()=>s.isAtLeastLevelThree.value?i.add(s.resource.value,1).log2().sqrt().floor().clampMin(1):i.dZero),dustAcceleratorsGainComputed:v(()=>i.times(1,s.dustAcceleratorGainModifier.apply(1))),acceleratingTheAcceleratorEffect:v(()=>s.upgrades.second.bought.value?i.fromValue(d.variable(i.add(s.resource.value,1)).mul(.004).add(1).step(2,y=>y.pow(.1)).step(5,y=>y.div(10)).evaluate()):i.dOne),dustAcceleratorTimerMaxEffect:v(()=>i.gt(s.intervalBuyable.amount.value,0)?i.mul(s.intervalBuyable.amount.value,.025).add(1).clampMin(1):i.dOne),levelBuyable:Ce(()=>({limit:3,requirements:I(()=>({requiresPay:!1,resource:Y(s.resource),cost:d.variable(s.levelBuyable.amount).pow_base(5).times(100)})),display:{showAmount:!1,title:"Upgrade",description:"Reset Dust Accelerons to unlock a new effect and buff previous effects.",effectDisplay:()=>s.levelEffectsDisplay()},onClick:()=>{s.resource.value=0},classes:{"level-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border tr-2-clip-x"}})),boostBuyable:Ce(()=>({visibility:()=>s.isAtLeastLevelThree.value,requirements:I(()=>({requiresPay:!1,resource:Y(s.resource),cost:()=>{const y=i.fromValue(s.boostBuyable.amount.value);return y.pow_base(i.times(100,y.add(1).pow(1.05))).times(1e8)}})),display:{showAmount:!1,title:"Boost",description:"Reset Accelerons to gain a +0.25x boost to Level 1-3 effects and +100 base Acceleron gain.",effectDisplay:()=>l(E,null,[l("br",null,null),h("+"),q(s.boostGainEffect.value),h(" Acceleron Gain"),l("br",null,null),h("x"),q(s.boostBuffEffect.value),h(" Effects")])},classes:{"boost-repeatable":!0},onClick:()=>{s.resource.value=0},clickableDataAttributes:{"augmented-ui":"border tl-2-clip-x"}})),boostGainEffect:v(()=>i.gt(s.boostBuyable.amount.value,0)?i.times(100,s.boostBuyable.amount.value).clampMin(1):i.dZero),boostBuffEffect:v(()=>i.gt(s.boostBuyable.amount.value,0)?i.times(.25,s.boostBuyable.amount.value).add(1).clampMin(1):i.dOne),dustyJeansEffect:v(()=>s.upgrades.dustyJeans.bought.value?i.add(s.resource.value,1).log2().clampMin(1):i.dOne),upgrades:{second:O(()=>({requirements:I(()=>({resource:s.resource,cost:25})),display:{title:"Accelerating the Accelerator",description:"Decrease timer interval based on accelerons.",effectDisplay:()=>`÷${q(s.acceleratingTheAcceleratorEffect.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),chunksUnlock:O(()=>({requirements:I(()=>({resource:s.resource,cost:125})),display:{title:"je ne sais chunks",description:"Unlock Chunk Accelerons."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),first:O(()=>({requirements:I(()=>({resource:s.resource,cost:150})),display:{title:"Speed Dust",description:l(E,null,[h("Unlock more Dust upgrades."),l("br",null,null),h("(Starting at 1e30 Dust)")])},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),dustyJeans:O(()=>({visibility:()=>s.isAtLeastLevelThree.value,requirements:I(()=>({resource:s.resource,cost:i.fromNumber(25e5)})),display:{title:"Dusty Jeans",description:"Boost Dust Acceleron gain based on Dust Accelerons.",effectDisplay:()=>`x${q(s.dustyJeansEffect.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},tick:y=>{be.unlocks.accelerators.bought.value&&(s.timer.value=i.add(s.timer.value,i.dOne.times(ie.mercuryTreeEffects.solarSpeed.value).times(y)),i.gte(s.timer.value,s.timerMax.value)&&(s.timer.value=0,s.resource.value=i.add(s.resource.value,s.gainComputed.value)))},levelEffectsDisplay:()=>{const y=[l("p",null,[h("x"),q(s.dustGainMultiplierModifier.apply(1)),h(" Dust gain")])];return s.isAtLeastLevelOne.value&&y.push(l("p",null,[h("x"),q(s.dustAcceleratorGainModifier.apply(1)),h(" Accelerons gain")])),s.isAtLeastLevelTwo.value&&y.push(l("p",null,[h("^"),q(s.dustAcceleratorDustRaiseEffect.value),h(" Dust gain")])),s.isAtLeastLevelThree.value&&y.push(l("p",null,[h("+"),q(s.dustBuyableCapEffect.value),h(" Dust buyable caps")])),l(E,null,[y])}},u={timer:we(0),resource:we(0,"Chunk Accelerons"),gainComputed:v(()=>i.add(1,u.boostGainEffect.value).times(u.acceleratorGainModifier.apply(1)).times(o.chunkAcceleronGainModifier.apply(1)).times(ie.mercuryTreeEffects.eightyEight.value)),bar:st(()=>({...a,progress:()=>i.lte(u.timerMax.value,.1)?i.fromNumber(100):i.div(u.timer.value,u.timerMax.value)})),intervalBuyable:Ce(()=>({classes:{"clickable:h-fit!":!0},requirements:I(()=>({resource:Y(re.chunks),cost:()=>d.variable(u.intervalBuyable.amount.value).pow_base(1.1).times(18).floor().evaluate(),requiresPay:!1})),clickableStyle:{minHeight:"0",width:"100%",margin:"0",padding:"0",border:"0"},display:()=>l(E,null,[l("div",null,[l("div",{style:"padding: 6px 0 0 28px; text-align: left;"},[l("h2",null,[h("Decrease timer interval")])]),l("hr",{color:"var(--outline-lighter)",style:"height: 2px;"},null),l("div",{style:"padding-bottom: 12px;"},[l("div",{class:"p-1"},[l("h4",null,[h("You have "),q(re.chunks.value),h(" mercurial chunks.")])]),l("hr",{color:"var(--outline-lighter)",style:"height: 2px;"},null),l("div",{style:"padding-left: 24px; display: flex;"},[l("span",null,[h("Currently: ÷"),q(u.intervalBuyableEffect.value)]),l("div",{style:"border-left: 2px solid var(--outline-lighter); height: 12px"},null),l("span",null,[en(u.intervalBuyable.requirements,c(u.intervalBuyable.amountToIncrease))])])])])]),clickableDataAttributes:{"augmented-ui":"border tl-scoop-y"}})),timerMax:v(()=>i.fromNumber(120).div(u.intervalBuyableEffect.value).div(u.dustAcceleratorIntervalEffect.value).div(o.levelTwoTimeRaiseEffect.value).div(Fe.fiftyMilestoneEffect.value).div(ie.mercuryTreeEffects.likeThatBlueGuy.value)),timerTickSpeedDisplay:v(()=>i.fromValue(u.timerMax.value).div(ie.mercuryTreeEffects.solarSpeed.value)),dustAcceleratorIntervalEffect:v(()=>u.upgrades.chunksMeetDust.bought.value?i.add(s.resource.value,1).pow(.12).sqrt().clampMin(1):i.dOne),intervalBuyableEffect:v(()=>i.gt(u.intervalBuyable.amount.value,0)?i.mul(u.intervalBuyable.amount.value,.03).add(1).clampMin(1):i.dOne),levelBuyable:Ce(()=>({limit:3,requirements:I(()=>({requiresPay:!1,resource:Y(u.resource),cost:d.variable(u.levelBuyable.amount).pow_base(3).times(30)})),display:{showAmount:!1,title:"Upgrade",description:"Reset Chunk Accelerons to unlock a new effect and buff previous effects.",effectDisplay:()=>u.levelEffectsDisplay()},onClick:()=>{u.resource.value=0},classes:{"level-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border tr-2-clip-x bl-clip"}})),boostBuyable:Ce(()=>({visibility:()=>u.isAtLeastLevelThree.value,requirements:I(()=>({requiresPay:!1,resource:u.resource,cost:()=>{const y=i.fromValue(u.boostBuyable.amount.value);return y.pow_base(i.times(100,y.add(1).pow(1.05))).times(1e10)}})),display:{showAmount:!1,title:"Boost",description:"Reset Accelerons to gain a +0.25x boost to Level 1-3 effects and +100 base Acceleron gain.",effectDisplay:()=>l(E,null,[l("br",null,null),h("+"),q(u.boostGainEffect.value),h(" Acceleron Gain"),l("br",null,null),h("x"),q(u.boostBuffEffect.value),h(" Effects")])},onClick:()=>{u.resource.value=0},classes:{"boost-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border tl-2-clip-x"}})),boostGainEffect:v(()=>i.gt(u.boostBuyable.amount.value,0)?i.times(100,u.boostBuyable.amount.value).clampMin(1):i.dZero),boostBuffEffect:v(()=>i.gt(u.boostBuyable.amount.value,0)?i.times(.25,u.boostBuyable.amount.value).add(1).clampMin(1):i.dOne),pebbleSmasherEffect:v(()=>u.upgrades.pebbleSmasher.bought.value?i.add(u.gainComputed.value,1).pow(.1).sqrt().clampMin(1):i.dOne),upgrades:{chunksMeetDust:O(()=>({requirements:I(()=>({resource:Y(u.resource),cost:i.fromNumber(25)})),display:{title:"Chunks, meet Dust",description:"Decrease timer interval based on Dust Accelerons",effectDisplay:()=>`÷${q(u.dustAcceleratorIntervalEffect.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),moreChunkUpgrades:O(()=>({requirements:I(()=>({resource:Y(u.resource),cost:i.fromNumber(100)})),display:{title:"Speed Chunks",description:"Unlock more Chunk upgrades. (Starting at 35 Chunks)"},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),timeUnlock:O(()=>({requirements:I(()=>({resource:Y(u.resource),cost:i.fromNumber(150)})),display:{title:"Time go brrr",description:"Unlock Time Accelerons."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),pebbleSmasher:O(()=>({visibility:()=>u.isAtLeastLevelThree.value,requirements:I(()=>({resource:u.resource,cost:i.fromNumber(1e5)})),display:{title:"Pebble Smasher",description:"Divide chunk cost based on Chunk Acceleron gain.",effectDisplay:()=>`÷${q(u.pebbleSmasherEffect.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},isAtLeastLevelOne:v(()=>i.gte(u.acceleratorLevel.value,1)),isAtLeastLevelTwo:v(()=>i.gte(u.acceleratorLevel.value,2)),isAtLeastLevelThree:v(()=>i.gte(u.acceleratorLevel.value,3)),acceleratorLevel:v(()=>u.levelBuyable.amount.value),bonusLevels:y=>i.lt(u.acceleratorLevel.value,y)?i.dZero:i.sub(u.acceleratorLevel.value,i.sub(y,1)).add(1).clampMin(1),dustAcceleratorModifierEffect:v(()=>{if(i.lt(u.resource.value,1))return i.dOne;const y=u.bonusLevels(1).clampMin(1);return i.add(u.resource.value,2).log2().times(y).pow(u.levelThreeRaiseEffect.value).times(u.boostBuffEffect.value).clampMin(1)}),chunkCostDivisionEffect:v(()=>{if(u.isAtLeastLevelTwo.value&&i.gt(u.resource.value,0)){const y=u.bonusLevels(3).clampMin(1);return i.add(u.resource.value,1).pow(.3).cbrt().times(y).pow(u.levelThreeRaiseEffect.value).times(u.boostBuffEffect.value).clampMin(1)}return i.dOne}),acceleratorGainModifier:Te(()=>[Le(()=>({enabled:()=>u.isAtLeastLevelOne.value,multiplier:()=>{if(i.lt(u.resource.value,1))return i.dOne;const y=u.bonusLevels(2).clampMin(1);return i.add(u.resource.value,1).pow(.2).times(y).pow(u.levelThreeRaiseEffect.value).times(u.boostBuffEffect.value).clampMin(1)}}))]),levelThreeRaiseEffect:v(()=>u.isAtLeastLevelThree.value?d.variable(u.resource.value).add(10).log10().pow(.5).sqrt().step(2,y=>y.sqrt()).clampMin(1).evaluate():i.dOne),levelEffectsDisplay:()=>{const y=[l("p",null,[h("x"),q(u.dustAcceleratorModifierEffect.value),h(" Dust Acceleron gain")])];return u.isAtLeastLevelOne.value&&y.push(l("p",null,[h("x"),q(u.acceleratorGainModifier.apply(1)),h(" Chunk Acceleron gain")])),u.isAtLeastLevelTwo.value&&y.push(l("p",null,[h("Chunk cost ÷"),q(u.chunkCostDivisionEffect.value)])),u.isAtLeastLevelThree.value&&y.push(l("p",null,[h("Above effects ^"),q(u.levelThreeRaiseEffect.value)])),l(E,null,[y])},unlocked:v(()=>s.upgrades.chunksUnlock.bought.value),tick:y=>{u.unlocked.value&&(u.timer.value=i.add(u.timer.value,i.dOne.times(ie.mercuryTreeEffects.solarSpeed.value).times(y)),i.gte(u.timer.value,u.timerMax.value)&&(u.timer.value=0,u.resource.value=i.add(u.resource.value,u.gainComputed.value)))}},o={timer:we(0),resource:we(0,"time Accelerons"),gainComputed:v(()=>i.add(1,o.boostGainEffect.value).times(o.finalCountdownEffect.value).times(re.speedingChunksEffect.value).times(ie.mercuryTreeEffects.eightyEight.value)),bar:st(()=>({...a,progress:()=>i.lte(o.timerMax.value,.1)?i.fromNumber(100):i.div(o.timer.value,o.timerMax.value)})),bonusLevels:y=>i.lt(o.acceleratorLevel.value,y)?i.dZero:i.sub(o.acceleratorLevel.value,i.sub(y,1)).add(1).clampMin(1),acceleronTimerDivisionModifier:v(()=>{if(i.lt(o.resource.value,1))return i.dOne;const y=o.bonusLevels(1).times(25);return i.add(o.resource.value,10).add(y).log10().sqrt().pow(o.levelThreeRaiseEffect.value).times(o.boostBuffEffect.value).clampMin(1)}),timerMax:v(()=>i.fromNumber(120).div(o.acceleronTimerDivisionModifier.value).div(o.doomsdayClockEffect.value).div(o.levelTwoTimeRaiseEffect.value).div(ie.mercuryTreeEffects.likeThatBlueGuy.value)),timerTickSpeedDisplay:v(()=>i.fromValue(o.timerMax.value).div(ie.mercuryTreeEffects.solarSpeed.value)),levelBuyable:Ce(()=>({limit:3,requirements:I(()=>({requiresPay:!1,resource:Y(o.resource),cost:d.variable(o.levelBuyable.amount).pow_base(5).times(25)})),display:{showAmount:!1,title:"Upgrade",description:"Reset Time Accelerons to unlock a new effect and buff previous effects.",effectDisplay:()=>o.levelEffectsDisplay()},onClick:()=>{o.resource.value=0},classes:{"level-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border tr-2-clip-x"}})),boostBuyable:Ce(()=>({visibility:()=>o.isAtLeastLevelThree.value,requirements:I(()=>({requiresPay:!1,resource:o.resource,cost:()=>{const y=i.fromValue(o.boostBuyable.amount.value);return y.pow_base(i.times(100,y.add(1).pow(1.05))).times(1e4)}})),display:{showAmount:!1,title:"Boost",description:"Reset Accelerons to gain a +0.25x boost to Level 1-3 effects and +100 base Acceleron gain.",effectDisplay:()=>l(E,null,[l("br",null,null),h("+"),q(o.boostGainEffect.value),h(" Acceleron Gain"),l("br",null,null),h("x"),q(u.boostBuffEffect.value),h(" Effects")])},onClick:()=>{o.resource.value=0},classes:{"boost-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border tl-2-clip-x"}})),boostGainEffect:v(()=>i.gt(o.boostBuyable.amount.value,0)?i.times(100,o.boostBuyable.amount.value).clampMin(1):i.dZero),boostBuffEffect:v(()=>i.gt(o.boostBuyable.amount.value,0)?i.times(.25,o.boostBuyable.amount.value).add(1).clampMin(1):i.dOne),upgrades:{autoVonDoom:O(()=>({requirements:I(()=>({resource:Y(o.resource),cost:i.fromNumber(10)})),display:{title:"Auto Von Doom",description:"Automate Accelerator interval buyables."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),doomsDayClock:O(()=>({requirements:I(()=>({resource:Y(o.resource),cost:i.fromNumber(25)})),display:{title:"Doomsday Clock",description:"Reduce interval based on Collision Time.",effectDisplay:()=>`÷${q(o.doomsdayClockEffect.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),finalCountdown:O(()=>({requirements:I(()=>({resource:Y(o.resource),cost:i.fromNumber(100)})),display:{title:"Final Countdown",description:"Multiply Time Acceleron gain based on Collision Time.",effectDisplay:()=>`x${q(o.finalCountdownEffect.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),bringItHome:O(()=>({visibility:()=>o.isAtLeastLevelThree.value,requirements:I(()=>({resource:Y(o.resource),cost:i.fromNumber(500)})),display:{title:"Bring It Home",description:"Improve the Level 3 effect based on Time Accelerons.",effectDisplay:()=>`x${q(o.bringItHomeEffect.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},doomsdayClockEffect:v(()=>o.upgrades.doomsDayClock.bought.value?i.add(Ve.collisionTimeGainComputed.value,1).log10().cbrt().clampMin(1):i.dOne),finalCountdownEffect:v(()=>o.upgrades.finalCountdown.bought.value?i.add(Ve.collisionTimeGainComputed.value,1).log(8).sqrt().clampMin(1):i.dOne),bringItHomeEffect:v(()=>o.upgrades.bringItHome.bought.value?i.add(o.resource.value,1).pow(.15).sqrt().clampMin(1):i.dOne),isAtLeastLevelOne:v(()=>i.gte(o.acceleratorLevel.value,1)),isAtLeastLevelTwo:v(()=>i.gte(o.acceleratorLevel.value,2)),isAtLeastLevelThree:v(()=>i.gte(o.acceleratorLevel.value,3)),acceleratorLevel:v(()=>o.levelBuyable.amount.value),chunkAcceleratorModifierEffect:v(()=>i.add(u.resource.value,1).log2().clampMin(1)),chunkAcceleronGainModifier:Te(()=>[Le(()=>({enabled:()=>o.isAtLeastLevelOne.value&&i.gt(o.resource.value,0),multiplier:()=>{const y=o.bonusLevels(2).clampMin(1);return i.add(o.resource.value,2).log2().sqrt().times(y).pow(o.levelThreeRaiseEffect.value).times(o.boostBuffEffect.value).clampMin(1)}}))]),levelTwoTimeRaiseEffect:v(()=>{if(o.isAtLeastLevelTwo.value){const y=o.bonusLevels(3).times(.1),D=i.add(.25,y);return i.add(o.resource.value,10).log10().pow(D).cbrt().pow(o.levelThreeRaiseEffect.value).times(o.boostBuffEffect.value).clampMin(1)}return i.dOne}),levelThreeRaiseEffect:v(()=>o.isAtLeastLevelThree.value&&i.gt(o.resource.value,0)?d.variable(o.resource.value).add(10).log10().pow(.1).sqrt().add(o.bringItHomeEffect.value).step(2,y=>y.sqrt()).clampMin(1).evaluate():i.dOne),levelEffectsDisplay:()=>{const y=[l("p",null,[h("Timer interval ÷"),q(o.acceleronTimerDivisionModifier.value)])];return o.isAtLeastLevelOne.value&&y.push(l("p",null,[h("x"),q(o.chunkAcceleronGainModifier.apply(1)),h(" Chunk Acceleron gain")])),o.isAtLeastLevelTwo.value&&y.push(l("p",null,[h("Time speed ^"),q(o.levelTwoTimeRaiseEffect.value)])),o.isAtLeastLevelThree.value&&y.push(l("p",null,[h("Above effects ^"),q(o.levelThreeRaiseEffect.value)])),l(E,null,[y])},unlocked:v(()=>u.upgrades.timeUnlock.bought.value),tick:y=>{o.unlocked.value&&(o.timer.value=i.add(o.timer.value,i.dOne.times(ie.mercuryTreeEffects.solarSpeed.value).times(y)),i.gte(o.timer.value,o.timerMax.value)&&(o.timer.value=0,o.resource.value=i.add(o.resource.value,o.gainComputed.value)))}};n.on("preUpdate",y=>{!r.value||Ve.hasCollidedComputed.value||(s.tick(y),u.tick(y),o.tick(y))});const f=Me(()=>(ko(Se,o.upgrades.autoVonDoom.bought,[s.intervalBuyable,u.intervalBuyable]),{})),m=v(()=>s.intervalBuyable.canClick.value&&!o.upgrades.autoVonDoom.bought.value||Object.values(s.upgrades).some(y=>y.canPurchase.value)||s.levelBuyable.canClick.value||s.boostBuyable.canClick.value),p=v(()=>u.unlocked.value?u.intervalBuyable.canClick.value&&!o.upgrades.autoVonDoom.bought.value||Object.values(u.upgrades).some(y=>y.canPurchase.value)||u.levelBuyable.canClick.value||u.boostBuyable.canClick.value:!1),g=v(()=>o.unlocked.value?Object.values(o.upgrades).some(y=>y.canPurchase.value)||o.levelBuyable.canClick.value||o.boostBuyable.canClick.value:!1),w=v(()=>m.value||p.value||g.value),b=y=>l("div",{style:"width: 440px;"},[l("div",null,[l("div",{"data-augmented-ui":"border tl-clip br-clip",style:"padding: 12px 24px;"},[l("h2",null,[q(y.resource.value),h(" "),y.resource.displayName]),l("h6",null,[h("You are gaining "),q(y.gainComputed.value),h(" every")," ",q(y.timerTickSpeedDisplay.value),h(" seconds.")])]),l("div",{"data-augmented-ui":"border tr-clip",style:"border-color: var(--outline);"},[B(y.bar)]),y.intervalBuyable?B(y.intervalBuyable):null,l("div",{class:"accelerator-container","data-augmented-ui":"border r-rect"},[l("div",{style:"padding: 6px;"},[l("h4",{style:"padding-bottom: 8px;"},[h("Accelerator")]),l("hr",{color:"var(--outline-lighter)",style:"height: 2px; width: 32px; margin: auto;"},null),l("code",null,[h("Level "),i.add(y.levelBuyable.amount.value,1),h("/4")])])])]),l("div",{class:"flex justify-center"},[l("div",{class:"flex",style:"width: 100%; margin: 0;"},[B(y.levelBuyable),Qt(y.boostBuyable.visibility)?B(y.boostBuyable):l("div",{class:"flex-1"},null)])])]),x=Un({dust:()=>({display:()=>l(E,null,[h("Dust "),m.value?"!":null]),tab:gt(()=>({display:()=>{let y;return l(E,null,[b(s),l(Ue,null,null),l("div",{style:"margin-bottom: 4px;"},[l("h3",null,[h("Upgrades")])]),l("hr",{class:"section-divider"},null),l(_t,null,Yn(y=Ge(s.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?y:{default:()=>[y]})])}}))}),chunks:()=>({display:()=>l(E,null,[h("Chunks "),p.value?"!":null]),visibility:()=>s.upgrades.chunksUnlock.bought.value,tab:gt(()=>({display:()=>{let y;return l(E,null,[b(u),l(Ue,null,null),l("div",{style:"margin-bottom: 4px;"},[l("h3",null,[h("Upgrades")])]),l("hr",{class:"section-divider"},null),l(_t,null,Yn(y=Ge(u.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?y:{default:()=>[y]})])}}))}),time:()=>({display:()=>l(E,null,[h("Time "),g.value?"!":null]),visibility:()=>u.upgrades.timeUnlock.bought.value,tab:gt(()=>({display:()=>{let y;return l(E,null,[b(o),l(Ue,null,null),l("div",{style:"margin-bottom: 4px;"},[l("h3",null,[h("Upgrades")])]),l("hr",{class:"section-divider"},null),l(_t,null,Yn(y=Ge(o.upgrades,4,"gap: 8px; margin-bottom: 8px;"))?y:{default:()=>[y]})])}}))})},()=>({floating:!0,buttonStyle:{border:"none",borderBottom:"4px solid var(--outline)"},buttonActiveStyle:{borderColor:"var(--layer-color)"}})),C=dt(()=>({thingsToReset:()=>[Se],onReset:()=>{}}));return{id:Tr,name:e,color:t,dustAccelerator:s,chunkAccelerator:u,timeAccelerator:o,tabs:x,autoIntervalBuyers:f,showNotification:w,fullReset:()=>{C.reset()},display:()=>l(E,null,[B(x)])}}),Do={class:"mb-6"},Ao={class:"mb-2"},Eo={class:"mb-4"},Qe=X({__name:"Section",props:{header:{}},setup(n){const e=qt({background:"#99E1D9",width:"128px",margin:"auto",height:"2px"});return(t,r)=>(S(),A("div",Do,[k("div",Ao,[k("h2",null,W(t.header),1)]),k("div",Eo,[k("hr",{style:Ae(e)},null,4)]),bt(t.$slots,"default")]))}});function Io(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!nn(n)}const Xn="Mc",re=nt(Xn,()=>{const n="Mercury Chunks",e="#68696d",t=we(0,"Mercurial Chunks"),r=Vn(t),a=ci(()=>{const ae=v(()=>i.clampMin(o.apply(0),1)),te=v(()=>i.lt(t.value,10)?i.dOne:i.sub(t.value,9).add(1).clampMin(1)),ge=v(()=>{if(i.lt(t.value,20))return i.dOne;const fe=i.sub(t.value,19),oe=C.dirtCheap.bought.value?1.4:1.45;return i.times(1,i.pow(1.2,i.pow(fe,oe)))}),ye=v(()=>i.lt(t.value,1e3)?i.dOne:i.sub(t.value,999).times(3).clampMin(1));return{formula:fe=>fe.mul(ae).mul(Se.chunkAccelerator.chunkCostDivisionEffect).mul(m).mul(p).mul(ie.mercuryTreeEffects.nowIHaveTwo).mul(Se.chunkAccelerator.pebbleSmasherEffect).div(1e3).step(1,oe=>oe.div(30)).step(5,oe=>oe.div(2)).step(10,oe=>oe.cbrt().div(te)).step(20,oe=>oe.sqrt().div(ge)).step(29,oe=>oe.sqrt()).step(100,oe=>oe.div(350).pow(.7)).step(1e3,oe=>oe.sqrt().div(ye)),baseResource:be.mercurialDust,gainResource:Y(t),currentGain:v(()=>i.floor(a.formula.evaluate(be.totalMercurialDust.value)).max(t.value).min(i.add(t.value,1))),actualGain:v(()=>i.sub(a.formula.evaluate(be.totalMercurialDust.value),t.value).floor().max(0).min(1).clampMax(1)),spend:()=>{},convert:()=>{t.value=i.add(t.value,1)}}}),s=Me(()=>(ke(be.mercurialDust,()=>{!C.autoChunks.bought.value||c(D.canClick)===!1||i.lt(c(a.actualGain),1)||a.convert()}),{})),u=v(()=>C.chuckingChunks.bought.value?i.times(r.value,2).pow(b.value).clampMin(1):i.dZero),o=Te(()=>[jt(()=>({enabled:C.lovingChunks.bought,addend:()=>i.add(be.mercurialDust.value,1).log10().pow(.4).times(x.value).clampMin(1),description:"Lovin' Chunks"}))]),f=v(()=>C.collidingChunks.bought.value?i.add(r.value,1).log(8).sqrt().clampMin(1):i.dOne),m=v(()=>C.splinteringChunks.bought.value?i.add(Ve.collisionTimeGainComputed.value,1).log2().sqrt().clampMin(1):i.dOne),p=v(()=>C.cheapingChunks.bought.value?i.fromValue(r.value):i.dOne),g=v(()=>C.speedingChunks.bought.value?i.log2(r.value).clampMin(1):i.dOne),w=v(()=>C.dustingChunks.bought.value?r.value:i.dOne),b=v(()=>C.throwingHarder.bought.value?i.log2(r.value).sqrt().clampMin(1):i.dOne),x=v(()=>C.marryingChunks.bought.value?i.pow(r.value,1.25).clampMin(1):i.dOne),C={chuckingChunks:O(()=>({requirements:I(()=>({resource:Y(t),cost:i.fromNumber(3)})),display:{title:"Chuckin' Chunks",description:"Increase base Dust Time by double your best Chunks.",effectDisplay:()=>`+${P(u.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),grindingChunks:O(()=>({requirements:I(()=>({resource:Y(t),cost:i.fromNumber(3)})),display:{title:"Grindin' Chunks",description:"Gain Dust per second equal to your best Chunks.",effectDisplay:()=>`${P(i.times(be.passiveGenerationPerSecondEffect.value,100))}%/s`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),lovingChunks:O(()=>({requirements:I(()=>({resource:Y(t),cost:i.fromNumber(3)})),display:{title:"Lovin' Chunks",description:"Reduce Chunk cost based on Dust.",effectDisplay:()=>`÷${P(o.apply(0))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),autoChunks:O(()=>({visibility:()=>Se.chunkAccelerator.upgrades.moreChunkUpgrades.bought.value||C.autoChunks.bought.value,requirements:I(()=>({resource:Y(t),cost:i.fromNumber(35)})),display:{title:"Autoin' Chunks",description:"Automatically reset for Chunks, and they reset nothing."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),collidingChunks:O(()=>({visibility:()=>Se.chunkAccelerator.upgrades.moreChunkUpgrades.bought.value,requirements:I(()=>({resource:t,cost:50})),display:{title:"Collidin' Chunks",description:"Raise Collision Time based on Chunks.",effectDisplay:()=>`^${P(f.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),splinteringChunks:O(()=>({visibility:()=>Se.chunkAccelerator.upgrades.moreChunkUpgrades.bought.value,requirements:I(()=>({resource:t,cost:70})),display:{title:"Splinterin' Chunks",description:"Reduce Chunk cost based on Collision Time.",effectDisplay:()=>`÷${P(m.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),cheapingChunks:O(()=>({visibility:()=>Se.chunkAccelerator.upgrades.moreChunkUpgrades.bought.value,requirements:I(()=>({resource:t,cost:75})),display:{title:"Cheapin' Chunks",description:"Reduce Chunk cost by best Chunks.",effectDisplay:()=>`÷${P(p.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),speedingChunks:O(()=>({visibility:()=>Se.chunkAccelerator.upgrades.moreChunkUpgrades.bought.value,requirements:I(()=>({resource:t,cost:90})),display:{title:"Speedin' Chunks",description:"Boost Time Acceleron gain based on best Chunks.",effectDisplay:()=>`x${P(g.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),dustingChunks:O(()=>({visibility:()=>C.speedingChunks.bought.value,requirements:I(()=>({resource:t,cost:100})),display:{title:"Dustin' Chunks",description:"Multiply Dust gain by best Chunks.",effectDisplay:()=>`x${P(w.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),dirtCheap:O(()=>({visibility:()=>C.speedingChunks.bought.value,requirements:I(()=>({resource:t,cost:105})),display:{title:"Dirt Cheap",description:"Reduce the cost scaling of Chunks."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),throwingHarder:O(()=>({visibility:()=>C.speedingChunks.bought.value,requirements:I(()=>({resource:t,cost:120})),display:{title:"Throwin' Harder",description:"Raise 'Chuckin' Chunks' effect based on best Chunks.",effectDisplay:()=>`^${P(b.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),marryingChunks:O(()=>({visibility:()=>C.speedingChunks.bought.value,requirements:I(()=>({resource:t,cost:150})),display:{title:"Marryin' Chunks",description:"Multiply 'Lovin' Chunks' effect based on best Chunks at an increase rate.",effectDisplay:()=>`x${P(x.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},N=hn(()=>({layerID:Xn,color:e,reset:y,display:"C",classes:{small:!0}})),y=dt(()=>({thingsToReset:()=>[]})),D=ni(()=>({classes:{"chunk-reset-button":!0},conversion:a,treeNode:N,display:()=>l(E,null,[l("span",null,[h("Condense your Dust & Time"),l("br",null,null),l("h3",{style:"font-weight: 600"},[h("Gain")," ",St(a.gainResource,i.max(c(a.actualGain),c(D.minimumGain)))," ",a.gainResource.displayName]),l("div",null,[l("br",null,null),h("Req:")," ",St(a.baseResource,i.gte(c(a.actualGain),1)?c(a.currentAt):c(a.nextAt))," ",a.baseResource.displayName])])]),dataAttributes:{"augmented-ui":"border br-round-inset tl-clip"},onClick:()=>{be.reset.reset()}})),F=()=>{dt(()=>({thingsToReset:()=>[re]})).reset(),ie.mercuryTreeUpgrades.secretChunkStash.bought.value&&(be.unlocks.chunks.bought.value=!0,t.value=3)};ke(ie.mercuryTreeUpgrades.secretChunkStash.bought,ae=>{ae&&(t.value=i.max(t.value,3),be.unlocks.chunks.bought.value=!0)});const ne=v(()=>i.gte(c(a.actualGain),1)&&!C.autoChunks.bought.value||Object.values(C).some(ae=>ae.canPurchase.value));return{id:Xn,name:n,color:e,fullReset:F,resetButton:D,chunks:t,bestChunks:r,conversion:a,upgrades:C,chuckingChunksEffect:u,treeNode:N,collidingChunksEffect:f,autoChunker:s,showNotification:ne,speedingChunksEffect:g,dustingChunksEffect:w,display:()=>{let ae;return l(E,null,[l("div",{id:"chunks-layer"},[l("h2",null,[h("You have "),P(t.value),h(" "),t.displayName]),l("h4",null,[h("Your best condensed Chunks is "),P(r.value),h(".")]),l("h6",null,[h("You have gathered a total of "),P(be.totalMercurialDust.value)]),l(Ue,null,null),B(D),l(Ue,null,null),Fe.milestones.three.earned.value===!0?l(Qe,{header:"Upgrades"},Io(ae=Ge(C,4))?ae:{default:()=>[ae]}):null])])}}});function xn(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!nn(n)}const Dr="Md",be=nt(Dr,n=>{const e="Mercury",t="#8c8c94",r=we(0,"Mercurial Dust",2),a=Bn(r),s=we(0),u=Bn(s),o=Y(Ve.unlocked),f={messengerGodUpgrade:O(()=>({requirements:I(()=>({resource:Y(r),cost:i.fromNumber(50)})),display:{title:"The Messenger God",description:"Multiply Dust & Collision Time by x1.5.",effectDisplay:()=>`x${P(ye.apply(1))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),slippingTimeUpgrade:O(()=>({requirements:I(()=>({resource:Y(r),cost:i.fromNumber(100)})),display:{title:"Slippery Time",description:"Multiplies Dust Time based on Dust Time.",effectDisplay:()=>`x${P(fe.apply(1))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),collisionCourse:O(()=>({requirements:I(()=>({resource:Y(r),cost:i.fromNumber(250)})),display:{title:"Collision Course",description:"Raise Dust & Collision Time based on Dust.",effectDisplay:()=>`^${P(oe.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),acummulatingDust:O(()=>({requirements:I(()=>({resource:Y(r),cost:i.fromNumber(1e3)})),display:{title:"Accumulating Dust",description:"Multiply Dust gain based on itself.",effectDisplay:()=>`x${P(ae.apply(1))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),totalUpgrade:O(()=>({visibility:()=>f.acummulatingDust.bought.value,requirements:I(()=>({resource:r,cost:i.fromNumber(5e4)})),display:{title:"Seasoned Dust",description:"Increases base Dust Time based on itself.",effectDisplay:()=>`+${P(te.apply(0))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),killingTime:O(()=>({visibility:()=>f.acummulatingDust.bought.value,requirements:I(()=>({resource:r,cost:i.fromNumber(1e8)})),display:{title:"Killin' Time",description:"Increase base Dust gain based on OOM of Dust Time.",effectDisplay:()=>`+${P(Z.apply(0))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),acceleration:O(()=>({visibility:()=>f.acummulatingDust.bought.value,requirements:I(()=>({resource:r,cost:i.fromNumber(1e15)})),display:{title:"Acceleration",description:"Dust Time and Dust boost each other.",effectDisplay:()=>l(E,null,[l("br",null,null),h("Dust Time gain: x"),P(Tt.value),l("br",null,null),h("Dust Gain: x"),P(ft.value)])},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),accelerationTwo:O(()=>({visibility:()=>f.acummulatingDust.bought.value,requirements:I(()=>({resource:r,cost:1e20})),display:{title:"Acceleration 2: This time it's personal",description:"Multiply Collision Time based on Dust Time.",effectDisplay:()=>`x${P(w.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},m=Te(()=>[Le(()=>({enabled:x.chunkingTime.bought,multiplier:()=>i.add(re.bestChunks.value,1).sqrt().clampMin(1)}))]),p=Te(()=>[Le(()=>({enabled:x.iHateDinosaurs.bought,multiplier:()=>i.add(re.bestChunks.value,1).log(2).pow(1.2).clampMin(1)}))]),g=Te(()=>[Le(()=>({enabled:x.fedexManager.bought,multiplier:()=>i.add(re.bestChunks.value,1).log2().clampMin(1)}))]),w=v(()=>f.accelerationTwo.bought.value?i.add(s.value,1).log2().sqrt().mul(p.apply(1)).clampMin(1):i.dOne),b=Te(()=>[Le(()=>({enabled:x.dustBunnies.bought,multiplier:()=>i.add(re.bestChunks.value,1).log2().pow(1.1).clampMin(1)}))]),x={chunkingTime:O(()=>({visibility:()=>Se.dustAccelerator.upgrades.first.bought.value,requirements:I(()=>({resource:Y(r),cost:i.fromNumber(1e30)})),display:{title:"It's Chunkin' time",description:`Multiply "Killin' Time" based on best Chunks.`,effectDisplay:()=>`x${P(m.apply(1))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),fedexManager:O(()=>({visibility:()=>Se.dustAccelerator.upgrades.first.bought.value,requirements:I(()=>({resource:Y(r),cost:i.fromNumber(1e40)})),display:{title:"FedEx Manager",description:'Multiply "The Messenger God" based on best Chunks.',effectDisplay:()=>`x${P(g.apply(1))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),dustBunnies:O(()=>({visibility:()=>Se.dustAccelerator.upgrades.first.bought.value,requirements:I(()=>({resource:Y(r),cost:i.fromNumber(1e50)})),display:{title:"Dust Bunnies",description:'Multiply "Accumulating Dust" based on best Chunks.',effectDisplay:()=>`x${P(b.apply(1))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),iHateDinosaurs:O(()=>({visibility:()=>Se.dustAccelerator.upgrades.first.bought.value,requirements:I(()=>({resource:Y(r),cost:i.fromNumber(1e60)})),display:{title:"eyehatedinosaurs",description:'Multiply "Acceleration 2" based on best Chunks.',effectDisplay:()=>`x${P(p.apply(1))}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},C=v(()=>i.add(30,Se.dustAccelerator.dustBuyableCapEffect.value)),N={baseDustTime:Ke(0),baseDustGain:Ke(0),dustMultiplier:Ke(0),dustPiles:Ke(0)},y=tt(()=>({classes:{"buy-max-button":!0},display:{description:"Buy Max"},onClick:()=>{Object.values(D).forEach(Q=>{let Ze=i.sub(C.value,Q.amount.value).toNumber();for(;Ze>0&&Q.canClick.value;)Q.purchase(),Ze--})},dataAttributes:{"augmented-ui":"border tl-clip br-clip"}})),D={baseDustTime:Ce(()=>({limit:()=>C.value,initialAmount:F(N.baseDustTime),requirements:I(()=>({resource:Y(r),cost:d.variable(D.baseDustTime.amount).pow_base(1.3).times(10)})),display:{title:"Align the Stars",description:"Increase base Dust Time gain by +1 per level.",effectDisplay:()=>`+${P(ge.apply(0))}/s`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),baseDustGain:Ce(()=>({limit:()=>C.value,initialAmount:F(N.baseDustGain),requirements:I(()=>({resource:Y(r),cost:d.variable(D.baseDustGain.amount).pow_base(1.8).times(15)})),display:{title:"Salted Dust",description:"Increase base Dust gain by +1 per level.",effectDisplay:()=>`+${P(G.apply(0))}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),dustMultiplier:Ce(()=>({limit:()=>C.value,initialAmount:F(N.dustMultiplier),requirements:I(()=>({resource:Y(r),cost:d.variable(D.dustMultiplier.amount).pow_base(1.3).times(30)})),display:{title:"Enriched Dust",description:"Multiply Dust gain by +0.1x per level.",effectDisplay:()=>`x${P(Pe.apply(1),1)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),dustPiles:Ce(()=>({limit:()=>C.value,initialAmount:F(N.dustPiles),requirements:I(()=>({resource:Y(r),cost:d.variable(D.dustPiles.amount).pow_base(2.5).times(75)})),display:{title:"Dust Piles",description:"Increase Dust gain by ^+0.1 per level.",effectDisplay:()=>`^${P(Ye.value,1)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"},visibility:()=>Fe.milestones.first.earned.value===!0||ie.mercuryTreeUpgrades.youGetAPile.bought.value}))},F=Q=>()=>Fe.milestones.five.earned.value===!0?i.min(re.bestChunks.value,Q.value):ie.mercuryTreeUpgrades.youGetAPile.bought.value?i.dOne:i.dZero,ne=(Q,Ze)=>{i.gt(Q,Ze.value)&&(Ze.value=Q)};ke(D.baseDustGain.amount,Q=>ne(Q,N.baseDustGain)),ke(D.baseDustTime.amount,Q=>ne(Q,N.baseDustTime)),ke(D.dustMultiplier.amount,Q=>ne(Q,N.dustMultiplier)),ke(D.dustPiles.amount,Q=>ne(Q,N.dustPiles));const ae=Te(()=>[Le(()=>({enabled:f.acummulatingDust.bought,multiplier:()=>i.add(r.value,10).log10().sqrt().mul(b.apply(1)).clampMin(1),description:"Accumulating Dust"}))]),te=Te(()=>[jt(()=>({enabled:f.totalUpgrade.bought,addend:()=>i.add(u.value,1).log2().sqrt().clampMin(1),description:"Seasoned Dust"}))]),ge=Te(()=>[jt(()=>({addend:()=>D.baseDustTime.amount.value,description:"Align the Stars"}))]),ye=Te(()=>[Le(()=>({multiplier:()=>i.fromNumber(1.5).times(g.apply(1)).times(w.value),enabled:f.messengerGodUpgrade.bought,description:"Messenger God"}))]),fe=Te(()=>[Le(()=>({enabled:f.slippingTimeUpgrade.bought,multiplier:()=>i.add(s.value,10).log10().pow(.6).clampMin(1),description:"Slippery Time"}))]),oe=v(()=>f.collisionCourse.bought.value?i.add(r.value,10).log10().sqrt().pow(.2).clampMin(1):i.dOne),Re=Ht(()=>({enabled:f.collisionCourse.bought,exponent:()=>oe.value,description:"Collision Course"})),ue=Te(()=>[te,ge,jt(()=>({addend:re.chuckingChunksEffect.value})),Fe.firstMilestoneModifier,fe,ye,Le(()=>({multiplier:Tt.value})),Le(()=>({multiplier:ie.mercuryTreeEffects.solarSpeed})),Re,Ht(()=>({exponent:()=>Fe.fourthMilestoneModifier.value})),Ht(()=>({exponent:()=>Se.timeAccelerator.levelTwoTimeRaiseEffect.value}))]),H={chunks:O(()=>({requirements:I(()=>({resource:Y(r),cost:i.fromNumber(1e3)})),display:{title:"Chunks",description:"Unlock Mercurial Chunks"},classes:{"sd-upgrade":!0,unlock:!0},clickableDataAttributes:{"augmented-ui":"border tr-clip bl-clip-y"}})),accelerators:O(()=>({requirements:I(()=>({resource:Y(r),cost:i.fromNumber(1e9)})),display:{title:"Accelerators",description:"Unlock Accelerators"},classes:{"sd-upgrade":!0,unlock:!0},clickableDataAttributes:{"augmented-ui":"border tr-clip bl-clip-y"}}))},G=Te(()=>[jt(()=>({enabled:()=>i.gt(D.baseDustGain.amount.value,0),addend:()=>D.baseDustGain.amount.value}))]),Pe=Te(()=>[Le(()=>({multiplier:()=>i.dOne.add(i.times(.1,D.dustMultiplier.amount.value)).clampMin(1),enabled:()=>i.gt(D.dustMultiplier.amount.value,0)}))]),Ye=v(()=>c(D.dustPiles.visibility)===!1?i.dOne:i.dOne.add(i.times(.1,D.dustPiles.amount.value)).clampMin(1)),xe=Te(()=>[Ht(()=>({enabled:()=>i.gt(D.dustPiles.amount.value,0),exponent:()=>Ye.value}))]),Z=Te(()=>[jt(()=>({enabled:f.killingTime.bought,addend:()=>i.log10(s.value).floor().pow(1.5).times(m.apply(1))}))]),qe=Te(()=>[G,Z,Pe,ae,Se.dustAccelerator.dustGainMultiplierModifier,Le(()=>({multiplier:ie.mercuryTreeEffects.solarFriedDust})),Le(()=>({multiplier:re.dustingChunksEffect.value})),Le(()=>({multiplier:ft.value})),xe,Ht(()=>({exponent:()=>Se.dustAccelerator.dustAcceleratorDustRaiseEffect.value})),Ht(()=>({exponent:()=>Se.timeAccelerator.levelTwoTimeRaiseEffect.value}))]),We=wo(()=>({formula:Q=>qe.getFormula(Q.div(2).pow(.3)).step(1e6,Ze=>Ze.div(3)),baseResource:s,gainResource:Y(r),currentGain:v(()=>i.lt(s.value,10)?i.dZero:i.fromValue(We.formula.evaluate(s.value))),spend:()=>{s.value=i.dZero,Ve.collisionTime.value=new i(Ve.collisionTime.defaultValue)}})),ft=v(()=>f.acceleration.bought.value?i.add(r.value,1).log10().cbrt().clampMin(1):i.dOne),Tt=v(()=>f.acceleration.bought.value?i.add(r.value,1).log10().cbrt().clampMin(1):i.dOne),rt=dt(()=>({thingsToReset:()=>[f,D,x],onReset:()=>{r.value=r[ut],a.value=i.dZero;const Q=Fe.milestones.twenty.earned.value===!0?i.times(s.value,.1):i.dZero;s.value=Q,u.value=Q,Ve.collisionTime.value=new i(Ve.collisionTime[ut]),yn(),sn()}})),jn=()=>{dt(()=>({thingsToReset:()=>[be]})).reset(),Object.values(N).forEach(Q=>Q.value=0),sn(),kn(),zn()};ke(Fe.completedMilestonesCount,()=>yn()),ke(ie.mercuryTreeUpgrades.dustyTomes.bought,()=>sn()),ke(ie.mercuryTreeUpgrades.nTropy.bought,()=>kn()),ke(ie.mercuryTreeUpgrades.autoAutoChunks.bought,()=>zn());function yn(){if(Fe.milestones.second.earned.value===!1)return;const Q=Fe.completedMilestonesCount.value;Object.values(f).slice(0,Q).forEach(Ze=>Ze.bought.value=!0)}function sn(){ie.mercuryTreeUpgrades.dustyTomes.bought.value&&(f.messengerGodUpgrade.bought.value=!0,f.slippingTimeUpgrade.bought.value=!0,f.collisionCourse.bought.value=!0,f.acummulatingDust.bought.value=!0)}function kn(){ie.mercuryTreeUpgrades.nTropy.bought.value&&(H.accelerators.bought.value=!0)}function zn(){ie.mercuryTreeUpgrades.autoAutoChunks.bought.value&&(re.upgrades.autoChunks.bought.value=!0)}const pe=ni(()=>({classes:{"dust-time-reset-button":!0},conversion:We,treeNode:Xe,showNextAt:!1,display:()=>l(E,null,[l("span",null,[h("Reset Dust Time & Collision Time"),l("br",null,null),l("h3",{style:"font-weight: 600"},[h("Gain")," ",St(We.gainResource,i.max(c(We.actualGain),c(pe.minimumGain)))," ",We.gainResource.displayName])])]),dataAttributes:{"augmented-ui":"border br-round-inset tl-clip"}})),Xe=hn(()=>({layerID:Dr,color:t,reset:rt,classes:{small:!0},display:"D"})),kt=v(()=>{if(!Gt.value)return i.dZero;const Q=i.fromNumber(ie.mercuryTreeUpgrades.snortingDust.bought.value?.05:0);return re.upgrades.grindingChunks.bought.value?i.mul(re.bestChunks.value,.01).add(Q).clampMin(.01):Q}),Gt=v(()=>re.upgrades.grindingChunks.bought.value||ie.mercuryTreeUpgrades.snortingDust.bought.value),gi=v(()=>i.times(kt.value,c(We.actualGain)));Mo(n,We,()=>kt.value),n.on("update",Q=>{if(!o.value||Ve.hasCollidedComputed.value)return;const Ze=i.times(ue.apply(1),Q);s.value=i.add(s.value,Ze)});const bi=v(()=>Object.values(D).some(Q=>Q.canClick.value)||Object.values(f).some(Q=>Q.canPurchase.value)||Object.values(x).some(Q=>Q.canPurchase.value)||Object.values(H).some(Q=>Q.canPurchase.value)),Cn="gap: 8px; margin-bottom: 8px;";return{name:e,color:t,timeSinceReset:s,totalTimeSinceReset:u,mercurialDust:r,totalMercurialDust:a,baseDustAmountModifier:ge,baseDustGainModifier:G,dustMultiplierModifier:Pe,unlocks:H,slippingTimeModifier:fe,repeatables:D,basicUpgrades:f,acceleratorUpgrades:x,totalTimeModifier:te,messengerGodModifier:ye,collisionCourseEffect:oe,collisionCourseModifier:Re,reset:rt,passiveGenerationPerSecondEffect:kt,showNotification:bi,repeatableBestAmounts:N,fullReset:jn,display:()=>{let Q,Ze,Wn,Zn;return l(E,null,[l("div",{id:"dust-layer"},[l("h2",null,[P(r.value),h(" "),r.displayName]),Gt.value?l(E,null,[l("h6",null,[h("Gaining "),P(gi.value),h("/s")])]):null,l("h5",null,[h("You have "),P(s.value),h(" Dust Time.")]),l("h6",null,[h("("),P(ue.apply(1)),h("/s)")]),l(Ue,null,null),B(pe),l(Ue,null,null),l(Ue,null,null),B(y),l(_t,null,xn(Q=Ge(D,4,Cn))?Q:{default:()=>[Q]}),l(Ue,null,null),l(Qe,{header:"Upgrades"},{default:()=>[l(_t,null,xn(Ze=Ge(f,4,Cn))?Ze:{default:()=>[Ze]}),Se.dustAccelerator.upgrades.first.bought.value?l(_t,null,xn(Wn=Ge(x,4,Cn))?Wn:{default:()=>[Wn]}):null]}),l(Qe,{header:"Unlocks"},{default:()=>[l(_t,null,xn(Zn=Ge(H,4,Cn))?Zn:{default:()=>[Zn]})]})])])},treeNode:Xe}}),Po={key:0,class:"material-icons pinned"},$o=X({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=U(!1),r=v(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0||t.value}),a=()=>B(e.display);function s(o){const f=e.pinned;o.shiftKey&&f!=null&&(f.value=!f.value,o.stopPropagation(),o.preventDefault())}const u=v(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0&&rn[z.theme].showPin});return(o,f)=>(S(),A("div",{class:he(["tooltip-container",{shown:r.value}]),onMouseenter:f[0]||(f[0]=m=>t.value=!0),onMouseleave:f[1]||(f[1]=m=>t.value=!1),onClickCapture:s},[bt(o.$slots,"default",{},void 0,!0),l(Or,{name:"fade"},{default:j(()=>[r.value?(S(),A("div",{key:0,class:he(["tooltip",{top:c(o.direction)===c(ee).Up,left:c(o.direction)===c(ee).Left,right:c(o.direction)===c(ee).Right,bottom:c(o.direction)===c(ee).Down,...c(o.classes)}]),style:Ae([{"--xoffset":c(o.xoffset)||"0px","--yoffset":c(o.yoffset)||"0px"},c(o.style)??{}])},[u.value?(S(),A("span",Po,"push_pin")):V("",!0),l(a)],6)):V("",!0)]),_:1})],34))}}),De=de($o,[["__scopeId","data-v-ce1a282c"]]),Ar="M",Ve=nt(Ar,n=>{const e="Mercury",t="#8c8c94",r=Y(ie.solarSystemUpgrades.mercury.bought),a=i.times(1e88,84600),s=we(a),u=we(0),o=st(()=>({progress:()=>i.sub(1,i.div(i.ln(m.value),i.ln(a))),width:"100%",height:10,direction:ee.Right,containerStyle:{"text-align":"center"},style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline-lighter)"}})),f=Te(()=>[Le(()=>({multiplier:1.5,enabled:be.basicUpgrades.messengerGodUpgrade.bought,description:"Messenger God"}))]),m=v(()=>new i(1).add(Fe.eightyMilestoneEffect.value).times(f.apply(1)).times(Fe.firstMilestoneModifier.apply(1)).times(ie.mercuryTreeEffects.solarSpeed.value).times(be.messengerGodModifier.apply(1)).pow(be.collisionCourseEffect.value).pow(Fe.fourthMilestoneModifier.value).pow(re.collidingChunksEffect.value)),p=v(()=>i.lte(s.value,0));n.on("update",te=>{!r.value||p.value||(s.value=i.sub(s.value,i.times(m.value,te)).clampMin(0))});const g=dt(()=>({thingsToReset:()=>[Ve]})),w=v(()=>be.showNotification.value||re.showNotification.value||Se.showNotification.value),b=hn(()=>({visibility:r,layerID:Ar,display:()=>l(dn,{body:"Mercury"},null),wrapper:l(De,{display:"Mercury",direction:ee.Down},null),glowColor:()=>w.value?t:null,color:t,reset:g})),x=Un({dust:()=>({display:()=>l(E,null,[h("Dust "),be.showNotification.value?"!":null]),tab:gt(()=>({display:be.display}))}),chunks:()=>({visibility:()=>be.unlocks.chunks.bought.value,display:()=>l(E,null,[h("Chunks "),re.showNotification.value?"!":null]),tab:gt(()=>({display:re.display}))}),accelerators:()=>({visibility:()=>be.unlocks.accelerators.bought.value,display:()=>l(E,null,[h("Accelerators "),Se.showNotification.value?"!":null]),tab:gt(()=>({display:Se.display}))}),milestones:()=>({visibility:()=>be.unlocks.chunks.bought.value,display:"Milestones",tab:gt(()=>({display:Fe.display}))})}),C=86400,N=v(()=>i.lt(s.value,C)?l("h3",null,[q(i.div(s.value,3600)),h(" hours until collision")]):l("h3",null,[q(i.div(s.value,86400)),h(" days until collision")])),y=v(()=>{let te;return i.lt(s.value,C)?te=l("span",null,[h("(-"),q(i.div(m.value,3600)),h(" hours)")]):te=l("span",null,[h("(-"),q(i.div(m.value,86400)),h(" days)")]),l("h4",null,[h("-"),q(m.value),h("/s "),te])}),D=v(()=>l(E,null,[l("h2",null,[h("Mercury")]),l("br",null,null),N.value,y.value,l("div",{"data-augmented-ui":"border tl-clip",style:"border-color: var(--outline); width: 512px"},[B(o)]),l(Ue,null,null),B(x)])),F=tt(()=>({classes:{"solar-reset-button":!0},display:{title:"Mercury has collided with the Sun.",description:"Reset for 1 Solar Energy & 1 Mercury Core."},onClick:()=>{ie.energy.value=i.add(ie.energy.value,1),ie.mercuryCores.value=i.add(ie.mercuryCores.value,1),u.value=i.add(u.value,1),Se.fullReset(),Fe.fullReset(),re.fullReset(),be.fullReset(),g.reset(),s.value=a}})),ne=v(()=>l(E,null,[l("div",{style:"height: 100%; display: flex;"},[B(F)])])),ae=()=>p.value?ne.value:D.value;return{name:e,color:t,collisionTime:s,maxCollisionTime:a,tabs:x,collisionTimeGainComputed:m,display:()=>ae(),treeNode:b,totalResets:u,unlocked:r,solarResetButton:F,hasCollidedComputed:p}});function Nn(n,e){const t=we(0,n),r=we(0);return Me(()=>{const a=e(),{capCostFormula:s,effectFormula:u,maxEffectFormula:o,effectFormatter:f,effectDisplayTitle:m,augmentedUi:p,effectDisplayAugmentedUi:g,...w}=a,b=$(o),x=$(u),C=$(s),N=v(()=>c(C).evaluate()),y=v(()=>c(b).evaluate()),D=v(()=>c(x).evaluate()),F=v(()=>`${f(D.value)}/${f(y.value)}`),ne=st(()=>({direction:ee.Up,progress:()=>i.div(t.value,N.value),display:()=>l(E,null,[l("h4",{class:"text-venus-500 text-shadow-lg"},[q(t.value),h("/"),q(N.value)])]),width:"100%",height:"128px",borderStyle:{border:"0",borderRadius:"0"}})),ae=tt(()=>({canClick:()=>i.gte(t.value,N.value),classes:{"squashed-clickable":!0,flex:!0,"clickable:can:text-venus-700!":!0},display:()=>{const fe=i.add(r.value,1),oe=c(C).evaluate(fe),Re=c(b).evaluate(fe);return l("div",{class:"p-2"},[l("h3",null,[h("Increase Cap")]),l("div",null,[h("Reset "),t.displayName,h(" to increase cap ("),q(oe),h(") & max effect ("),f(Re),h(").")])])},onClick:()=>{c(ae.canClick)!==!1&&(t.value=0,r.value=i.add(r.value,1))}})),te=`${t.displayName.toLocaleLowerCase()}-display`;if(a.classes==null)a.classes=v(()=>({"m-0":!0,"lava-subtype":!0}));else{const fe=$(a.classes);a.classes=v(()=>({...c(fe),"m-0":!0,"lava-subtype":!0}))}const ge=v(()=>c(ae.canClick)===!0),ye={resource:t,capIncreases:r,cap:N,maxEffect:y,effect:D,effectDisplay:F,showNotification:ge,augmentedUi:$(p),effectDisplayAugmentedUi:$(g),effectDisplayTitle:$(m),...w,...lt("lavaSubtype",a,()=>l(E,null,[l("div",{"data-augmented-ui":ye.augmentedUi,class:"border-0",id:te},[l("div",{class:"py-2"},[l("h3",null,[t.displayName]),l("h5",null,[h("Level "),i.add(r.value,1)])]),l("div",{"data-augmented-ui":ye.effectDisplayAugmentedUi,class:"mt-1 py-2"},[l("h5",null,[ye.effectDisplayTitle]),l("h5",{class:"font-semibold"},[F.value])]),l("div",null,[B(ne)]),B(ae)])]))};return ye})}function Lo(n,e,t,r,a=1){const s=i.max(0,i.div(n,e)),u=i.pow(s,a),o=i.sub(r,t).times(u);return i.add(t,o)}function Sn(n,e,t=1){const r=$(n),a=i.sub(t,i.times(r.capIncreases.value,.01)),s=$(e),u=d.max(0,d.div(r.resource,r.cap)),o=d.pow(u,a);return d.sub(r.maxEffect,s).times(o).add(s)}const Er="VM",Vt=nt(Er,()=>{const n=ce.eruptions,e={one:je(()=>({requirements:He(n,1),display:{requirement:"1 Eruption",effectDisplay:()=>l(E,null,[l("h4",null,[h("Increase Effusive Eruption based on Eruptions.")]),l("h4",null,[h("Currently: +"),q(t.value)])])}})),two:je(()=>({requirements:He(n,2),display:{requirement:"2 Eruptions",effectDisplay:()=>l(E,null,[l("h4",null,[h("Keep some Pressure (^0.01) on Eruption.")]),l("h4",null,[h("Currently: "),q(r.value)])])}})),three:je(()=>({requirements:He(n,3),display:{requirement:"3 Eruptions",effectDisplay:()=>l(E,null,[l("h4",null,[h("Increase base Tephra gain by Eruptions.")]),l("h4",null,[h("Current +"),q(a.value)])])}})),five:je(()=>({requirements:He(n,5),display:{requirement:"5 Eruptions",effectDisplay:()=>l(E,null,[l("h4",null,[h("Keep Effusive Eruption unlocked")]),l("h4",null,[h("Keep Molten Lava on Explosive Eruption based on Eruptions.")]),l("h4",null,[h("Current "),q(s.value)])])}}))},t=v(()=>e.one.earned.value?i.times(n.value,.01):i.dZero),r=v(()=>e.two.earned.value?i.pow(Be.pressure.value,.01):i.dZero),a=v(()=>e.three.earned.value?i.fromValue(n.value):i.dZero),s=v(()=>e.five.earned.value?i.times(n.value,25):i.dZero),u=v(()=>i.gt(n.value,0));return{id:Er,unlocked:u,milestones:e,oneMilestoneEffect:t,twoMilestoneEffect:r,threeMilestoneEffect:a,fiveMilestoneEffect:s,display:()=>l(E,null,[l("div",{id:"milestones-layer"},[l("div",{class:"mb-2"},[l("h2",null,[h("Milestones")])]),l("div",{class:"mb-4"},[l("hr",{class:"section-divider"},null)]),l("div",{class:"mb-6"},[l("h3",null,[h("You have erupted "),q(n.value,0),h(" times.")])]),Object.values(e).map(o=>B(o))])])}}),Ir="VT",Ne=nt(Ir,()=>{const n=we(0,"Tephra"),e=ci(()=>({gainResource:Y(n),baseResource:Be.pressure,formula:()=>d.variable(i.dZero).if(()=>Be.pressureCapped.value,()=>d.variable(i.dOne).add(Vt.threeMilestoneEffect.value)),convert:()=>{n.value=c(e.currentGain)}})),t={secretsLongBuried:O(()=>({requirements:I(()=>({resource:n,cost:1})),display:{title:"Secrets Once Buried",description:"Unlock more Volcano & Molten Lava upgrades."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),shinyRocks:O(()=>({requirements:I(()=>({resource:n,cost:1})),display:{title:"Shiny Rocks",description:"Unlock Volcano & Molten Lava Buyables."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),ultraMafic:O(()=>({requirements:I(()=>({resource:n,cost:1})),display:{title:"Ultramafic",description:"Unlock a new Silicate Lava, which boosts the other Silicate effects."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},r=v(()=>i.gt(o.gamblingMan.amount.value,0)?i.times(o.gamblingMan.amount.value,1.2).clampMin(1):i.dOne),a=v(()=>i.gt(o.blobTheBuilder.amount.value,0)?i.times(o.blobTheBuilder.amount.value,1.2).clampMin(1):i.dOne),s=v(()=>i.gt(o.greenIsNotACreativeColor.amount.value,0)?i.times(o.greenIsNotACreativeColor.amount.value,1.2).clampMin(1):i.dOne),u=v(()=>i.gt(o.youreGonnaMakeMeBlow.amount.value,0)?i.sub(1,i.times(o.youreGonnaMakeMeBlow.amount.value,.02)):i.dOne),o={gamblingMan:Ce(()=>({requirements:I(()=>({resource:n,cost:d.variable(o.gamblingMan.amount).add(2)})),display:{title:"Gambling Man",description:"Increase Pressure Build Chance by x1.2 per level.",effectDisplay:()=>`x${q(r.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),blobTheBuilder:Ce(()=>({requirements:I(()=>({resource:n,cost:d.variable(o.blobTheBuilder.amount).add(2)})),display:{title:"Blob The Builder",description:"Increase Pressure Build Mult by +0.2x per level.",effectDisplay:()=>`x${q(a.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),greenIsNotACreativeColor:Ce(()=>({requirements:I(()=>({resource:n,cost:d.variable(o.greenIsNotACreativeColor.amount).add(2)})),display:{title:"Green is Not a Creative Color",description:"Divide Pressure Interval by +0.2 per level.",effectDisplay:()=>`÷${q(s.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),youreGonnaMakeMeBlow:Ce(()=>({requirements:I(()=>({resource:n,cost:d.variable(o.youreGonnaMakeMeBlow.amount).add(2)})),display:{title:"You're Gonna Make Me Blow",description:"Raise the Explosive Eruption by ^α. Each level reduces α by -0.02.",effectDisplay:()=>`${q(u.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}}))},f=v(()=>i.gt(ce.eruptions.value,0)),m=v(()=>f.value&&(Object.values(t).some(p=>p.canPurchase.value)||Object.values(o).some(p=>p.canClick.value)));return{id:Ir,tephra:n,tephraConversion:e,unlocked:f,upgrades:t,buyables:o,showNotification:m,gamblingManEffect:r,blobTheBuilderEffect:a,greenIsNotACreativeColorEffect:s,youreGonnaMakeMeBlowEffect:u,display:()=>l(E,null,[l("div",{id:"tephra-layer"},[l(Qe,{header:"Tephra"},{default:()=>[l("div",{"data-augmented-ui":"border tl-rect br-rect",class:"w-[212px] h-fit p-6"},[l("h5",{class:"font-semibold"},[h("You have "),q(n.value,0),h(" "),n.displayName])])]}),l(Qe,{header:"Upgrades"},{default:()=>[l("div",null,[Ge(t,4)])]}),l(Qe,{header:"Buyables"},{default:()=>[l("div",{class:"mb-4"},[Ge(o,4)])]})])])}});function Bo(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!nn(n)}var Ie=function(n){return n[n.none=0]="none",n[n.felsic=1]="felsic",n[n.intermediate=2]="intermediate",n[n.mafic=3]="mafic",n[n.ultramafic=4]="ultramafic",n}(Ie||{});const Pr="VS",Oe=nt(Pr,n=>{const t=Nn("Ultramafic",()=>({capCostFormula:()=>d.variable(t.capIncreases).pow_base(2).times(300),maxEffectFormula:()=>d.variable(t.capIncreases).times(.1).plus(1.1),effectFormula:()=>Sn(t,1,.8),effectFormatter:Z=>`x${q(Z)}`,effectDisplayTitle:"Increase to other Silicate Effects",effectDisplayAugmentedUi:"border",augmentedUi:"border tr-clip tl-clip"})),r=Nn("Felsic",()=>({capCostFormula:()=>d.variable(r.capIncreases).pow_base(2).times(50).step(350,Z=>Z.times(9)),maxEffectFormula:()=>d.variable(r.capIncreases).pow_base(1.5).times(10).step(40,Z=>Z.pow(.5)).times(t.effect),effectFormula:()=>Sn(r,0,.8).times(t.effect),effectFormatter:Z=>`+${q(Z)}%`,effectDisplayTitle:"Pressure Build Chance",effectDisplayAugmentedUi:"border br-clip",augmentedUi:"border tl-2-round-inset tr-clip"})),a=Nn("Intermediate",()=>({capCostFormula:()=>d.variable(a.capIncreases).pow_base(2).times(75).step(550,Z=>Z.times(9)),maxEffectFormula:()=>d.variable(a.capIncreases).pow_base(2).times(2).step(32,Z=>Z.pow(.5)).times(t.effect),effectFormula:()=>Sn(a,1,.8).times(t.effect),effectFormatter:Z=>`+${q(Z)}`,effectDisplayTitle:"Pressure Build Mult",effectDisplayAugmentedUi:"border br-clip bl-clip",augmentedUi:"border tl-clip tr-scoop-x"})),s=Nn("Mafic",()=>({capCostFormula:()=>d.variable(s.capIncreases).pow_base(2).times(100).step(750,Z=>Z.times(9)),maxEffectFormula:()=>d.variable(s.capIncreases).pow_base(2).times(1.5).step(24,Z=>Z.pow(.5)).times(t.effect),effectFormula:()=>Sn(s,1,.8).times(t.effect),effectFormatter:Z=>`÷${q(Z)}`,effectDisplayTitle:"Pressure Interval",effectDisplayAugmentedUi:"border bl-clip",augmentedUi:"border tl-scoop-x tr-2-clip-y"})),u=v(()=>i.gt(m.feelTheHeat.amount.value,0)?i.times(.1,m.feelTheHeat.amount.value):i.dZero),o=v(()=>i.gt(m.bringTheHeat.amount.value,0)?i.times(.05,m.bringTheHeat.amount.value).add(1):i.dOne),f=Z=>i.lte(Z,1)?i.dOne:i.times(.1,i.sub(Z,1)).add(1),m={feelTheHeat:Ce(()=>({requirements:[I(()=>({resource:r.resource,cost:()=>i.div(In(m.feelTheHeat.amount.value),ce.noReallyFeelItEffect.value)})),I(()=>({resource:a.resource,cost:()=>i.div(In(m.feelTheHeat.amount.value),ce.noReallyFeelItEffect.value)})),I(()=>({resource:s.resource,cost:()=>i.div(In(m.feelTheHeat.amount.value),ce.noReallyFeelItEffect.value)}))],display:{title:"Feel The Heat",description:"Increase conversion rate of Silicate Lavas by +0.1 per level.",effectDisplay:()=>`+${q(u.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-clip"}})),bringTheHeat:Ce(()=>({requirements:[I(()=>({resource:ce.lava,cost:d.variable(m.bringTheHeat.amount).pow_base(5).times(25)}))],display:{title:"Bring The Heat",description:"Divides conversion rate of Lava by +0.05 per level.",effectDisplay:()=>`÷${q(o.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-clip"}})),beTheHeat:Ce(()=>({requirements:[I(()=>({resource:r.resource,cost:d.variable(m.beTheHeat.amount).pow_base(1.2).times(20)})),I(()=>({resource:a.resource,cost:d.variable(m.beTheHeat.amount).pow_base(1.2).times(20)})),I(()=>({resource:s.resource,cost:d.variable(m.beTheHeat.amount).pow_base(1.2).times(20)}))],display:{title:"BE The Heat",description:"Increase max Conversion Tier. Each Tier increases speed divisor by +0.1, but increases Lava Costs by +1.5x.",effectDisplay:()=>`+${i.sub(H.value,1)} Max Tiers`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-clip"}}))},p=v(()=>i.div(1,o.value).times(Pe.value)),g=v(()=>i.fromNumber(.5).add(u.value).add(ce.theLavaMustFlowEffect.value)),w=v(()=>i.fromNumber(10).div(G.value)),b=v(()=>ce.lavaUpgrades.silicateLava.bought.value);n.on("preUpdate",Z=>{if(!b.value)return;const qe=x.value;if(qe!=null&&i.gt(ce.lava.value,0)&&i.lt(qe.resource.value,qe.cap.value)){const We=i.div(p.value,w.value),ft=i.min(ce.lava.value,i.times(We,Z)),Tt=i.times(ft,g.value);qe.resource.value=i.add(qe.resource.value,Tt).clampMax(qe.cap.value),ce.lava.value=i.sub(ce.lava.value,ft)}});const x=v(()=>{switch(N.value){case Ie.felsic:return r;case Ie.intermediate:return a;case Ie.mafic:return s;case Ie.ultramafic:return t;default:return null}}),C=Z=>({toggled:N.value===Z,"fit-content":!0,"conversion-toggle-button":!0}),N=Ke(Ie.none),y=tt(()=>({canClick:()=>N.value!==Ie.felsic,classes:()=>C(Ie.felsic),display:"Convert to Felsic",onClick:()=>{N.value=Ie.felsic}})),D=tt(()=>({canClick:()=>N.value!==Ie.intermediate,classes:()=>C(Ie.intermediate),display:"Convert to Intermediate",onClick:()=>{N.value=Ie.intermediate}})),F=tt(()=>({canClick:()=>N.value!==Ie.mafic,classes:()=>C(Ie.mafic),display:"Convert to Mafic",onClick:()=>{N.value=Ie.mafic}})),ne=tt(()=>({canClick:()=>N.value!==Ie.ultramafic,classes:()=>C(Ie.ultramafic),display:"Convert to Ultramafic",onClick:()=>{N.value=Ie.ultramafic}})),ae=tt(()=>({canClick:()=>N.value!==Ie.none,classes:()=>C(Ie.none),display:"Disable Conversion",onClick:()=>N.value=Ie.none})),te=v(()=>b.value&&(Object.values(m).some(Z=>Z.canClick.value)||r.showNotification.value||a.showNotification.value||s.showNotification.value)),ge=dt(()=>({thingsToReset:()=>[],onReset:()=>{r.resource.value=0,a.resource.value=0,s.resource.value=0}})),ye=v(()=>{const Z=i.div(p.value,w.value),qe=i.min(ce.passiveLavaGain.value,Z),We=i.div(g.value,p.value);return i.mul(qe,We)}),fe=v(()=>i.div(g.value,w.value)),oe=v(()=>i.div(p.value,w.value)),Re=v(()=>i.sub(ce.passiveLavaGain.value,i.div(p.value,w.value))),ue=Ke(1),H=v(()=>i.add(m.beTheHeat.amount.value,1)),G=v(()=>f(ue.value)),Pe=v(()=>i.lte(ue.value,1)?i.dOne:i.sub(ue.value,1).times(1.5)),Ye=tt(()=>({canClick:()=>i.gt(ue.value,1),classes:{"fit-content":!0,"clickable:can:text-venus-200!":!0,"clickable:locked:text-venus-500!":!0,"clickable:text-lg!":!0,"clickable:border-2":!0,"clickable:can:border-venus-200!":!0,"clickable:locked:border-venus-500!":!0,"clickable:bg-remove!":!0,"clickable:rounded-full!":!0},display:"-",onClick:()=>{c(Ye.canClick)!==!1&&(ue.value=i.sub(ue.value,1))}})),xe=tt(()=>({canClick:()=>i.lt(ue.value,H.value),classes:{"fit-content":!0,"clickable:can:text-venus-200!":!0,"clickable:locked:text-venus-500!":!0,"clickable:text-lg!":!0,"clickable:border-2":!0,"clickable:can:border-venus-200!":!0,"clickable:locked:border-venus-500!":!0,"clickable:bg-remove!":!0,"clickable:rounded-full!":!0},display:"+",onClick:()=>{c(xe.canClick)!==!1&&(ue.value=i.add(ue.value,1))}}));return{id:Pr,felsic:r,intermediate:a,mafic:s,ultramafic:t,silicateBuyables:m,unlocked:b,felsicConversionButton:y,intermediateConversionButton:D,maficConversionButton:F,selectedConversionLava:x,disableConversionButton:ae,selectedConversionLavaType:N,showNotification:te,explosiveEruptionReset:ge,currentSpeedTier:ue,display:()=>{let Z;return l(E,null,[l("div",{id:"silicate-layer"},[l(Qe,{header:"Silicate Buyables"},{default:()=>[l("div",{"data-augmented-ui":"border tl-2-clip-y br-round-x",class:"flex-1 w-[300px] px-8 py-4 mb-4"},[l("h5",null,[h("Convert Molten Lava into Silicate Lava for buffs")]),l(Ue,null,null),l("div",{class:"flex"},[B(Ye),l("div",{class:"flex flex-col"},[l("h4",null,[h("Conversion Tier - "),ue.value]),l("h5",{class:"font-semibold"},[q(p.value),h(" Lava to")," ",q(g.value),h(" Silicate")]),l("h5",{class:"font-semibold"},[h("Every "),q(w.value),h("/s")]),l("h6",null,[h("÷"),q(G.value),h(" | x"),q(Pe.value)]),l("h6",{class:"font-semibold"},[h("+"),q(fe.value),h(" (+"),q(ye.value),h(") Silicate/s")]),l("h6",{class:"font-semibold"},[h("-"),q(oe.value),h(" ("),q(Re.value),h(") Lava/s")])]),B(xe)])]),B(ae),l("div",{class:"flex mb-12"},[l("div",{class:"flex-1"},[B(y),B(r)]),l("div",{class:"flex-1"},[B(D),B(a)]),l("div",{class:"flex-1"},[B(F),B(s)])]),Ne.upgrades.ultraMafic.bought.value?l("div",{class:"w-3/5"},[B(ne),B(t)]):null]}),l(Qe,{header:"Buyables"},Bo(Z=Ge(m,4))?Z:{default:()=>[Z]})])])}}});function Qn(n){return Object.values(n).some(e=>"canPurchase"in e?e.canPurchase.value===!0:e.canClick.value===!0)}function qo(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!nn(n)}const $r="VL",ce=nt($r,n=>{const e=we(0),t=we(0,"Lava"),r=d.variable(e).pow_base(2).times(250).step(1500,G=>G.times(9)),a=v(()=>r.evaluate()),s=we(0),u=v(()=>50),o=d.variable(e).pow_base(2).times(10).clampMax(u.value),f=v(()=>i.gte(m.value,u.value)),m=v(()=>{const G=i.sub(.8,i.times(e.value,.01));return Lo(t.value,a.value,0,o.evaluate(),G)}),p=v(()=>i.add(5,ue.value)),w=(()=>{const G=t,Pe=a,Ye=e,xe=tt(()=>({canClick:()=>i.eq(G.value,Pe.value),classes:{"squashed-clickable":!0,flex:!0,"increase-lava-cap":!0},display:()=>{const qe=i.add(e.value,1),We=y.evaluate(qe),ft=r.evaluate(qe),Tt=o.evaluate(qe);return l(E,null,[l("div",{class:"p-2 px-10"},[l("h3",null,[h("Increase Cap")]),l("div",null,[h("Reset "),G.displayName,h(" to increase: cap ("),P(ft),h("), max effect ("),P(Tt),h("%), and Effusive Eruption softcap ("),P(We),h("/s).")])])])},onClick:()=>{c(xe.canClick)!==!1&&(G.value=0,Ye.value=i.add(Ye.value,1))},dataAttributes:{"augmented-ui":"border br-round-inset bl-round-inset"}})),Z=st(()=>({direction:ee.Right,height:32,width:"100%",style:{overflow:"hidden"},borderStyle:{borderRadius:"0"},display:()=>l(E,null,[l("h4",{class:"text-venus-500 text-shadow-lg"},[P(G.value),h("/"),P(Pe.value)])]),progress:()=>i.gt(Pe.value,1e10)?i.div(i.ln(G.value),i.ln(Pe.value)):i.div(G.value,Pe.value)}));return{display:v(()=>l(E,null,[l("div",{class:"cappable-resource-container w-full h-full","data-augmented-ui":"border tl-2-clip-x",id:"lava-display"},[l("div",{class:"py-2"},[l("h3",{class:"title"},[h("Molten Lava")]),l("h5",null,[h("Level "),i.add(Ye.value,1)])]),l("div",{"data-augmented-ui":"border tl-clip"},[B(Z)]),l("div",{class:"flex flex-col bg-(--raised-background) p-2"},[l("h5",null,[h("Chance for Pressure to build by an additional x"),P(p.value)]),l("br",null,null),l("h5",{class:"font-semibold"},[P(m.value),h("%/"),P(o.evaluate()),h("%")," ",f.value?l("h5",{class:"font-semibold text-red-400"},[h("(capped)")]):null])])]),l("div",{class:"increase-cap-action"},[B(xe)])])),increaseCap:xe}})(),b=(G,Pe)=>{Pe||(Pe=i.dInf);const Ye=i.gte(c(G.currentGain),Pe),xe=i.gte(i.add(c(G.currentGain),G.gainResource.value),Pe),Z=xe?i.sub(Pe,G.gainResource.value):i.max(c(G.currentGain),1),qe=Ye?"(capped)":xe?"(after cap)":null;return nr([l("b",null,[St(G.gainResource,Z)]),l(E,null,[h(" ")]),l(E,null,[G.gainResource.displayName,h(" "),qe])],l(E,null,null))},x=dt(()=>({thingsToReset:[],onReset:()=>{s.value=i.add(s.value,1),t.value=i.min(Vt.fiveMilestoneEffect.value,a.value)}})),C=tt(()=>({classes:{"lava-reset-button":!0},display:()=>l(E,null,[l("span",null,[l("h3",null,[h("Explosive Eruption")]),l("br",null,null),Be.pressureCapped.value?l(E,null,[h("Reset Pressure Tab & Molten/Silicate Lava resources for:"),l("br",null,null),l("span",{class:"font-semibold"},[b(Ne.tephraConversion)]),l("br",null,null),l("span",{class:"font-semibold"},[h("Destroy ^"),P(Mt.massDestructionAmount.value),h(" of the planet's mass")]),l("br",null,null),l("span",{class:"font-semibold"},[h("Raise Explosive Eruption requirement to ^2")]),l("br",null,null),l("span",null,null)]):"Requires Pressure to be capped."])]),onClick:()=>{c(C.canClick)!==!1&&(Mt.planetMass.value=i.pow(Mt.planetMass.value,Mt.massDestructionAmount.value),Ne.tephraConversion.convert(),x.reset(),Oe.explosiveEruptionReset.reset(),Be.explosiveEruptionReset())},canClick:v(()=>Be.pressureCapped.value),dataAttributes:{"augmented-ui":"border bl-round-inset br-2-scoop tr-scoop-inset"}})),N=v(()=>Be.upgrades.effusiveEruption.bought.value||i.gt(s.value,0)),y=d.variable(e).add(1).times(.05),D=v(()=>i.gte(F.value,y.evaluate())),F=v(()=>Be.upgrades.effusiveEruption.bought.value?d.variable(.01).add(Vt.oneMilestoneEffect.value).times(Re.value).times(Be.lavaFlowffect.value).times(ne.value).step(y.evaluate(),G=>G.div(G.sqrt().mul(10).add(1))).evaluate():i.dZero);n.on("preUpdate",G=>{N.value&&Be.upgrades.effusiveEruption.bought.value&&(t.value=i.add(t.value,i.times(F.value,G)).clampMax(a.value))});const ne=v(()=>te.theStreamsAreAlive.bought.value?i.add(Oe.felsic.resource.value,Oe.intermediate.resource.value).add(Oe.mafic.resource.value).add(2).log2().cbrt().clampMin(1):i.dOne),ae=v(()=>te.liveStreaming.bought.value?i.add(t.value,10).log10().sqrt().clampMin(1):i.dOne),te={silicateLava:O(()=>({requirements:I(()=>({resource:t,cost:25})),display:{title:"Silicate Lava",description:"Unlock Silicate Lavas"},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),theStreamsAreAlive:O(()=>({requirements:I(()=>({resource:t,cost:75})),display:{title:"The Streams Are Alive",description:"Increase Effusive Eruption based on sum of Silicate Lavas.",effectDisplay:()=>`x${P(ne.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),liveStreaming:O(()=>({requirements:I(()=>({resource:t,cost:500})),display:{title:"Live Streaming",description:"Increase Effusive Eruption based on Molten Lava.",effectDisplay:()=>`x${P(ae.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},ge=v(()=>N.value?Qn(te)||c(C.canClick)===!0||c(w.increaseCap.canClick)===!0||Qn(H)||Qn(oe):!1),ye=v(()=>oe.noReallyFeelIt.bought.value?i.log10(i.add(t.value,10)).sqrt().clampMin(1):i.dOne),fe=v(()=>oe.theLavaMustFlow.bought.value&&i.gt(e.value,0)?i.times(e.value,.1).clampMin(.1):i.dZero),oe={theLavaMustFlow:O(()=>({requirements:I(()=>({resource:t,cost:1e3})),display:{title:"The Lava Must Flow",description:"Increase base Silicate Conversion rate based on Molten Lava level",effectDisplay:()=>`x${P(fe.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),noReallyFeelIt:O(()=>({requirements:I(()=>({resource:t,cost:1500})),display:{title:"No, REALLY feel it",description:"Decrease the cost of 'Feel The Heat' based on Molten Lava.",effectDisplay:()=>`÷${P(ye.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),placeholder3:O(()=>({requirements:I(()=>({resource:t,cost:2e3})),display:{title:"Placeholder 3",description:"Placeholdre 3"},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},Re=v(()=>i.gt(H.itsGettingHotInHere.amount.value,0)?i.times(H.itsGettingHotInHere.amount.value,.01).add(1):i.dOne),ue=v(()=>i.gt(H.allSevens.amount.value,0)?i.times(H.allSevens.amount.value,.777):i.dZero),H={itsGettingHotInHere:Ce(()=>({visibility:()=>Ne.upgrades.shinyRocks.bought.value,requirements:I(()=>({resource:t,cost:d.variable(H.itsGettingHotInHere.amount).pow_base(1.5).times(30)})),display:{title:"It's Getting Hot In Here",description:"Increase Effusive Eruption by x1.01 per level.",effectDisplay:()=>`x${P(Re.value,3)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),allSevens:Ce(()=>({visibility:()=>Ne.upgrades.shinyRocks.bought.value,requirements:I(()=>({resource:t,cost:d.variable(H.itsGettingHotInHere.amount).pow_base(1.5).times(100)})),display:{title:"All Sevens",description:"Increase Lava Pressure Build effect by +0.777 per level.",effectDisplay:()=>`+${P(ue.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}}))};return{id:$r,lava:t,lavaCapIncreases:e,lavaEffect:m,lavaCap:a,eruptions:s,unlocked:N,passiveLavaGain:F,lavaUpgrades:te,showNotification:ge,tephraBuyables:H,tephraUpgrades:oe,lavaEffectBuildAmount:p,noReallyFeelItEffect:ye,theLavaMustFlowEffect:fe,display:()=>{let G;return l(E,null,[l("div",{id:"lava-layer"},[l(Qe,{header:"Molten Lava"},{default:()=>[l("div",{class:"w-[512px] mb-10 flex flex-col"},[l("div",{class:"flex m-0 flex-1"},[l("div",{class:"m-0 h-[160px] flex flex-col flex-1","data-augmented-ui":"border br-round-inset tl-clip bl-2-clip-x tr-clip"},[l("div",null,[l("h5",{class:"m-0"},[h("Effusive Eruption")]),l("h5",{class:"font-semibold m-0"},[h("You are gaining "),P(F.value,4)," ",t.displayName,h("/s")]),D.value?l("h5",{class:"font-semibold m-0"},[h("(softcapped)")]):null])]),l("div",{class:"m-0 flex-1"},[B(C)])]),l("div",{class:"flex flex-col flex-1 m-0"},[l("div",{class:"flex-1 m-0"},[B(w.display.value)])])])]}),Ne.upgrades.shinyRocks.bought.value?l(Qe,{header:"Buyables"},qo(G=Ge(H,2))?G:{default:()=>[G]}):null,l(Qe,{header:"Upgrades"},{default:()=>[Ge(te,3),Ge(oe,3)]})])])}}});function Ro(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!nn(n)}const Lr=()=>Math.random()*100,Oo="VP",Be=nt(Oo,n=>{const e=we(1,"Pressure"),t=Vn(e),r=we(0),a=v(()=>d.variable(15).sub(We).div(Oe.mafic.effect.value).div(Ne.greenIsNotACreativeColorEffect.value).div(Ye.value).times(b.value).evaluate()),s=v(()=>i.add(10,Oe.felsic.effect.value).add(G.value).add(Z.value).times(Ne.gamblingManEffect.value).div(N.value)),u=v(()=>s.value.clampMax(100)),o=v(()=>i.gte(u.value,100)),f=v(()=>i.add(1.3,qe.value).add(Pe.value).add(Oe.intermediate.effect.value).times(Ne.blobTheBuilderEffect.value).times(ft.value).div(F.value)),m=v(()=>rt.iveGotToBreakFree.bought.value?i.times(u.value,.1).add(1):i.dOne);function p(pe,Xe,kt){const Gt=ce.eruptions.value;return i.gt(Gt,pe)?Xe(i.sub(Gt,pe)):kt(Gt)}const g=i.fromNumber(1e25),w=v(()=>i.gt(e.value,g)),b=v(()=>{if(i.gte(e.value,g)){const pe=p(1,Xe=>i.times(Xe,.2).add(1),()=>i.dOne);return i.log10(e.value).sub(24).cbrt().times(pe).div(m.value).clampMin(1)}return i.dOne}),x=i.fromNumber(1e200),C=v(()=>i.gt(e.value,x)),N=v(()=>{if(i.gte(e.value,x)){const pe=p(3,Xe=>i.times(Xe,.2).add(1),()=>i.dOne);return i.log10(e.value).sub(x.e-1).cbrt().times(pe).div(m.value).clampMin(1)}return i.dOne}),y=i.fromMantissaExponent(1,600),D=v(()=>i.gt(e.value,y)),F=v(()=>{if(i.gte(e.value,y)){const pe=p(5,Xe=>i.times(Xe,.2).add(1),()=>i.dOne);return i.log10(e.value).sub(y.e-1).cbrt().times(pe).div(m.value).clampMin(1)}return i.dOne}),ne=v(()=>{const pe=i.pow(2,ce.eruptions.value);return i.fromNumber(1e25).pow(pe).pow(Ne.youreGonnaMakeMeBlowEffect.value)}),ae=v(()=>i.gte(e.value,ne.value)),te=v(()=>Mt.unlocked.value),ge=st(()=>({direction:ee.Right,height:24,width:"100%",style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline)"},display:()=>l("span",{class:"text-shadow-lg text-venus-500"},[P(e.value),h("/"),P(ne.value)]),progress:()=>i.div(i.ln(e.value),i.ln(ne.value))})),ye=st(()=>({direction:ee.Right,height:24,width:"100%",progress:()=>i.div(r.value,a.value),display:()=>l("span",{class:"text-shadow-lg text-venus-500"},[P(i.sub(a.value,r.value))]),style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline)"}}));n.on("preUpdate",pe=>{te.value&&fe(pe)});function fe(pe){if(ae.value){r.value=i.dZero;return}if(r.value=i.add(r.value,i.times(1,pe)),r.value.lt(a.value))return;r.value=0;const Xe=Lr();if(i.gte(u.value,Xe)){let kt=f.value;i.gt(ce.lavaEffect.value,0)&&i.gte(ce.lavaEffect.value,Lr())&&(kt=kt.times(ce.lavaEffectBuildAmount.value),console.log("KICK")),e.value=i.multiply(i.clampMin(e.value,1),kt).clampMax(ne.value)}}const oe=v(()=>H.lavaFlow.bought.value?d.variable(e.value).add(1).log10().pow(.3).times(Re.value).times(ue.value).step(3,Xe=>Xe.pow(.5)).clampMin(1).evaluate():i.dOne),Re=v(()=>H.underPressure.bought.value?i.times(f.value,.1).add(1):i.dOne),ue=v(()=>H.redHot.bought.value?i.log(e.value,1e15).sqrt().clampMin(1):i.dOne),H={effusiveEruption:O(()=>({requirements:I(()=>({resource:e,cost:5})),display:{title:"Effusive Eruption",description:"Unlock Lava & Passive Lava gain.",effectDisplay:()=>`${P(ce.passiveLavaGain.value)}/s`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),lavaFlow:O(()=>({requirements:I(()=>({resource:e,cost:100})),display:{title:"Lava Flow",description:"Increase Effusive Eruption based on Pressure.",effectDisplay:()=>`x${P(oe.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),underPressure:O(()=>({requirements:I(()=>({resource:e,cost:1e6})),display:{title:"Under Pressure",description:"Increase the effect of 'Lava Flow' based on Build Mult.",effectDisplay:()=>`x${P(Re.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),redHot:O(()=>({requirements:I(()=>({resource:e,cost:1e15})),display:{title:"Red Hot",description:"Increase the effect of 'Lava Flow' based on Pressure's OOMs above e15.",effectDisplay:()=>`x${P(ue.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},G=v(()=>i.gt(xe.whatreTheOdds.amount.value,0)?i.times(.25,xe.whatreTheOdds.amount.value):i.dZero),Pe=v(()=>i.gt(xe.imFine.amount.value,0)?i.times(.25,xe.imFine.amount.value):i.dZero),Ye=v(()=>i.gt(xe.anxietyInducing.amount.value,0)?i.times(.01,xe.anxietyInducing.amount.value).add(1):i.dOne),xe={whatreTheOdds:Ce(()=>({visibility:()=>Ne.upgrades.shinyRocks.bought.value,requirements:I(()=>({resource:e,cost:d.variable(100).times(d.pow(100,xe.whatreTheOdds.amount))})),display:{title:"What're The Odds?",description:"Increase base Pressure Build Chance by +0.25% per level.",effectDisplay:()=>`+${P(G.value)}%`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),imFine:Ce(()=>({visibility:()=>Ne.upgrades.shinyRocks.bought.value,requirements:I(()=>({resource:e,cost:d.variable(1e4).times(d.pow(1e3,xe.whatreTheOdds.amount))})),display:{title:"I'M FINE",description:"Increase base Pressure Build Mult by +0.25x per level.",effectDisplay:()=>`+${P(Pe.value)}x`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}})),anxietyInducing:Ce(()=>({visibility:()=>Ne.upgrades.shinyRocks.bought.value,requirements:I(()=>({resource:e,cost:d.variable(1e7).times(d.pow(1e4,xe.whatreTheOdds.amount))})),display:{title:"anxiety inducING",description:"Divide Pressure Interval by +0.01 per level.",effectDisplay:()=>`÷${P(Ye.value)}`},classes:{"normal-repeatable":!0},clickableDataAttributes:{"augmented-ui":"border bl-scoop-x"}}))},Z=v(()=>i.fromNumber(rt.volcanoesForDummies.bought.value?5:0)),qe=v(()=>i.fromNumber(rt.volcanoesForDummies.bought.value?.5:0)),We=v(()=>i.fromNumber(rt.volcanoesForDummies.bought.value?.5:0)),ft=v(()=>rt.popGoesTheWeasel.bought.value&&i.gt(a.value,15)?i.sub(a.value,15).times(.02).add(1):i.dOne),Tt=v(()=>rt.snowballsChanceInLava.bought.value?i.sub(1,i.log10(u.value).times(.1)):i.dOne),rt={volcanoesForDummies:O(()=>({visibility:()=>Ne.upgrades.secretsLongBuried.bought.value,requirements:I(()=>({resource:e,cost:15})),display:{title:"Volcanoes 4 Dummies",description:"Add +5% to base Chance, +0.5x to base Build Mult, and -0.5s to base Interval."},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),popGoesTheWeasel:O(()=>({visibility:()=>Ne.upgrades.secretsLongBuried.bought.value,requirements:I(()=>({resource:e,cost:1e75})),display:{title:"POP Goes the Weasel",description:"Increase Build Mult based on Interval when it's >15s.",effectDisplay:()=>`x${P(ft.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),iveGotToBreakFree:O(()=>({visibility:()=>Ne.upgrades.secretsLongBuried.bought.value,requirements:I(()=>({resource:e,cost:1e150})),display:{title:"I'VE GOT TO BREAK FREE",description:"Decrease Pressure Dampening based on Build Mult.",effectDisplay:()=>`÷${P(m.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}})),snowballsChanceInLava:O(()=>({visibility:()=>Ne.upgrades.secretsLongBuried.bought.value,requirements:I(()=>({resource:e,cost:1e250})),display:{title:"A Snowball's Chance In Lava",description:"Decrease Pressure Dampening based on Build Chance.",effectDisplay:()=>`^${P(Tt.value)}`},classes:{"sd-upgrade":!0},clickableDataAttributes:{"augmented-ui":"border tr-clip"}}))},jn=.6,yn=v(()=>i.add(jn,1)),sn=v(()=>te.value&&Object.values(H).some(pe=>pe.canPurchase.value)||Object.values(rt).some(pe=>pe.canPurchase.value)||Object.values(xe).some(pe=>pe.canClick.value)),kn=dt(()=>({thingsToReset:()=>[Be]}));return{pressure:e,bestPressure:t,pressureTimer:r,eruptionPenalityDisplay:yn,pressureBar:ge,pressureTimerMax:a,pressureChance:u,pressureGainMultiplier:f,pressureTimerBar:ye,pressureMax:ne,lavaFlowffect:oe,pressureCapped:ae,upgrades:H,showNotification:sn,explosiveEruptionReset:()=>{const pe=Vt.twoMilestoneEffect.value;console.log(pe.toString()),kn.reset(),e.value=pe},tephraUpgrades:rt,tephraBuyables:xe,display:()=>{let pe;return l(E,null,[l("div",{id:"pressure-tab"},[l(Qe,{header:"Volcano"},{default:()=>[l("div",{class:"w-[312px] mb-2"},[l("div",{"data-augmented-ui":"border tl-clip-y tr-round-inset",class:"border-(--outline)"},[l("div",{class:"p-4"},[l("h3",null,[e.displayName]),l("h6",{class:"font-semibold"},[P(u.value),h("%"),o.value?" (capped)":null,h(" Chance for Pressure to Build by x"),P(f.value)," ",h("every "),P(a.value),h(" seconds.")])])]),l("div",{"data-augmented-ui":"border bl-clip",class:"border-(--outline)",id:"pressure-timer-bar"},[B(ye)]),l("div",{"data-augmented-ui":"border br-clip",class:"border-(--outline)"},[B(ge)])]),w.value?l("h5",{class:"text-red-400 font-semibold"},[h("Due to Dampening, Pressure Interval is being multiplied by x"),P(b.value)]):null,C.value?l("h5",{class:"text-red-400 font-semibold"},[h("Due to Dampening, Pressure Chance is being divided by ÷"),P(b.value)]):null,D.value?l("h5",{class:"text-red-400 font-semibold"},[h("Due to Dampening, Pressure Build Mult is being divided by ÷"),P(F.value)]):null]}),Ne.upgrades.shinyRocks.bought.value?l(Qe,{header:"Buyables"},Ro(pe=Ge(xe,4))?pe:{default:()=>[pe]}):null,l(Qe,{header:"Upgrades"},{default:()=>[Ge(H,4),Ne.upgrades.secretsLongBuried.bought.value?Ge(rt,4):null]})])])}}}),Br="V",Mt=nt(Br,()=>{const n="Venus",e="#f8e2b0",t=v(()=>ie.solarSystemUpgrades.venus.bought.value),r=we(i.fromNumber(2e256),"Planet Mass"),a=hn(()=>({visibility:t,layerID:Br,display:()=>l(dn,{body:"Venus"},null),wrapper:l(De,{display:"Venus",direction:ee.Left},null),glowColor:()=>C.value?e:null,color:e})),s=Un({pressure:()=>({display:()=>l(E,null,[h("Volcano"),Be.showNotification.value?" !":null]),tab:Be.display}),lava:()=>({display:()=>l(E,null,[h("Molten Lava"),ce.showNotification.value?" !":null]),visibility:ce.unlocked,tab:ce.display}),silicate:()=>({display:()=>l(E,null,[h("Silicate Lava"),Oe.showNotification.value?" !":null]),visibility:Oe.unlocked,tab:Oe.display}),tepra:()=>({display:()=>l(E,null,[h("Tephra"),Ne.showNotification.value?" !":null]),visibility:Ne.unlocked,tab:Ne.display}),milestones:()=>({display:"Milestones",visibility:Vt.unlocked,tab:Vt.display})}),u=st(()=>({direction:ee.Right,height:16,width:"100%",style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline)"},progress:()=>i.div(i.ln(r.value),i.ln(r[ut]))})),o=v(()=>i.sub(.99,i.times(ce.eruptions.value,.01))),f=st(()=>({direction:ee.Right,height:24,width:"100%",style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline)"},display:()=>l("span",{class:"text-shadow-lg text-venus-500"},[q(Be.pressure.value),h("/"),q(Be.pressureMax.value)]),progress:()=>i.div(i.ln(Be.pressure.value),i.ln(Be.pressureMax.value))})),m=st(()=>({direction:ee.Right,height:32,width:"100%",style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline)"},display:()=>l(E,null,[l("h4",{class:"text-venus-500 text-shadow-lg"},[q(ce.lava.value),h("/"),q(ce.lavaCap.value)])]),progress:()=>i.gt(ce.lavaCap.value,1e10)?i.div(i.ln(ce.lava.value),i.ln(ce.lavaCap.value)):i.div(ce.lava.value,ce.lavaCap.value)}));function p(N,y="152px"){return st(()=>({direction:ee.Right,height:32,width:y,style:{overflow:"hidden"},borderStyle:{borderRadius:"0",borderColor:"var(--outline)"},display:()=>l(E,null,[l("h4",{class:"text-venus-500 text-shadow-lg"},[q(N.resource.value),h("/"),q(N.cap.value)])]),progress:()=>i.gt(N.cap.value,1e10)?i.div(i.ln(N.resource.value),i.ln(N.cap.value)):i.div(N.resource.value,N.cap.value)}))}const g=p(Oe.felsic),w=p(Oe.intermediate),b=p(Oe.mafic),x=p(Oe.ultramafic,"228px"),C=v(()=>t.value&&Be.showNotification.value||ce.showNotification.value||Oe.showNotification.value);return{name:n,color:e,planetMass:r,treeNode:a,unlocked:t,showNotification:C,tabs:s,massDestructionAmount:o,display:()=>l(E,null,[l("h2",null,[St(r),h(" "),r.displayName]),l("div",{"data-augmented-ui":"border tr-clip",class:"w-[312px]"},[B(u)]),l(Ue,null,null),l("div",{class:"w-[256px]"},[l("div",{"data-augmented-ui":"border tl-clip br-clip"},[l("h3",null,[h("Pressure")])]),l("div",{"data-augmented-ui":"border tr-clip br-clip"},[B(f)]),ce.unlocked.value?l(E,null,[l("div",{"data-augmented-ui":"border bl-clip tr-clip"},[l("h3",null,[h("Lava")])]),l("div",{"data-augmented-ui":"border tl-clip br-rect"},[B(m)])]):null]),Oe.unlocked.value?l("div",{class:"w-fit flex"},[l("div",{class:"flex-1","data-augmented-ui":"border tl-clip"},[l("h4",{class:"p-1"},[h("Felsic")]),B(g)]),l("div",{class:"flex-1","data-augmented-ui":"border"},[l("h4",{class:"p-1"},[h("Intermediate")]),B(w)]),l("div",{class:"flex-1","data-augmented-ui":"border tr-clip"},[l("h4",{class:"p-1"},[h("Mafic")]),B(b)])]):null,Ne.upgrades.ultraMafic.bought.value?l("div",{class:"w-fit"},[l("div",{class:"flex-1","data-augmented-ui":"border bl-clip br-clip"},[l("h4",{class:"p-1"},[h("Ultramafic")]),B(x)])]):null,l(Ue,null,null),B(s)])}}),Fo=X({__name:"SolarSystemLayer",props:{rightSideNodes:{},branches:{}},setup(n){const e=n,t=()=>e.rightSideNodes==null?l(E,null,null):l("span",{class:"side-nodes small"},[c(e.rightSideNodes).map(N=>B(N))]),r=U(null),a=U(null),s=U(null),u=U(null),o=U(null),f=U(null),m=U(null),p=U(null),g=U(null),w=U(null);function b(N){const D=29.333333333333332,F=N>1e3?4:1;return N/F/D*1e3}function x(N){return N/8*2*Math.PI}const C=[{element:a,orbitRadius:235,orbitTime:b(88),initialAngle:x(0)},{element:s,orbitRadius:280,orbitTime:b(225),initialAngle:x(1)},{element:u,orbitRadius:330,orbitTime:b(365),initialAngle:x(2)},{element:o,orbitRadius:380,orbitTime:b(687),initialAngle:x(3)},{element:f,orbitRadius:480,orbitTime:b(4333),initialAngle:x(4)},{element:p,orbitRadius:625,orbitTime:b(10759),initialAngle:x(5)},{element:g,orbitRadius:740,orbitTime:b(30687),initialAngle:x(6)},{element:w,orbitRadius:830,orbitTime:b(60190),initialAngle:x(7)}];return tn(()=>{let N=null,y=null,D=0;function F(){if(!m.value||!r.value)return null;const te=m.value.getBoundingClientRect(),ge=r.value.getBoundingClientRect();return{x:te.left-ge.left+te.width/2,y:te.top-ge.top+te.height/2}}function ne(te){y||(y=te),N&&te<N&&(D+=N-te);const ge=te-y-D,ye=F();if(!ye||!z.showPlanetOrbitAnimation||R.devSpeed===0){requestAnimationFrame(ne);return}C.forEach(fe=>{if(!fe.element.value)return;const Re=ge%fe.orbitTime/fe.orbitTime*2*Math.PI+fe.initialAngle,ue=ye.x+fe.orbitRadius*Math.cos(Re)-fe.element.value.offsetWidth/2,H=ye.y+fe.orbitRadius*Math.sin(Re)-fe.element.value.offsetHeight/2;fe.element.value.style.transform=`translate(${ue}px, ${H}px)`}),N=te,requestAnimationFrame(ne)}function ae(){const te=F();te&&C.forEach(ge=>{if(!ge.element.value)return;const ye=te.x+ge.orbitRadius*Math.cos(ge.initialAngle)-ge.element.value.offsetWidth/2,fe=te.y+ge.orbitRadius*Math.sin(ge.initialAngle)-ge.element.value.offsetHeight/2;ge.element.value.style.transform=`translate(${ye}px, ${fe}px)`})}document.addEventListener("visibilitychange",()=>{document.hidden&&(N=null)}),ae(),requestAnimationFrame(ne)}),(N,y)=>(S(),A(E,null,[k("div",{id:"circle-orbit-container",ref_key:"orbitContainer",ref:r},[k("div",{id:"sun",ref_key:"sun",ref:m},null,512),c(Ve).unlocked.value||c(z).forceShowAllPlanets?(S(),A("div",{key:0,id:"mercury",ref_key:"mercury",ref:a},null,512)):V("",!0),c(Mt).unlocked.value||c(z).forceShowAllPlanets?(S(),A("div",{key:1,id:"venus",ref_key:"venus",ref:s},null,512)):V("",!0),c(z).forceShowAllPlanets?(S(),A("div",{key:2,id:"earth",ref_key:"earth",ref:u},null,512)):V("",!0),c(z).forceShowAllPlanets?(S(),A("div",{key:3,id:"mars",ref_key:"mars",ref:o},null,512)):V("",!0),c(z).forceShowAllPlanets?(S(),A("div",{key:4,id:"jupiter",ref_key:"jupiter",ref:f},null,512)):V("",!0),c(z).forceShowAllPlanets?(S(),A("div",{key:5,id:"saturn",ref_key:"saturn",ref:p},null,512)):V("",!0),c(z).forceShowAllPlanets?(S(),A("div",{key:6,id:"uranus",ref_key:"uranus",ref:g},null,512)):V("",!0),c(z).forceShowAllPlanets?(S(),A("div",{key:7,id:"neptune",ref_key:"neptune",ref:w},null,512)):V("",!0)],512),N.rightSideNodes?(S(),ve(t,{key:0})):V("",!0),N.branches?(S(),ve(dr,{key:1,links:c(N.branches)},null,8,["links"])):V("",!0)],64))}}),_o=de(Fo,[["__scopeId","data-v-81998beb"]]),Vo=X({__name:"SideNodes",props:{nodes:{},classes:{},branches:{}},setup(n){const e=n,t=v(()=>({small:!0,...c(e.classes)})),r=()=>l(E,null,[c(e.nodes).map(a=>B(a))]);return(a,s)=>(S(),A("span",{class:he(t.value)},[l(r),a.branches?(S(),ve(dr,{key:0,links:c(a.branches)},null,8,["links"])):V("",!0)],2))}}),Go=de(Vo,[["__scopeId","data-v-3cade05e"]]),Uo={class:"key"},Ho=X({__name:"Hotkey",props:{hotkey:{}},setup(n){const e=n;let t="",r=!1,a=!1,s=!1;return sr(()=>{t=e.hotkey.key,r=t.startsWith("ctrl+"),r&&(t=t.slice(5)),a=t.startsWith("shift+"),a&&(t=t.slice(6)),s=t.length==1&&t.toLowerCase()!=t.toUpperCase(),s&&(t=t.toUpperCase())}),(u,o)=>(S(),A(E,null,[c(r)?(S(),A(E,{key:0},[o[0]||(o[0]=k("div",{class:"key"},"Ctrl",-1)),o[1]||(o[1]=h("+"))],64)):V("",!0),c(a)?(S(),A(E,{key:1},[o[2]||(o[2]=k("div",{class:"key"},"Shift",-1)),o[3]||(o[3]=h("+"))],64)):V("",!0),k("div",Uo,W(c(t)),1)],64))}}),jo=de(Ho,[["__scopeId","data-v-028a8d0e"]]),gn=Rn({}),vr=Symbol("Hotkey"),on=[")","!","@","#","$","%","^","&","*","("];function zo(n){return Me(()=>{const e=n(),{enabled:t,description:r,key:a,onPress:s,...u}=e;return{type:vr,...u,enabled:$(t)??!0,description:$(r),key:a,onPress:s}})}$e.on("addLayer",n=>{ur(n,vr).forEach(e=>{gn[e.key]=e})});$e.on("removeLayer",n=>{ur(n,vr).forEach(e=>{gn[e.key]=void 0})});document.onkeydown=function(n){var r;if(((r=n.target)==null?void 0:r.tagName)==="INPUT"||Jt.value&&!R.keepGoing)return;const e=[n.key];n.shiftKey&&n.ctrlKey?(e.splice(0,1),e.push("ctrl+shift+"+n.key.toUpperCase()),e.push("shift+ctrl+"+n.key.toUpperCase()),on.includes(n.key)?(e.push("ctrl+shift+"+on.indexOf(n.key)),e.push("shift+ctrl+"+on.indexOf(n.key))):(e.push("ctrl+shift+"+n.key.toLowerCase()),e.push("shift+ctrl+"+n.key.toLowerCase()))):on.includes(n.key)?(e.push("shift+"+n.key),e.push("shift+"+on.indexOf(n.key))):n.shiftKey?(e.push("shift+"+n.key.toUpperCase()),e.push("shift+"+n.key.toLowerCase())):n.ctrlKey&&(e.splice(0,1),e.push("ctrl+"+n.key));const t=gn[e.find(a=>a in gn)??""];t!=null&&c(t.enabled)!==!1&&(n.preventDefault(),t.onPress())};$e.on("setupVue",()=>tu(()=>{const n=Object.values(gn).filter(e=>c(e==null?void 0:e.enabled));return n.length===0?"":l("div",null,[l("br",null,null),l("h4",null,[h("Hotkeys")]),l("div",{style:"column-count: 2"},[n.map(e=>l("div",null,[l(jo,{hotkey:e},null),h(" "),c(e==null?void 0:e.description)]))])])}));const Wo=nt("main",()=>{const n=we(1),e=Vn(n),t=Bn(n),r=Y([ie.treeNode,Ve.treeNode,Mt.treeNode]),a=[{startNode:ie.treeNode,endNode:Ve.treeNode},{startNode:Ve.treeNode,endNode:Mt.treeNode}],s=l(_o,{rightSideNodes:r,branches:a},null),u=l(E,null,[l(Go,{nodes:r,branches:a,style:{position:"absolute",right:"6px",display:"flex",gap:"20px",marginTop:"32px",flexDirection:"column"}},null)]),o=zo(()=>({description:"pause",key:"p",onPress:()=>{R.devSpeed=R.devSpeed===0?null:0}}));return{name:"orbital Drift",links:[],minWidth:"250",minimizable:!0,pauseHotkey:o,classes:{"orbit-layer-tab":!0},display:()=>l(E,null,[R.devSpeed===0?l("div",null,[h("Game Paused"),l(En,{id:"paused"},null)]):null,R.devSpeed!=null&&R.devSpeed!==0&&R.devSpeed!==1?l("div",null,[h("Dev Speed: "),q(R.devSpeed),h("x"),l(En,{id:"devspeed"},null)]):null,R.offlineTime!=null&&R.offlineTime!==0?l("div",null,[h("Offline Time: "),Fn(R.offlineTime),l(En,{id:"offline"},null)]):null,l(Ue,null,null),B(s)]),points:n,best:e,total:t,minimizedDisplaya:u,minimizedDisplay:()=>u}}),Zo=n=>[Wo,ie,Ve,be,re,Se,Fe,Mt,Be,ce,Oe,Ne,Vt],Jt=v(()=>!1);function xt(n={}){return Object.assign({id:`${le.id}-0`,name:"Default Save",tabs:le.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:le.id,modVersion:le.versionNumber,layers:{}},n)}function _e(n){const e=Bt.compressToUTF16(Xt(n??R));return localStorage.setItem((n??R).id,e),e}async function Jo(){Qo();try{let n=localStorage.getItem(z.active);if(n==null){await Nt(Kt());return}if(n=$t(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==le.id){await Nt(Kt());return}e.id=z.active,await Nt(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await Nt(Kt())}}function $t(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="ᯡ")n=Bt.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function Kt(){const n=fn(),e=xt({id:n});return _e(e),z.saves.push(n),e}function fn(){let n,e=0;do n=`${le.id}-${e++}`;while(localStorage.getItem(n)!=null);return n}const Hn=U(!1);async function Nt(n){console.info("Loading save",n),Hn.value=!0;for(const e in Je){const t=Je[e];t!=null&&xa(t)}Zo().forEach(e=>Ma(e,n)),n=xt(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,le.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==le.versionNumber&&(n.modVersion,n.modVersion=le.versionNumber),Object.assign(R,n),z.active=R.id,$e.emit("onLoad")}const ot=Rn({});function Ko(n){if(ot[n]==null){let e=localStorage.getItem(n);if(e==null)ot[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")ot[n]={error:"Save is undefined",id:n};else try{if(e=$t(e),e==null)return console.warn("Unable to determine preset encoding",e),ot[n]={error:"Unable to determine preset encoding",id:n},ot[n];ot[n]={...JSON.parse(e),id:n}}catch(t){ot[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return ot[n]}function Yo(){Object.keys(ot).forEach(n=>delete ot[n])}function Tn(n){ot[n]=void 0}setInterval(()=>{R.autosave&&_e()},1e3);window.onbeforeunload=()=>{R.autosave&&_e()};window.save=_e;const Xo=window.hardReset=async()=>{await Nt(Kt())};window.deleteLowerSaves=()=>{const n=Object.values(z.saves).indexOf(R.id)+1;Object.values(z.saves).slice(n).forEach(e=>localStorage.removeItem(e)),z.saves=z.saves.slice(0,n)};const bn=qt({active:"",saves:[],showTPS:!0,theme:or.Drift,unthrottled:!1,alignUnits:!1,showHealthWarning:!0,showPlanetOrbitAnimation:!0,forceShowAllPlanets:!1});ke(bn,n=>{const e=Bt.compressToUTF16(JSON.stringify(n));localStorage.setItem(le.id,e)},{deep:!0});const z=window.settings=bn;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!0,theme:or.Drift,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};$e.emit("loadSettings",n),Object.assign(bn,n),Xo()};function Qo(){try{let n=localStorage.getItem(le.id);if(n!=null&&n!==""){if(n=$t(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(bn,e)}$e.emit("loadSettings",bn)}catch{}}const di=qt([]);function eu(n){di.push(n)}const fi=qt([]);function tu(n){fi.push(n)}const nu=qt([]),yt=U(),pt=U([]),an=U([]);function ru(){var n;((n=yt.value)==null?void 0:n.loggedIn)===!0&&(pt.value.length>0||yt.value.getSaveList().then(mi).then(e=>{an.value=e.map(t=>t.content.id)}).catch(console.error))}Pi({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:qr}).then(n=>{yt.value=n,qr(n)}).catch(console.error);function qr(n){n.loggedIn===!0&&(pt.value.length>0||(n.getSaveList().then(e=>{const t=mi(e);if(an.value=t.map(r=>r.content.id),R.timePlayed<120*1e3&&t.length>0){const r=t.reduce((a,s)=>a.content.time<s.content.time?s:a);Nt(r.content)}}).catch(console.error),setInterval(ru,60*1e3)))}function mi(n){const e=new Set(z.saves.slice()),t=new Set(new Array(11).fill(0).map((a,s)=>s)),r=Object.keys(n).map(a=>{const{label:s,content:u}=n[parseInt(a)];try{return{slot:parseInt(a),label:s,content:JSON.parse($t(u)??"")}}catch{return null}}).filter(a=>a!=null&&typeof a.content.id=="string"&&typeof a.content.time=="number"&&typeof a.content.timePlayed=="number").filter(a=>{var u;a.label!=null&&(a.content.name=a.label),t.delete(a.slot);const s=z.saves.find(o=>o===a.content.id);if(s==null)z.saves.push(a.content.id),_e(xt(a.content));else{e.delete(s);try{const o=JSON.parse($t(localStorage.getItem(s)??"")??"");if(o==null)return!1;o.id=s,o.time=o.time??0,o.timePlayed=o.timePlayed??0;const f=Math.abs(o.timePlayed-a.content.timePlayed),m=Math.abs(o.time-a.content.time);f<120*1e3&&m<120*1e3?o.time<a.content.time?(_e(xt(a.content)),z.active===s&&Nt(a.content)):((u=yt.value)==null||u.save(a.slot,Bt.compressToUTF16(Xt(xt(o))),o.name??a.label).catch(console.error),a.content=o):pt.value.push({id:s,cloud:a.content,local:o,slot:a.slot})}catch{return!1}}return!0});return e.forEach(a=>{var s;try{if(t.size>0){const u=localStorage.getItem(a)??"",o=JSON.parse($t(u)??""),f=t.values().next().value;if(f==null)return;(s=yt.value)==null||s.save(f,u,o.name).then(()=>an.value.push(o.id)).catch(console.error),t.delete(f)}}catch{}}),r}const iu={class:"field"},au={key:0,class:"field-title"},su=["placeholder"],lu=X({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,r=e,a=()=>t.title==null?l(E,null,null):B(t.title,m=>l("span",null,[m])),s=On(null);tn(()=>{var m;(m=s.value)==null||m.focus()});const u=v({get(){return c(t.modelValue)??""},set(m){r("update:modelValue",m)}});function o(){r("submit")}function f(){t.submitOnBlur!==!1?r("submit"):r("cancel")}return(m,p)=>(S(),A("form",{onSubmit:mn(o,["prevent"])},[k("div",iu,[m.title?(S(),A("span",au,[l(a)])):V("",!0),m.textArea?(S(),ve(c(Li),{key:1,modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=g=>u.value=g),placeholder:m.placeholder,maxHeight:m.maxHeight,onBlur:f,ref_key:"field",ref:s},null,8,["modelValue","placeholder","maxHeight"])):ar((S(),A("input",{key:2,type:"text","onUpdate:modelValue":p[1]||(p[1]=g=>u.value=g),placeholder:m.placeholder,class:he({fullWidth:!m.title}),onBlur:f,ref_key:"field",ref:s},null,42,su)),[[Ni,u.value]])])],32))}}),pi=de(lu,[["__scopeId","data-v-d74d0e2e"]]),ou={key:0},uu=["disabled"],cu={key:0},du=X({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,r=e,a=U(!1);ke(a,o=>{r("confirmingChanged",o)});function s(){if(t.skipConfirm){r("click");return}a.value&&r("click"),a.value=!a.value}function u(){a.value=!1}return(o,f)=>(S(),A("span",{class:he(["container",{confirming:a.value}])},[a.value?(S(),A("span",ou,"Are you sure?")):V("",!0),k("button",{onClick:mn(s,["stop"]),class:"button danger",disabled:o.disabled},[a.value?(S(),A("span",cu,"Yes")):bt(o.$slots,"default",{key:1},void 0,!0)],8,uu),a.value?(S(),A("button",{key:1,class:"button",onClick:mn(u,["stop"])},"No")):V("",!0)],2))}}),fu=de(du,[["__scopeId","data-v-92b30d70"]]),mu={key:0,class:"handle material-icons"},pu={key:1,class:"actions"},vu={key:2,class:"actions"},gu={key:3,class:"details"},bu=["disabled"],hu={class:"save-version"},yu={key:1,class:"time"},ku={key:4,class:"details"},Cu={key:5,class:"details error"},wu=X({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,r=e,a=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),s=U(!1),u=U(!1),o=U("");ke(s,()=>o.value=t.save.name??"");const f=v(()=>t.save!=null&&t.save.id===R.id&&!t.readonly),m=v(()=>f.value?R.time:(t.save!=null&&t.save.time)??0),p=v(()=>{var w;return!t.readonly&&((w=yt.value)==null?void 0:w.loggedIn)===!0&&an.value.includes(t.save.id)});function g(){r("editName",o.value),s.value=!1}return(w,b)=>(S(),A("div",{class:he(["save",{active:f.value,readonly:w.readonly}])},[w.readonly!==!0?(S(),A("div",mu,"drag_handle")):V("",!0),!s.value&&w.readonly!==!0?(S(),A("div",pu,[w.save.error==null&&!u.value?(S(),ve(lr,{key:0,onClick:b[0]||(b[0]=x=>r("export")),class:"button",left:""},{default:j(()=>[l(De,{display:"Export",direction:c(ee).Left,class:"info"},{default:j(()=>b[8]||(b[8]=[k("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):V("",!0),w.save.error==null&&!u.value?(S(),A("button",{key:1,onClick:b[1]||(b[1]=x=>r("duplicate")),class:"button"},[l(De,{display:"Duplicate",direction:c(ee).Left,class:"info"},{default:j(()=>b[9]||(b[9]=[k("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):V("",!0),w.save.error==null&&!u.value?(S(),A("button",{key:2,onClick:b[2]||(b[2]=x=>s.value=!s.value),class:"button"},[l(De,{display:"Edit Name",direction:c(ee).Left,class:"info"},{default:j(()=>b[10]||(b[10]=[k("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):V("",!0),l(fu,{disabled:f.value,onClick:b[3]||(b[3]=x=>r("delete")),onConfirmingChanged:b[4]||(b[4]=x=>u.value=x)},{default:j(()=>[l(De,{display:"Delete",direction:c(ee).Left,class:"info"},{default:j(()=>b[11]||(b[11]=[k("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):w.readonly!==!0?(S(),A("div",vu,[k("button",{onClick:g,class:"button"},[l(De,{display:"Save",direction:c(ee).Left,class:"info"},{default:j(()=>b[12]||(b[12]=[k("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),k("button",{onClick:b[5]||(b[5]=x=>s.value=!s.value),class:"button"},[l(De,{display:"Cancel",direction:c(ee).Left,class:"info"},{default:j(()=>b[13]||(b[13]=[k("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):V("",!0),w.save.error==null&&!s.value?(S(),A("div",gu,[p.value?(S(),ve(De,{key:0,display:"Synced!",direction:c(ee).Right},{default:j(()=>b[14]||(b[14]=[k("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction"])):V("",!0),k("button",{class:"button open",onClick:b[6]||(b[6]=x=>r("open")),disabled:w.readonly},[k("h3",null,W(w.save.name),1)],8,bu),k("span",hu,"v"+W(w.save.modVersion),1),b[15]||(b[15]=k("br",null,null,-1)),m.value?(S(),A("div",yu," Last played "+W(c(a).format(m.value)),1)):V("",!0)])):w.save.error==null&&s.value?(S(),A("div",ku,[l(pi,{modelValue:o.value,"onUpdate:modelValue":b[7]||(b[7]=x=>o.value=x),class:"editname",onSubmit:g},null,8,["modelValue"])])):(S(),A("div",Cu,[h(" Error: Failed to load save with id "+W(w.save.id),1),b[16]||(b[16]=k("br",null,null,-1)),h(W(w.save.error),1)]))],2))}}),ir=de(wu,[["__scopeId","data-v-31f2f552"]]),Mu={key:0,style:{color:"var(--danger)"}},xu={class:"modal-footer"},Nu={class:"field"},Su={class:"field-buttons"},Tu={class:"footer"},Du=X({__name:"SavesManager",setup(n,{expose:e}){const t=U(!1),r=U(null);e({open(){t.value=!0}});const a=U(!1),s=U(""),u=U(null);ke(s,y=>{y?Yt(()=>{try{if(y=$t(y)??"",y===""){console.warn("Unable to determine preset encoding",y),a.value=!0;return}const D=JSON.parse(y);if(typeof D!="object"){a.value=!0;return}const F=fn();D.id=F,_e(D),s.value="",a.value=!1,z.saves.push(F)}catch{a.value=!0}}):a.value=!1});let o=Object.assign({}),f=U(Object.keys(o).reduce((y,D)=>(y.push({label:D.split("/").slice(-1)[0].slice(0,-4),value:o[D]}),y),[]));ke(t,y=>{y&&Yo()});const m=v(()=>z.saves.reduce((y,D)=>(y[D]=Ko(D),y),{})),p=v(()=>{var y;return((y=yt.value)==null?void 0:y.loggedIn)===!0&&z.saves.length<an.value.length});function g(y){let D;switch(R.id===y?D=Xt(R):D=JSON.stringify(m.value[y]),le.exportEncoding){default:console.warn(`Unknown save encoding: ${le.exportEncoding}. Defaulting to lz`);case"lz":D=Bt.compressToUTF16(D);break;case"base64":D=btoa(unescape(encodeURIComponent(D)));break;case"plain":break}const F=document.createElement("textarea");F.value=D,document.body.appendChild(F),F.select(),F.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(F)}function w(y){R.id===y&&_e();const D={...m.value[y],id:fn()};_e(D),z.saves.push(D.id)}function b(y){z.saves=z.saves.filter(D=>D!==y),localStorage.removeItem(y),Tn(y)}function x(y){m.value[R.id].time=R.time,_e(),Tn(R.id),Nt(m.value[y]),Tn(y)}function C(y){if(u.value=y,Yt(()=>{u.value=null}),y=$t(y)??"",y===""){console.warn("Unable to determine preset encoding",y);return}const D=JSON.parse(y);D.id=fn(),_e(D),z.saves.push(D.id),x(D.id)}function N(y,D){const F=m.value[y];F!=null&&(F.name=D,R.id===y?(R.name=D,_e()):(_e(F),Tn(y)))}return(y,D)=>(S(),ve(Rt,{modelValue:t.value,"onUpdate:modelValue":D[4]||(D[4]=F=>t.value=F),ref_key:"modal",ref:r},{header:j(()=>D[5]||(D[5]=[k("h2",null,"Saves Manager",-1)])),body:j(({shown:F})=>[p.value?(S(),A("div",Mu," Not all saves are synced! You may need to delete stale saves. ")):V("",!0),F?(S(),ve(c($i),{key:1,list:c(z).saves,handle:".handle",itemKey:ne=>ne},{item:j(({element:ne})=>[l(ir,{save:m.value[ne],onOpen:ae=>x(ne),onExport:ae=>g(ne),onEditName:ae=>N(ne,ae),onDuplicate:ae=>w(ne),onDelete:ae=>b(ne)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):V("",!0)]),footer:j(()=>[k("div",xu,[l(pi,{modelValue:s.value,"onUpdate:modelValue":D[0]||(D[0]=F=>s.value=F),title:"Import Save",placeholder:"Paste your save here!",class:he({importingFailed:a.value})},null,8,["modelValue","class"]),k("div",Nu,[D[6]||(D[6]=k("span",{class:"field-title"},"Create Save",-1)),k("div",Su,[k("button",{class:"button",onClick:D[1]||(D[1]=F=>x(c(Kt)().id))},"New Game"),Object.keys(c(f)).length>0?(S(),ve(mr,{key:0,options:c(f),modelValue:u.value,"onUpdate:modelValue":D[2]||(D[2]=F=>C(F)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):V("",!0)])]),k("div",Tu,[D[7]||(D[7]=k("div",{style:{"flex-grow":"1"}},null,-1)),k("button",{class:"button modal-default-button",onClick:D[3]||(D[3]=F=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),gr=de(Du,[["__scopeId","data-v-2abbae28"]]),Au={class:"vga-footer"},Eu=X({__name:"AddictionWarning",setup(n){const e=U(!1);sr(()=>{le.disableHealthWarning===!1&&z.showHealthWarning&&me.mouseActivity.filter(r=>r).length>6&&(e.value=!0)});function t(){z.showHealthWarning=!1,e.value=!1}return(r,a)=>(S(),A(E,null,[l(Rt,ht({modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e.value=s)},r.$attrs),{header:j(()=>a[2]||(a[2]=[k("div",{class:"vga-modal-header"},[k("h2",null,"Kindly consider taking a break.")],-1)])),body:j(()=>a[3]||(a[3]=[k("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),k("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),k("h4",null,"Resources:",-1),k("p",null,[k("span",null,[k("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),h(" ("),k("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),h(") ")]),k("br"),k("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)])),footer:j(()=>[k("div",Au,[k("button",{onClick:t,class:"button"},"Never show this again"),k("button",{onClick:a[0]||(a[0]=s=>e.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),l(gr,{ref:"savesManager"},null,512)],64))}}),Iu=de(Eu,[["__scopeId","data-v-ac50fa27"]]),Pu={class:"cloud-saves-modal-header"},$u=["onClick"],Lu={key:0,class:"note"},Bu={key:1,class:"note"},qu=["onClick"],Ru={key:0,class:"note"},Ou={key:1,class:"note"},Fu=["onClick"],_u=X({__name:"CloudSaveResolver",setup(n){const e=U(!1),t=U([]),r=v(()=>pt.value.length>1?"saves":"save"),a=U(null);ke(()=>pt.value.length>0,m=>{m&&(t.value=pt.value.map(({local:p,cloud:g})=>(p.time??0)<(g.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),ke(()=>{var m;return(m=a.value)==null?void 0:m.isOpen},m=>{m===!1&&(pt.value=[])});function s(m){t.value[m]="local"}function u(m){t.value[m]="cloud"}function o(m){t.value[m]="both"}function f(){var m,p;for(let g=0;g<t.value.length;g++){const{slot:w,local:b,cloud:x}=pt.value[g];switch(t.value[g]){case"local":(m=yt.value)==null||m.save(w,Bt.compressToUTF16(Xt(xt(b))),x.name).catch(console.error);break;case"cloud":_e(xt(x));break;case"both":const C=fn();_e({...xt(x),id:C}),z.saves.push(C),(p=yt.value)==null||p.save(w,Bt.compressToUTF16(Xt(xt(b))),x.name).catch(console.error);break}}e.value=!1}return(m,p)=>(S(),ve(Rt,{modelValue:e.value,"onUpdate:modelValue":p[0]||(p[0]=g=>e.value=g),width:"960px",ref_key:"modal",ref:a,"prevent-closing":!0},{header:j(()=>[k("div",Pu,[k("h2",null,"Cloud "+W(r.value)+" loaded!",1)])]),body:j(()=>[k("div",null," Upon loading, your cloud "+W(r.value)+" "+W(c(pt).length>1?"appear":"appears")+" to be out of sync with your local "+W(r.value)+". Which "+W(r.value)+" do you want to keep? ",1),p[4]||(p[4]=k("br",null,null,-1)),(S(!0),A(E,null,At(c(c(pt)),(g,w)=>(S(),A("div",{key:g.id,class:"conflict-container"},[k("div",{onClick:b=>u(w),class:he({selected:t.value[w]==="cloud"})},[k("h2",null,[p[1]||(p[1]=h(" Cloud ")),(g.cloud.time??0)>(g.local.time??0)?(S(),A("span",Lu,"(more recent)")):V("",!0),(g.cloud.timePlayed??0)>(g.local.timePlayed??0)?(S(),A("span",Bu,"(more playtime)")):V("",!0)]),l(ir,{save:g.cloud,readonly:!0},null,8,["save"])],10,$u),k("div",{onClick:b=>s(w),class:he({selected:t.value[w]==="local"})},[k("h2",null,[p[2]||(p[2]=h(" Local ")),(g.cloud.time??0)<=(g.local.time??0)?(S(),A("span",Ru,"(more recent)")):V("",!0),(g.cloud.timePlayed??0)<=(g.local.timePlayed??0)?(S(),A("span",Ou,"(more playtime)")):V("",!0)]),l(ir,{save:g.local,readonly:!0},null,8,["save"])],10,qu),k("div",{onClick:b=>o(w),class:he({selected:t.value[w]==="both"}),style:{"flex-basis":"30%"}},p[3]||(p[3]=[k("h2",null,"Both",-1),k("div",{class:"save"},"Keep Both",-1)]),10,Fu)]))),128))]),footer:j(()=>[k("div",{class:"cloud-saves-footer"},[k("button",{onClick:f,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),Vu=de(_u,[["__scopeId","data-v-925f2a9d"]]),Gu={class:"field"},Uu=X({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,a=()=>B(t.title??"",u=>l("span",null,[u])),s=v({get(){return!!t.modelValue},set(u){r("update:modelValue",u)}});return(u,o)=>(S(),A("label",Gu,[ar(k("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=f=>s.value=f)},null,512),[[Si,s.value]]),l(a)]))}}),at=de(Uu,[["__scopeId","data-v-a334c024"]]),Hu={class:"game-over-modal-header"},ju=["src","alt"],zu={class:"game-over-modal-title"},Wu={key:0},Zu={key:0},Ju=["href"],Ku={key:1},Yu=X({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:r,discordLink:a,versionNumber:s,versionTitle:u}=le,o=v(()=>Fn(R.timePlayed)),f=v(()=>Jt.value&&!R.keepGoing),m=Lt(R,"autosave");function p(){R.keepGoing=!0}function g(){Nt(Kt())}return(w,b)=>(S(),ve(Rt,{"model-value":f.value},{header:j(()=>[k("div",Hu,[c(t)?(S(),A("img",{key:0,class:"game-over-modal-logo",src:c(t),alt:c(e)},null,8,ju)):V("",!0),k("div",zu,[b[1]||(b[1]=k("h2",null,"Congratulations!",-1)),k("h4",null,"You've beaten "+W(c(e))+" v"+W(c(s))+": "+W(c(u)),1)])])]),body:j(({shown:x})=>[x?(S(),A("div",Wu,[k("div",null,"It took you "+W(o.value)+" to beat the game.",1),b[4]||(b[4]=k("br",null,null,-1)),b[5]||(b[5]=k("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),b[6]||(b[6]=k("br",null,null,-1)),c(a)&&c(r)?(S(),A("div",Zu,[k("a",{href:c(a),class:"game-over-modal-discord-link"},[b[2]||(b[2]=k("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),h(" "+W(c(r)),1)],8,Ju)])):(S(),A("div",Ku,b[3]||(b[3]=[k("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[k("span",{class:"material-icons game-over-modal-discord"},"discord"),h(" Profectus & Friends ")],-1)]))),l(at,{title:"Autosave",modelValue:m.value,"onUpdate:modelValue":b[0]||(b[0]=C=>m.value=C)},null,8,["modelValue"])])):V("",!0)]),footer:j(()=>[k("div",{class:"game-over-footer"},[k("button",{onClick:p,class:"button"},"Keep Going"),k("button",{onClick:g,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),Xu=de(Yu,[["__scopeId","data-v-fc8c7441"]]),Qu={key:0},ec=["href"],tc={class:"nan-footer"},nc=X({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=le,r=U(!0),a=U(!0),s=Lt(me,"hasNaN"),u=U(null);ke(s,w=>{w?(r.value=R.autosave,a.value=R.devSpeed===0):(R.autosave=r.value,R.devSpeed=a.value?0:null)});const o=v(()=>{var w;return(w=me.NaNPath)==null?void 0:w.join(".")}),f=v(()=>me.NaNPersistent!=null?me.NaNPersistent.value:null);function m(){me.NaNPersistent!=null&&(me.NaNPersistent.value=new i(0),me.hasNaN=!1)}function p(){me.NaNPersistent&&(me.NaNPersistent.value=new i(1),me.hasNaN=!1)}function g(){me.NaNPersistent&&(me.NaNPersistent.value=new i(NaN),me.hasNaN=!1)}return(w,b)=>(S(),A(E,null,[l(Rt,ht({modelValue:s.value,"onUpdate:modelValue":b[4]||(b[4]=x=>s.value=x)},w.$attrs),{header:j(()=>b[5]||(b[5]=[k("div",{class:"nan-modal-header"},[k("h2",null,"NaN value detected!")],-1)])),body:j(()=>[k("div",null,[h(' Attempted to assign "'+W(o.value)+'" to NaN',1),f.value?(S(),A("span",Qu,W(" ")+"(previously "+W(c(q)(f.value))+")",1)):V("",!0),h(". Auto-saving has been "+W(r.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),b[7]||(b[7]=k("br",null,null,-1)),k("div",null,[k("a",{href:c(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[b[6]||(b[6]=k("span",{class:"material-icons nan-modal-discord"},"discord",-1)),h(" "+W(c(e)||"Profectus & Friends"),1)],8,ec)]),b[8]||(b[8]=k("br",null,null,-1)),l(at,{title:"Autosave",modelValue:r.value,"onUpdate:modelValue":b[0]||(b[0]=x=>r.value=x)},null,8,["modelValue"]),c(le).enablePausing?(S(),ve(at,{key:0,title:"Pause game",modelValue:a.value,"onUpdate:modelValue":b[1]||(b[1]=x=>a.value=x)},null,8,["modelValue"])):V("",!0)]),footer:j(()=>[k("div",tc,[k("button",{onClick:b[2]||(b[2]=x=>{var C;return(C=u.value)==null?void 0:C.open()}),class:"button"},"Open Saves Manager"),k("button",{onClick:m,class:"button"},"Set to 0"),k("button",{onClick:p,class:"button"},"Set to 1"),f.value&&c(i).neq(f.value,0)&&c(i).neq(f.value,1)?(S(),A("button",{key:0,onClick:b[3]||(b[3]=x=>s.value=!1),class:"button"}," Set to previous ")):V("",!0),k("button",{onClick:g,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),l(gr,{ref_key:"savesManager",ref:u},null,512)],64))}}),rc=de(nc,[["__scopeId","data-v-8d4cc6c0"]]),ic={key:1},ac=X({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},emits:["setMinimized"],setup(n,{emit:e}){const t=n,r=()=>B(t.display),a=()=>t.minimizedDisplay==null?void 0:B(t.minimizedDisplay),s=v(()=>le.allowGoBack&&!c(t.forceHideGoBack)&&t.index>0&&!c(t.minimized));function u(){R.tabs.splice(c(t.index),1/0)}function o(p){t.nodes.value=p}const f=U([]);Ti((p,g,w)=>(console.warn(`Error caught in "${t.name}" layer`,p,g,w),f.value.push(p instanceof Error?p:new Error(JSON.stringify(p))),!1));const m=qt({"layer-container":!0,minimized:t.minimized});return(p,g)=>f.value.length>0?(S(),ve(Gr,{key:0,errors:f.value},null,8,["errors"])):(S(),A("div",ht({key:1,class:m,style:{"--layer-color":c(p.color)}},p.$attrs),[s.value?(S(),A("button",{key:0,class:"goBack",onClick:u},"❌")):V("",!0),c(p.minimized)?(S(),A(E,{key:1},[p.minimizedDisplay?(S(),ve(er,{key:0},{default:j(()=>[l(a)]),_:1})):(S(),A("div",ic,W(c(p.name)),1))],64)):(S(),A("div",{key:2,class:he(["layer-tab",{showGoBack:s.value}])},[l(er,{onUpdateNodes:o},{default:j(()=>[l(r)]),_:1})],2)),c(p.minimizable)?(S(),A("button",{key:3,class:"minimize",onClick:g[0]||(g[0]=w=>p.$emit("setMinimized",!c(p.minimized)))}," ▼ ")):V("",!0)],16))}}),sc=de(ac,[["__scopeId","data-v-b466dd66"]]),lc=X({__name:"Changelog",setup(n,{expose:e}){const t=U(!1);return e({open(){t.value=!0}}),(r,a)=>(S(),ve(Rt,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=s=>t.value=s)},{header:j(()=>a[1]||(a[1]=[k("h2",null,"Changelog",-1)])),body:j(()=>a[2]||(a[2]=[k("details",{open:""},[k("summary",null,[h("v0.0 Initial Commit - "),k("time",null,"2021-09-04")]),h(" This is the first release :D "),k("ul",null,[k("li",{class:"feature"},"Did everything"),k("li",{class:"fix"},"Had some fun"),k("li",{class:"breaking"},"Removed everything"),k("li",{class:"balancing"},"Created some bugs to fix later")])],-1)])),_:1},8,["modelValue"]))}}),oc=de(lc,[["__scopeId","data-v-bbf4922c"]]),uc={class:"info-modal-header"},cc=["src","alt"],dc={class:"info-modal-title"},fc={key:0},mc={key:0},pc={key:0},vc=["href"],gc=X({__name:"Info",emits:["openChangelog"],setup(n,{expose:e,emit:t}){const{title:r,logo:a,author:s,discordName:u,discordLink:o,versionNumber:f,versionTitle:m}=le,p=t,g=U(!1),w=v(()=>Fn(R.timePlayed)),b=()=>fi.map(x=>B(x));return e({open(){g.value=!0}}),(x,C)=>(S(),ve(Rt,{modelValue:g.value,"onUpdate:modelValue":C[1]||(C[1]=N=>g.value=N)},{header:j(()=>[k("div",uc,[c(a)?(S(),A("img",{key:0,class:"info-modal-logo",src:c(a),alt:c(r)},null,8,cc)):V("",!0),k("div",dc,[k("h2",null,W(c(r)),1),k("h4",null,[h(" v"+W(c(f)),1),c(m)?(S(),A("span",fc,": "+W(c(m)),1)):V("",!0)])])])]),body:j(({shown:N})=>[N?(S(),A("div",mc,[c(s)?(S(),A("div",pc,"By "+W(c(s)),1)):V("",!0),C[3]||(C[3]=k("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),C[4]||(C[4]=k("br",null,null,-1)),k("div",{class:"link",onClick:C[0]||(C[0]=y=>p("openChangelog"))},"Changelog"),C[5]||(C[5]=k("br",null,null,-1)),k("div",null,[c(o)?(S(),A("a",{key:0,href:c(o),class:"info-modal-discord-link",target:"_blank"},[C[2]||(C[2]=k("span",{class:"material-icons info-modal-discord"},"discord",-1)),h(" "+W(c(u)),1)],8,vc)):V("",!0)]),C[6]||(C[6]=k("div",null,[k("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[k("span",{class:"material-icons info-modal-discord"},"discord"),h(" Profectus & Friends ")])],-1)),C[7]||(C[7]=k("div",null,[k("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[k("span",{class:"material-icons info-modal-discord"},"discord"),h(" The Modding Tree ")])],-1)),C[8]||(C[8]=k("div",null,[k("a",{href:"https://www.flaticon.com/free-icons/dust",title:"dust icons"},"Dust icons created by cube29 - Flaticon")],-1)),C[9]||(C[9]=k("br",null,null,-1)),k("div",null,"Time Played: "+W(w.value),1),l(b)])):V("",!0)]),_:1},8,["modelValue"]))}}),bc=de(gc,[["__scopeId","data-v-1b774aed"]]),hc={class:"header"},yc={class:"option-tabs"},kc={key:0},Cc={key:1},wc=X({__name:"Options",setup(n,{expose:e}){const t=U(!1),r=U("behaviour");function a(ue){return ue==r.value}function s(ue){r.value=ue}e({isTab:a,setTab:s,save:_e,open(){t.value=!0}});const u=Object.keys(rn).map(ue=>({label:Ur(ue),value:ue})),o=()=>di.map(ue=>B(ue)),{showTPS:f,theme:m,unthrottled:p,alignUnits:g,showHealthWarning:w,showPlanetOrbitAnimation:b,forceShowAllPlanets:x}=hr(z),{autosave:C,offlineProd:N}=hr(R),y=v({get(){return R.devSpeed===0},set(ue){R.devSpeed=ue?0:null}}),D=l("span",{class:"option-title"},[h("Unthrottled"),l("desc",null,[h("Allow the game to run as fast as possible. Not battery friendly.")])]),F=l("span",{class:"option-title"},[h("Offline production"),l(De,{display:"Save-specific",direction:ee.Right},{default:()=>[h("*")]}),l("desc",null,[h("Simulate production that occurs while the game is closed.")])]),ne=l("span",{class:"option-title"},[h("Show videogame addiction warning"),l("desc",null,[h("Show a helpful warning after playing for a long time about video game addiction and encouraging you to take a break.")])]),ae=l("span",{class:"option-title"},[h("Autosave"),l(De,{display:"Save-specific",direction:ee.Right},{default:()=>[h("*")]}),l("desc",null,[h("Automatically save the game every second or when the game is closed.")])]),te=l("span",{class:"option-title"},[h("Pause game"),l(De,{display:"Save-specific",direction:ee.Right},{default:()=>[h("*")]}),l("desc",null,[h("Stop everything from moving.")])]),ge=l("span",{class:"option-title"},[h("Theme"),l("desc",null,[h("How the game looks.")])]),ye=l("span",{class:"option-title"},[h("Show TPS"),l("desc",null,[h("Show TPS meter at the bottom-left corner of the page.")])]),fe=l("span",{class:"option-title"},[h("Align modifier units"),l("desc",null,[h("Align numbers to the beginning of the unit in modifier view.")])]),oe=l("span",{class:"option-title"},[h("Planet Orbit Animation"),l("desc",null,[h("Enable/disable the planet orbit animation")])]),Re=l("span",{class:"option-title"},[h("Force Show All Planets"),l("desc",null,[h("Show all planets in orbit, regardless of unlock status.")])]);return(ue,H)=>(S(),ve(Rt,{modelValue:t.value,"onUpdate:modelValue":H[13]||(H[13]=G=>t.value=G)},{header:j(()=>[k("div",hc,[H[14]||(H[14]=k("h2",null,"Settings",-1)),k("div",yc,[k("button",{class:he({selected:a("behaviour")}),onClick:H[0]||(H[0]=G=>s("behaviour"))},"Behaviour",2),k("button",{class:he({selected:a("appearance")}),onClick:H[1]||(H[1]=G=>s("appearance"))},"Appearance",2)])])]),body:j(()=>[a("behaviour")?(S(),A("div",kc,[l(at,{title:c(D),modelValue:c(p),"onUpdate:modelValue":H[2]||(H[2]=G=>ze(p)?p.value=G:null)},null,8,["title","modelValue"]),c(le).enablePausing?(S(),ve(at,{key:0,title:c(te),modelValue:y.value,"onUpdate:modelValue":H[3]||(H[3]=G=>y.value=G)},null,8,["title","modelValue"])):V("",!0),l(at,{title:c(F),modelValue:c(N),"onUpdate:modelValue":H[4]||(H[4]=G=>ze(N)?N.value=G:null)},null,8,["title","modelValue"]),c(le).disableHealthWarning?V("",!0):(S(),ve(at,{key:1,title:c(ne),modelValue:c(w),"onUpdate:modelValue":H[5]||(H[5]=G=>ze(w)?w.value=G:null)},null,8,["title","modelValue"])),l(at,{title:c(ae),modelValue:c(C),"onUpdate:modelValue":H[6]||(H[6]=G=>ze(C)?C.value=G:null)},null,8,["title","modelValue"]),c(C)?V("",!0):(S(),ve(lr,{key:2,class:"button save-button",onClick:H[7]||(H[7]=G=>c(_e)())},{default:j(()=>H[15]||(H[15]=[h("Manually save")])),_:1}))])):V("",!0),a("appearance")?(S(),A("div",Cc,[l(mr,{title:c(ge),options:c(u),modelValue:c(m),"onUpdate:modelValue":H[8]||(H[8]=G=>ze(m)?m.value=G:null)},null,8,["title","options","modelValue"]),l(o),l(at,{title:c(ye),modelValue:c(f),"onUpdate:modelValue":H[9]||(H[9]=G=>ze(f)?f.value=G:null)},null,8,["title","modelValue"]),l(at,{title:c(fe),modelValue:c(g),"onUpdate:modelValue":H[10]||(H[10]=G=>ze(g)?g.value=G:null)},null,8,["title","modelValue"]),l(at,{title:c(oe),modelValue:c(b),"onUpdate:modelValue":H[11]||(H[11]=G=>ze(b)?b.value=G:null)},null,8,["title","modelValue"]),l(at,{title:c(Re),modelValue:c(x),"onUpdate:modelValue":H[12]||(H[12]=G=>ze(x)?x.value=G:null)},null,8,["title","modelValue"])])):V("",!0)]),_:1},8,["modelValue"]))}}),Mc=["src","alt"],xc={key:1,class:"title"},Nc={class:"discord"},Sc={class:"discord-links"},Tc={key:0},Dc=["href"],Ac={href:"https://forums.moddingtree.com/",target:"_blank"},Ec={href:"https://forums.moddingtree.com/",target:"_blank"},Ic={class:"discord"},Pc={class:"discord-links"},$c={key:0},Lc=["href"],Bc=X({__name:"Nav",setup(n){const e=U(null),t=U(null),r=U(null),a=U(null),{useHeader:s,banner:u,title:o,discordName:f,discordLink:m,versionNumber:p}=le;function g(){window.open(m,"mywindow")}const w=v(()=>{var b;return((b=yt.value)==null?void 0:b.loggedIn)===!0&&!an.value.includes(z.active)});return(b,x)=>(S(),A(E,null,[c(s)?(S(),A("div",ht({key:0,class:"nav"},b.$attrs),[c(u)?(S(),A("img",{key:0,src:c(u),class:"banner",alt:c(o)},null,8,Mc)):(S(),A("div",xc,W(c(o)),1)),k("div",{onClick:x[0]||(x[0]=C=>{var N;return(N=a.value)==null?void 0:N.open()}),class:"version-container"},[l(De,{display:"Changelog",direction:c(ee).Down,class:"version"},{default:j(()=>[k("span",null,"v"+W(c(p)),1)]),_:1},8,["direction"])]),x[14]||(x[14]=k("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),k("div",Nc,[k("span",{onClick:g,class:"material-icons"},"discord"),k("ul",Sc,[c(m)?(S(),A("li",Tc,[k("a",{href:c(m),target:"_blank"},W(c(f)),9,Dc)])):V("",!0),x[9]||(x[9]=k("li",null,[k("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),x[10]||(x[10]=k("li",null,[k("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])]),k("div",null,[k("a",Ac,[l(De,{display:"Forums",direction:c(ee).Down,yoffset:"5px"},{default:j(()=>x[11]||(x[11]=[k("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),k("div",{onClick:x[1]||(x[1]=C=>{var N;return(N=e.value)==null?void 0:N.open()})},[l(De,{display:"Info",direction:c(ee).Down,class:"info"},{default:j(()=>x[12]||(x[12]=[k("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),k("div",{onClick:x[2]||(x[2]=C=>{var N;return(N=t.value)==null?void 0:N.open()})},[l(De,{display:"Saves",direction:c(ee).Down,xoffset:"-20px"},{default:j(()=>[k("span",{class:he(["material-icons",{needsSync:w.value}])},"library_books",2)]),_:1},8,["direction"])]),k("div",{onClick:x[3]||(x[3]=C=>{var N;return(N=r.value)==null?void 0:N.open()})},[l(De,{display:"Settings",direction:c(ee).Down,xoffset:"-66px"},{default:j(()=>x[13]||(x[13]=[k("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])])],16)):(S(),A("div",ht({key:1,class:"overlay-nav"},b.$attrs),[k("div",{onClick:x[4]||(x[4]=C=>{var N;return(N=a.value)==null?void 0:N.open()}),class:"version-container"},[l(De,{display:"Changelog",direction:c(ee).Right,xoffset:"25%",class:"version"},{default:j(()=>[k("span",null,"v"+W(c(p)),1)]),_:1},8,["direction"])]),k("div",{onClick:x[5]||(x[5]=C=>{var N;return(N=t.value)==null?void 0:N.open()})},[l(De,{display:"Saves",direction:c(ee).Right},{default:j(()=>[k("span",{class:he(["material-icons",{needsSync:w.value}])},"library_books",2)]),_:1},8,["direction"])]),k("div",{onClick:x[6]||(x[6]=C=>{var N;return(N=r.value)==null?void 0:N.open()})},[l(De,{display:"Settings",direction:c(ee).Right},{default:j(()=>x[15]||(x[15]=[k("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])]),k("div",{onClick:x[7]||(x[7]=C=>{var N;return(N=e.value)==null?void 0:N.open()})},[l(De,{display:"Info",direction:c(ee).Right},{default:j(()=>x[16]||(x[16]=[k("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),k("div",null,[k("a",Ec,[l(De,{display:"Forums",direction:c(ee).Right,xoffset:"7px"},{default:j(()=>x[17]||(x[17]=[k("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),k("div",Ic,[k("span",{onClick:g,class:"material-icons"},"discord"),k("ul",Pc,[c(m)?(S(),A("li",$c,[k("a",{href:c(m),target:"_blank"},W(c(f)),9,Lc)])):V("",!0),x[18]||(x[18]=k("li",null,[k("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),x[19]||(x[19]=k("li",null,[k("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])])],16)),l(bc,{ref_key:"info",ref:e,onOpenChangelog:x[8]||(x[8]=C=>{var N;return(N=a.value)==null?void 0:N.open()})},null,512),l(gr,{ref_key:"savesManager",ref:t},null,512),l(wc,{ref_key:"options",ref:r},null,512),l(oc,{ref_key:"changelog",ref:a},null,512)],64))}}),vi=de(Bc,[["__scopeId","data-v-8b57f91e"]]),qc={class:"inner-tab"},Rc=X({__name:"Game",setup(n){const e=Lt(R,"tabs"),t=v(()=>Object.keys(Je)),r=le.useHeader;function a(s){const{display:u,name:o,color:f,minimizable:m,minimizedDisplay:p,minimized:g,nodes:w,forceHideGoBack:b}=s;return{display:u,name:o,color:f,minimizable:m,minimizedDisplay:p,minimized:g,nodes:w,forceHideGoBack:b}}return(s,u)=>(S(),A("div",{class:he(["tabs-container",{useHeader:c(r)}])},[(S(!0),A(E,null,At(e.value,(o,f)=>{var m,p;return S(),A("div",{key:f,class:he(["tab",c((m=c(Je)[o])==null?void 0:m.classes)]),style:Ae(c((p=c(Je)[o])==null?void 0:p.style))},[f===0&&!c(r)?(S(),ve(vi,{key:0})):V("",!0),k("div",qc,[t.value.includes(o)?(S(),ve(sc,ht({key:0,ref_for:!0},a(c(Je)[o]),{index:f,onSetMinimized:g=>c(Je)[o].minimized.value=g}),null,16,["index","onSetMinimized"])):(S(),ve(Di(o),{key:1,index:f},null,8,["index"]))])],6)}),128))],2))}}),Oc=de(Rc,[["__scopeId","data-v-05015751"]]),Fc={key:0,class:"tpsDisplay"},_c=X({__name:"TPS",setup(n){const e=v(()=>i.div(me.lastTenTicks.length,me.lastTenTicks.reduce((t,r)=>t+r,0)));return(t,r)=>e.value.isNan()?V("",!0):(S(),A("div",Fc,"TPS: "+W(c(pn)(e.value)),1))}}),Vc=de(_c,[["__scopeId","data-v-1d25743e"]]),Gc=X({__name:"App",setup(n){const e=le.useHeader,t=v(()=>rn[z.theme].variables),r=Lt(z,"showTPS"),a=Lt(me,"errors"),s=()=>nu.map(u=>B(u));return(u,o)=>a.value.length>0?(S(),A("div",{key:0,class:"error-container",style:Ae(t.value)},[l(Gr,{errors:a.value},null,8,["errors"])],4)):(S(),A(E,{key:1},[k("div",{id:"modal-root",style:Ae(t.value)},null,4),k("div",{class:he(["app",{useHeader:c(e)}]),style:Ae(t.value)},[c(e)?(S(),ve(vi,{key:0})):V("",!0),l(Oc),c(r.value)?(S(),ve(Vc,{key:1})):V("",!0),l(Iu),l(Xu),l(rc),l(Vu),l(s)],6)],64))}}),Uc=de(Gc,[["__scopeId","data-v-6d7be5c9"]]),Hc="modulepreload",jc=function(n,e){return new URL(n,e).href},Rr={},zc=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){const u=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),f=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(t.map(m=>{if(m=jc(m,r),m in Rr)return;Rr[m]=!0;const p=m.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(!!r)for(let x=u.length-1;x>=0;x--){const C=u[x];if(C.href===m&&(!p||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${g}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":Hc,p||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),p)return new Promise((x,C)=>{b.addEventListener("load",x),b.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(u){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=u,window.dispatchEvent(o),!o.defaultPrevented)throw u}return a.then(u=>{for(const o of u||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Wc(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:a,onRegisteredSW:s,onRegisterError:u}=n;let o,f;const m=async(g=!0)=>{await f};async function p(){if("serviceWorker"in navigator){if(o=await zc(async()=>{const{Workbox:g}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:g}},[],import.meta.url).then(({Workbox:g})=>new g("./sw.js",{scope:"./",type:"classic"})).catch(g=>{u==null||u(g)}),!o)return;o.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),o.addEventListener("installed",g=>{g.isUpdate||r==null||r()}),o.register({immediate:e}).then(g=>{s?s("./sw.js",g):a==null||a(g)}).catch(g=>{u==null||u(g)})}}return f=p(),m}function Zc(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:a,onRegisteredSW:s,onRegisterError:u}=n,o=U(!1),f=U(!1);return{updateServiceWorker:Wc({immediate:e,onNeedRefresh(){o.value=!0,t==null||t()},onOfflineReady(){f.value=!0,r==null||r()},onRegistered:a,onRegisteredSW:s,onRegisterError:u}),offlineReady:f,needRefresh:o}}let zt=null;function qn(){const n=Date.now();let e=(n-R.time)/1e3;R.time=n;const t=e;if(me.lastTenTicks.push(t),me.lastTenTicks.length>10&&(me.lastTenTicks=me.lastTenTicks.slice(1)),!(Jt!=null&&Jt.value&&!R.keepGoing)&&!me.hasNaN&&(e=Math.max(e,0),R.devSpeed!==0)){if(Hn.value=!1,R.offlineTime!=null){if(i.gt(R.offlineTime,le.offlineLimit*3600)&&(R.offlineTime=le.offlineLimit*3600),i.gt(R.offlineTime,0)&&R.devSpeed!==0){const r=Math.max(R.offlineTime/10,e);R.offlineTime=R.offlineTime-r,e+=r}else R.devSpeed===0&&(R.offlineTime+=e);(!R.offlineProd||i.lt(R.offlineTime,0))&&(R.offlineTime=null)}e=Math.min(e,le.maxTickLength),R.devSpeed!=null&&(e*=R.devSpeed),Number.isFinite(e)||(e=1e308),!i.eq(e,0)&&(R.timePlayed+=e,Number.isFinite(R.timePlayed)||(R.timePlayed=1e308),$e.emit("update",e,t),z.unthrottled?(requestAnimationFrame(qn),zt!=null&&(clearInterval(zt),zt=null)):zt==null&&(zt=setInterval(qn,50)))}}async function Jc(){z.unthrottled?requestAnimationFrame(qn):zt=setInterval(qn,50)}ke(Jt,n=>{n&&$e.emit("gameWon")});setInterval(()=>{me.mouseActivity=[...me.mouseActivity.slice(-7),!1]},1e3*60*60);const br=console.error;console.error=function(...n){br(...n)};window.onerror=function(n,e,t,r,a){return me.errors.push(a instanceof Error?a:new Error(JSON.stringify(a))),br(a),!0};window.onunhandledrejection=function(n){me.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),br(n.reason)};document.title=le.title;window.projInfo=le;le.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Jo();const n=window.vue=Ai(Uc);n.config.errorHandler=function(e,t,r){console.error(e,r,t)},$e.emit("setupVue",n),n.mount("#app"),Yt(()=>{const e=Vr();Zc({immediate:!0,onOfflineReady(){e.info("App ready to work offline")},onRegisterError:console.warn,onRegistered:console.info})}),Jc()});
